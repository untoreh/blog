<!DOCTYPE html><HTML lang="en"><head><link href="https://unto.re/vi/posts/" rel="canonical"/><meta charset="UTF-8"/><script type="application/ld+json">{"copyrightHolder":"untoreh","@id":"https://unto.re","url":"https://unto.re","copyrightYear":2021,"@context":"https://schema.org/","@type":"WebSite"}</script><script type="application/ld+json">{"audience":"cool people","url":"https://unto.re/posts/paroodise/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"A small utility for live modification of file systems","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-08","dateCreated":"April 24, 2021","@id":"https://unto.re/posts/paroodise/index.html","dateModified":"2021-04-08","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","hosting","about"],"creativeWorkStatus":"Published","publisher":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"datePublished":"","inLanguage":"English","name":"","mainEntityOfPage":{"@id":"https://unto.re/posts/paroodise/index.html","@type":"Article"}}</script><script type="application/ld+json">{"itemListElement":[{"position":1,"item":"https://unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://unto.re/posts/paroodise","name":"Paroodise","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="/css/franklin.css" rel="stylesheet"/><link href="/css/main.css" rel="stylesheet"/><link href="/css/menu.css" rel="stylesheet"/><link href="/css/pages.css" rel="stylesheet"/><link href="/css/lunr.css" rel="stylesheet"/><link href="/css/footer.css" rel="stylesheet"/><link href="/css/responsive.css" rel="stylesheet"/><link href="/css/animations.css" rel="stylesheet"/><link href="/css/docco.css" rel="stylesheet"/><link href="/css/flags-sprite.css" rel="stylesheet"/><link href="/assets/favicon.png" rel="icon"/><title> Sự nhại lại</title><script src="/libs/lunr/lunr.min.js"></script><script src="/libs/lunr/lunr_index.js"></script><script src="/libs/lunr/lunrclient.min.js"></script><script src="/libs/load.js"></script><script type="application/ld+json">{"url":"/vi/posts/paroodise/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/vi/posts/paroodise/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://unto.re/posts/"},"datePublished":"","inLanguage":"vi","name":"","mainEntityOfPage":{"@id":"/vi/posts/paroodise/","@type":"Article"}}</script></head><body class=""><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><a class="site-title" href="/vi/"></a><div class="author__wrap"><script type="application/ld+json">{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class="author__avatar" onclick="toggleTheme()"><img alt=" ánh sáng không có thực" class="flip-front" src="/assets/appa.png"/></li><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li></ul></div><nav id="site-nav"><div class="horiz"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/vi/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> bài viết</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/vi/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> Về</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/paroodise" id="lang-ar"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link" href="/bn/posts/paroodise" id="lang-bn"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link" href="/nl/posts/paroodise" id="lang-nl"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link" href="/posts/paroodise" id="lang-en"><span class="flag flag-gb"></span>English</a><a class="lang-link" href="/tl/posts/paroodise" id="lang-tl"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link" href="/fr/posts/paroodise" id="lang-fr"><span class="flag flag-fr"></span>French</a><a class="lang-link" href="/de/posts/paroodise" id="lang-de"><span class="flag flag-de"></span>German</a><a class="lang-link" href="/el/posts/paroodise" id="lang-el"><span class="flag flag-gr"></span>Greek</a><a class="lang-link" href="/hi/posts/paroodise" id="lang-hi"><span class="flag flag-in"></span>Hindi</a><a class="lang-link" href="/it/posts/paroodise" id="lang-it"><span class="flag flag-it"></span>Italian</a><a class="lang-link" href="/ja/posts/paroodise" id="lang-ja"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link" href="/jw/posts/paroodise" id="lang-jw"><span class="flag flag-id"></span>Javanese</a><a class="lang-link" href="/ko/posts/paroodise" id="lang-ko"><span class="flag flag-kr"></span>Korean</a><a class="lang-link" href="/ms/posts/paroodise" id="lang-ms"><span class="flag flag-ms"></span>Malay</a><a class="lang-link" href="/zh/posts/paroodise" id="lang-zh"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link" href="/pl/posts/paroodise" id="lang-pl"><span class="flag flag-pl"></span>Polish</a><a class="lang-link" href="/pt/posts/paroodise" id="lang-pt"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link" href="/pa/posts/paroodise" id="lang-pa"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link" href="/ro/posts/paroodise" id="lang-ro"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link" href="/ru/posts/paroodise" id="lang-ru"><span class="flag flag-ru"></span>Russian</a><a class="lang-link" href="/es/posts/paroodise" id="lang-es"><span class="flag flag-es"></span>Spanish</a><a class="lang-link" href="/sv/posts/paroodise" id="lang-sv"><span class="flag flag-se"></span>Swedish</a><a class="lang-link" href="/th/posts/paroodise" id="lang-th"><span class="flag flag-th"></span>Thai</a><a class="lang-link" href="/tr/posts/paroodise" id="lang-tr"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link" href="/uk/posts/paroodise" id="lang-uk"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link" href="/ur/posts/paroodise" id="lang-ur"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link" href="/vi/posts/paroodise" id="lang-vi"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link" href="/zu/posts/paroodise" id="lang-zu"><span class="flag flag-za"></span>Zulu</a></ul></div></button></li></ul></div><button class="ham"><i class="fas fa-bars ham-icon"></i></button><div class="vert"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/vi/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> bài viết</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/vi/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> Về</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/paroodise" id="lang-ar"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link" href="/bn/posts/paroodise" id="lang-bn"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link" href="/nl/posts/paroodise" id="lang-nl"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link" href="/posts/paroodise" id="lang-en"><span class="flag flag-gb"></span>English</a><a class="lang-link" href="/tl/posts/paroodise" id="lang-tl"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link" href="/fr/posts/paroodise" id="lang-fr"><span class="flag flag-fr"></span>French</a><a class="lang-link" href="/de/posts/paroodise" id="lang-de"><span class="flag flag-de"></span>German</a><a class="lang-link" href="/el/posts/paroodise" id="lang-el"><span class="flag flag-gr"></span>Greek</a><a class="lang-link" href="/hi/posts/paroodise" id="lang-hi"><span class="flag flag-in"></span>Hindi</a><a class="lang-link" href="/it/posts/paroodise" id="lang-it"><span class="flag flag-it"></span>Italian</a><a class="lang-link" href="/ja/posts/paroodise" id="lang-ja"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link" href="/jw/posts/paroodise" id="lang-jw"><span class="flag flag-id"></span>Javanese</a><a class="lang-link" href="/ko/posts/paroodise" id="lang-ko"><span class="flag flag-kr"></span>Korean</a><a class="lang-link" href="/ms/posts/paroodise" id="lang-ms"><span class="flag flag-ms"></span>Malay</a><a class="lang-link" href="/zh/posts/paroodise" id="lang-zh"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link" href="/pl/posts/paroodise" id="lang-pl"><span class="flag flag-pl"></span>Polish</a><a class="lang-link" href="/pt/posts/paroodise" id="lang-pt"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link" href="/pa/posts/paroodise" id="lang-pa"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link" href="/ro/posts/paroodise" id="lang-ro"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link" href="/ru/posts/paroodise" id="lang-ru"><span class="flag flag-ru"></span>Russian</a><a class="lang-link" href="/es/posts/paroodise" id="lang-es"><span class="flag flag-es"></span>Spanish</a><a class="lang-link" href="/sv/posts/paroodise" id="lang-sv"><span class="flag flag-se"></span>Swedish</a><a class="lang-link" href="/th/posts/paroodise" id="lang-th"><span class="flag flag-th"></span>Thai</a><a class="lang-link" href="/tr/posts/paroodise" id="lang-tr"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link" href="/uk/posts/paroodise" id="lang-uk"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link" href="/ur/posts/paroodise" id="lang-ur"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link" href="/vi/posts/paroodise" id="lang-vi"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link" href="/zu/posts/paroodise" id="lang-zu"><span class="flag flag-za"></span>Zulu</a></ul></div></button></li></ul></div></nav></div></div></div><div><h1 id="title"><a href="/vi/posts/paroodise"> Sự nhại lại</a></h1><blockquote id="page-description" style="font-style: italic;">  Một tiện ích nhỏ để sửa đổi trực tiếp hệ thống tệp</blockquote></div><div class="franklin-content"><p> Khi tôi lần đầu tiên giải quyết việc sử dụng phân phối linux cho các máy chủ từ xa của mình, tôi cần một cách để nhanh chóng cài đặt các hệ thống tệp gốc khác nhau trên một máy chủ đích, vì vậy tôi đã viết [paroodise].</p><p> Để có thể flash một thiết bị khối khởi động, bạn cần<em> tháo ra</em> . Bạn chỉ có thể ngắt kết nối nếu bạn ngừng sử dụng nó. Để ngừng sử dụng nó, bạn cần khởi động lại các dịch vụ của mình tại chỗ, từ một hệ thống tệp gốc khác. Điều này giống với những gì<a href="https://en.wikipedia.org/wiki/Initial_ramdisk"> initramfs</a>khi khởi động hệ điều hành dựa trên linux, hạt nhân thực thi hình ảnh khởi động để thiết lập hệ thống tệp từ vị trí true<a href="https://en.wikipedia.org/wiki/Init"> trong đó</a>  dịch vụ được đưa ra.</p><p> Để đạt được điều này trên một<em> đã chạy</em>  hệ thống, chúng tôi phải cẩn thận cách chúng tôi khởi động lại các quy trình của mình. Chúng tôi không thể giết ssh trừ khi chúng tôi chắc chắn rằng tập lệnh của chúng tôi sẽ chạy cho đến khi thành công.</p><p> Toàn bộ quá trình dễ dàng hơn nhiều trên các bản phân phối không dựa trên systemd, vì systemd gắn sâu vào nhân linux, việc xử lý các quy trình của nó một cách thiếu thận trọng có thể gây ra hoảng loạn cho nhân ... thực tế là trên các bản phân phối gần đây hơn, đó là điều thường xảy ra :)</p><p> Khi tôi viết tiện ích nhỏ này, có vẻ như tôi không biết các cách ổn định để tạo ra các quy trình tồn tại lâu hơn các phiên ssh ban đầu, Nó nên được viết lại bằng các phương pháp nhất quán hơn.</p><p> Toàn bộ quá trình bao gồm</p><ul><li><p> sao chép các tệp tối thiểu cần thiết để khởi động lại hệ thống tệp trên bộ nhớ</p></li><li><p> di chuyển (hoặc tạo lại) các điểm gắn kết hạt nhân (<code>/dev</code>, <code>/proc</code>, <code>/sys</code>)</p></li><li><p> giết chết các dịch vụ trước đó được tạo ra bởi cây quy trình systemd đứng</p></li><li><p> thực thi lại systemd vào hệ thống tệp xoay quanh mới,<a href="https://www.freedesktop.org/software/systemd/man/systemctl.html#Manager%20State%20Commands"><code>systemctl daemon-reexec</code></a></p></li></ul><p> Nếu mọi thứ hoàn thành thành công, tại thời điểm này, có thể tạo ra một dịch vụ ssh mới và đăng nhập vào một phiên mà các điểm gắn kết ban đầu có sẵn để sửa đổi.</p><p></p><div id="post-tags-list">  Thẻ bài:<span class="post-tag"><a href="/vi/posts/tag/tools" style="">  công cụ</a>, </span><span class="post-tag"><a href="/vi/posts/tag/hosting" style="">  lưu trữ</a>, </span><span class="post-tag"><a href="/vi/posts/tag/about" style="">  Về</a></span></div><div class="page-foot"><div class="copyright">  Ngày 08 tháng 4 năm 2021</div><script async="" crossorigin="anonymous" issue-term="pathname" label="Comment" repo="untoreh/untoreh.github.io" src="https://utteranc.es/client.js"></script></div></div><div class="page__footer"><footer><div class="page__footer-copyright">  © undoreh - Cung cấp bởi<a href="https://github.com/tlienart/Franklin.jl"> Franklin</a></div><div class="page__footer-links"> - <ul><li><a href="/vi/sitemap.xml"> Sơ đồ trang web</a> | </li><li><a href="/vi/tag"> Thẻ</a> | </li><li><a href="/vi/feed.xml"> RSS</a></li></ul></div><ul class="author__wrap"><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li></ul></footer></div><script crossorigin="anonymous" defer="" id="fa" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="/libs/colors.js"></script><script src="/libs/menu.js"></script><script defer="" src="/libs/lunr/lunr.min.js"></script></body></HTML>