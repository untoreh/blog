<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><script type="application/ld+json">{"copyrightHolder":"untoreh","@id":"https://unto.re","url":"https://unto.re","copyrightYear":2021,"@context":"https://schema.org/","@type":"WebSite"}</script><script type="application/ld+json">{"audience":"cool people","url":"https://unto.re/posts/paroodise/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","author":"untoreh","description":"A small utility for live modification of file systems","mentions":[],"accessModeSufficient":{"itemListElement":["textual","visual"],"description":"text and images","@type":"itemList"},"lastReviewed":"April 08, 2021","@type":"https://schema.org/WebPage","dateCreated":"April 24, 2021","@id":"https://unto.re/posts/paroodise/index.html","dateModified":"April 08, 2021","abstract":"A small utility for live modification of file systems","headline":"Paroodise","creativeWorkStatus":"Published","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","hosting","about"],"datePublished":"April 24, 2021","inLanguage":"English","name":"Paroodise","identifier":"https://unto.re/posts/paroodise/index.html"}</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="/css/franklin.css" rel="stylesheet"/><link href="/css/main.css" rel="stylesheet"/><link href="/css/menu.css" rel="stylesheet"/><link href="/css/pages.css" rel="stylesheet"/><link href="/css/lunr.css" rel="stylesheet"/><link href="/css/footer.css" rel="stylesheet"/><link href="/css/responsive.css" rel="stylesheet"/><link href="/css/animations.css" rel="stylesheet"/><link href="/css/docco.css" rel="stylesheet"/><link href="/css/flag-icon.min.css" rel="stylesheet"/><link href="/assets/favicon.png" rel="icon"/><title> Parodie</title><script src="/libs/lunr/lunr.min.js"></script><script src="/libs/lunr/lunr_index.js"></script><script src="/libs/lunr/lunrclient.min.js"></script><script src="/libs/load.js"></script><script type="application/ld+json">{"@id":"https://unto.re/fr/posts/paroodise/index.html","url":"https://unto.re/fr/posts/paroodise/index.html","abstract":null,"headline":null,"keywords":null,"description":null,"mentions":null,"translator":{"url":"https://translate.google.com/","name":"Google","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"/home/fra/dev/blog/https://unto.re/"},"inLanguage":"fr","name":null,"@type":"https://schema.org/WebPage"}</script></head><body class=""><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><a class="site-title" href="/fr/"></a><div class="author__wrap"><script type="application/ld+json">{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"description":"<ul>\n<li><p><strong>Name</strong>: Francesco Giannelli</p>\n</li>\n<li><p><strong>Website</strong>: &#91;«https://unto.re»&#93;, the place where I put stuff I should remember...or forget</p>\n</li>\n<li><p><strong>Location</strong>: south italy {{bio_link}}</p>\n</li>\n<li><p><strong>Year</strong>: &#39;91</p>\n</li>\n</ul>\n","image":"/assets/appa.png","name":"untoreh","@type":"https://schema.org/Person","email":"contact@unto.re"}</script><ul><li class="author__avatar" onclick="toggleTheme()"><img alt=" untoreh-lumière" class="flip-front" src="/assets/appa.png"/></li><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=query","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":"https://unto.re/search?&q={query}"}}</script></li></ul></div><nav id="site-nav"><div class="horiz"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/fr/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> des postes</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/fr/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> À propos</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang
            <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/paroodise" id="lang-ar"><span class="flag-icon flag-icon-sa"></span> arabe</a><a class="lang-link" href="/fr/bn/posts/paroodise" id="lang-bn"><span class="flag-icon flag-icon-bd"></span> bengali</a><a class="lang-link" href="/fr/nl/posts/paroodise" id="lang-nl"><span class="flag-icon flag-icon-nl"></span> néerlandais</a><a class="lang-link" href="/fr/en/posts/paroodise" id="lang-en"><span class="flag-icon flag-icon-gb"></span> Anglais</a><a class="lang-link" href="/fr/tl/posts/paroodise" id="lang-tl"><span class="flag-icon flag-icon-ph"></span> Philippin</a><a class="lang-link" href="/fr/fr/posts/paroodise" id="lang-fr"><span class="flag-icon flag-icon-fr"></span> français</a><a class="lang-link" href="/fr/de/posts/paroodise" id="lang-de"><span class="flag-icon flag-icon-de"></span> Allemand</a><a class="lang-link" href="/fr/el/posts/paroodise" id="lang-el"><span class="flag-icon flag-icon-gr"></span> grec</a><a class="lang-link" href="/fr/hi/posts/paroodise" id="lang-hi"><span class="flag-icon flag-icon-in"></span> hindi</a><a class="lang-link" href="/fr/it/posts/paroodise" id="lang-it"><span class="flag-icon flag-icon-it"></span> italien</a><a class="lang-link" href="/fr/ja/posts/paroodise" id="lang-ja"><span class="flag-icon flag-icon-jp"></span> Japonais</a><a class="lang-link" href="/fr/jw/posts/paroodise" id="lang-jw"><span class="flag-icon flag-icon-id"></span> Javanais</a><a class="lang-link" href="/fr/ko/posts/paroodise" id="lang-ko"><span class="flag-icon flag-icon-kr"></span> coréen</a><a class="lang-link" href="/fr/ms/posts/paroodise" id="lang-ms"><span class="flag-icon flag-icon-ms"></span> malais</a><a class="lang-link" href="/fr/zh/posts/paroodise" id="lang-zh"><span class="flag-icon flag-icon-cn"></span> Chinois Mandarin</a><a class="lang-link" href="/fr/pl/posts/paroodise" id="lang-pl"><span class="flag-icon flag-icon-pl"></span> polonais</a><a class="lang-link" href="/fr/pt/posts/paroodise" id="lang-pt"><span class="flag-icon flag-icon-pt"></span> Portugais</a><a class="lang-link" href="/fr/pa/posts/paroodise" id="lang-pa"><span class="flag-icon flag-icon-in"></span> Pendjabi</a><a class="lang-link" href="/fr/ro/posts/paroodise" id="lang-ro"><span class="flag-icon flag-icon-ro"></span> roumain</a><a class="lang-link" href="/fr/ru/posts/paroodise" id="lang-ru"><span class="flag-icon flag-icon-ru"></span> russe</a><a class="lang-link" href="/fr/es/posts/paroodise" id="lang-es"><span class="flag-icon flag-icon-es"></span> Espanol</a><a class="lang-link" href="/fr/sv/posts/paroodise" id="lang-sv"><span class="flag-icon flag-icon-se"></span> suédois</a><a class="lang-link" href="/fr/th/posts/paroodise" id="lang-th"><span class="flag-icon flag-icon-th"></span> thaïlandais</a><a class="lang-link" href="/fr/tr/posts/paroodise" id="lang-tr"><span class="flag-icon flag-icon-tr"></span> turc</a><a class="lang-link" href="/fr/uk/posts/paroodise" id="lang-uk"><span class="flag-icon flag-icon-ua"></span> ukrainien</a><a class="lang-link" href="/fr/ur/posts/paroodise" id="lang-ur"><span class="flag-icon flag-icon-pk"></span> ourdou</a><a class="lang-link" href="/fr/vi/posts/paroodise" id="lang-vi"><span class="flag-icon flag-icon-vn"></span> vietnamien</a><a class="lang-link" href="/fr/zu/posts/paroodise" id="lang-zu"><span class="flag-icon flag-icon-za"></span> zoulou</a></ul></div></button></li></ul></div><button class="ham"><i class="fas fa-bars ham-icon"></i></button><div class="vert"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/fr/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> des postes</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/fr/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> À propos</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang
            <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/paroodise" id="lang-ar"><span class="flag-icon flag-icon-sa"></span> arabe</a><a class="lang-link" href="/fr/bn/posts/paroodise" id="lang-bn"><span class="flag-icon flag-icon-bd"></span> bengali</a><a class="lang-link" href="/fr/nl/posts/paroodise" id="lang-nl"><span class="flag-icon flag-icon-nl"></span> néerlandais</a><a class="lang-link" href="/fr/en/posts/paroodise" id="lang-en"><span class="flag-icon flag-icon-gb"></span> Anglais</a><a class="lang-link" href="/fr/tl/posts/paroodise" id="lang-tl"><span class="flag-icon flag-icon-ph"></span> Philippin</a><a class="lang-link" href="/fr/fr/posts/paroodise" id="lang-fr"><span class="flag-icon flag-icon-fr"></span> français</a><a class="lang-link" href="/fr/de/posts/paroodise" id="lang-de"><span class="flag-icon flag-icon-de"></span> Allemand</a><a class="lang-link" href="/fr/el/posts/paroodise" id="lang-el"><span class="flag-icon flag-icon-gr"></span> grec</a><a class="lang-link" href="/fr/hi/posts/paroodise" id="lang-hi"><span class="flag-icon flag-icon-in"></span> hindi</a><a class="lang-link" href="/fr/it/posts/paroodise" id="lang-it"><span class="flag-icon flag-icon-it"></span> italien</a><a class="lang-link" href="/fr/ja/posts/paroodise" id="lang-ja"><span class="flag-icon flag-icon-jp"></span> Japonais</a><a class="lang-link" href="/fr/jw/posts/paroodise" id="lang-jw"><span class="flag-icon flag-icon-id"></span> Javanais</a><a class="lang-link" href="/fr/ko/posts/paroodise" id="lang-ko"><span class="flag-icon flag-icon-kr"></span> coréen</a><a class="lang-link" href="/fr/ms/posts/paroodise" id="lang-ms"><span class="flag-icon flag-icon-ms"></span> malais</a><a class="lang-link" href="/fr/zh/posts/paroodise" id="lang-zh"><span class="flag-icon flag-icon-cn"></span> Chinois Mandarin</a><a class="lang-link" href="/fr/pl/posts/paroodise" id="lang-pl"><span class="flag-icon flag-icon-pl"></span> polonais</a><a class="lang-link" href="/fr/pt/posts/paroodise" id="lang-pt"><span class="flag-icon flag-icon-pt"></span> Portugais</a><a class="lang-link" href="/fr/pa/posts/paroodise" id="lang-pa"><span class="flag-icon flag-icon-in"></span> Pendjabi</a><a class="lang-link" href="/fr/ro/posts/paroodise" id="lang-ro"><span class="flag-icon flag-icon-ro"></span> roumain</a><a class="lang-link" href="/fr/ru/posts/paroodise" id="lang-ru"><span class="flag-icon flag-icon-ru"></span> russe</a><a class="lang-link" href="/fr/es/posts/paroodise" id="lang-es"><span class="flag-icon flag-icon-es"></span> Espanol</a><a class="lang-link" href="/fr/sv/posts/paroodise" id="lang-sv"><span class="flag-icon flag-icon-se"></span> suédois</a><a class="lang-link" href="/fr/th/posts/paroodise" id="lang-th"><span class="flag-icon flag-icon-th"></span> thaïlandais</a><a class="lang-link" href="/fr/tr/posts/paroodise" id="lang-tr"><span class="flag-icon flag-icon-tr"></span> turc</a><a class="lang-link" href="/fr/uk/posts/paroodise" id="lang-uk"><span class="flag-icon flag-icon-ua"></span> ukrainien</a><a class="lang-link" href="/fr/ur/posts/paroodise" id="lang-ur"><span class="flag-icon flag-icon-pk"></span> ourdou</a><a class="lang-link" href="/fr/vi/posts/paroodise" id="lang-vi"><span class="flag-icon flag-icon-vn"></span> vietnamien</a><a class="lang-link" href="/fr/zu/posts/paroodise" id="lang-zu"><span class="flag-icon flag-icon-za"></span> zoulou</a></ul></div></button></li></ul></div></nav></div></div></div><div><h1 id="title"><a href="/fr/posts/paroodise"> Parodie</a></h1><blockquote id="page-description" style="font-style: italic;"> 
                Un petit utilitaire pour la modification en direct des systèmes de fichiers
            </blockquote></div><div class="franklin-content"><p> Lorsque j'ai décidé pour la première fois de l'utilisation de la distribution Linux pour mes serveurs distants, j'avais besoin d'un moyen d'installer rapidement différents systèmes de fichiers racine sur un hôte cible, j'ai donc écrit [paroodise].</p><p> Pour pouvoir flasher un périphérique bloc démarré, vous devez<em> démonter</em> . Vous ne pouvez le démonter que si vous arrêtez de l'utiliser. Pour arrêter de l'utiliser, vous devez redémarrer vos services en place, à partir d'un autre système de fichiers racine. Cela s'apparente à ce que le<a href="https://en.wikipedia.org/wiki/Initial_ramdisk"> initramfs</a>fait lorsqu'il démarre un système d'exploitation basé sur Linux, le noyau exécute une image de démarrage qui configure le système de fichiers à partir duquel le vrai<a href="https://en.wikipedia.org/wiki/Init"> init</a>  le service est lancé.</p><p> Pour y parvenir sur un<em> déjà en train de courir</em>  système, nous devons faire attention à la façon dont nous redémarrons nos processus. Nous ne pouvons pas tuer ssh à moins que nous ne soyons sûrs que notre script fonctionnera jusqu'à ce qu'il réussisse.</p><p> L'ensemble du processus est beaucoup plus facile sur les distributions non basées sur systemd, car systemd s'ancre profondément dans le noyau Linux, la manipulation imprudente de ses processus peut provoquer des paniques du noyau... en fait sur les distributions plus récentes, c'est ce qui se passe généralement :)</p><p> Lorsque j'ai écrit ce mini utilitaire, il semble que je ne connaissais pas de moyens stables pour générer des processus qui ont survécu aux sessions ssh d'origine. Il devrait être réécrit avec des méthodes plus cohérentes.</p><p> L'ensemble du processus consiste à</p><ul><li><p> copier les fichiers minimaux requis pour redémarrer le système de fichiers en mémoire</p></li><li><p> déplacer (ou recréer) les points de montage du noyau (<code>/dev</code>, <code>/proc</code>, <code>/sys</code>)</p></li><li><p> tuer les services précédents générés par l'arborescence des processus systemd permanents</p></li><li><p> ré-exécuter systemd dans le nouveau système de fichiers pivoté,<a href="https://www.freedesktop.org/software/systemd/man/systemctl.html#Manager%20State%20Commands"><code>systemctl daemon-reexec</code></a></p></li></ul><p> Si tout se termine avec succès, il est possible à ce stade de générer un nouveau service ssh et de se connecter à une session où les points de montage d'origine sont disponibles pour des modifications.</p><p></p><div id="post-tags-list"> 
Mots-clés :
<span class="post-tag"><a href="/fr/posts/tag/tools" style="">  outils</a>, </span><span class="post-tag"><a href="/fr/posts/tag/hosting" style="">  hébergement</a>, </span><span class="post-tag"><a href="/fr/posts/tag/about" style="">  À propos</a></span></div><div class="page-foot"><div class="copyright"> 
        08 avril 2021
    </div><script async="" crossorigin="anonymous" issue-term="pathname" label="Comment" repo="untoreh/untoreh.github.io" src="https://utteranc.es/client.js"></script></div></div><div class="page__footer"><footer><div class="page__footer-copyright"> 
            © untoreh - Propulsé par<a href="https://github.com/tlienart/Franklin.jl"> Franklin</a></div><div class="page__footer-links">
            -
            <ul><li><a href="/fr/sitemap.xml"> Plan du site</a></li>
                |
                <li><a href="/fr/tag"> Mots clés</a></li>
                |
                <li><a href="/fr/feed.xml"> RSS</a></li></ul></div><ul class="author__wrap"><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=query","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":"https://unto.re/search?&q={query}"}}</script></li></ul></footer></div><script crossorigin="anonymous" defer="" id="fa" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="/libs/colors.js"></script><script src="/libs/menu.js"></script><script defer="" src="/libs/lunr/lunr.min.js"></script></body></HTML>