<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=zh><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><link href=https://www.unto.re/zh/posts/On-Containers/ rel=canonical><link title="untoreh 的网站"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/zh/posts/On-Containers/ rel=amphtml><meta content="untoreh's site"property=og:title><meta content=website property=og:type><meta content=https://www.unto.re property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="Articles, logs, infos, status and live updates are published here."property=og:description><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/On-Containers/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Using containers, what and why","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-19","dateCreated":"April 24, 2021","@id":"https://www.unto.re/posts/On-Containers/index.html","dateModified":"2021-04-19","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["opinions","about"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-04-19","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/On-Containers/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/On-Containers","name":"On Containers","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/libs/highlight/github.min.css rel=stylesheet><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> 在容器上</title><meta content="Using containers, what and why"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/zh/posts/On-Containers/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/zh/posts/On-Containers/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/On-Containers/"},"datePublished":"2021-10-25T17:43:43.010","inLanguage":"zh","name":"","mainEntityOfPage":{"@id":"/zh/posts/On-Containers/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/zh/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" untoreh-light"class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button class=search-button formaction=/search/index.html title=搜索网站 value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/zh/posts/><i class="fas fa-pen menu-icons"></i> 帖子</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/zh/media/><i class="fas fa-tv menu-icons"></i> 媒体</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/On-Containers><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/On-Containers><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/On-Containers><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/On-Containers><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/On-Containers><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/On-Containers><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/On-Containers><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/On-Containers><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/On-Containers><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/On-Containers><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/On-Containers><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/On-Containers><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/On-Containers><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/On-Containers><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/On-Containers><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/On-Containers><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/On-Containers><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/On-Containers><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/On-Containers><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/On-Containers><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/On-Containers><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/On-Containers><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/On-Containers><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/On-Containers><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/On-Containers><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/On-Containers><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/On-Containers><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/On-Containers><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button class=search-button formaction=/search/index.html title=搜索网站 value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/zh/posts/><i class="fas fa-pen menu-icons"></i> 帖子</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/zh/media/><i class="fas fa-tv menu-icons"></i> 媒体</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/On-Containers><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/On-Containers><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/On-Containers><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/On-Containers><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/On-Containers><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/On-Containers><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/On-Containers><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/On-Containers><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/On-Containers><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/On-Containers><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/On-Containers><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/On-Containers><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/On-Containers><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/On-Containers><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/On-Containers><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/On-Containers><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/On-Containers><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/On-Containers><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/On-Containers><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/On-Containers><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/On-Containers><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/On-Containers><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/On-Containers><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/On-Containers><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/On-Containers><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/On-Containers><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/On-Containers><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/On-Containers><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/zh/posts/On-Containers> 在容器上</a></h1><blockquote style="font-style: italic;"id=page-description>使用容器，什么以及为什么</blockquote></div><div class=franklin-content><h2 id=what_are_containers><a class=header-anchor href=#what_are_containers> 什么是容器</a></h2><p>[Containers] 是对受限环境的一个名称，由 linux 中的子系统集合实现，例如 [<code>cgroups</code> ] 和 [<code>namespaces</code> ]。虽然维基页面使用了这个词<em> 虚拟化</em> 我觉得这个词<em> 隔离</em> 更合适，因为虚拟化意味着中间有一个转换层，而 cgroups 和命名空间所做的是分离和上下文化进程。<p>Cgroups 用于定义资源的分配策略，通常是<code>RAM</code> 和<code>CPU</code> ，而命名空间控制诸如挂载点、网络和用户之类的上下文。 [Apparmor] 反而提供了一种限制容器环境作为一个整体的能力的方法，而没有容器的 apparmor，正如维基百科所写的那样，是基于程序的。<p>像这样的工具<a href=https://en.wikipedia.org/wiki/Flatpak> 平板包装</a> 和<a href=https://github.com/netblue30/firejail> 火狱</a> 使用容器来限制用户应用程序的访问面。 [Windows] 容器实现了等效系统，并且还通过 [WSL] 提供对 linux 容器的支持。<h2 id=but_why><a class=header-anchor href=#but_why> 但为什么？</a></h2><ul><li><p>有时为了安全，但在这种情况下，完全虚拟化可以提供更好的保证。<li><p>为了实现执行的可重复性和可移植性，依赖于特定环境配置的应用程序可以运行，而不会因为额外的设置步骤而困扰用户。<li><p>像 kubernetes 这样的调度、编排软件使用 [容器运行时] 在主机之间无缝移动服务并抽象执行逻辑。</ul><h2 id=too_much><a class=header-anchor href=#too_much> 太多了？</a></h2><p>当我开始建造<a href=/zh/posts/alpine/> 松树</a> ，我尝试了一些运送我自己的容器镜像，从 github 版本发布。主要脚本（<code>trees</code> ) 命令是<pre><code class="sh hljs">Usage: trees APP [FLAGS]...
<span class=hljs-string>'APP'</span>               Install apps through ostree deltas checkouts.
    -b, --base      base image (alp,trub...)
    -n, --name      same as APP (etcd,hhvm...)
    -f, --force     clear before install
    -d, --delete    clear checkout and prune ostree repo
ck, check           make sure the apps repo is mounted
co, checkout        builds the trees of links <span class=hljs-keyword>for</span> the specified APP
    -t 	            optional path <span class=hljs-built_in>where</span> to build the tree</code></pre><p>它类似于 flatpak，因为我正在发布基于主松树映像的 ostree 静态增量，并[签出] 基于 rootfs 的新应用程序，然后在其上启动一个容器实例。 OpenVZ 在 v7 之前运行容器有很多问题（因为你知道......你正在运行一个<em> 嵌套</em> 基于容器的 [VPS] 上的容器，内核是<code>v2.6</code> （！））...那是个<strong> 巨大的</strong> 浪费时间。<h2 id=when><a class=header-anchor href=#when> 什么时候？</a></h2><p>我的尝试是在不需要的情况下获得最小的容器运行时<code>docker</code> 或者更强大的软件，因为 docker 可能是最轻量级的，并且<a href=https://docs.docker.com/engine/swarm/> 码头群</a> ，内置共享许多功能，并为您提供最有用的编排功能，与主机系统要求相比，它最依赖主机系统要求<a href=https://docs.kublr.com/installation/hardware-recommendation/> k8s</a> 或者<a href=https://www.nomadproject.io/docs/install/production/requirements> 游牧民族</a>.<p>尽管容器是您在大多数情况下可能想要的功能，但编排不是。我认为<em> 目标不明确</em> 广告活动吸引了<em> 无意的</em> 此类软件的目标受众，让人相信它是有用的<em> 给他们</em> , 不强调你的前提<strong> 真的</strong> 需要大量扩展（！）以证明此类设置的复杂性成本是合理的。的数量<a href=https://reddit.com/r/kubernetes/comments/be0415/k3s_minikube_or_microk8s/el2xy5r/> 便利工具</a>围绕 k8s 构建以帮助 k8s 集群的引导过程应该足以证明......<h2 id=conclusions><a class=header-anchor href=#conclusions> 结论</a></h2><p>当用户无法区分宠物服务器和牛服务器之间的区别时，编排工具最终会成为管理多主机的解决方案的地方。在很多情况下，像 ansible、pyinfra 甚至<a href=https://github.com/duncs/clusterssh> cssh</a> 或者<a href=https://github.com/moul/assh> 灰烬</a> 是人们所需要的一切。<p><div class=page-foot><div class=copyright></div></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - 技术支持<a href=https://github.com/tlienart/Franklin.jl> 富兰克林</a></div><div class=page__footer-links>- <ul><li><a href=/zh/sitemapxml> 网站地图</a></li> | <li><a href=/zh/tag> 标签</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>