<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=ro><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><link href=https://www.unto.re/ro/posts/alpine/ rel=canonical><link title="site-ul lui untoreh"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/ro/posts/alpine/ rel=amphtml><meta content="untoreh's site"property=og:title><meta content=website property=og:type><meta content=https://www.unto.re property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="Articles, logs, infos, status and live updates are published here."property=og:description><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Pine, Alpine linux based on OSTree","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-19","dateCreated":"April 24, 2021","@id":"https://www.unto.re/posts/alpine/index.html","dateModified":"2021-04-19","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-04-19","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/alpine/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/alpine","name":"Alpine","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> alpin</title><meta content="Pine, Alpine linux based on OSTree"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/ro/posts/alpine/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/ro/posts/alpine/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/alpine/"},"datePublished":"2021-10-25T17:43:51.771","inLanguage":"ro","name":"","mainEntityOfPage":{"@id":"/ro/posts/alpine/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/ro/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" untoreh-light"class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Căutați pe site"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ro/posts/><i class="fas fa-pen menu-icons"></i> postări</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ro/media/><i class="fas fa-tv menu-icons"></i> mass-media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Căutați pe site"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ro/posts/><i class="fas fa-pen menu-icons"></i> postări</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ro/media/><i class="fas fa-tv menu-icons"></i> mass-media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/ro/posts/alpine> alpin</a></h1><blockquote style="font-style: italic;"id=page-description>Pine, Alpine Linux bazat pe OSTree</blockquote></div><div class=franklin-content><p>Alegerea a ce<a href=https://en.wikipedia.org/wiki/Operating_system> OS</a> rulează pe serverele dvs. este o chestiune de comoditate și familiaritate. Confortul înseamnă că vrei ceva care să îți dea cât mai puține probleme, familiaritatea înseamnă că ai prefera<em> nu</em> să înveți lucruri suplimentare dacă nu trebuie.<p>Serverele mele sunt<a href=https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets> animale de companie</a>așa că sunt ok să emit manual câteva comenzi din când în când și nu necesită automatizare completă.<p>După ce am încercat<a href=https://en.wikipedia.org/wiki/Container_Linux> CoreOS</a> timp de un an am trecut la propriul meu simplificat<a href=https://en.wikipedia.org/wiki/Linux_distribution> distro</a> bazat pe alpin și<a href=https://en.wikipedia.org/wiki/OSTree> ostree</a>.<h2 id=goals><a class=header-anchor href=#goals> Obiective</a></h2><p>Această versiune de alpine ia indicii de la<a href=https://kinvolk.io/flatcar-container-linux/> vagon plat</a> și<a href=https://www.projectatomic.io/> proiect-atomic</a> și se presupune că este instalat ca un sistem de fișiere rădăcină numai în citire, cu actualizări care au loc atomic, adică fie reușesc, fie sistemul trece înapoi la starea anterioară. Pentru ca acest lucru să fie posibil, sistemul trebuie să aibă întotdeauna cel puțin<strong> două instantanee</strong> a versiunii lansate a sistemului de fișiere, disponibilă pe stocare.<h2 id=targets><a class=header-anchor href=#targets> Ținte</a></h2><p>În ce medii va funcționa sistemul? Am vizat<a href=https://en.wikipedia.org/wiki/OpenVZ> OVZ</a> și [KVM], dar, în general, puteți spune<em> containere</em> și<em> mașini virtuale</em> cu diferența principală fiind că containerele nu rulează propriul kernel, în special nu au un proces de boot, apelează direct în<em> init</em> sistem (care de exemplu într-un<code><a href=https://en.wikipedia.org/wiki/Docker_(software)>Dockerfile</a></code> ar fi definit de<code>CMD</code> sau<code>ENTRYPOINT</code> declarații), care este responsabil pentru gestionarea arborelui proceselor care vor menține containerul în funcțiune (la fel ca o sesiune normală, dacă procesul de inițiere moare, containerul se termină). De asemenea, containerele nu pot configura butoanele de sistem și pot avea restricții suplimentare asupra capacităților.<h2 id=bisecting_the_build_process><a class=header-anchor href=#bisecting_the_build_process> Divizarea procesului de construire</a></h2><p>Cum este construită imaginea?<h3 id=dependencies><a class=header-anchor href=#dependencies> Dependențe</a></h3><p>The<code>prepare.sh</code> scriptul gestionează dependențe, dintre care majoritatea sunt pachete pentru a oferi instrumente cli obișnuite, cum ar fi<code>coreutils</code>, <code>util-linux</code>, <code>binutils</code> , utilitare pentru a opera cu dispozitive de blocare cum ar fi<code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code> și sisteme de fișiere cu<code>xfsprogs</code> și<code>e2fsprogs</code> . The<code>squashfs-tools</code> pachetul este folosit la final pentru a comprima sistemul de fișiere rădăcină construit. A<code>glib</code> pachetul de compatibilitate este, de asemenea, instalat implicit, deoarece alpine se bazează pe<code><a href=https://musl.libc.org/>musl</a></code>, pachetul de compatibilitate funcționează oferind unele biblioteci construite împotriva.<h3 id=the_tree><a class=header-anchor href=#the_tree> Copacul</a></h3><p>Arborii de fișiere atât pentru VM-uri, cât și pentru containere sunt construiți cu respectiv<code>make.sh</code> și<code>make_ovz.sh</code> . Aceasta este o descriere simplificată a pașilor<ul><li><p>setați versiunea care urmează să fie construită în funcție de eticheta depozitului<li><p>creați un director pentru noul copac și ștergeți mediul<li><p>creați directoare țintă de bază și directoare cerute de ostree, cum ar fi<code>sysroot</code><li><p>creați legături simbolice pentru a vă conforma cu<a href=https://www.freedesktop.org/software/systemd/man/file-hierarchy.html> standard de ierarhie a sistemului de fișiere</a><li><p>copiați servicii personalizate și configurații personalizate<li><p>setup chroot cu directoare de sistem montate<li><p>bootstrap un rootfs alpin cu pachete de bază<li><p>aplicați o configurație minimă pentru rootfs, cum ar fi acreditările, fusul orar, numele gazdei.<li><p>serviciile de copiere trebuie inițiate de init<li><p>configurați configurația de pornire cu imaginea specificată a nucleului<li><p>adăugați opțional module de kernel personalizate<li><p>efectuați curățări<li><p>comite rootfs<sup id=fnref:rootfs><a class=fnref href=#fndef:rootfs>[1]</a></sup> către depozitul de ostree</ul><p>Pentru containere, secvența este aceeași, dar configurația se schimbă, deoarece cu un sistem care nu este pornit de la un<a href=https://en.wikipedia.org/wiki/Bootloader> încărcător de încărcare</a> ostree are probleme la verificarea mediului, trebuie să aplicăm unele<a href=https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73> soluții</a> și configurați unele dispozitive care sunt de obicei manipulate de<a href=https://en.wikipedia.org/wiki/Initial_ramdisk> initramfs</a> Etapa. Așa se face<a href=https://en.wikipedia.org/wiki/OpenVZ> OVZ</a> sau<a href=https://en.wikipedia.org/wiki/LXC> LXC</a> șabloanele sunt configurate.<h3 id=packaging><a class=header-anchor href=#packaging> Ambalare</a></h3><p>Odată ce avem arborele nostru de fișiere angajate<code>build.sh</code> sau<code>build-update.sh</code> se ocupă de producerea artefactului care va fi distribuit. Diferența dintre scripturi este că versiunea de actualizare începe de la un depozit de ostree anterior și<em> de asemenea</em> produce un artefact delta pe care un sistem de rulare îl poate aplica instanței sale ostree pentru a efectua upgrade-uri. Aceasta este o descriere simplificată a etapelor de construire<ul><li><p>dacă construcție nouă<ul><li><p>creați partiții noi pe o nouă imagine montată ca dispozitiv de buclă</ul><li><p>altceva<ul><li><p>montați partițiile sysroot și boot ale versiunii anterioare</ul><li><p>curățați implementările anterioare ostree (legătură ferme) pe construcția montată<li><p>comiteți un copac nou construit pe o construcție montată<li><p>verificați integritatea și sumele de control<li><p>creați delta nouă pentru upgrade-uri<li><p>executați implementarea ostree pentru a regenera configurația de boot<li><p>eliminați comitetele vechi ostree<li><p>verificați integritatea partiției de boot<li><p>demontați noua imagine de construcție actualizată<li><p>generați suma de verificare a imaginii și comprimați-o (cu<code>squashfs</code> pentru containere)</ul><p>Configurația partițiilor se aplică cu un fdisk<code>layout.cfg</code> care definește dimensiunile partiției, avem o partiție pentru rootfs (<code>~430M</code> ), partiția de boot (<code>~40M</code> ) și o partiție swap (<code>~40M</code> ). Cu containere cu doar săriți montarea construcției anterioare pe un dispozitiv buclă și trageți noua comisie ostree peste vechiul depozit de ostree (extras).<h2 id=customizations><a class=header-anchor href=#customizations> Personalizări</a></h2><p>Ce grupez în această imagine (în afară de pachetele instalate)?<ul><li><p>O mică lib în<code>functions.sh</code> pentru sarcini comune executate în shell<li><p>scripturi de upgrade bazate pe ostree cu mecanism de blocare bazat pe magazinul KV<li><p>scripturi de monitorizare pentru IO atât local (<code>iomon</code> ) și rețea (<code>tcpmon</code>)<li><p>scripturi de configurare pentru runtime de container, altele decât<code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></ul><p>Ceea ce a fost și nu mai este<ul><li><p><code>sup</code>: <a href=https://github.com/pressly/sup/> Cina</a> a fost folosit pentru orchestrare (implementarea containerelor) și configurarea mașinii gazdă, dar apoi am trecut la<a href=https://www.ansible.com/> ansible</a> pentru că au existat erori de lungă durată în sup care nu aveau o soluție, nu am ales ansible de la început pentru că nu voiam să se instaleze o dependență de python pe fiecare server, în cele din urmă m-am stabilit cu un alpin secundar<a href=https://en.wikipedia.org/wiki/Chroot> chroot</a> pe mașinile gazdă, situate în<code>/opt/alp</code>dacă aș instala software suplimentar mai puțin critic. Astăzi, însă, aș trece din nou de la ansible la<a href=https://github.com/Fizzadar/pyinfra> pyinfra</a> , deoarece<ul><li><p>este python fără boilerplate (ansible are pseudo<code>DSL</code> care provoacă mai multe dureri de cap decât cele pe care le rezolvă)<li><p>își execută rețetele cu comenzi simple ssh, deci nu există o cerință de dependență de python pe gazdele țintă</ul><li><p><code>containerpilot</code> : Cazul de utilizare pentru pilotul de containere este de a gestiona dependențe complexe între containere fără scripturi shell ... a încetat să primească actualizări de la<a href=https://github.com/joyent/containerpilot> bucuros</a> și a fost pus în modul de întreținere, de asemenea, nu mi-a plăcut cerințele de memorie, iar utilizarea memoriei ar crește constant pentru o perioadă lungă de timp de funcționare. L-am schimbat pentru scripturi shell simple cu<a href=https://www.consul.io/> consul</a> , Aș putea căuta alternative mai potrivite dacă scripturile shell încep să crească prea mult. Soluții mai grele precum<a href=https://kubernetes.io/> kubernetes</a>, <a href=https://docs.docker.com/engine/swarm/> roi</a> sau<a href=https://www.nomadproject.io/> nomad</a> au fost aruncate de la început.<li><p><code>beegfs</code> : Am folosit pentru a expedia modulul kernel necesar pentru<a href=https://en.wikipedia.org/wiki/BeeGFS> beegfs</a> dar după un timp a rupt compatibilitatea și faptul că nu a existat un suport corect<a href=https://en.wikipedia.org/wiki/Filesystem_in_Userspace> siguranță</a> modulul făcut să fie abandonat complet, în prezent nu rulez un [DFS] pe serverele mele, dar posibilitatea de a avea un sistem de fișiere gata de pornit pentru a conecta o rețea este încă atrăgătoare.<li><p></ul><h2 id=installation><a class=header-anchor href=#installation> Instalare</a></h2><p>Pentru a instala imaginea, puteți să o încărcați pe furnizorul de găzduire și să o instalați de la VNC, în cazul mașinilor virtuale, dar de obicei deturn o instalare existentă, deoarece este întotdeauna posibilă, de mult timp am testat scriptul de configurare în comparație cu versiunea de distribuția Linux, în general folosesc debian-8 sau ubuntu-14, nu am testat altele, deoarece acestea le-am găsit întotdeauna disponibile. Urmează pașii de configurare<ul><li><p>asigurați asistența https pentru descărcări<li><p>descărcați o versiune busybox<li><p>instalați o fermă de legături busybox<li><p>determinați adresele ipv4 / ipv6 pentru configurarea rețelei<li><p>asigura capacități chroot<li><p>descărcați imaginea pinului și extrageți-o<li><p>dacă VM<ul><li><p>flash peste dispozitivul țintă<li><p>montați peste un dispozitiv de buclă</ul><li><p>scrieți configurația rețelei locale prin<em> să fie fulgerat</em> rootfs<li><p>dacă container<ul><li><p>copiați serviciul init (pentru containere) peste punctul principal de montare rădăcină<code>/sbin/init</code></ul><li><p>dacă VM<ul><li><p>partiția discului rămas cu standard (<code>xfs</code> ) partiții<li><p>demonta<li><p>verificați integritatea partițiilor</ul><li><p>reporniți</ul><h2 id=conclusions><a class=header-anchor href=#conclusions> Concluzii</a></h2><p>am facut<a href=https://github.com/untoreh/pine> pin</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href=https://en.wikipedia.org/wiki/Network_address_translation> NATed</a> servere care tind să ofere resurse foarte mici, de fapt am o cutie care rulează doar<code>64M</code> de memorie RAM și încă mai am toate caracteristicile de care am nevoie.<p><table class=fndef id=fndef:rootfs><tbody><tr><td class=fndef-backref><a href=#fnref:rootfs>[1]</a><td class=fndef-content>sistemul de fișiere rădăcină</table><p><div class=page-foot><div class=copyright></div></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - Dezvoltat de<a href=https://github.com/tlienart/Franklin.jl> Franklin</a></div><div class=page__footer-links>- <ul><li><a href=/ro/sitemapxml> Sitemap</a></li> | <li><a href=/ro/tag> Etichete</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>