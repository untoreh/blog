<!DOCTYPE html><HTML lang="en"><head><link href="https://www.unto.re/it/__site/posts/alpine/" rel="canonical"/><meta charset="UTF-8"/><script type="application/ld+json">{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","@type":"WebSite"}</script><script type="application/ld+json">{"audience":"cool people","url":"https://www.unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Pine, Alpine linux based on OSTree","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-19","dateCreated":"April 24, 2021","@id":"https://www.unto.re/posts/alpine/index.html","dateModified":"2021-04-19","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"creativeWorkStatus":"Published","publisher":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"datePublished":"","inLanguage":"English","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/alpine/index.html","@type":"Article"}}</script><script type="application/ld+json">{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/alpine","name":"Alpine","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="/css/franklin.css" rel="stylesheet"/><link href="/css/main.css" rel="stylesheet"/><link href="/css/menu.css" rel="stylesheet"/><link href="/css/pages.css" rel="stylesheet"/><link href="/css/lunr.css" rel="stylesheet"/><link href="/css/footer.css" rel="stylesheet"/><link href="/css/responsive.css" rel="stylesheet"/><link href="/css/animations.css" rel="stylesheet"/><link href="/css/docco.css" rel="stylesheet"/><link href="/css/flags-sprite.css" rel="stylesheet"/><link href="/assets/favicon.png" rel="icon" type="image/x-icon"/><title> Alpino</title><meta content="Pine, Alpine linux based on OSTree" name="description"/><script src="/libs/lunr/lunr.min.js"></script><script src="/libs/lunr/lunr_index.js"></script><script src="/libs/lunr/lunrclient.min.js"></script><script src="/libs/load.js"></script><script type="application/ld+json">{"url":"/it/posts/alpine/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/it/posts/alpine/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/__site/posts/alpine/"},"datePublished":"","inLanguage":"it","name":"","mainEntityOfPage":{"@id":"/it/posts/alpine/","@type":"Article"}}</script></head><body class=""><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><a class="site-title" href="/it/"></a><div class="author__wrap"><script type="application/ld+json">{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class="author__avatar" onclick="toggleTheme()"><img alt=" untoreh-luce" class="flip-front" src="/assets/appa.png"/></li><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li></ul></div><nav id="site-nav"><div class="horiz"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/it/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> post</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/it/media/" title="Video and audio content from streaming websites."><i class="fas fa-tv menu-icons"></i> media</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/alpine" id="lang-ar"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link" href="/bn/posts/alpine" id="lang-bn"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link" href="/nl/posts/alpine" id="lang-nl"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link" href="/posts/alpine" id="lang-en"><span class="flag flag-gb"></span>English</a><a class="lang-link" href="/tl/posts/alpine" id="lang-tl"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link" href="/fr/posts/alpine" id="lang-fr"><span class="flag flag-fr"></span>French</a><a class="lang-link" href="/de/posts/alpine" id="lang-de"><span class="flag flag-de"></span>German</a><a class="lang-link" href="/el/posts/alpine" id="lang-el"><span class="flag flag-gr"></span>Greek</a><a class="lang-link" href="/hi/posts/alpine" id="lang-hi"><span class="flag flag-in"></span>Hindi</a><a class="lang-link" href="/it/posts/alpine" id="lang-it"><span class="flag flag-it"></span>Italian</a><a class="lang-link" href="/ja/posts/alpine" id="lang-ja"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link" href="/jw/posts/alpine" id="lang-jw"><span class="flag flag-id"></span>Javanese</a><a class="lang-link" href="/ko/posts/alpine" id="lang-ko"><span class="flag flag-kr"></span>Korean</a><a class="lang-link" href="/ms/posts/alpine" id="lang-ms"><span class="flag flag-ms"></span>Malay</a><a class="lang-link" href="/zh/posts/alpine" id="lang-zh"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link" href="/pl/posts/alpine" id="lang-pl"><span class="flag flag-pl"></span>Polish</a><a class="lang-link" href="/pt/posts/alpine" id="lang-pt"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link" href="/pa/posts/alpine" id="lang-pa"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link" href="/ro/posts/alpine" id="lang-ro"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link" href="/ru/posts/alpine" id="lang-ru"><span class="flag flag-ru"></span>Russian</a><a class="lang-link" href="/es/posts/alpine" id="lang-es"><span class="flag flag-es"></span>Spanish</a><a class="lang-link" href="/sv/posts/alpine" id="lang-sv"><span class="flag flag-se"></span>Swedish</a><a class="lang-link" href="/th/posts/alpine" id="lang-th"><span class="flag flag-th"></span>Thai</a><a class="lang-link" href="/tr/posts/alpine" id="lang-tr"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link" href="/uk/posts/alpine" id="lang-uk"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link" href="/ur/posts/alpine" id="lang-ur"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link" href="/vi/posts/alpine" id="lang-vi"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link" href="/zu/posts/alpine" id="lang-zu"><span class="flag flag-za"></span>Zulu</a></ul></div></button></li></ul></div><button class="ham"><i class="fas fa-bars ham-icon"></i></button><div class="vert"><ul><li class="masthead__menu-item hvr-outline-in" id="lunrSearch"><form id="lunrSearchForm" name="lunrSearchForm"><button class="search-button" formaction="/search/index.html" type="submit" value="Search"><i class="fas fa-search menu-icons"></i></button><input class="search-input" name="q" placeholder="Search…" type="text"/></form></li><li class="masthead__menu-item hvr-outline-in"><a href="/it/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> post</a></li><li class="masthead__menu-item hvr-outline-in"><a href="/it/media/" title="Video and audio content from streaming websites."><i class="fas fa-tv menu-icons"></i> media</a></li><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class="langs-dropdown-wrapper"><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content" id="langs-dropdown-menu"><ul id="lang-list"><a class="lang-link" href="/ar/posts/alpine" id="lang-ar"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link" href="/bn/posts/alpine" id="lang-bn"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link" href="/nl/posts/alpine" id="lang-nl"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link" href="/posts/alpine" id="lang-en"><span class="flag flag-gb"></span>English</a><a class="lang-link" href="/tl/posts/alpine" id="lang-tl"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link" href="/fr/posts/alpine" id="lang-fr"><span class="flag flag-fr"></span>French</a><a class="lang-link" href="/de/posts/alpine" id="lang-de"><span class="flag flag-de"></span>German</a><a class="lang-link" href="/el/posts/alpine" id="lang-el"><span class="flag flag-gr"></span>Greek</a><a class="lang-link" href="/hi/posts/alpine" id="lang-hi"><span class="flag flag-in"></span>Hindi</a><a class="lang-link" href="/it/posts/alpine" id="lang-it"><span class="flag flag-it"></span>Italian</a><a class="lang-link" href="/ja/posts/alpine" id="lang-ja"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link" href="/jw/posts/alpine" id="lang-jw"><span class="flag flag-id"></span>Javanese</a><a class="lang-link" href="/ko/posts/alpine" id="lang-ko"><span class="flag flag-kr"></span>Korean</a><a class="lang-link" href="/ms/posts/alpine" id="lang-ms"><span class="flag flag-ms"></span>Malay</a><a class="lang-link" href="/zh/posts/alpine" id="lang-zh"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link" href="/pl/posts/alpine" id="lang-pl"><span class="flag flag-pl"></span>Polish</a><a class="lang-link" href="/pt/posts/alpine" id="lang-pt"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link" href="/pa/posts/alpine" id="lang-pa"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link" href="/ro/posts/alpine" id="lang-ro"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link" href="/ru/posts/alpine" id="lang-ru"><span class="flag flag-ru"></span>Russian</a><a class="lang-link" href="/es/posts/alpine" id="lang-es"><span class="flag flag-es"></span>Spanish</a><a class="lang-link" href="/sv/posts/alpine" id="lang-sv"><span class="flag flag-se"></span>Swedish</a><a class="lang-link" href="/th/posts/alpine" id="lang-th"><span class="flag flag-th"></span>Thai</a><a class="lang-link" href="/tr/posts/alpine" id="lang-tr"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link" href="/uk/posts/alpine" id="lang-uk"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link" href="/ur/posts/alpine" id="lang-ur"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link" href="/vi/posts/alpine" id="lang-vi"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link" href="/zu/posts/alpine" id="lang-zu"><span class="flag flag-za"></span>Zulu</a></ul></div></button></li></ul></div></nav></div></div></div><div><h1 id="title"><a href="/it/posts/alpine"> Alpino</a></h1><blockquote id="page-description" style="font-style: italic;">  Pine, Linux alpino basato su OSTree</blockquote></div><div class="franklin-content"><p>Scegliere cosa<a href="https://en.wikipedia.org/wiki/Operating_system"> OS</a>  gira sui tuoi server è una questione di comodità e familiarità. Convenienza significa che vuoi qualcosa che ti dia meno problemi possibile, familiarità significa che preferiresti<em> non</em>  per imparare cose aggiuntive se non è necessario.</p><p> I miei server sono<a href="https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets"> animali domestici</a>  quindi sto bene impartendo manualmente alcuni comandi di tanto in tanto e non richiedo l'automazione completa.</p><p> Dopo aver provato<a href="https://en.wikipedia.org/wiki/Container_Linux"> Core OS</a>  per un anno sono passato alla mia semplificata<a href="https://en.wikipedia.org/wiki/Linux_distribution"> distribuzione</a>  a base di alpino e<a href="https://en.wikipedia.org/wiki/OSTree"> ostree</a>.</p><h2 id="goals"><a class="header-anchor" href="#goals"> Obiettivi</a></h2><p>Questa versione di alpine prende spunto da<a href="https://kinvolk.io/flatcar-container-linux/"> pianale</a>  e<a href="https://www.projectatomic.io/"> progetto-atomico</a>  e dovrebbe essere installato come un file system root di sola lettura con gli aggiornamenti che avvengono in modo atomico, ovvero, o hanno successo o il sistema torna allo stato precedente. Affinché questo sia possibile, il sistema deve sempre avere almeno<strong> due istantanee</strong>  della versione del file system rilasciata, disponibile sullo storage.</p><h2 id="targets"><a class="header-anchor" href="#targets"> obiettivi</a></h2><p> In quali ambienti verrà eseguito il sistema? ho preso di mira<a href="https://en.wikipedia.org/wiki/OpenVZ"> OVZ</a>  e [KVM], ma in generale puoi dire<em> contenitori</em>  e<em> macchine virtuali</em>  con la differenza principale che i contenitori non eseguono il proprio kernel, in particolare non hanno un processo di avvio, chiamano direttamente nel<em> dentro</em>  sistema (che per esempio in a<code><a href="https://en.wikipedia.org/wiki/Docker_(software)">Dockerfile</a></code>  sarebbe definito da<code>CMD</code>  o<code>ENTRYPOINT</code>  dichiarazioni), che è responsabile della gestione dell'albero dei processi che manterrà il contenitore in esecuzione (proprio come una normale sessione, se il processo init muore, il contenitore termina). Inoltre, i contenitori non possono configurare le manopole di sistema e possono avere restrizioni aggiuntive sulle funzionalità.</p><h2 id="bisecting_the_build_process"><a class="header-anchor" href="#bisecting_the_build_process"> Bisecare il processo di costruzione</a></h2><p> Come si costruisce l'immagine?</p><h3 id="dependencies"><a class="header-anchor" href="#dependencies"> dipendenze</a></h3><p> Il<code>prepare.sh</code>  lo script gestisce le dipendenze, la maggior parte delle quali sono i pacchetti per offrire strumenti cli comuni come<code>coreutils</code>, <code>util-linux</code>, <code>binutils</code> , utility per operare con dispositivi a blocchi come<code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code>  e file system con<code>xfsprogs</code>  e<code>e2fsprogs</code> . Il<code>squashfs-tools</code>  pacchetto viene utilizzato alla fine per comprimere il file system root costruito. UN<code>glib</code>  anche il pacchetto di compatibilità è installato di default perché alpine è basato su<code><a href="https://musl.libc.org/">musl</a></code> , il pacchetto di compatibilità funziona fornendo alcune librerie basate su .</p><h3 id="the_tree"><a class="header-anchor" href="#the_tree"> L'albero</a></h3><p> Gli alberi dei file sia per le VM che per i container sono costruiti rispettivamente con<code>make.sh</code>  e<code>make_ovz.sh</code> . Questa è una descrizione semplificata dei passaggi</p><ul><li><p> imposta la versione da compilare in base al tag del repository</p></li><li><p>creare una directory per il nuovo albero e cancellare l'ambiente</p></li><li><p> creare directory di destinazione di base e directory richieste da ostree, come<code>sysroot</code></p></li><li><p> creare collegamenti simbolici per conformarsi al<a href="https://www.freedesktop.org/software/systemd/man/file-hierarchy.html"> standard di gerarchia del filesystem</a></p></li><li><p> copia servizi personalizzati e configurazioni personalizzate</p></li><li><p> configurare chroot con le directory di sistema montate</p></li><li><p> bootstrap un rootfs alpino con pacchetti di base</p></li><li><p> applica una configurazione minima a rootfs come credenziali, fuso orario, nome host.</p></li><li><p> servizi di copia che devono essere avviati da init</p></li><li><p> impostare la configurazione di avvio con l'immagine del kernel specificata</p></li><li><p> aggiungere opzionalmente moduli del kernel personalizzati</p></li><li><p> eseguire pulizie</p></li><li><p> commit the rootfs<sup id="fnref:rootfs"><a class="fnref" href="#fndef:rootfs">[1]</a></sup>  al repository ostree</p></li></ul><p> Per i contenitori, la sequenza è la stessa, ma la configurazione cambia, perché con un sistema non avviato da a<a href="https://en.wikipedia.org/wiki/Bootloader"> boot loader</a>  ostree ha problemi a verificare l'ambiente, dobbiamo applicarne un po'<a href="https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73"> soluzioni alternative</a>  e configurare alcuni dispositivi che di solito sono gestiti dal<a href="https://en.wikipedia.org/wiki/Initial_ramdisk"> initramfs</a>  fare un passo. Questo è come<a href="https://en.wikipedia.org/wiki/OpenVZ"> OVZ</a>  o<a href="https://en.wikipedia.org/wiki/LXC"> LXC</a>  i modelli sono configurati.</p><h3 id="packaging"><a class="header-anchor" href="#packaging"> Confezione</a></h3><p> Una volta che abbiamo il nostro albero di file impegnati ostree<code>build.sh</code>  o<code>build-update.sh</code>  si occupa di produrre il manufatto che verrà distribuito. La differenza tra gli script è che la versione di aggiornamento inizia da un repository ostree precedente e<em> anche</em>  produce un artefatto delta che un sistema in esecuzione può applicare alla sua istanza ostree per eseguire gli aggiornamenti. Questa è una descrizione semplificata dei passaggi di compilazione</p><ul><li><p> se nuova build</p><ul><li><p> creare nuove partizioni su una nuova immagine montata come dispositivo loop</p></li></ul></li><li><p> altro</p><ul><li><p> monta sysroot e partizioni di avvio della build precedente</p></li></ul></li><li><p> ripulire le distribuzioni precedenti di ostree (link farm) su build montate</p></li><li><p> commit di un nuovo albero costruito su build montata</p></li><li><p> verifica integrità e checksum</p></li><li><p> creare un nuovo delta per gli aggiornamenti</p></li><li><p>eseguire la distribuzione ostree per rigenerare la configurazione di avvio</p></li><li><p> rimuovi i vecchi commit di ostree</p></li><li><p> verificare l'integrità della partizione di avvio</p></li><li><p> smonta la nuova immagine di build aggiornata</p></li><li><p> generare il checksum dell'immagine e comprimerlo (con<code>squashfs</code>  per contenitori)</p></li></ul><p> La configurazione delle partizioni viene applicata con un fdisk<code>layout.cfg</code>  file che definisce le dimensioni delle partizioni, abbiamo una partizione per rootfs (<code>~430M</code> ), la partizione di avvio (<code>~40M</code> ) e una partizione di swap (<code>~40M</code> ). Con i contenitori salta semplicemente il montaggio della build precedente su un dispositivo loop e trascina semplicemente il nuovo commit ostree sul vecchio repository ostree (estratto).</p><h2 id="customizations"><a class="header-anchor" href="#customizations"> Personalizzazioni</a></h2><p> Cosa sto raggruppando in questa immagine (a parte i pacchetti installati)?</p><ul><li><p> Un piccolo lib in<code>functions.sh</code>  per le attività comuni eseguite all'interno della shell</p></li><li><p> script di aggiornamento basati su ostree con meccanismo di blocco basato su KV store</p></li><li><p> script di monitoraggio per IO sia locali (<code>iomon</code> ) e rete (<code>tcpmon</code>)</p></li><li><p> script di configurazione per runtime del contenitore diversi da<code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></p></li></ul><p> Quello che era e non è più</p><ul><li><p><code>sup</code>: <a href="https://github.com/pressly/sup/"> sup</a>  è stato utilizzato per l'orchestrazione (distribuzione dei contenitori) e la configurazione della macchina host, ma poi sono passato a<a href="https://www.ansible.com/"> ansible</a>  perché c'erano bug di vecchia data in sup che mancavano di una correzione, non ho scelto ansible dall'inizio perché non volevo una dipendenza python da installare su ogni server, alla fine ho optato per un alpine secondario<a href="https://en.wikipedia.org/wiki/Chroot"> chroot</a>  sulle macchine host, situate in<code>/opt/alp</code>  dovessi installare software aggiuntivo meno critico. Oggi, tuttavia, vorrei passare di nuovo da ansible a<a href="https://github.com/Fizzadar/pyinfra"> pyinfra</a> , perché</p><ul><li><p> è python senza boilerplate (ansible ha pseudo<code>DSL</code>  che provoca più mal di testa di quelli che risolve)</p></li><li><p> esegue le sue ricette con semplici comandi ssh, quindi non c'è un requisito di dipendenza python sugli host di destinazione</p></li></ul></li><li><p><code>containerpilot</code>: Il caso d'uso per il pilota del contenitore è gestire dipendenze complesse tra contenitori senza script di shell... ha smesso di ricevere aggiornamenti da<a href="https://github.com/joyent/containerpilot"> gioiosa</a>  ed è stato messo in modalità di manutenzione, inoltre, non mi piaceva che i requisiti di memoria e l'utilizzo della memoria aumentassero costantemente per un lungo periodo di tempo di attività. L'ho cambiato per semplici script di shell con<a href="https://www.consul.io/"> console</a> , potrei esaminare alternative più appropriate se gli script di shell iniziano a crescere troppo. Soluzioni più pesanti come<a href="https://kubernetes.io/"> kubernetes</a>, <a href="https://docs.docker.com/engine/swarm/"> sciame</a>  o<a href="https://www.nomadproject.io/"> nomade</a>  sono stati scartati fin dall'inizio.</p></li><li><p><code>beegfs</code> : Ero solito spedire il modulo del kernel necessario per<a href="https://en.wikipedia.org/wiki/BeeGFS"> beegfs</a>  ma dopo un po 'ha rotto la compatibilità e il fatto che non ci fosse un supporto adeguatamente<a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace"> fusibile</a>  modulo fatto essere eliminato del tutto, al momento non sto eseguendo un [DFS] sui miei server, ma la possibilità di avere un file system pronto per l'uso per collegare una rete è ancora allettante.</p></li><li><p></p></li></ul><h2 id="installation"><a class="header-anchor" href="#installation"> Installazione</a></h2><p> Per installare l'immagine puoi caricarla sul provider di hosting e installarla da VNC, nel caso di macchine virtuali, ma di solito dirotto un'installazione esistente, perché è sempre possibile, e ho testato lo script di installazione rispetto alla versione di la distribuzione linux, generalmente uso debian-8 o ubuntu-14, non ne ho testati altri poiché questi li ho sempre trovati disponibili. La procedura di installazione segue</p><ul><li><p> garantire il supporto https per i download</p></li><li><p> scarica una versione di busybox</p></li><li><p> installa una link-farm di busybox</p></li><li><p> determinare gli indirizzi ipv4/ipv6 per la configurazione di rete</p></li><li><p> assicurare le capacità di chroot</p></li><li><p> scarica l'immagine del pino ed estraila</p></li><li><p> se VM</p><ul><li><p> flash sul dispositivo di destinazione</p></li><li><p> montare su un dispositivo loop</p></li></ul></li><li><p> scrivere la configurazione della rete locale su<em> essere lampeggiato</em>  rootfs</p></li><li><p>se contenitore</p><ul><li><p> copia il servizio init (per i contenitori) sul punto di montaggio della radice principale<code>/sbin/init</code></p></li></ul></li><li><p> se VM</p><ul><li><p> partizionare il disco rimasto con standard (<code>xfs</code> ) partizioni</p></li><li><p> smontare</p></li><li><p> verificare l'integrità delle partizioni</p></li></ul></li><li><p> riavviare</p></li></ul><h2 id="conclusions"><a class="header-anchor" href="#conclusions"> Conclusioni</a></h2><p> ho fatto<a href="https://github.com/untoreh/pine"> pino</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href="https://en.wikipedia.org/wiki/Network_address_translation"> NATed</a>  server che tendono ad offrire risorse estremamente basse, in realtà ho una scatola in esecuzione con solo<code>64M</code>  di RAM e ho ancora tutte le funzionalità di cui ho bisogno.</p><p></p><table class="fndef" id="fndef:rootfs"><tbody><tr><td class="fndef-backref"><a href="#fnref:rootfs">[1]</a></td><td class="fndef-content"> file system radice</td></tr></tbody></table><p></p><div id="post-tags-list">  Tag dell'articolo:<span class="post-tag"><a href="/it/posts/tag/tools" style="">  utensili</a>, </span><span class="post-tag"><a href="/it/posts/tag/about" style="">  di</a></span></div><div class="page-foot"><div class="copyright">  19 aprile 2021</div><script async="" crossorigin="anonymous" issue-term="pathname" label="Comment" repo="untoreh/untoreh.github.io" src="https://utteranc.es/client.js"></script></div></div><div class="page__footer"><footer><div class="page__footer-copyright">  © untoreh - Realizzato da<a href="https://github.com/tlienart/Franklin.jl"> Franklin</a></div><div class="page__footer-links"> - <ul><li><a href="/it/sitemap.xml"> Mappa del sito</a> | </li><li><a href="/it/tag"> tag</a> | </li><li><a href="/it/feed.xml"> RSS</a></li></ul></div><ul class="author__wrap"><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i></a></li><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i></a></li><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a></li><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li></ul></footer></div><script crossorigin="anonymous" defer="" id="fa" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="/libs/colors.js"></script><script src="/libs/menu.js"></script><script defer="" src="/libs/lunr/lunr.min.js"></script></body></HTML>