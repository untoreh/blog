<!doctype html>
<html lang="en" prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="canonical" href="https://www.unto.re/posts/alpine">
        <link href="https://www.unto.re/de/posts/alpine" hreflang="de" rel="alternate"/><link href="https://www.unto.re/it/posts/alpine" hreflang="it" rel="alternate"/><link href="https://www.unto.re/zh/posts/alpine" hreflang="zh" rel="alternate"/><link href="https://www.unto.re/es/posts/alpine" hreflang="es" rel="alternate"/><link href="https://www.unto.re/hi/posts/alpine" hreflang="hi" rel="alternate"/><link href="https://www.unto.re/ar/posts/alpine" hreflang="ar" rel="alternate"/><link href="https://www.unto.re/pt/posts/alpine" hreflang="pt" rel="alternate"/><link href="https://www.unto.re/bn/posts/alpine" hreflang="bn" rel="alternate"/><link href="https://www.unto.re/ru/posts/alpine" hreflang="ru" rel="alternate"/><link href="https://www.unto.re/ja/posts/alpine" hreflang="ja" rel="alternate"/><link href="https://www.unto.re/pa/posts/alpine" hreflang="pa" rel="alternate"/><link href="https://www.unto.re/jw/posts/alpine" hreflang="jw" rel="alternate"/><link href="https://www.unto.re/vi/posts/alpine" hreflang="vi" rel="alternate"/><link href="https://www.unto.re/fr/posts/alpine" hreflang="fr" rel="alternate"/><link href="https://www.unto.re/ur/posts/alpine" hreflang="ur" rel="alternate"/><link href="https://www.unto.re/tr/posts/alpine" hreflang="tr" rel="alternate"/><link href="https://www.unto.re/pl/posts/alpine" hreflang="pl" rel="alternate"/><link href="https://www.unto.re/uk/posts/alpine" hreflang="uk" rel="alternate"/><link href="https://www.unto.re/nl/posts/alpine" hreflang="nl" rel="alternate"/><link href="https://www.unto.re/el/posts/alpine" hreflang="el" rel="alternate"/><link href="https://www.unto.re/sv/posts/alpine" hreflang="sv" rel="alternate"/><link href="https://www.unto.re/zu/posts/alpine" hreflang="zu" rel="alternate"/><link href="https://www.unto.re/ro/posts/alpine" hreflang="ro" rel="alternate"/><link href="https://www.unto.re/ms/posts/alpine" hreflang="ms" rel="alternate"/><link href="https://www.unto.re/ko/posts/alpine" hreflang="ko" rel="alternate"/><link href="https://www.unto.re/th/posts/alpine" hreflang="th" rel="alternate"/><link href="https://www.unto.re/tl/posts/alpine" hreflang="tl" rel="alternate"/>
        <link rel="alternate" type="application/rss+xml" href="https://www.unto.re/feed.xml" title="untoreh's site">
        <link rel="amphtml" href="https://www.unto.re/amp/posts/alpine">
        <meta property="og:title" content="Alpine" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.unto.re/posts/alpine" />
<meta property="og:image" content="https://www.unto.re/assets/appa.webp" />
<meta property="og:description" content="Pine, Alpine linux based on OSTree" />
<meta property="og:site_name" content="untoreh's site" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@untoreh"/>
        <script type="application/ld+json" id="" class="">{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2023,"@context":"https://schema.org/","image":"/assets/appa.webp","@type":"WebSite"}</script>
        <script type="application/ld+json" id="ldj-webpage" class="">{"audience":"cool people","url":"https://www.unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Pine, Alpine linux based on OSTree","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2022-12-11","dateCreated":"December 11, 2022","@id":"https://www.unto.re/posts/alpine/index.html","dateModified":"2022-12-11","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2022-12-11","inLanguage":"English","image":"/assets/appa.webp","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/alpine/index.html","@type":"Article"}}</script>
        <script type="application/ld+json" id="ldj-breadcrumbs" class="">{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/alpine","name":"Alpine","@type":"ListItem"}],"@type":"BreadcrumbList"}</script>
        
        
        
        

<style>:root{--block-background:var(--accent2);--small:14px;--normal:19px;--text-color:hsv(0, 0%, 20%)}.franklin-content{position:relative;padding-left:12.5%;padding-right:12.5%;line-height:1.35em}@media (min-width:940px){.franklin-content{width:705px;margin-left:auto;margin-right:auto}}@media (max-width:480px){.franklin-content{padding-left:6%;padding-right:6%}}.franklin-content h2{font-size:22px}h2{text-align:left}.franklin-content h2{padding-bottom:.3em;border-bottom:1px solid #d3d3d3;margin-top:2em;margin-bottom:1em}.franklin-content h2 a{color:inherit}.franklin-content a{color:var(--alt2);text-decoration:none}body{counter-reset:eqnum}code{background-color:var(--block-background);padding:.1em .2em;border-radius:2px;font-size:var(--small);overflow:auto}@media (prefers-color-scheme:light){body{--accent:#3152ff;--accent2:#5a61ae;--accent3:#651b00;--alt:#ae6600;--alt2:#9e6c47;--alt3:#7f4200;--background-color:#ffebee;--foreground-color:#1c0005;--block-background:#423833;--red:#e42a2f;--yellow:#917329;--green:#29892d}}@media (prefers-color-scheme:dark){body{--accent:#72e200;--accent2:#add3a0;--accent3:#7a9eff;--alt:#8abeff;--alt2:#836bd1;--alt3:#a090de;--background-color:#001d49;--foreground-color:#dae2ff;--block-background:#011627;--red:#e42a2f;--yellow:#917329;--green:#29892d}}body{background:var(--background-color);font-style:var(--accent);font-family:Helvetica;padding:0 .5rem;line-height:2rem;color:var(--accent3);max-width:1280px;min-height:720px;margin:auto;min-width:320px}a{color:var(--accent)}a:visited{color:var(--accent2)}.franklin-content{color:var(--foreground-color)}.franklin-content .header-anchor{padding:.5rem!important;line-height:100%}.franklin-content a{outline-style:outset;outline-width:1px;padding:0 .1rem;margin:0 .1rem;outline-color:var(--alt2)}body>div>h1{text-align:center;color:var(--accent2)}body>div #page-description,body>div #title{text-align:center}.masthead__menu{height:4rem;line-height:4rem;padding:10px 0;position:relative}.site-title{float:left;font-weight:700;width:15rem;font-size:1.5rem;text-decoration:none;color:var(--accent)}.site-title:visited{color:var(--accent)}#site-nav{float:right;font-size:1.5rem;font-family:Courier New;font-weight:700;position:absolute;right:0}#site-nav .horiz ul{list-style-type:none;line-height:4rem;height:4rem;margin:0}#site-nav .horiz ul>li{padding:0 .5rem;box-shadow:.25rem -.025rem .05rem var(--alt)}#site-nav .horiz ul>li{float:left;border-top:0;border-bottom:0;border-left:0;border-radius:50% 25% 25% 50%}#site-nav ul>li>a,#site-nav ul>li>button{color:var(--alt);display:inline-block}#site-nav .menu-icons{position:relative;padding:0 .2rem}#site-nav{display:block;width:auto;height:auto}.author__avatar>img{width:4em;height:4em;border-radius:50%;-o-object-fit:cover;object-fit:cover;border-width:.1rem;border-color:var(--accent3);border-style:solid;box-shadow:.1rem .06rem var(--accent3),-.05rem -.025rem .2rem var(--accent3)}#site-nav a:link{text-decoration:none}#site-nav .ham,#site-nav .vert{display:none}.author__avatar{-o-object-fit:contain;object-fit:contain;float:left}.author__wrap>ul{float:left;height:inherit;margin:0;padding:0 10px}.author__wrap>ul>li{position:relative;float:left;list-style-type:none;font-size:1rem;padding:0 .2rem;text-align:center}ul>li.author__urls{font-size:2rem}ul>li.author__urls a:visited{color:var(--accent)}.author__wrap .author__avatar{float:left}.langs-dropdown-content{display:none;text-align:left}.langs-dropdown-content a{display:block}.menu-lang-btn:before{border-radius:25% 25% 25% 50%!important}.lang-link .flag{position:absolute;left:1rem;margin-top:.65rem}#site-nav .langs-dropdown-menu{left:1.5rem;position:relative;top:1rem}#site-nav .langs-dropdown-menu .lang-list{font-size:1rem;line-height:2rem;overflow-x:hidden;height:20rem;position:absolute;overflow-y:scroll;right:1rem;scrollbar-width:thin;border:solid;border-radius:25%;border-width:0 0 0 .25rem;padding-left:3rem}.lang-list{background-color:var(--background-color)}#site-nav ul>li>button{background:inherit;border:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;padding:inherit;margin:inherit;list-style-type:inherit;line-height:inherit;height:inherit}.franklin-content{padding:0 0 2rem;z-index:0}.franklin-content{padding-top:1rem}.lunrSearchForm{margin-right:-.4rem;font-size:0;overflow:hidden}.lunrSearchForm .search-input{background:var(--background-color);color:var(--alt);border-width:.2rem;border:none;outline:0;border-radius:50% 25% 25% 50%;line-height:1.75rem;padding:.5rem 0 .5rem 2.25rem;width:7rem;position:relative;top:.5rem;font-family:Courier New;font-weight:700;font-size:1.5rem}.lunrSearchForm .search-button{color:var(--alt);background:0 0;border:none;font-size:1.5rem;padding:.2rem .2rem .2rem 0;position:absolute;top:1rem;left:.75rem;z-index:1}@media (min-width:680px) and (max-width:1300px){.lunrSearchForm .search-input{font-size:1rem;padding-left:2.75rem;width:4.5rem;border-radius:50% 100% 100% 50%}body{max-width:640px;min-height:320px}#site-nav{position:relative;z-index:1}#site-nav .ham{outline:0}#site-nav .ham,#site-nav .ham-icon{display:block;height:3rem;line-height:3rem;position:absolute;right:0;top:0;text-align:right;background:0 0;border:none;font-size:3rem;color:var(--accent)}#site-nav .horiz{display:none}#site-nav .vert{display:block;float:none;position:absolute;right:0;top:3rem;width:9rem;padding-left:1rem;max-height:0;overflow:hidden;filter:blur(1rem)}#site-nav .vert ul{margin:0;padding:10px 0}#site-nav .vert ul>li{width:100%;text-align:center;border-radius:25% 50% 50% 25%;padding:.5rem 1rem;box-shadow:-.25rem 0 .05rem var(--alt)}}@media (max-width:680px){.lang-link{height:3rem}.lunrSearchForm{display:block;width:28rem}.lunrSearch{position:absolute;top:-4rem;display:block;left:0;width:calc(2rem + 90%)}.lunrSearch .search-input{width:26rem}.masthead,.masthead__menu{display:block}.site-title{float:none;width:100%;display:block;text-align:center}.author__wrap{float:none;display:block;width:100%;height:4.4rem;text-align:center}.author__wrap ul{width:auto;float:none;padding:0;display:inline-block}#site-nav{float:none;padding:10px 0;position:relative;top:4rem}#site-nav ul li{float:none}.horiz{text-align:center}#site-nav ul{display:inline-block;padding:0}.masthead{height:14rem}}.lunrSearchForm{margin-top:1em}@media (max-width:480px){.lunrSearchForm .search-input{width:18rem;left:-4rem}.masthead{height:34rem}#site-nav{top:5rem}#site-nav .horiz ul{width:100%}#site-nav .horiz ul>li{width:calc(100% - 2rem);float:none}}@media (min-width:480px) and (max-width:680px){.masthead{height:20rem}}@media (max-width:680px){body{overflow-x:hidden}#site-nav{z-index:1}#site-nav .horiz ul>li{float:none;top:-4rem;position:relative;margin-top:1rem;margin-bottom:0}}@-webkit-keyframes chars{0%,1.8105942029%{content:"u"}1.8115942029%,3.6221884058%{content:"un"}3.6231884058%,5.4337826087%{content:"unt"}5.4347826087%,7.2453768116%{content:"unto"}7.2463768116%,9.0569710145%{content:"untor"}10.8685652174%,9.0579710145%{content:"untore"}10.8695652174%,12.6801594203%{content:"untoreh"}12.6811594203%,14.4917536232%{content:"untoreh'"}14.4927536232%,16.3033478261%{content:"untoreh's"}16.3043478261%,18.114942029%{content:"untoreh's "}18.115942029%,19.9265362319%{content:"untoreh's s"}19.9275362319%,21.7381304348%{content:"untoreh's si"}21.7391304348%,23.5497246377%{content:"untoreh's sit"}23.5507246377%,to{content:"untoreh's site"}}@keyframes chars{0%,1.8105942029%{content:"u"}1.8115942029%,3.6221884058%{content:"un"}3.6231884058%,5.4337826087%{content:"unt"}5.4347826087%,7.2453768116%{content:"unto"}7.2463768116%,9.0569710145%{content:"untor"}10.8685652174%,9.0579710145%{content:"untore"}10.8695652174%,12.6801594203%{content:"untoreh"}12.6811594203%,14.4917536232%{content:"untoreh'"}14.4927536232%,16.3033478261%{content:"untoreh's"}16.3043478261%,18.114942029%{content:"untoreh's "}18.115942029%,19.9265362319%{content:"untoreh's s"}19.9275362319%,21.7381304348%{content:"untoreh's si"}21.7391304348%,23.5497246377%{content:"untoreh's sit"}23.5507246377%,to{content:"untoreh's site"}}@-webkit-keyframes cursor{75%{border-color:transparent}}@keyframes cursor{75%{border-color:transparent}}.site-title{-webkit-backface-visibility:hidden;backface-visibility:hidden;font-size:1.5rem;font-family:VT323,monospace,sans-serif;color:var(--accent2);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.site-title:after{content:"\200b";position:relative;padding-right:.5em;border-right:.5em solid var(--accent);white-space:nowrap;-webkit-animation:5.52s linear 1s forwards chars,1s 3 cursor;animation:5.52s linear 1s forwards chars,1s 3 cursor}.franklin-content a{display:inline-block;vertical-align:middle;text-decoration:none;transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative;overflow:hidden}.franklin-content a:before{content:"";position:absolute;z-index:-1;left:51%;right:51%;bottom:0;background:var(--accent);height:4px}.hvr-outline-in{display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative}.horiz .hvr-outline-in:before{border-radius:50% 25% 25% 50%;right:-.25rem}.vert .hvr-outline-in:before{border-radius:25% 50% 50% 25%;left:-.25rem}.hvr-outline-in:before{content:"";position:absolute;border:var(--alt) solid .25rem;top:0;bottom:0;left:0;opacity:0}#site-nav .vert:before{background-color:var(--background-color);filter:blur(.25rem);content:"";height:100%;width:100%;position:absolute}.author__avatar{background-color:transparent;perspective:1000px}.masthead__menu ul li.author__avatar img{transform-style:preserve-3d}.flag{display:inline-block;position:relative;width:16px;height:11px;background:url(/assets/flags.png) no-repeat}.flag.flag-th{background-position:-16px -143px}.flag.flag-tr{background-position:-144px -143px}.flag.flag-fr{background-position:-80px -44px}.flag.flag-nl{background-position:-240px -99px}.flag.flag-ms{background-position:-16px -99px}.flag.flag-es{background-position:-224px -33px}.flag.flag-vn{background-position:-128px -154px}.flag.flag-za{background-position:-256px -154px}.flag.flag-ph{background-position:-144px -110px}.flag.flag-ru{background-position:-96px -121px}.flag.flag-pl{background-position:-176px -110px}.flag.flag-gb{background-position:-112px -44px}.flag.flag-ro{background-position:-64px -121px}.flag.flag-pt{background-position:-256px -110px}.flag.flag-in{background-position:-64px -66px}.flag.flag-kr{background-position:-80px -77px}.flag.flag-ua{background-position:-224px -143px}.flag.flag-jp{background-position:-224px -66px}.flag.flag-de{background-position:-32px -33px}.flag.flag-se{background-position:-208px -121px}.flag.flag-gr{background-position:-48px -55px}.flag.flag-id{background-position:-256px -55px}.flag.flag-pk{background-position:-160px -110px}.flag.flag-bd{background-position:-16px -11px}.flag.flag-it{background-position:-144px -66px}.flag.flag-sa{background-position:-128px -121px}.flag.flag-cn{background-position:-176px -22px}</style>
<link as="style" href="/css/bundle.css" rel="preload">
<link href="/css/bundle.css" media="print" onload=
"this.onload=null;this.removeAttribute('media');" rel="stylesheet">
<noscript>
<link href="/css/bundle.css" rel="stylesheet">
</noscript>

<link rel="icon" href="/assets/favicon.png" type="image/x-icon">
<link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
<!--[if IE ]>
<![endif]-->

        <title>Alpine</title>
        <meta name="description" content="Pine, Alpine linux based on OSTree"/>
        <!-- {{insert lunr_include.html}} -->
        <script src="/libs/load.js"></script>
        <!-- end custom head snippets -->
    </head>
    <body class="">
    <div class="masthead">
  <div class="masthead__menu__inner-wrap">
    <div class="masthead__menu">
      <a title="untoreh's site" class="site-title" href="/"></a> <div class="author__wrap">
    <script type="application/ld+json" id="" class="">{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"}</script>
    <ul>
        <li onclick="toggleTheme()" class="author__avatar">
        <img class="flip-front" src="/assets/appa.webp" alt=
        "untoreh-light"></li><li class="author__urls social-icons">
    <a title="Twitter link" href="https://twitter.com/untoreh" rel=
    "nofollow noopener noreferrer"><i class=
    "fab fa-fw fa-twitter-square" aria-hidden="true"></i></a>
</li>
<li class="author__urls social-icons">
    <a title="GitHub link" href="https://github.com/untoreh" rel=
    "nofollow noopener noreferrer"><i class="fab fa-fw fa-github"
    aria-hidden="true"></i></a>
</li>
<li class="author__urls social-icons">
    <a title="email" href="mailto:contact@unto.re"><i class=
    "fas fa-envelope"></i></a>
</li>
<li><script type="application/ld+json" id="" class="">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li>

    </ul>
</div>

      <nav id="site-nav">
        <div class="horiz">
          <ul>
    <li class="lunrSearch masthead__menu-item hvr-outline-in"><form class="lunrSearchForm" name="lunrSearchForm">
<button title="Search Website" class="search-button" type="submit" value="Search" formaction="/search/index.html">
    <i class= "fas fa-search menu-icons"></i></button>
<input class="search-input" name="q" placeholder="Search&#8230;" type="text">
</form>
</li>
    <li class="masthead__menu-item hvr-outline-in">
        <a href="/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i>posts</a>
    </li>
    <li class="masthead__menu-item hvr-outline-in">
        <a href="/media/" title="Video and audio content from streaming websites."><i class="fas fa-tv menu-icons"></i>media</a>
    </li>
    <li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language">
        <button type="button" title="Languages Menu" class="langs-dropdown-wrapper">
            <i class="fas fa-language menu-icons"></i> Lang
            <div class="langs-dropdown-content langs-dropdown-menu">
                <ul class="lang-list"><a class="lang-link lang-ar" href="/ar/posts/alpine"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn" href="/bn/posts/alpine"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl" href="/nl/posts/alpine"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en" href="/posts/alpine"><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl" href="/tl/posts/alpine"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr" href="/fr/posts/alpine"><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de" href="/de/posts/alpine"><span class="flag flag-de"></span>German</a><a class="lang-link lang-el" href="/el/posts/alpine"><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi" href="/hi/posts/alpine"><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it" href="/it/posts/alpine"><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja" href="/ja/posts/alpine"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw" href="/jw/posts/alpine"><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko" href="/ko/posts/alpine"><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms" href="/ms/posts/alpine"><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh" href="/zh/posts/alpine"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl" href="/pl/posts/alpine"><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt" href="/pt/posts/alpine"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa" href="/pa/posts/alpine"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro" href="/ro/posts/alpine"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru" href="/ru/posts/alpine"><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es" href="/es/posts/alpine"><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv" href="/sv/posts/alpine"><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th" href="/th/posts/alpine"><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr" href="/tr/posts/alpine"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk" href="/uk/posts/alpine"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur" href="/ur/posts/alpine"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi" href="/vi/posts/alpine"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu" href="/zu/posts/alpine"><span class="flag flag-za"></span>Zulu</a></ul>
            </div>
        </button>
    </li>
</ul>

        </div><button type="button" name="Website Menu" class="ham"><i class=
        "fas fa-bars ham-icon"></i></button>
        <div class="vert">
          <ul>
    <li class="lunrSearch masthead__menu-item hvr-outline-in"><form class="lunrSearchForm" name="lunrSearchForm">
<button title="Search Website" class="search-button" type="submit" value="Search" formaction="/search/index.html">
    <i class= "fas fa-search menu-icons"></i></button>
<input class="search-input" name="q" placeholder="Search&#8230;" type="text">
</form>
</li>
    <li class="masthead__menu-item hvr-outline-in">
        <a href="/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i>posts</a>
    </li>
    <li class="masthead__menu-item hvr-outline-in">
        <a href="/media/" title="Video and audio content from streaming websites."><i class="fas fa-tv menu-icons"></i>media</a>
    </li>
    <li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language">
        <button type="button" title="Languages Menu" class="langs-dropdown-wrapper">
            <i class="fas fa-language menu-icons"></i> Lang
            <div class="langs-dropdown-content langs-dropdown-menu">
                <ul class="lang-list"><a class="lang-link lang-ar" href="/ar/posts/alpine"><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn" href="/bn/posts/alpine"><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl" href="/nl/posts/alpine"><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en" href="/posts/alpine"><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl" href="/tl/posts/alpine"><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr" href="/fr/posts/alpine"><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de" href="/de/posts/alpine"><span class="flag flag-de"></span>German</a><a class="lang-link lang-el" href="/el/posts/alpine"><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi" href="/hi/posts/alpine"><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it" href="/it/posts/alpine"><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja" href="/ja/posts/alpine"><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw" href="/jw/posts/alpine"><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko" href="/ko/posts/alpine"><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms" href="/ms/posts/alpine"><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh" href="/zh/posts/alpine"><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl" href="/pl/posts/alpine"><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt" href="/pt/posts/alpine"><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa" href="/pa/posts/alpine"><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro" href="/ro/posts/alpine"><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru" href="/ru/posts/alpine"><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es" href="/es/posts/alpine"><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv" href="/sv/posts/alpine"><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th" href="/th/posts/alpine"><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr" href="/tr/posts/alpine"><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk" href="/uk/posts/alpine"><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur" href="/ur/posts/alpine"><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi" href="/vi/posts/alpine"><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu" href="/zu/posts/alpine"><span class="flag flag-za"></span>Zulu</a></ul>
            </div>
        </button>
    </li>
</ul>

        </div>
      </nav>
    </div>
  </div>
</div>

    
            <div>
            <h1 id="title"><a href="/posts/alpine">Alpine</a></h1>
            <blockquote id="page-description" style="font-style: italic;">
                Pine, Alpine linux based on OSTree
            </blockquote>
            </div>
          


    <!-- Content appended here -->
<div class="franklin-content">
<p>Choosing what <a href="https://en.wikipedia.org/wiki/Operating_system">OS</a> runs on your servers is a matter of convenience and familiarity. Convenience means you want something that gives you as less troubles as possible, familiarity means that you would prefer <em>not</em> to learn additional things if you don&#39;t have to.</p>
<p>My servers are <a href="https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets">pets</a> so I am ok manually issuing a few commands every once in a while, and don&#39;t require complete automation.</p>
<p>After trying out <a href="https://en.wikipedia.org/wiki/Container_Linux">CoreOS</a> for a year I switched to my own simplified <a href="https://en.wikipedia.org/wiki/Linux_distribution">distro</a> based on alpine and <a href="https://en.wikipedia.org/wiki/OSTree">ostree</a>.</p>
<h2 id="goals"><a href="#goals" class="header-anchor">Goals</a></h2>
<p>This version of alpine takes cues from <a href="https://kinvolk.io/flatcar-container-linux/">flatcar</a> and <a href="https://www.projectatomic.io/">project-atomic</a> and is supposed to be installed as a read-only root file-system with updates happening atomically, that is, either they succeed or the system swaps back to the previous state. For this to be possible to system has to always have at least <strong>two snapshots</strong> of the released file-system version, available on storage.</p>
<h2 id="targets"><a href="#targets" class="header-anchor">Targets</a></h2>
<p>In what environments will the system run? I targeted <a href="https://en.wikipedia.org/wiki/OpenVZ">OVZ</a> and &#91;KVM&#93;, but in general you can say <em>containers</em> and <em>virtual machines</em> with the main difference being that containers don&#39;t run their own kernel, in particular they don&#39;t have a boot process, they call directly into the <em>init</em> system &#40;which for example in a <code><a href="https://en.wikipedia.org/wiki/Docker_&#40;software&#41;">Dockerfile</a></code> it would be defined by the <code>CMD</code> or <code>ENTRYPOINT</code> statements&#41;, which is responsible to manage the tree of prcesses that will keep the container running &#40;just like a normal session, if the init process dies, the container terminates&#41;. Also containers can&#39;t configure system knobs, and can have additional restrictions on capabilities.</p>
<h2 id="bisecting_the_build_process"><a href="#bisecting_the_build_process" class="header-anchor">Bisecting the build process</a></h2>
<p>How is the image built?</p>
<h3 id="dependencies"><a href="#dependencies" class="header-anchor">Dependencies</a></h3>
<p>The <code>prepare.sh</code> script handles dependencies, most of which are the packages to offer common cli tools like <code>coreutils</code>, <code>util-linux</code>, <code>binutils</code>, utilities to operate with block devices like <code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code> and file systems with <code>xfsprogs</code> and <code>e2fsprogs</code>. The <code>squashfs-tools</code> package is used at the end to compress the built root file system. A <code>glib</code> compatibility package is also installed by default because alpine is based on <code><a href="https://musl.libc.org/">musl</a></code>, the compatibility package works by providing some libraries built against .</p>
<h3 id="the_tree"><a href="#the_tree" class="header-anchor">The tree</a></h3>
<p>File trees for both VMs and containers are build with respectively <code>make.sh</code> and <code>make_ovz.sh</code>. This is a simplified description of the steps</p>
<ul>
<li><p>set the version to be built according to repository tag</p>
</li>
<li><p>create a directory for the new tree and clear the environment</p>
</li>
<li><p>create base target directories and directories required by ostree, like <code>sysroot</code></p>
</li>
<li><p>create symlinks to conform with the <a href="https://www.freedesktop.org/software/systemd/man/file-hierarchy.html">filesystem hierarchy standard</a></p>
</li>
<li><p>copy custom services and custom configs</p>
</li>
<li><p>setup chroot with mounted system directories</p>
</li>
<li><p>bootstrap an alpine rootfs with base packages</p>
</li>
<li><p>apply minimal configuration to the rootfs like credentials, timezone, hostname.</p>
</li>
<li><p>copy services to be started by init</p>
</li>
<li><p>setup the boot configuration with the specified kernel image</p>
</li>
<li><p>optionally add custom kernel modules</p>
</li>
<li><p>perform cleanups</p>
</li>
<li><p>commit the rootfs <sup id="fnref:rootfs"><a href="#fndef:rootfs" class="fnref">[1]</a></sup> to the ostree repository</p>
</li>
</ul>
<p>For containers, the sequence is the same, but configuration changes, because with a system not booted from a <a href="https://en.wikipedia.org/wiki/Bootloader">bootloader</a> ostree has troubles verifying the environment, we have to apply some <a href="https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73">workarounds</a> and setup some devices which are usually handled by the <a href="https://en.wikipedia.org/wiki/Initial_ramdisk">initramfs</a> step. This is how <a href="https://en.wikipedia.org/wiki/OpenVZ">OVZ</a> or <a href="https://en.wikipedia.org/wiki/LXC">LXC</a> templates are configured.</p>
<h3 id="packaging"><a href="#packaging" class="header-anchor">Packaging</a></h3>
<p>Once we have our ostree committed files tree <code>build.sh</code> or <code>build-update.sh</code> takes care of producing the artifact that will be distributed. The difference between the scripts is that the update version starts from a previous ostree repository, and <em>also</em> produces a delta artifact that a running system can apply on its ostree instance to perform upgrades. This is a simplified description of the build steps</p>
<ul>
<li><p>if new build</p>
<ul>
<li><p>create new partitions on a new image mounted as a loop device</p>
</li>
</ul>
</li>
<li><p>else</p>
<ul>
<li><p>mount sysroot and boot partitions of previous build</p>
</li>
</ul>
</li>
<li><p>clean up previous ostree deployments &#40;link farms&#41; on mounted build</p>
</li>
<li><p>commit new built tree on mounted build</p>
</li>
<li><p>verify integrity and checksums</p>
</li>
<li><p>create new delta for upgrades</p>
</li>
<li><p>execute ostree deployment to regenerate boot configuration</p>
</li>
<li><p>remove old ostree commits</p>
</li>
<li><p>verify boot partition integrity</p>
</li>
<li><p>unmount new updated build image</p>
</li>
<li><p>generate image checksum and compress it &#40;with <code>squashfs</code> for containers&#41;</p>
</li>
</ul>
<p>The partitions configuration is applied with a fdisk <code>layout.cfg</code> file which defines the partition sizes, we have one partition for the rootfs &#40;<code>~430M</code>&#41;, the boot partition &#40;<code>~40M</code>&#41; and a swap partition &#40;<code>~40M</code>&#41;. With containers with just skip mounting the previous build over a loop device, and just pull the new ostree commit over the old &#40;extracted&#41; ostree repository.</p>
<h2 id="customizations"><a href="#customizations" class="header-anchor">Customizations</a></h2>
<p>What am I bundling in this image &#40;apart from installed packages&#41;?</p>
<ul>
<li><p>A small lib in <code>functions.sh</code> for common tasks executed within the shell</p>
</li>
<li><p>ostree based upgrade scripts with locking mechanism based on KV store</p>
</li>
<li><p>monitoring scripts for IO both local &#40;<code>iomon</code>&#41; and network &#40;<code>tcpmon</code>&#41;</p>
</li>
<li><p>setup scripts for container runtimes other than <code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></p>
</li>
</ul>
<p>What used to be and isn&#39;t anymore</p>
<ul>
<li><p><code>sup</code>: <a href="https://github.com/pressly/sup/">Sup</a> was used for orchestration &#40;deploy containers&#41; and configuration of the host machine, but then I switched to <a href="https://www.ansible.com/">ansible</a> because there were long standing bugs in sup that were lacking a fix, I did not choose ansible from the start because I didn&#39;t want a python dependency to install on every server, eventually I settled with a secondary alpine <a href="https://en.wikipedia.org/wiki/Chroot">chroot</a> on the host machines, located in <code>/opt/alp</code> were I install additional less critical software. Today, however, I would again switch from ansible to <a href="https://github.com/Fizzadar/pyinfra">pyinfra</a>, because</p>
<ul>
<li><p>it is python without boilerplate &#40;ansible has pseudo <code>DSL</code> that causes more headaches than the ones it solves&#41;</p>
</li>
<li><p>it executes its recipes with plain ssh commands, so there isn&#39;t a python dependency requirement on target hosts</p>
</li>
</ul>
</li>
<li><p><code>containerpilot</code>: The use case for container pilot is to manage complex dependencies between containers without shell scripts...it stopped getting updates from <a href="https://github.com/joyent/containerpilot">joyent</a> and was put in maintenance mode, I also didn&#39;t like the memory requirements and memory usage would happen to constantly increase for long period of uptime. I switched it for simple shell scripts with <a href="https://www.consul.io/">consul</a>, I might look into more proper alternatives if shell scripts start to grow too much. Heavier solutions like <a href="https://kubernetes.io/">kubernetes</a>, <a href="https://docs.docker.com/engine/swarm/">swarm</a> or <a href="https://www.nomadproject.io/">nomad</a> were discarded from the get-go.</p>
</li>
<li><p><code>beegfs</code>: I used to ship the kernel module necessary for <a href="https://en.wikipedia.org/wiki/BeeGFS">beegfs</a> but after a while it broke compatibility, and the fact that there wasn&#39;t a properly supported <a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace">fuse</a> module made be drop it altogether, I am currently not running a &#91;DFS&#93; on my servers, but the possibility of having a ready to go file-system to plug in a network is still appealing.</p>
</li>
<li><p></p>
</li>
</ul>
<h2 id="installation"><a href="#installation" class="header-anchor">Installation</a></h2>
<p>To install the image you can either upload it to the hosting provider and install from VNC, in case of virtual machines, but I usually hijack an existing installation, because it is always possible, well as long I have tested the setup script against version of the linux distribution, generally I use debian-8 or ubuntu-14, haven&#39;t tested other ones since these I have always found these to be available. The setup steps follows</p>
<ul>
<li><p>ensure https support for downloads</p>
</li>
<li><p>download a busybox version</p>
</li>
<li><p>install a busybox link-farm</p>
</li>
<li><p>determine ipv4/ipv6 addresses for network config</p>
</li>
<li><p>ensure chroot capabilities</p>
</li>
<li><p>download the pine image and extract it</p>
</li>
<li><p>if VM</p>
<ul>
<li><p>flash over target device</p>
</li>
<li><p>mount over a loop device</p>
</li>
</ul>
</li>
<li><p>write the local network configuration over the <em>to be flashed</em> rootfs</p>
</li>
<li><p>if container</p>
<ul>
<li><p>copy the init service &#40;for containers&#41; over the main root mount point <code>/sbin/init</code></p>
</li>
</ul>
</li>
<li><p>if VM</p>
<ul>
<li><p>partition the left over disk with standard &#40;<code>xfs</code>&#41; partitions</p>
</li>
<li><p>unmount</p>
</li>
<li><p>verify partitions integrity</p>
</li>
</ul>
</li>
<li><p>reboot</p>
</li>
</ul>
<h2 id="conclusions"><a href="#conclusions" class="header-anchor">Conclusions</a></h2>
<p>I made <a href="https://github.com/untoreh/pine">pine</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href="https://en.wikipedia.org/wiki/Network_address_translation">NATed</a> servers which tend to offer ultra-low resources, actually I have a box running with just <code>64M</code> of RAM, and still have all the features I need.</p>
<p><table class="fndef" id="fndef:rootfs">
    <tr>
        <td class="fndef-backref"><a href="#fnref:rootfs">[1]</a></td>
        <td class="fndef-content">root file system</td>
    </tr>
</table>
</p>
<div id="post-tags-list">
Post Tags:
<span class="post-tag"><a href="https://www.unto.re/tag/tools" style=""> tools </a>, </span>
<span class="post-tag"><a href="https://www.unto.re/tag/about" style=""> about </a></span></div>
<div class="page-foot">
    
    <div class="copyright">
        December 11, 2022
    </div>
        <script src="https://utteranc.es/client.js"
        repo="untoreh/untoreh.github.io"
        issue-term="pathname"
        label="Comment"
        crossorigin="anonymous"
        async>
    </script>

    
</div>
</div><div class="page__footer">
    <footer>
        <!-- start custom footer snippets -->
        <!-- end custom footer snippets -->
        <div class="page__footer-copyright">
            Â© untoreh - Powered by <a href=
                                                     "https://github.com/tlienart/Franklin.jl">Franklin</a>
        </div>
        <div class="page__footer-links">
            -
            <ul>
                <li> <a href="/sitemap.xml">Sitemap</a> </li>
                |
                <li> <a href="/tag">Tags</a> </li>
                |
                <li> <a href="https://www.unto.re/tag/feed.xml">RSS</a></li>
            </ul>
        </div>
        <ul class="author__wrap">
            <li class="author__urls social-icons">
    <a title="Twitter link" href="https://twitter.com/untoreh" rel=
    "nofollow noopener noreferrer"><i class=
    "fab fa-fw fa-twitter-square" aria-hidden="true"></i></a>
</li>
<li class="author__urls social-icons">
    <a title="GitHub link" href="https://github.com/untoreh" rel=
    "nofollow noopener noreferrer"><i class="fab fa-fw fa-github"
    aria-hidden="true"></i></a>
</li>
<li class="author__urls social-icons">
    <a title="email" href="mailto:contact@unto.re"><i class=
    "fas fa-envelope"></i></a>
</li>
<li><script type="application/ld+json" id="" class="">{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></li>

        </ul>
    </footer>
</div>
<!-- ensure font-awesome script has "fa" id for parsing purposes -->
<script id="fa" defer src=
            "https://use.fontawesome.com/releases/v5.8.2/js/all.js" integrity=
            "sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH"
        crossorigin="anonymous"></script>



<script src="/libs/colors.js"></script>
<script src="/libs/menu.js"></script>
<script defer src="/libs/lunr/lunr.min.js"></script>
</body>
</html>
