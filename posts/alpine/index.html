<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=en><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/posts/alpine rel=canonical><link title="untoreh's site"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/posts/alpine rel=amphtml><meta content=Alpine property=og:title><meta content=article property=og:type><meta content=https://www.unto.re/posts/alpine property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="Pine, Alpine linux based on OSTree"property=og:description><meta content="untoreh's site"property=og:site_name><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2022,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Pine, Alpine linux based on OSTree","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-19","dateCreated":"April 24, 2021","@id":"https://www.unto.re/posts/alpine/index.html","dateModified":"2021-04-19","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-04-19","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/alpine/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/alpine","name":"Alpine","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title>Alpine</title><meta content="Pine, Alpine linux based on OSTree"name=description><script src=/libs/load.js></script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=untoreh-light class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Search Website"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/posts/><i class="fas fa-pen menu-icons"></i>posts</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/media/><i class="fas fa-tv menu-icons"></i>media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Search Website"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/posts/><i class="fas fa-pen menu-icons"></i>posts</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/media/><i class="fas fa-tv menu-icons"></i>media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/posts/alpine>Alpine</a></h1><blockquote id=page-description style=font-style:italic>Pine, Alpine linux based on OSTree</blockquote></div><div class=franklin-content><p>Choosing what <a href=https://en.wikipedia.org/wiki/Operating_system>OS</a> runs on your servers is a matter of convenience and familiarity. Convenience means you want something that gives you as less troubles as possible, familiarity means that you would prefer <em>not</em> to learn additional things if you don't have to.<p>My servers are <a href=https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets>pets</a> so I am ok manually issuing a few commands every once in a while, and don't require complete automation.<p>After trying out <a href=https://en.wikipedia.org/wiki/Container_Linux>CoreOS</a> for a year I switched to my own simplified <a href=https://en.wikipedia.org/wiki/Linux_distribution>distro</a> based on alpine and <a href=https://en.wikipedia.org/wiki/OSTree>ostree</a>.<h2 id=goals><a class=header-anchor href=#goals>Goals</a></h2><p>This version of alpine takes cues from <a href=https://kinvolk.io/flatcar-container-linux/>flatcar</a> and <a href=https://www.projectatomic.io/>project-atomic</a> and is supposed to be installed as a read-only root file-system with updates happening atomically, that is, either they succeed or the system swaps back to the previous state. For this to be possible to system has to always have at least <strong>two snapshots</strong> of the released file-system version, available on storage.<h2 id=targets><a class=header-anchor href=#targets>Targets</a></h2><p>In what environments will the system run? I targeted <a href=https://en.wikipedia.org/wiki/OpenVZ>OVZ</a> and [KVM], but in general you can say <em>containers</em> and <em>virtual machines</em> with the main difference being that containers don't run their own kernel, in particular they don't have a boot process, they call directly into the <em>init</em> system (which for example in a <code><a href=https://en.wikipedia.org/wiki/Docker_(software)>Dockerfile</a></code> it would be defined by the <code>CMD</code> or <code>ENTRYPOINT</code> statements), which is responsible to manage the tree of prcesses that will keep the container running (just like a normal session, if the init process dies, the container terminates). Also containers can't configure system knobs, and can have additional restrictions on capabilities.<h2 id=bisecting_the_build_process><a class=header-anchor href=#bisecting_the_build_process>Bisecting the build process</a></h2><p>How is the image built?<h3 id=dependencies><a class=header-anchor href=#dependencies>Dependencies</a></h3><p>The <code>prepare.sh</code> script handles dependencies, most of which are the packages to offer common cli tools like <code>coreutils</code>, <code>util-linux</code>, <code>binutils</code>, utilities to operate with block devices like <code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code> and file systems with <code>xfsprogs</code> and <code>e2fsprogs</code>. The <code>squashfs-tools</code> package is used at the end to compress the built root file system. A <code>glib</code> compatibility package is also installed by default because alpine is based on <code><a href=https://musl.libc.org/>musl</a></code>, the compatibility package works by providing some libraries built against .<h3 id=the_tree><a class=header-anchor href=#the_tree>The tree</a></h3><p>File trees for both VMs and containers are build with respectively <code>make.sh</code> and <code>make_ovz.sh</code>. This is a simplified description of the steps<ul><li><p>set the version to be built according to repository tag</p><li><p>create a directory for the new tree and clear the environment</p><li><p>create base target directories and directories required by ostree, like <code>sysroot</code></p><li><p>create symlinks to conform with the <a href=https://www.freedesktop.org/software/systemd/man/file-hierarchy.html>filesystem hierarchy standard</a></p><li><p>copy custom services and custom configs</p><li><p>setup chroot with mounted system directories</p><li><p>bootstrap an alpine rootfs with base packages</p><li><p>apply minimal configuration to the rootfs like credentials, timezone, hostname.</p><li><p>copy services to be started by init</p><li><p>setup the boot configuration with the specified kernel image</p><li><p>optionally add custom kernel modules</p><li><p>perform cleanups</p><li><p>commit the rootfs <sup id=fnref:rootfs><a class=fnref href=#fndef:rootfs>[1]</a></sup> to the ostree repository</p></ul><p>For containers, the sequence is the same, but configuration changes, because with a system not booted from a <a href=https://en.wikipedia.org/wiki/Bootloader>bootloader</a> ostree has troubles verifying the environment, we have to apply some <a href=https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73>workarounds</a> and setup some devices which are usually handled by the <a href=https://en.wikipedia.org/wiki/Initial_ramdisk>initramfs</a> step. This is how <a href=https://en.wikipedia.org/wiki/OpenVZ>OVZ</a> or <a href=https://en.wikipedia.org/wiki/LXC>LXC</a> templates are configured.<h3 id=packaging><a class=header-anchor href=#packaging>Packaging</a></h3><p>Once we have our ostree committed files tree <code>build.sh</code> or <code>build-update.sh</code> takes care of producing the artifact that will be distributed. The difference between the scripts is that the update version starts from a previous ostree repository, and <em>also</em> produces a delta artifact that a running system can apply on its ostree instance to perform upgrades. This is a simplified description of the build steps<ul><li><p>if new build</p> <ul><li><p>create new partitions on a new image mounted as a loop device</p></ul><li><p>else</p> <ul><li><p>mount sysroot and boot partitions of previous build</p></ul><li><p>clean up previous ostree deployments (link farms) on mounted build</p><li><p>commit new built tree on mounted build</p><li><p>verify integrity and checksums</p><li><p>create new delta for upgrades</p><li><p>execute ostree deployment to regenerate boot configuration</p><li><p>remove old ostree commits</p><li><p>verify boot partition integrity</p><li><p>unmount new updated build image</p><li><p>generate image checksum and compress it (with <code>squashfs</code> for containers)</p></ul><p>The partitions configuration is applied with a fdisk <code>layout.cfg</code> file which defines the partition sizes, we have one partition for the rootfs (<code>~430M</code>), the boot partition (<code>~40M</code>) and a swap partition (<code>~40M</code>). With containers with just skip mounting the previous build over a loop device, and just pull the new ostree commit over the old (extracted) ostree repository.<h2 id=customizations><a class=header-anchor href=#customizations>Customizations</a></h2><p>What am I bundling in this image (apart from installed packages)?<ul><li><p>A small lib in <code>functions.sh</code> for common tasks executed within the shell</p><li><p>ostree based upgrade scripts with locking mechanism based on KV store</p><li><p>monitoring scripts for IO both local (<code>iomon</code>) and network (<code>tcpmon</code>)</p><li><p>setup scripts for container runtimes other than <code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></p></ul><p>What used to be and isn't anymore<ul><li><p><code>sup</code>: <a href=https://github.com/pressly/sup/>Sup</a> was used for orchestration (deploy containers) and configuration of the host machine, but then I switched to <a href=https://www.ansible.com/>ansible</a> because there were long standing bugs in sup that were lacking a fix, I did not choose ansible from the start because I didn't want a python dependency to install on every server, eventually I settled with a secondary alpine <a href=https://en.wikipedia.org/wiki/Chroot>chroot</a> on the host machines, located in <code>/opt/alp</code> were I install additional less critical software. Today, however, I would again switch from ansible to <a href=https://github.com/Fizzadar/pyinfra>pyinfra</a>, because</p> <ul><li><p>it is python without boilerplate (ansible has pseudo <code>DSL</code> that causes more headaches than the ones it solves)</p><li><p>it executes its recipes with plain ssh commands, so there isn't a python dependency requirement on target hosts</p></ul><li><p><code>containerpilot</code>: The use case for container pilot is to manage complex dependencies between containers without shell scripts...it stopped getting updates from <a href=https://github.com/joyent/containerpilot>joyent</a> and was put in maintenance mode, I also didn't like the memory requirements and memory usage would happen to constantly increase for long period of uptime. I switched it for simple shell scripts with <a href=https://www.consul.io/>consul</a>, I might look into more proper alternatives if shell scripts start to grow too much. Heavier solutions like <a href=https://kubernetes.io/>kubernetes</a>, <a href=https://docs.docker.com/engine/swarm/>swarm</a> or <a href=https://www.nomadproject.io/>nomad</a> were discarded from the get-go.</p><li><p><code>beegfs</code>: I used to ship the kernel module necessary for <a href=https://en.wikipedia.org/wiki/BeeGFS>beegfs</a> but after a while it broke compatibility, and the fact that there wasn't a properly supported <a href=https://en.wikipedia.org/wiki/Filesystem_in_Userspace>fuse</a> module made be drop it altogether, I am currently not running a [DFS] on my servers, but the possibility of having a ready to go file-system to plug in a network is still appealing.</p><li><p></p></ul><h2 id=installation><a class=header-anchor href=#installation>Installation</a></h2><p>To install the image you can either upload it to the hosting provider and install from VNC, in case of virtual machines, but I usually hijack an existing installation, because it is always possible, well as long I have tested the setup script against version of the linux distribution, generally I use debian-8 or ubuntu-14, haven't tested other ones since these I have always found these to be available. The setup steps follows<ul><li><p>ensure https support for downloads</p><li><p>download a busybox version</p><li><p>install a busybox link-farm</p><li><p>determine ipv4/ipv6 addresses for network config</p><li><p>ensure chroot capabilities</p><li><p>download the pine image and extract it</p><li><p>if VM</p> <ul><li><p>flash over target device</p><li><p>mount over a loop device</p></ul><li><p>write the local network configuration over the <em>to be flashed</em> rootfs</p><li><p>if container</p> <ul><li><p>copy the init service (for containers) over the main root mount point <code>/sbin/init</code></p></ul><li><p>if VM</p> <ul><li><p>partition the left over disk with standard (<code>xfs</code>) partitions</p><li><p>unmount</p><li><p>verify partitions integrity</p></ul><li><p>reboot</p></ul><h2 id=conclusions><a class=header-anchor href=#conclusions>Conclusions</a></h2><p>I made <a href=https://github.com/untoreh/pine>pine</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href=https://en.wikipedia.org/wiki/Network_address_translation>NATed</a> servers which tend to offer ultra-low resources, actually I have a box running with just <code>64M</code> of RAM, and still have all the features I need.<p><table class=fndef id=fndef:rootfs><tr><td class=fndef-backref><a href=#fnref:rootfs>[1]</a><td class=fndef-content>root file system</table><p><div id=post-tags-list>Post Tags: <span class=post-tag><a href=https://www.unto.re/tag/tools> tools </a>, </span><span class=post-tag><a href=https://www.unto.re/tag/about> about </a></span></div><div class=page-foot><div class=copyright>April 19, 2021</div><script async crossorigin=anonymous issue-term=pathname label=Comment repo=untoreh/untoreh.github.io src=https://utteranc.es/client.js></script></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - Powered by <a href=https://github.com/tlienart/Franklin.jl>Franklin</a></div><div class=page__footer-links>- <ul><li><a href=/sitemap.xml>Sitemap</a></li> | <li><a href=/tag>Tags</a></li> | <li><a href=https://www.unto.re/tag/feed.xml>RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>