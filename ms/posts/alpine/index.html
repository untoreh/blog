<!doctypehtml><html prefix="og: https://ogp.me/ns# article: http://ogp.me/ns/article# website: http://ogp.me/ns/website#"lang=ms><meta charset=UTF-8><meta content=width=device-width,initial-scale=1 name=viewport><link href=https://www.unto.re/ms/posts/alpine/ rel=canonical><link title="laman web untoreh"href=https://www.unto.re/feed.xml rel=alternate type=application/rss+xml><link href=https://www.unto.re/amp/ms/posts/alpine/ rel=amphtml><meta content=Alpine property=og:title><meta content=article property=og:type><meta content=https://www.unto.re/posts/alpine property=og:url><meta content=https://www.unto.re/assets/appa.png property=og:image><meta content="Pine, Alpine linux based on OSTree"property=og:description><meta content="untoreh's site"property=og:site_name><meta content=English property=og:locale><meta content=English property=og:locale:alternate><meta content=German property=og:locale:alternate><meta content=Italian property=og:locale:alternate><meta content="Mandarin Chinese"property=og:locale:alternate><meta content=Spanish property=og:locale:alternate><meta content=Hindi property=og:locale:alternate><meta content=Arabic property=og:locale:alternate><meta content=Portuguese property=og:locale:alternate><meta content=Bengali property=og:locale:alternate><meta content=Russian property=og:locale:alternate><meta content=Japanese property=og:locale:alternate><meta content=Punjabi property=og:locale:alternate><meta content=Javanese property=og:locale:alternate><meta content=Vietnamese property=og:locale:alternate><meta content=French property=og:locale:alternate><meta content=Urdu property=og:locale:alternate><meta content=Turkish property=og:locale:alternate><meta content=Polish property=og:locale:alternate><meta content=Ukranian property=og:locale:alternate><meta content=Dutch property=og:locale:alternate><meta content=Greek property=og:locale:alternate><meta content=Swedish property=og:locale:alternate><meta content=Zulu property=og:locale:alternate><meta content=Romanian property=og:locale:alternate><meta content=Malay property=og:locale:alternate><meta content=Korean property=og:locale:alternate><meta content=Thai property=og:locale:alternate><meta content=Filipino property=og:locale:alternate><meta content=summary name=twitter:card><meta content=@untoreh name=twitter:creator><script type=application/ld+json>{"copyrightHolder":"untoreh","@id":"https://www.unto.re","url":"https://www.unto.re","copyrightYear":2021,"@context":"https://schema.org/","image":"/assets/appa.png","@type":"WebSite"}</script><script id=ldj-webpage type=application/ld+json>{"audience":"cool people","url":"https://www.unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","description":"Pine, Alpine linux based on OSTree","author":{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"},"mentions":[],"@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"2021-04-19","dateCreated":"April 24, 2021","@id":"https://www.unto.re/posts/alpine/index.html","dateModified":"2021-04-19","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"creativeWorkStatus":"Published","publisher":{"url":"https://www.unto.re","sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"contactPoint":{"contactType":"info","email":"contact@unto.re","@type":"ContactPoint","telephone":""},"logo":"/assets/appa-60px.png","name":"untoreh's site","@type":"Organization"},"datePublished":"2021-04-19","inLanguage":"English","image":"/assets/appa.png","name":"","mainEntityOfPage":{"@id":"https://www.unto.re/posts/alpine/index.html","@type":"Article"}}</script><script id=ldj-breadcrumbs type=application/ld+json>{"itemListElement":[{"position":1,"item":"https://www.unto.re","name":"Home","@type":"ListItem"},{"position":2,"item":"/posts/","name":"Posts List","@type":"ListItem"},{"position":3,"item":"https://www.unto.re/posts/alpine","name":"Alpine","@type":"ListItem"}],"@type":"BreadcrumbList"}</script><link href=/css/franklin.css rel=stylesheet><link href=/css/main.css rel=stylesheet><link href=/css/menu.css rel=stylesheet><link href=/css/pages.css rel=stylesheet><link href=/css/lunr.css rel=stylesheet><link href=/css/footer.css rel=stylesheet><link href=/css/responsive.css rel=stylesheet><link href=/css/animations.css rel=stylesheet><link href=/css/docco.css rel=stylesheet><link href=/css/flags-sprite.css rel=stylesheet><link href=/assets/favicon.png rel=icon type=image/x-icon><link href=/assets/favicon.svg rel=icon type=image/svg+xml><title> Alpine</title><meta content="Pine, Alpine linux based on OSTree"name=description><script src=/libs/load.js></script><script type=application/ld+json>{"url":"/ms/posts/alpine/","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"mentions":null,"description":"","@context":"https://schema.org","accessModeSufficient":{"itemListElement":["textual","visual"],"@type":"itemList"},"@type":"https://schema.org/WebPage","lastReviewed":"","dateCreated":"","@id":"/ms/posts/alpine/","dateModified":"","keywords":[],"creativeWorkStatus":"Published","translator":{"url":"http://google.translate.com","name":"Google Translate","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"https://www.unto.re/posts/alpine/"},"datePublished":"2021-11-16T18:35:35.874","inLanguage":"ms","name":"","mainEntityOfPage":{"@id":"/ms/posts/alpine/","@type":"Article"}}</script><body><div class=masthead><div class=masthead__menu__inner-wrap><div class=masthead__menu><a title="untoreh's site"class=site-title href=/ms/></a><div class=author__wrap><script type=application/ld+json>{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"email":"contact@unto.re","name":"untoreh","@type":"https://schema.org/Person","image":"/assets/appa.png"}</script><ul><li class=author__avatar onclick=toggleTheme()><img alt=" cahaya takoreh"class=flip-front src=/assets/appa.png><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></div><nav id=site-nav><div class=horiz><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Cari Laman Web"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Searchâ€¦></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ms/posts/><i class="fas fa-pen menu-icons"></i> jawatan</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ms/media/><i class="fas fa-tv menu-icons"></i> media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div><button name="Website Menu"class=ham type=button><i class="fas fa-bars ham-icon"></i></button><div class=vert><ul><li class="lunrSearch masthead__menu-item hvr-outline-in"><form class=lunrSearchForm name=lunrSearchForm><button title="Cari Laman Web"class=search-button formaction=/search/index.html value=Search><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder=Searchâ€¦></form><li class="masthead__menu-item hvr-outline-in"><a title="All the articles that I have written"href=/ms/posts/><i class="fas fa-pen menu-icons"></i> jawatan</a><li class="masthead__menu-item hvr-outline-in"><a title="Video and audio content from streaming websites."href=/ms/media/><i class="fas fa-tv menu-icons"></i> media</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn"title="Change website's language"><button title="Languages Menu"class=langs-dropdown-wrapper type=button><i class="fas fa-language menu-icons"></i> Lang <div class="langs-dropdown-content langs-dropdown-menu"><ul class=lang-list><a class="lang-link lang-ar"href=/ar/posts/alpine><span class="flag flag-sa"></span>Arabic</a><a class="lang-link lang-bn"href=/bn/posts/alpine><span class="flag flag-bd"></span>Bengali</a><a class="lang-link lang-nl"href=/nl/posts/alpine><span class="flag flag-nl"></span>Dutch</a><a class="lang-link lang-en"href=/posts/alpine><span class="flag flag-gb"></span>English</a><a class="lang-link lang-tl"href=/tl/posts/alpine><span class="flag flag-ph"></span>Filipino</a><a class="lang-link lang-fr"href=/fr/posts/alpine><span class="flag flag-fr"></span>French</a><a class="lang-link lang-de"href=/de/posts/alpine><span class="flag flag-de"></span>German</a><a class="lang-link lang-el"href=/el/posts/alpine><span class="flag flag-gr"></span>Greek</a><a class="lang-link lang-hi"href=/hi/posts/alpine><span class="flag flag-in"></span>Hindi</a><a class="lang-link lang-it"href=/it/posts/alpine><span class="flag flag-it"></span>Italian</a><a class="lang-link lang-ja"href=/ja/posts/alpine><span class="flag flag-jp"></span>Japanese</a><a class="lang-link lang-jw"href=/jw/posts/alpine><span class="flag flag-id"></span>Javanese</a><a class="lang-link lang-ko"href=/ko/posts/alpine><span class="flag flag-kr"></span>Korean</a><a class="lang-link lang-ms"href=/ms/posts/alpine><span class="flag flag-ms"></span>Malay</a><a class="lang-link lang-zh"href=/zh/posts/alpine><span class="flag flag-cn"></span>Mandarin Chinese</a><a class="lang-link lang-pl"href=/pl/posts/alpine><span class="flag flag-pl"></span>Polish</a><a class="lang-link lang-pt"href=/pt/posts/alpine><span class="flag flag-pt"></span>Portuguese</a><a class="lang-link lang-pa"href=/pa/posts/alpine><span class="flag flag-in"></span>Punjabi</a><a class="lang-link lang-ro"href=/ro/posts/alpine><span class="flag flag-ro"></span>Romanian</a><a class="lang-link lang-ru"href=/ru/posts/alpine><span class="flag flag-ru"></span>Russian</a><a class="lang-link lang-es"href=/es/posts/alpine><span class="flag flag-es"></span>Spanish</a><a class="lang-link lang-sv"href=/sv/posts/alpine><span class="flag flag-se"></span>Swedish</a><a class="lang-link lang-th"href=/th/posts/alpine><span class="flag flag-th"></span>Thai</a><a class="lang-link lang-tr"href=/tr/posts/alpine><span class="flag flag-tr"></span>Turkish</a><a class="lang-link lang-uk"href=/uk/posts/alpine><span class="flag flag-ua"></span>Ukranian</a><a class="lang-link lang-ur"href=/ur/posts/alpine><span class="flag flag-pk"></span>Urdu</a><a class="lang-link lang-vi"href=/vi/posts/alpine><span class="flag flag-vn"></span>Vietnamese</a><a class="lang-link lang-zu"href=/zu/posts/alpine><span class="flag flag-za"></span>Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title><a href=/ms/posts/alpine> Alpine</a></h1><blockquote id=page-description style=font-style:italic>Pine, Alpine linux berdasarkan OSTree</blockquote></div><div class=franklin-content><p>Memilih apa<a href=https://en.wikipedia.org/wiki/Operating_system> OS</a> berjalan di pelayan anda adalah masalah kemudahan dan keakraban. Kemudahan bermaksud anda menginginkan sesuatu yang memberi anda masalah yang kurang mungkin, keakraban bermaksud bahawa anda lebih suka<em> tidak</em> untuk belajar perkara tambahan jika anda tidak perlu.<p>Pelayan saya adalah<a href=https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets> haiwan peliharaan</a>jadi saya ok mengeluarkan beberapa arahan secara manual sekali-sekala, dan tidak memerlukan automasi lengkap.<p>Setelah mencuba<a href=https://en.wikipedia.org/wiki/Container_Linux> CoreOS</a> selama setahun saya beralih ke yang dipermudahkan saya sendiri<a href=https://en.wikipedia.org/wiki/Linux_distribution> distro</a> berdasarkan alpine dan<a href=https://en.wikipedia.org/wiki/OSTree> ostree</a>.<h2 id=goals><a class=header-anchor href=#goals> Matlamat</a></h2><p>Versi alpine ini mengambil petunjuk dari<a href=https://kinvolk.io/flatcar-container-linux/> kereta flat</a> dan<a href=https://www.projectatomic.io/> projek-atomik</a> dan sepatutnya dipasang sebagai sistem fail root hanya baca dengan kemas kini berlaku secara atom, iaitu, sama ada ia berjaya atau sistem bertukar kembali ke keadaan sebelumnya. Untuk ini mungkin sistem mesti mempunyai sekurang-kurangnya<strong> dua gambar</strong> versi sistem fail yang dikeluarkan, tersedia dalam simpanan.<h2 id=targets><a class=header-anchor href=#targets> Sasaran</a></h2><p>Dalam persekitaran apa sistem akan dijalankan? Saya menyasarkan<a href=https://en.wikipedia.org/wiki/OpenVZ> OVZ</a> dan [KVM], tetapi secara umum anda boleh katakan<em> bekas</em> dan<em> mesin maya</em> dengan perbezaan utama ialah kontena tidak menjalankan kernel mereka sendiri, khususnya mereka tidak mempunyai proses boot, mereka memanggil terus ke<em> di dalamnya</em> sistem (yang misalnya dalam a<code><a href=https://en.wikipedia.org/wiki/Docker_(software)>Dockerfile</a></code> ia akan ditentukan oleh<code>CMD</code> atau<code>ENTRYPOINT</code> pernyataan), yang bertanggungjawab untuk menguruskan pokok proses yang akan memastikan wadah berjalan (seperti sesi biasa, jika proses init mati, kontena berakhir). Wadah juga tidak dapat mengkonfigurasi tombol sistem, dan boleh mempunyai batasan tambahan pada kemampuan.<h2 id=bisecting_the_build_process><a class=header-anchor href=#bisecting_the_build_process> Membelah dua proses membina</a></h2><p>Bagaimana imej dibina?<h3 id=dependencies><a class=header-anchor href=#dependencies> Kebergantungan</a></h3><p>The<code>prepare.sh</code> skrip menangani kebergantungan, yang kebanyakannya adalah pakej untuk menawarkan alat cli biasa seperti<code>coreutils</code>, <code>util-linux</code>, <code>binutils</code> , utiliti untuk beroperasi dengan peranti blok seperti<code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code> dan sistem fail dengan<code>xfsprogs</code> dan<code>e2fsprogs</code> . The<code>squashfs-tools</code> pakej digunakan pada akhir untuk memampatkan sistem fail root yang dibina. A<code>glib</code> pakej keserasian juga dipasang secara lalai kerana alpine berdasarkan<code><a href=https://musl.libc.org/>musl</a></code>, pakej keserasian berfungsi dengan menyediakan beberapa perpustakaan yang dibina.<h3 id=the_tree><a class=header-anchor href=#the_tree> Pokok</a></h3><p>Pokok fail untuk VM dan kontena dibina masing-masing<code>make.sh</code> dan<code>make_ovz.sh</code> . Ini adalah penerangan ringkas mengenai langkah-langkahnya<ul><li><p>tetapkan versi yang akan dibina mengikut tag repositori<li><p>buat direktori untuk pokok baru dan bersihkan persekitaran<li><p>buat direktori dan direktori sasaran asas yang diperlukan oleh ostree, seperti<code>sysroot</code><li><p>buat symlink untuk mematuhi<a href=https://www.freedesktop.org/software/systemd/man/file-hierarchy.html> standard hierarki sistem fail</a><li><p>salin perkhidmatan tersuai dan konfigurasi tersuai<li><p>persediaan chroot dengan direktori sistem yang dipasang<li><p>bootstrap rootfs alpine dengan pakej asas<li><p>gunakan konfigurasi minimum ke rootfs seperti kelayakan, zon waktu, nama host.<li><p>perkhidmatan salin untuk dimulakan oleh init<li><p>tetapkan konfigurasi boot dengan gambar kernel yang ditentukan<li><p>secara pilihan menambah modul kernel tersuai<li><p>melakukan pembersihan<li><p>lakukan rootfs<sup id=fnref:rootfs><a class=fnref href=#fndef:rootfs>[1]</a></sup> ke repositori ostree</ul><p>Untuk kontena, urutannya sama, tetapi konfigurasi berubah, kerana dengan sistem yang tidak di-boot dari a<a href=https://en.wikipedia.org/wiki/Bootloader> pemuat but</a> ostree mempunyai masalah dalam mengesahkan persekitaran, kami harus menerapkannya<a href=https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73> jalan penyelesaian</a> dan menyediakan beberapa peranti yang biasanya dikendalikan oleh<a href=https://en.wikipedia.org/wiki/Initial_ramdisk> initramfs</a> langkah. Inilah caranya<a href=https://en.wikipedia.org/wiki/OpenVZ> OVZ</a> atau<a href=https://en.wikipedia.org/wiki/LXC> LXC</a> templat dikonfigurasikan.<h3 id=packaging><a class=header-anchor href=#packaging> Pembungkusan</a></h3><p>Sebaik sahaja kami mempunyai pokok fail komited ostree kami<code>build.sh</code> atau<code>build-update.sh</code> mengurus menghasilkan artifak yang akan diedarkan. Perbezaan antara skrip adalah bahawa versi kemas kini bermula dari repositori ostree sebelumnya, dan<em> juga</em> menghasilkan artifak delta yang dapat dijalankan oleh sistem berjalan pada contoh ostree untuk melakukan peningkatan. Ini adalah penerangan ringkas mengenai langkah-langkah membina<ul><li><p>sekiranya binaan baru<ul><li><p>buat partisi baru pada gambar baru yang dipasang sebagai peranti gelung</ul><li><p>yang lain<ul><li><p>pasang sysroot dan boot partition dari build sebelumnya</ul><li><p>bersihkan penggunaan ostree sebelumnya (pautan ladang) pada binaan yang dipasang<li><p>buat pokok binaan baru pada binaan yang dipasang<li><p>mengesahkan integriti dan checksum<li><p>buat delta baru untuk peningkatan<li><p>laksanakan penyebaran ostree untuk menjana semula konfigurasi boot<li><p>buang komit ostree lama<li><p>mengesahkan integriti partition boot<li><p>lepaskan imej binaan baru yang dikemas kini<li><p>menghasilkan checksum gambar dan memampatkannya (dengan<code>squashfs</code> untuk bekas)</ul><p>Konfigurasi partisi digunakan dengan fdisk<code>layout.cfg</code> fail yang menentukan ukuran partition, kita mempunyai satu partition untuk rootfs (<code>~430M</code> partition boot (<code>~40M</code> dan partisi pertukaran (<code>~40M</code> ). Dengan bekas dengan langkau memasang build sebelumnya pada peranti gelung, dan tarik sahaja komitmen ostree baru ke repositori ostree lama (diekstrak).<h2 id=customizations><a class=header-anchor href=#customizations> Penyesuaian</a></h2><p>Apa yang saya gabungkan dalam gambar ini (selain daripada pakej yang dipasang)?<ul><li><p>Lib kecil di<code>functions.sh</code> untuk tugas-tugas biasa yang dilaksanakan di dalam cangkang<li><p>skrip peningkatan berasaskan ostree dengan mekanisme penguncian berdasarkan kedai KV<li><p>skrip pemantauan untuk IO baik tempatan (<code>iomon</code> ) dan rangkaian (<code>tcpmon</code>)<li><p>skrip persediaan untuk jangka masa kontena selain daripada<code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></ul><p>Apa yang dulu dan tidak ada lagi<ul><li><p><code>sup</code>: <a href=https://github.com/pressly/sup/> Sup</a> digunakan untuk orkestrasi (menyebarkan kontena) dan konfigurasi mesin host, tetapi kemudian saya beralih ke<a href=https://www.ansible.com/> tidak boleh dimakan</a> kerana terdapat bug lama di sup yang tidak dapat diperbaiki, saya tidak memilih yang awal dari awal kerana saya tidak mahu pergantungan python dipasang pada setiap pelayan, akhirnya saya menyelesaikan dengan alpine sekunder<a href=https://en.wikipedia.org/wiki/Chroot> kekacauan</a> pada mesin hos, yang terletak di<code>/opt/alp</code>adakah saya memasang perisian tambahan yang kurang kritikal. Akan tetapi, hari ini, saya akan beralih dari tidak menjadi<a href=https://github.com/Fizzadar/pyinfra> pyinfra</a> , kerana<ul><li><p>ia adalah python tanpa boilerplate (ansible mempunyai pseudo<code>DSL</code> yang menyebabkan lebih banyak sakit kepala daripada yang diselesaikan)<li><p>ia melaksanakan resepnya dengan perintah ssh biasa, jadi tidak ada syarat ketergantungan python pada host sasaran</ul><li><p><code>containerpilot</code> : Kes penggunaan untuk pilot container adalah untuk menguruskan pergantungan kompleks antara container tanpa skrip shell ... ia berhenti mendapat kemas kini dari<a href=https://github.com/joyent/containerpilot> gembira</a> dan dimasukkan ke dalam mod penyelenggaraan, saya juga tidak menyukai keperluan memori dan penggunaan memori akan terus meningkat untuk jangka masa yang lama. Saya menukarnya untuk skrip shell sederhana dengan<a href=https://www.consul.io/> konsul</a> , Saya mungkin mencari alternatif yang lebih tepat jika skrip shell mulai berkembang terlalu banyak. Penyelesaian yang lebih berat seperti<a href=https://kubernetes.io/> kubernetes</a>, <a href=https://docs.docker.com/engine/swarm/> kawanan</a> atau<a href=https://www.nomadproject.io/> nomad</a> dibuang dari awal.<li><p><code>beegfs</code> : Saya biasa menghantar modul kernel yang diperlukan untuk<a href=https://en.wikipedia.org/wiki/BeeGFS> beegfs</a> tetapi setelah beberapa ketika ia memecahkan keserasian, dan fakta bahawa tidak ada yang disokong dengan betul<a href=https://en.wikipedia.org/wiki/Filesystem_in_Userspace> fius</a> modul dibuat jatuhkan semuanya, pada masa ini saya tidak menjalankan [DFS] di pelayan saya, tetapi kemungkinan mempunyai sistem fail yang siap digunakan untuk memasang rangkaian masih menarik.<li><p></ul><h2 id=installation><a class=header-anchor href=#installation> Pemasangan</a></h2><p>Untuk memasang gambar, anda boleh memuat naiknya ke penyedia hosting dan memasang dari VNC, sekiranya terdapat mesin maya, tetapi saya biasanya merampas pemasangan yang ada, kerana selalu mungkin, selagi saya telah menguji skrip penyediaan terhadap versi pengedaran linux, biasanya saya menggunakan debian-8 atau ubuntu-14, belum menguji yang lain kerana ini selalu saya dapati. Langkah-langkah penyediaan berikut<ul><li><p>pastikan sokongan https untuk muat turun<li><p>memuat turun versi busybox<li><p>pasang pautan pautan busybox<li><p>tentukan alamat ipv4 / ipv6 untuk konfigurasi rangkaian<li><p>memastikan keupayaan chroot<li><p>muat turun gambar pain dan ekstraknya<li><p>sekiranya VM<ul><li><p>flash ke atas peranti sasaran<li><p>pasangkan peranti gelung</ul><li><p>tulis konfigurasi rangkaian tempatan di atas<em> untuk dikibarkan</em> rootfs<li><p>sekiranya bekas<ul><li><p>salin perkhidmatan init (untuk bekas) di atas titik pemasangan akar utama<code>/sbin/init</code></ul><li><p>sekiranya VM<ul><li><p>bahagi cakera kiri atas dengan standard (<code>xfs</code> ) partition<li><p>unmount<li><p>mengesahkan integriti partisi</ul><li><p>but semula</ul><h2 id=conclusions><a class=header-anchor href=#conclusions> Kesimpulannya</a></h2><p>saya buat<a href=https://github.com/untoreh/pine> pain</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href=https://en.wikipedia.org/wiki/Network_address_translation> BERSALIN</a> pelayan yang cenderung menawarkan sumber daya yang sangat rendah, sebenarnya saya mempunyai kotak yang berfungsi dengan adil<code>64M</code> RAM, dan masih mempunyai semua ciri yang saya perlukan.<p><table class=fndef id=fndef:rootfs><tbody><tr><td class=fndef-backref><a href=#fnref:rootfs>[1]</a><td class=fndef-content>sistem fail root</table><p><div id=post-tags-list>Tanda Pos: <span class=post-tag><a href=https://www.unto.re/tag/tools> alat</a>, </span><span class=post-tag><a href=https://www.unto.re/tag/about> mengenai</a></span></div><div class=page-foot><div class=copyright>19 April 2021</div><script async crossorigin=anonymous issue-term=pathname label=Comment repo=untoreh/untoreh.github.io src=https://utteranc.es/client.js></script></div></div><div class=page__footer><footer><div class=page__footer-copyright>Â© untoreh - Dikuasakan oleh<a href=https://github.com/tlienart/Franklin.jl> Franklin</a></div><div class=page__footer-links>- <ul><li><a href=/ms/sitemapxml> Peta Laman</a></li> | <li><a href=/ms/tag> Teg</a></li> | <li><a href=https://www.unto.re/tag/feed.xml> RSS</a></ul></div><ul class=author__wrap><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="Twitter link"href=https://twitter.com/untoreh><i class="fab fa-fw fa-twitter-square"aria-hidden=true></i></a><li class="author__urls social-icons"><a rel="nofollow noopener noreferrer"title="GitHub link"href=https://github.com/untoreh><i class="fab fa-fw fa-github"aria-hidden=true></i></a><li class="author__urls social-icons"><a href=mailto:contact@unto.re title=email><i class="fas fa-envelope"></i></a><li><script type=application/ld+json>{"potentialAction":{"query-input":"required maxlength=100 name=input","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":{"uri":"","scheme":"https","userinfo":"","host":"www.unto.re","port":"","path":"/search","query":"q=%7Binput%7D","fragment":""}}}</script></ul></footer></div><script crossorigin=anonymous defer id=fa integrity=sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH src=https://use.fontawesome.com/releases/v5.8.2/js/all.js></script><script src=/libs/colors.js></script><script src=/libs/menu.js></script><script defer src=/libs/lunr/lunr.min.js></script>