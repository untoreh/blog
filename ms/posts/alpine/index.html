<!DOCTYPE html><HTML lang=en ><meta charset=UTF-8 /><script type="application/ld+json">{"copyrightHolder":"untoreh","@id":"https://unto.re","url":"https://unto.re","copyrightYear":2021,"@context":"https://schema.org/","@type":"WebSite"}</script><script type="application/ld+json">{"audience":"cool people","url":"https://unto.re/posts/alpine/index.html","mainContentOfPage":{"@type":"WebPageElement","cssSelector":".franklin-content"},"accessMode":["textual","visual"],"accessibilitySummary":"Visual elements are tentatively described.","author":"untoreh","description":"Pine, Alpine linux based on OSTree","mentions":[],"accessModeSufficient":{"itemListElement":["textual","visual"],"description":"text and images","@type":"itemList"},"lastReviewed":"April 19, 2021","@type":"https://schema.org/WebPage","dateCreated":"April 24, 2021","@id":"https://unto.re/posts/alpine/index.html","dateModified":"April 19, 2021","abstract":"Pine, Alpine linux based on OSTree","headline":"Alpine","creativeWorkStatus":"Published","availableLanguage":[{"name":"English","@type":"Language"},{"name":"German","@type":"Language"},{"name":"Italian","@type":"Language"},{"name":"Mandarin Chinese","@type":"Language"},{"name":"Spanish","@type":"Language"},{"name":"Hindi","@type":"Language"},{"name":"Arabic","@type":"Language"},{"name":"Portuguese","@type":"Language"},{"name":"Bengali","@type":"Language"},{"name":"Russian","@type":"Language"},{"name":"Japanese","@type":"Language"},{"name":"Punjabi","@type":"Language"},{"name":"Javanese","@type":"Language"},{"name":"Vietnamese","@type":"Language"},{"name":"French","@type":"Language"},{"name":"Urdu","@type":"Language"},{"name":"Turkish","@type":"Language"},{"name":"Polish","@type":"Language"},{"name":"Ukranian","@type":"Language"},{"name":"Dutch","@type":"Language"},{"name":"Greek","@type":"Language"},{"name":"Swedish","@type":"Language"},{"name":"Zulu","@type":"Language"},{"name":"Romanian","@type":"Language"},{"name":"Malay","@type":"Language"},{"name":"Korean","@type":"Language"},{"name":"Thai","@type":"Language"},{"name":"Filipino","@type":"Language"}],"keywords":["tools","about"],"datePublished":"April 24, 2021","inLanguage":"English","name":"Alpine","identifier":"https://unto.re/posts/alpine/index.html"}</script><meta content="width=device-width, initial-scale=1" name=viewport /><link href="/css/franklin.css" rel=stylesheet /><link href="/css/main.css" rel=stylesheet /><link href="/css/menu.css" rel=stylesheet /><link href="/css/pages.css" rel=stylesheet /><link href="/css/lunr.css" rel=stylesheet /><link href="/css/footer.css" rel=stylesheet /><link href="/css/responsive.css" rel=stylesheet /><link href="/css/animations.css" rel=stylesheet /><link href="/css/docco.css" rel=stylesheet /><link href="/css/flag-icon.min.css" rel=stylesheet /><link href="/assets/favicon.png" rel=icon /><title> Alpine</title><script src="/libs/lunr/lunr.min.js"></script><script src="/libs/lunr/lunr_index.js"></script><script src="/libs/lunr/lunrclient.min.js"></script><script src="/libs/load.js"></script><script type="application/ld+json">{"@id":"https://unto.re/ms/posts/alpine/index.html","url":"https://unto.re/ms/posts/alpine/index.html","abstract":null,"headline":null,"keywords":null,"description":null,"mentions":null,"translator":{"url":"https://translate.google.com/","name":"Google","@type":"https://schema.org/Organization"},"translationOfWork":{"@id":"/home/fra/dev/blog/https://unto.re/"},"inLanguage":"ms","name":null,"@type":"https://schema.org/WebPage"}</script><body class=""><div class=masthead ><div class=masthead__inner-wrap ><div class=masthead__menu ><a class=site-title href="/ms/"></a><div class=author__wrap ><script type="application/ld+json">{"sameAs":["https://github.com/untoreh","https://twitter.com/untoreh"],"description":"<ul>\n<li><p><strong>Name</strong>: Francesco Giannelli</p>\n\n<li><p><strong>Website</strong>: &#91;«https://unto.re»&#93;, the place where I put stuff I should remember...or forget</p>\n\n<li><p><strong>Location</strong>: south italy {{bio_link}}</p>\n\n<li><p><strong>Year</strong>: &#39;91</p>\n\n</ul>\n","image":"/assets/appa.png","name":"untoreh","@type":"https://schema.org/Person","email":"contact@unto.re"}</script><ul><li class=author__avatar onclick="toggleTheme()"><img alt=" cahaya takoreh" class=flip-front src="/assets/appa.png"/><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden=true class="fab fa-fw fa-twitter-square"></i></a><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden=true class="fab fa-fw fa-github"></i></a><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=query","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":"https://unto.re/search?&q={query}"}}</script></ul></div><nav id=site-nav ><div class=horiz ><ul><li class="masthead__menu-item hvr-outline-in" id=lunrSearch ><form id=lunrSearchForm name=lunrSearchForm ><button class=search-button formaction="/search/index.html" type=submit value=Search ><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder="Search…" type=text /></form><li class="masthead__menu-item hvr-outline-in"><a href="/ms/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> jawatan</a><li class="masthead__menu-item hvr-outline-in"><a href="/ms/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> mengenai</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class=langs-dropdown-wrapper ><i class="fas fa-language menu-icons"></i> Lang <div class=langs-dropdown-content id=langs-dropdown-menu ><ul id=lang-list ><a class=lang-link href="/ar/posts/alpine" id=lang-ar ><span class="flag-icon flag-icon-sa"></span> Bahasa Arab</a><a class=lang-link href="/ms/bn/posts/alpine" id=lang-bn ><span class="flag-icon flag-icon-bd"></span> Orang Bengali</a><a class=lang-link href="/ms/nl/posts/alpine" id=lang-nl ><span class="flag-icon flag-icon-nl"></span> Belanda</a><a class=lang-link href="/ms/en/posts/alpine" id=lang-en ><span class="flag-icon flag-icon-gb"></span> Bahasa Inggeris</a><a class=lang-link href="/ms/tl/posts/alpine" id=lang-tl ><span class="flag-icon flag-icon-ph"></span> Orang Filipina</a><a class=lang-link href="/ms/fr/posts/alpine" id=lang-fr ><span class="flag-icon flag-icon-fr"></span> Bahasa Perancis</a><a class=lang-link href="/ms/de/posts/alpine" id=lang-de ><span class="flag-icon flag-icon-de"></span> Bahasa Jerman</a><a class=lang-link href="/ms/el/posts/alpine" id=lang-el ><span class="flag-icon flag-icon-gr"></span> Bahasa Yunani</a><a class=lang-link href="/ms/hi/posts/alpine" id=lang-hi ><span class="flag-icon flag-icon-in"></span> Bahasa Hindi</a><a class=lang-link href="/ms/it/posts/alpine" id=lang-it ><span class="flag-icon flag-icon-it"></span> Bahasa Itali</a><a class=lang-link href="/ms/ja/posts/alpine" id=lang-ja ><span class="flag-icon flag-icon-jp"></span> Orang Jepun</a><a class=lang-link href="/ms/jw/posts/alpine" id=lang-jw ><span class="flag-icon flag-icon-id"></span> Orang Jawa</a><a class=lang-link href="/ms/ko/posts/alpine" id=lang-ko ><span class="flag-icon flag-icon-kr"></span> Orang Korea</a><a class=lang-link href="/ms/ms/posts/alpine" id=lang-ms ><span class="flag-icon flag-icon-ms"></span> Bahasa Melayu</a><a class=lang-link href="/ms/zh/posts/alpine" id=lang-zh ><span class="flag-icon flag-icon-cn"></span> Cina Mandarin</a><a class=lang-link href="/ms/pl/posts/alpine" id=lang-pl ><span class="flag-icon flag-icon-pl"></span> Bahasa Poland</a><a class=lang-link href="/ms/pt/posts/alpine" id=lang-pt ><span class="flag-icon flag-icon-pt"></span> Portugis</a><a class=lang-link href="/ms/pa/posts/alpine" id=lang-pa ><span class="flag-icon flag-icon-in"></span> Bahasa Punjabi</a><a class=lang-link href="/ms/ro/posts/alpine" id=lang-ro ><span class="flag-icon flag-icon-ro"></span> Bahasa Romania</a><a class=lang-link href="/ms/ru/posts/alpine" id=lang-ru ><span class="flag-icon flag-icon-ru"></span> Orang Rusia</a><a class=lang-link href="/ms/es/posts/alpine" id=lang-es ><span class="flag-icon flag-icon-es"></span> Sepanyol</a><a class=lang-link href="/ms/sv/posts/alpine" id=lang-sv ><span class="flag-icon flag-icon-se"></span> Bahasa Sweden</a><a class=lang-link href="/ms/th/posts/alpine" id=lang-th ><span class="flag-icon flag-icon-th"></span> Orang Thai</a><a class=lang-link href="/ms/tr/posts/alpine" id=lang-tr ><span class="flag-icon flag-icon-tr"></span> Orang Turki</a><a class=lang-link href="/ms/uk/posts/alpine" id=lang-uk ><span class="flag-icon flag-icon-ua"></span> Bahasa Ukraina</a><a class=lang-link href="/ms/ur/posts/alpine" id=lang-ur ><span class="flag-icon flag-icon-pk"></span> Bahasa Urdu</a><a class=lang-link href="/ms/vi/posts/alpine" id=lang-vi ><span class="flag-icon flag-icon-vn"></span> Orang Vietnam</a><a class=lang-link href="/ms/zu/posts/alpine" id=lang-zu ><span class="flag-icon flag-icon-za"></span> Zulu</a></ul></div></button></ul></div><button class=ham ><i class="fas fa-bars ham-icon"></i></button><div class=vert ><ul><li class="masthead__menu-item hvr-outline-in" id=lunrSearch ><form id=lunrSearchForm name=lunrSearchForm ><button class=search-button formaction="/search/index.html" type=submit value=Search ><i class="fas fa-search menu-icons"></i></button><input class=search-input name=q placeholder="Search…" type=text /></form><li class="masthead__menu-item hvr-outline-in"><a href="/ms/posts/" title="All the articles that I have written"><i class="fas fa-pen menu-icons"></i> jawatan</a><li class="masthead__menu-item hvr-outline-in"><a href="/ms/about/" title="Things about me, what I have read, past projects and ideas for future ones"><i class="fas fa-user-alt menu-icons"></i> mengenai</a><li class="masthead__menu-item hvr-outline-in menu-lang-btn" title="Change website&#39;s language"><button class=langs-dropdown-wrapper ><i class="fas fa-language menu-icons"></i> Lang <div class=langs-dropdown-content id=langs-dropdown-menu ><ul id=lang-list ><a class=lang-link href="/ar/posts/alpine" id=lang-ar ><span class="flag-icon flag-icon-sa"></span> Bahasa Arab</a><a class=lang-link href="/ms/bn/posts/alpine" id=lang-bn ><span class="flag-icon flag-icon-bd"></span> Orang Bengali</a><a class=lang-link href="/ms/nl/posts/alpine" id=lang-nl ><span class="flag-icon flag-icon-nl"></span> Belanda</a><a class=lang-link href="/ms/en/posts/alpine" id=lang-en ><span class="flag-icon flag-icon-gb"></span> Bahasa Inggeris</a><a class=lang-link href="/ms/tl/posts/alpine" id=lang-tl ><span class="flag-icon flag-icon-ph"></span> Orang Filipina</a><a class=lang-link href="/ms/fr/posts/alpine" id=lang-fr ><span class="flag-icon flag-icon-fr"></span> Bahasa Perancis</a><a class=lang-link href="/ms/de/posts/alpine" id=lang-de ><span class="flag-icon flag-icon-de"></span> Bahasa Jerman</a><a class=lang-link href="/ms/el/posts/alpine" id=lang-el ><span class="flag-icon flag-icon-gr"></span> Bahasa Yunani</a><a class=lang-link href="/ms/hi/posts/alpine" id=lang-hi ><span class="flag-icon flag-icon-in"></span> Bahasa Hindi</a><a class=lang-link href="/ms/it/posts/alpine" id=lang-it ><span class="flag-icon flag-icon-it"></span> Bahasa Itali</a><a class=lang-link href="/ms/ja/posts/alpine" id=lang-ja ><span class="flag-icon flag-icon-jp"></span> Orang Jepun</a><a class=lang-link href="/ms/jw/posts/alpine" id=lang-jw ><span class="flag-icon flag-icon-id"></span> Orang Jawa</a><a class=lang-link href="/ms/ko/posts/alpine" id=lang-ko ><span class="flag-icon flag-icon-kr"></span> Orang Korea</a><a class=lang-link href="/ms/ms/posts/alpine" id=lang-ms ><span class="flag-icon flag-icon-ms"></span> Bahasa Melayu</a><a class=lang-link href="/ms/zh/posts/alpine" id=lang-zh ><span class="flag-icon flag-icon-cn"></span> Cina Mandarin</a><a class=lang-link href="/ms/pl/posts/alpine" id=lang-pl ><span class="flag-icon flag-icon-pl"></span> Bahasa Poland</a><a class=lang-link href="/ms/pt/posts/alpine" id=lang-pt ><span class="flag-icon flag-icon-pt"></span> Portugis</a><a class=lang-link href="/ms/pa/posts/alpine" id=lang-pa ><span class="flag-icon flag-icon-in"></span> Bahasa Punjabi</a><a class=lang-link href="/ms/ro/posts/alpine" id=lang-ro ><span class="flag-icon flag-icon-ro"></span> Bahasa Romania</a><a class=lang-link href="/ms/ru/posts/alpine" id=lang-ru ><span class="flag-icon flag-icon-ru"></span> Orang Rusia</a><a class=lang-link href="/ms/es/posts/alpine" id=lang-es ><span class="flag-icon flag-icon-es"></span> Sepanyol</a><a class=lang-link href="/ms/sv/posts/alpine" id=lang-sv ><span class="flag-icon flag-icon-se"></span> Bahasa Sweden</a><a class=lang-link href="/ms/th/posts/alpine" id=lang-th ><span class="flag-icon flag-icon-th"></span> Orang Thai</a><a class=lang-link href="/ms/tr/posts/alpine" id=lang-tr ><span class="flag-icon flag-icon-tr"></span> Orang Turki</a><a class=lang-link href="/ms/uk/posts/alpine" id=lang-uk ><span class="flag-icon flag-icon-ua"></span> Bahasa Ukraina</a><a class=lang-link href="/ms/ur/posts/alpine" id=lang-ur ><span class="flag-icon flag-icon-pk"></span> Bahasa Urdu</a><a class=lang-link href="/ms/vi/posts/alpine" id=lang-vi ><span class="flag-icon flag-icon-vn"></span> Orang Vietnam</a><a class=lang-link href="/ms/zu/posts/alpine" id=lang-zu ><span class="flag-icon flag-icon-za"></span> Zulu</a></ul></div></button></ul></div></nav></div></div></div><div><h1 id=title ><a href="/ms/posts/alpine"> Alpine</a></h1><blockquote id=page-description style="font-style: italic;"> Pine, Alpine linux berdasarkan OSTree </blockquote></div><div class=franklin-content ><p> Memilih apa<a href="https://en.wikipedia.org/wiki/Operating_system"> OS</a> berjalan di pelayan anda adalah masalah kemudahan dan keakraban. Kemudahan bermaksud anda menginginkan sesuatu yang memberi anda masalah yang kurang mungkin, keakraban bermaksud bahawa anda lebih suka<em> tidak</em> untuk belajar perkara tambahan jika anda tidak perlu.</p><p> Pelayan saya adalah<a href="https://devops.stackexchange.com/questions/653/what-is-the-definition-of-cattle-not-pets"> haiwan peliharaan</a>jadi saya ok mengeluarkan beberapa arahan secara manual sekali-sekala, dan tidak memerlukan automasi lengkap.</p><p> Setelah mencuba<a href="https://en.wikipedia.org/wiki/Container_Linux"> CoreOS</a> selama setahun saya beralih ke yang dipermudahkan saya sendiri<a href="https://en.wikipedia.org/wiki/Linux_distribution"> distro</a> berdasarkan alpine dan<a href="https://en.wikipedia.org/wiki/OSTree"> ostree</a>.</p><h2 id=goals ><a class=header-anchor href="#goals"> Matlamat</a></h2><p> Versi alpine ini mengambil petunjuk dari<a href="https://kinvolk.io/flatcar-container-linux/"> kereta flat</a> dan<a href="https://www.projectatomic.io/"> projek-atomik</a> dan sepatutnya dipasang sebagai sistem fail root hanya baca dengan kemas kini berlaku secara atom, iaitu, sama ada ia berjaya atau sistem bertukar kembali ke keadaan sebelumnya. Untuk ini mungkin sistem mesti mempunyai sekurang-kurangnya<strong> dua gambar</strong> versi sistem fail yang dikeluarkan, tersedia dalam simpanan.</p><h2 id=targets ><a class=header-anchor href="#targets"> Sasaran</a></h2><p> Dalam persekitaran apa sistem akan dijalankan? Saya menyasarkan<a href="https://en.wikipedia.org/wiki/OpenVZ"> OVZ</a> dan [KVM], tetapi secara umum anda boleh katakan<em> bekas</em> dan<em> mesin maya</em> dengan perbezaan utama ialah kontena tidak menjalankan kernel mereka sendiri, khususnya mereka tidak mempunyai proses boot, mereka memanggil terus ke<em> di dalamnya</em> sistem (yang misalnya dalam a<code><a href="https://en.wikipedia.org/wiki/Docker_(software)">Dockerfile</a></code> ia akan ditentukan oleh<code>CMD</code> atau<code>ENTRYPOINT</code> pernyataan), yang bertanggungjawab untuk menguruskan pokok proses yang akan memastikan wadah berjalan (seperti sesi biasa, jika proses init mati, kontena berakhir). Wadah juga tidak dapat mengkonfigurasi tombol sistem, dan boleh mempunyai batasan tambahan pada kemampuan.</p><h2 id=bisecting_the_build_process ><a class=header-anchor href="#bisecting_the_build_process"> Membelah dua proses membina</a></h2><p> Bagaimana imej dibina?</p><h3 id=dependencies ><a class=header-anchor href="#dependencies"> Kebergantungan</a></h3><p> The<code>prepare.sh</code> skrip menangani kebergantungan, yang kebanyakannya adalah pakej untuk menawarkan alat cli biasa seperti<code>coreutils</code>, <code>util-linux</code>, <code>binutils</code> , utiliti untuk beroperasi dengan peranti blok seperti<code>blkid</code>, <code>sfdisk</code>, <code>multipath-tools</code> dan sistem fail dengan<code>xfsprogs</code> dan<code>e2fsprogs</code> . The<code>squashfs-tools</code> pakej digunakan pada akhir untuk memampatkan sistem fail root yang dibina. A<code>glib</code> pakej keserasian juga dipasang secara lalai kerana alpine berdasarkan<code><a href="https://musl.libc.org/">musl</a></code>, pakej keserasian berfungsi dengan menyediakan beberapa perpustakaan yang dibina.</p><h3 id=the_tree ><a class=header-anchor href="#the_tree"> Pokok</a></h3><p> Pokok fail untuk VM dan kontena dibina masing-masing<code>make.sh</code> dan<code>make_ovz.sh</code> . Ini adalah penerangan ringkas mengenai langkah-langkahnya</p><ul><li><p> tetapkan versi yang akan dibina mengikut tag repositori</p><li><p> buat direktori untuk pokok baru dan bersihkan persekitaran</p><li><p> buat direktori dan direktori sasaran asas yang diperlukan oleh ostree, seperti<code>sysroot</code></p><li><p> buat symlink untuk mematuhi<a href="https://www.freedesktop.org/software/systemd/man/file-hierarchy.html"> standard hierarki sistem fail</a></p><li><p> salin perkhidmatan tersuai dan konfigurasi tersuai</p><li><p> persediaan chroot dengan direktori sistem yang dipasang</p><li><p> bootstrap rootfs alpine dengan pakej asas</p><li><p> gunakan konfigurasi minimum ke rootfs seperti kelayakan, zon waktu, nama host.</p><li><p> perkhidmatan salin untuk dimulakan oleh init</p><li><p> tetapkan konfigurasi boot dengan gambar kernel yang ditentukan</p><li><p> secara pilihan menambah modul kernel tersuai</p><li><p> melakukan pembersihan</p><li><p> lakukan rootfs<sup id="fnref:rootfs"><a class=fnref href="#fndef:rootfs">[1]</a></sup> ke repositori ostree</p></ul><p> Untuk kontena, urutannya sama, tetapi konfigurasi berubah, kerana dengan sistem yang tidak di-boot dari a<a href="https://en.wikipedia.org/wiki/Bootloader"> pemuat but</a> ostree mempunyai masalah dalam mengesahkan persekitaran, kami harus menerapkannya<a href="https://github.com/untoreh/pine/blob/e65f12be70fd91edfd935e3ae9854c7be555ec73/make_ovz.sh#L73"> jalan penyelesaian</a> dan menyediakan beberapa peranti yang biasanya dikendalikan oleh<a href="https://en.wikipedia.org/wiki/Initial_ramdisk"> initramfs</a> langkah. Inilah caranya<a href="https://en.wikipedia.org/wiki/OpenVZ"> OVZ</a> atau<a href="https://en.wikipedia.org/wiki/LXC"> LXC</a> templat dikonfigurasikan.</p><h3 id=packaging ><a class=header-anchor href="#packaging"> Pembungkusan</a></h3><p> Sebaik sahaja kami mempunyai pokok fail komited ostree kami<code>build.sh</code> atau<code>build-update.sh</code> mengurus menghasilkan artifak yang akan diedarkan. Perbezaan antara skrip adalah bahawa versi kemas kini bermula dari repositori ostree sebelumnya, dan<em> juga</em> menghasilkan artifak delta yang dapat dijalankan oleh sistem berjalan pada contoh ostree untuk melakukan peningkatan. Ini adalah penerangan ringkas mengenai langkah-langkah membina</p><ul><li><p> sekiranya binaan baru</p><ul><li><p>buat partisi baru pada gambar baru yang dipasang sebagai peranti gelung</p></ul><li><p> yang lain</p><ul><li><p> pasang sysroot dan boot partition dari build sebelumnya</p></ul><li><p> bersihkan penggunaan ostree sebelumnya (pautan ladang) pada binaan yang dipasang</p><li><p> buat pokok binaan baru pada binaan yang dipasang</p><li><p> mengesahkan integriti dan checksum</p><li><p> buat delta baru untuk peningkatan</p><li><p> laksanakan penyebaran ostree untuk menjana semula konfigurasi boot</p><li><p> buang komit ostree lama</p><li><p> mengesahkan integriti partition boot</p><li><p> lepaskan imej binaan baru yang dikemas kini</p><li><p> menghasilkan checksum gambar dan memampatkannya (dengan<code>squashfs</code> untuk bekas)</p></ul><p> Konfigurasi partisi digunakan dengan fdisk<code>layout.cfg</code> fail yang menentukan ukuran partition, kita mempunyai satu partition untuk rootfs (<code>~430M</code> partition boot (<code>~40M</code> dan partisi pertukaran (<code>~40M</code> ). Dengan bekas dengan langkau memasang build sebelumnya pada peranti gelung, dan tarik sahaja komitmen ostree baru ke repositori ostree lama (diekstrak).</p><h2 id=customizations ><a class=header-anchor href="#customizations"> Penyesuaian</a></h2><p> Apa yang saya gabungkan dalam gambar ini (selain daripada pakej yang dipasang)?</p><ul><li><p> Lib kecil di<code>functions.sh</code> untuk tugas-tugas biasa yang dilaksanakan di dalam cangkang</p><li><p> skrip peningkatan berasaskan ostree dengan mekanisme penguncian berdasarkan kedai KV</p><li><p> skrip pemantauan untuk IO baik tempatan (<code>iomon</code> ) dan rangkaian (<code>tcpmon</code>)</p><li><p> skrip persediaan untuk jangka masa kontena selain daripada<code>bubblewrap</code>: <code>podman</code>, <code>toolbox</code></p></ul><p> Apa yang dulu dan tidak ada lagi</p><ul><li><p><code>sup</code>: <a href="https://github.com/pressly/sup/"> Sup</a> digunakan untuk orkestrasi (menyebarkan kontena) dan konfigurasi mesin host, tetapi kemudian saya beralih ke<a href="https://www.ansible.com/"> tidak boleh dimakan</a> kerana terdapat bug lama di sup yang tidak dapat diperbaiki, saya tidak memilih yang awal dari awal kerana saya tidak mahu pergantungan python dipasang pada setiap pelayan, akhirnya saya menyelesaikan dengan alpine sekunder<a href="https://en.wikipedia.org/wiki/Chroot"> kekacauan</a> pada mesin hos, yang terletak di<code>/opt/alp</code>adakah saya memasang perisian tambahan yang kurang kritikal. Akan tetapi, hari ini, saya akan beralih dari tidak menjadi<a href="https://github.com/Fizzadar/pyinfra"> pyinfra</a> , kerana</p><ul><li><p> ia adalah python tanpa boilerplate (ansible mempunyai pseudo<code>DSL</code> yang menyebabkan lebih banyak sakit kepala daripada yang diselesaikan)</p><li><p> ia melaksanakan resepnya dengan perintah ssh biasa, jadi tidak ada syarat ketergantungan python pada host sasaran</p></ul><li><p><code>containerpilot</code> : Kes penggunaan untuk pilot container adalah untuk menguruskan pergantungan kompleks antara container tanpa skrip shell ... ia berhenti mendapat kemas kini dari<a href="https://github.com/joyent/containerpilot"> gembira</a> dan dimasukkan ke dalam mod penyelenggaraan, saya juga tidak menyukai keperluan memori dan penggunaan memori akan terus meningkat untuk jangka masa yang lama. Saya menukarnya untuk skrip shell sederhana dengan<a href="https://www.consul.io/"> konsul</a> , Saya mungkin mencari alternatif yang lebih tepat jika skrip shell mulai berkembang terlalu banyak. Penyelesaian yang lebih berat seperti<a href="https://kubernetes.io/"> kubernetes</a>, <a href="https://docs.docker.com/engine/swarm/"> kawanan</a> atau<a href="https://www.nomadproject.io/"> nomad</a> dibuang dari awal.</p><li><p><code>beegfs</code> : Saya biasa menghantar modul kernel yang diperlukan untuk<a href="https://en.wikipedia.org/wiki/BeeGFS"> beegfs</a> tetapi setelah beberapa ketika ia memecahkan keserasian, dan fakta bahawa tidak ada yang disokong dengan betul<a href="https://en.wikipedia.org/wiki/Filesystem_in_Userspace"> fius</a> modul dibuat jatuhkan semuanya, pada masa ini saya tidak menjalankan [DFS] di pelayan saya, tetapi kemungkinan mempunyai sistem fail yang siap digunakan untuk memasang rangkaian masih menarik.</p><li><p></p></ul><h2 id=installation ><a class=header-anchor href="#installation"> Pemasangan</a></h2><p>Untuk memasang gambar, anda boleh memuat naiknya ke penyedia hosting dan memasang dari VNC, sekiranya terdapat mesin maya, tetapi saya biasanya merampas pemasangan yang ada, kerana selalu mungkin, selagi saya telah menguji skrip penyediaan terhadap versi pengedaran linux, biasanya saya menggunakan debian-8 atau ubuntu-14, belum menguji yang lain kerana ini selalu saya dapati. Langkah-langkah penyediaan berikut</p><ul><li><p> pastikan sokongan https untuk muat turun</p><li><p> memuat turun versi busybox</p><li><p> pasang pautan pautan busybox</p><li><p> tentukan alamat ipv4 / ipv6 untuk konfigurasi rangkaian</p><li><p> memastikan keupayaan chroot</p><li><p> muat turun gambar pain dan ekstraknya</p><li><p> sekiranya VM</p><ul><li><p> flash ke atas peranti sasaran</p><li><p> pasangkan peranti gelung</p></ul><li><p> tulis konfigurasi rangkaian tempatan di atas<em> untuk dikibarkan</em> rootfs</p><li><p> sekiranya bekas</p><ul><li><p> salin perkhidmatan init (untuk bekas) di atas titik pemasangan akar utama<code>/sbin/init</code></p></ul><li><p> sekiranya VM</p><ul><li><p> bahagi cakera kiri atas dengan standard (<code>xfs</code> ) partition</p><li><p> unmount</p><li><p> mengesahkan integriti partisi</p></ul><li><p> but semula</p></ul><h2 id=conclusions ><a class=header-anchor href="#conclusions"> Kesimpulannya</a></h2><p> saya buat<a href="https://github.com/untoreh/pine"> pain</a> 5 years from time of writing and I am still using it, and I see no reasons to switch to anything else. Alpine as a linux distro is great, simple, and I have never experienced breakage. I can easily deploy on <a href="https://en.wikipedia.org/wiki/Network_address_translation"> BERSALIN</a> pelayan yang cenderung menawarkan sumber daya yang sangat rendah, sebenarnya saya mempunyai kotak yang berfungsi dengan adil<code>64M</code> RAM, dan masih mempunyai semua ciri yang saya perlukan.</p><p></p><table class=fndef id="fndef:rootfs"><tr><td class=fndef-backref ><a href="#fnref:rootfs">[1]</a><td class=fndef-content > sistem fail root</table><p></p><div id=post-tags-list > Tanda Pos: <span class=post-tag ><a href="/ms/posts/tag/tools" style=""> alat</a>, </span><span class=post-tag ><a href="/ms/posts/tag/about" style=""> mengenai</a></span></div><div class=page-foot ><div class=copyright > 19 April 2021 </div><script async="" crossorigin=anonymous issue-term=pathname label=Comment repo="untoreh/untoreh.github.io" src="https://utteranc.es/client.js"></script></div></div><div class=page__footer ><footer><div class=page__footer-copyright > © untoreh - Dikuasakan oleh<a href="https://github.com/tlienart/Franklin.jl"> Franklin</a></div><div class=page__footer-links > - <ul><li><a href="/ms/sitemap.xml"> Peta Laman</a> | <li><a href="/ms/tag"> Teg</a> | <li><a href="/ms/feed.xml"> RSS</a></ul></div><ul class=author__wrap ><li class="author__urls social-icons"><a href="https://twitter.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden=true class="fab fa-fw fa-twitter-square"></i></a><li class="author__urls social-icons"><a href="https://github.com/untoreh" rel="nofollow noopener noreferrer"><i aria-hidden=true class="fab fa-fw fa-github"></i></a><li class="author__urls social-icons"><a href="mailto:contact@unto.re"><i class="fas fa-envelope"></i></a><li><script type="application/ld+json">{"potentialAction":{"query-input":"required maxlength=100 name=query","actionStatus":"https://schema.org/PotentialActionStatus","query":"required","@type":"SearchAction","target":"https://unto.re/search?&q={query}"}}</script></ul></footer></div><script crossorigin=anonymous defer="" id=fa integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="/libs/colors.js"></script><script src="/libs/menu.js"></script><script defer="" src="/libs/lunr/lunr.min.js"></script></HTML>